if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MWV2RedirectToLatestReadThread.bs",["LSSyncStatus.bs","LsSystemFolder.bs","MAWInitSyncComplete.bs","MAWSessionStorage.bs","MWInboxURIState.bs","MWPIsThreadUnread.bs","MWPThreadsForThreadList.bs","MWThreadListSupportedThreadTypes.bs","MWV2OpenTabOrThread.bs","MessagingThreadType.bs","ReQL.bs","ReQLSubscription.bs","bs_caml","bs_curry","promiseDone","react","useCurrentRoute","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){return b("useCurrentRoute")()}var i={contents:!1};function j(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads_ranges_v2__generated")),{hd:b("LsSystemFolder.bs").inbox,tl:0})).then(function(c){return b("ReQL.bs").first(b("ReQL.bs").filter(b("MWPThreadsForThreadList.bs").createIterable(a,b("LsSystemFolder.bs").inbox,c),function(a){if(!b("MWPIsThreadUnread.bs").isThreadUnread(a)&&b("bs_caml").i64_neq(a.threadType,b("MessagingThreadType.bs").folder))return b("MWThreadListSupportedThreadTypes.bs").supportedThreadTypes.findIndex(function(c){return b("bs_caml").i64_eq(a.threadType,c)})!==-1;else return!1}))})}function c(a){var c=b("useReStore")(),d=b("useCurrentRoute")(),e=h.useRef(d.url),f=h.useRef(!1);h.useEffect(function(){e.current!==d.url&&(f.current=!0)},[d]);var g=b("MWV2OpenTabOrThread.bs").useHook(void 0),k=h.useCallback(function(a){a=b("MWInboxURIState.bs").getRouteTokens(e.current);var d=b("MAWSessionStorage.bs").getMostRecentSecureThreadKey(void 0),h=a.length,k;if(h>=3)k=!1;else switch(h){case 0:k=!1;break;case 1:h=a[0];k=h===""?d===void 0:!1;break;case 2:h=a[1];switch(h){case"":case"t":k=d===void 0;break;default:k=!1}break}if(k&&!i.contents&&!f.current){i.contents=!0;b("promiseDone")(j(c).then(function(a){if(a!==void 0)return b("bs_curry")._2(g.openInbox,{threadKey:a.threadKey,clientThreadKey:a.clientThreadKey,threadType:a.threadType},"inboxInitialLoad")}),void 0,void 0);return}},[g,f,e,c]);h.useEffect(function(){var a={contents:function(a){}};a.contents=b("ReQLSubscription.bs").subscribe(c,b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("sync_groups")),{hd:b("MAWInitSyncComplete.bs").id,tl:0}),function(c){if(c===void 0)return;if(c.length!==1)return;c=c[0];if(b("bs_caml").i64_eq(c.syncStatus,b("LSSyncStatus.bs").complete)){b("bs_curry")._1(k,void 0);return b("bs_curry")._1(a.contents,void 0)}});return function(c){return b("bs_curry")._1(a.contents,void 0)}},[c,e,k])}f.useCurrentRoute=a;f.useHook=c}),null);
__d("MWV2SecureThreadViewContainer.bs",["MAWVerifyExistingThreadExists.bs","MWInboxDetailNullState.bs","MWInboxThreadViewContexts.bs","MWLSThread.bs","MWSelectedThreadOptionsIdContext.bs","MWV2InboxDetailContainer.bs","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("useReStore")();h.useEffect(function(){b("promiseDone")(b("MAWVerifyExistingThreadExists.bs").call(c,a),void 0,void 0)},[c,JSON.stringify(a)])}function a(a){var c=a.threadKey,d=a.isConversationSearchVisible;a=a.setIsConversationSearchVisible;var e=b("MWLSThread.bs").useThread(c);i(c);if(e!==void 0)return h.jsx(b("MWInboxThreadViewContexts.bs").make,{thread:e,children:h.jsx(b("MWSelectedThreadOptionsIdContext.bs").make,{children:h.jsx(b("MWV2InboxDetailContainer.bs").make,{thread:e,isConversationSearchVisible:d,setIsConversationSearchVisible:a}),threadId:e.threadKey})});else return h.jsx(b("MWInboxDetailNullState.bs").make,{})}c=a;f.make=c}),null);
__d("MWCMBulkInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMBulkInviteDialog.react").__setRef("MWCMBulkInviteDialog.entrypoint")};g["default"]=a}),98);
__d("FDSInboxInfoQuickActionIcons.bs",["ix","fbicon"],(function(a,b,c,d,e,f,g){"use strict";c=(a=b("fbicon"))._(g("869051"),20);d={icon:c};e=a._(g("532353"),20);b={icon:e};c=a._(g("664775"),20);e={icon:c};c=a._(g("491283"),20);c={icon:c};a=a._(g("497885"),20);g={icon:a};f.Profile=d;f.Mute=b;f.Unmute=e;f.Search=c;f.Invite=g}),null);
__d("MWInboxInfoQuickActionIcons.bs",["cr:11889"],(function(a,b,c,d,e,f){"use strict";c=(a=b("cr:11889")).Profile;d=a.Mute;e=a.Unmute;b=a.Search;var g=a.Invite;f.$MDSInboxInfoQuickActionIcons$OR$FDSInboxInfoQuickActionIcons$requireCond=a;f.Profile=c;f.Mute=d;f.Unmute=e;f.Search=b;f.Invite=g}),null);
__d("MAWInboxInfoQuickActionsUnmuteButton.bs",["fbt","CometColumnItem.react","MAWSecureThreadUpdateMuteSetting.bs","MDSCircleButton.react","MWInboxInfoQuickActionIcons.bs","MWText.react","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){a=a.thread;var c=g._(/*FBT_CALL*/"B\u1eadt l\u1ea1i th\u00f4ng b\u00e1o"/*FBT_CALL*/),d=g._(/*FBT_CALL*/"B\u1eadt l\u1ea1i"/*FBT_CALL*/),e=b("MAWSecureThreadUpdateMuteSetting.bs").useHook(a.threadKey,0,function(a){});return i.jsxs(i.Fragment,{children:[i.jsx(b("CometColumnItem.react"),{children:i.jsx(b("MDSCircleButton.react"),{icon:b("MWInboxInfoQuickActionIcons.bs").Unmute.icon,size:36,label:c,onPress:function(a){b("bs_curry")._1(e,void 0)}})}),i.jsx(b("CometColumnItem.react"),{paddingTop:8,children:i.jsx(b("MWText.react"),{align:"center",color:"primary",type:"body4",numberOfLines:1,children:d})})]})}c=a;f.make=c}),null);
__d("MWInboxInfoQuickActions.bs",["fbt","CometColumn.react","CometColumnItem.react","CommunityChatsActionEnum","CommunityMessagingEnableState.bs","FBGroupChatEventTypes","FBID.bs","LSContactLink.bs","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","MAWGating.bs","MDSCircleButton.react","MDSRow.react","MDSRowItem.react","MWCMBulkInviteDialog.entrypoint","MWCMGating.bs","MWCMUseFolder.bs","MWInboxInfoNotifications.bs","MWInboxInfoQuickActionIcons.bs","MWPBumpEntityKey.bs","MWPUseIsThreadMuted.bs","MWText.react","ReQL.bs","ReQLSubscription.bs","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_curry","bs_int64","cr:2877","react","requireDeferred","useCometEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j={container:{marginTop:"kvgmc6g5",marginEnd:"cxmmr5t8",marginBottom:"oygrvhab",marginStart:"hcukyx3x"}},k=b("requireDeferred")("C4gEngagementFalcoEvent.bs").__setRef("MWInboxInfoQuickActions.bs"),l=g._(/*FBT_CALL*/"Trang c\u00e1 nh\u00e2n"/*FBT_CALL*/),m=g._(/*FBT_CALL*/"T\u1eaft th\u00f4ng b\u00e1o"/*FBT_CALL*/),n=g._(/*FBT_CALL*/"B\u1eadt l\u1ea1i"/*FBT_CALL*/),o=g._(/*FBT_CALL*/"T\u00ecm ki\u1ebfm"/*FBT_CALL*/),p=g._(/*FBT_CALL*/"M\u1eddi"/*FBT_CALL*/);function q(a,c){k.onReady(function(d){return b("bs_curry")._1(d.log,function(){return{action:b("CommunityChatsActionEnum").TAP,event:b("FBGroupChatEventTypes").RENDER_DIRECT_INVITE_SHEET,group_id:b("FBID.bs").ofString(c),thread_id:b("FBID.bs").ofString(a)}})})}function a(a){var c=a.thread,d=a.toggleSearch,e=b("useReStore")(),f=c.threadKey;a=b("bs_int64").to_string(f);a=b("ReQLSubscription.bs").useFirst(i.useMemo(function(){if(b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.threadType))return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(e.table("contacts")),{hd:f,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[e,a]));var g=b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType),h=b("MWPUseIsThreadMuted.bs").useHook(c),k=b("MWCMUseFolder.bs").useHook(c),r=k!==void 0?b("bs_caml").i64_eq(b("bs_belt_Option").getWithDefault(k.enableState,b("bs_caml_int64").one),b("CommunityMessagingEnableState.bs").disableRequested):!1;r=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").communityMessagingChannelInvite,c)&&!r;var s=b("useCometEntryPointDialog")(b("MWCMBulkInviteDialog.entrypoint"),{}),t=s[0];s=b("MAWGating.bs").isOccamadillo(void 0);var u,v=0;b("cr:2877")==null||!(g&&h&&!s)?v=1:u=i.jsx(b("cr:2877").make,{thread:c});v===1&&(u=i.jsx(b("MWInboxInfoNotifications.bs").make,{thread:c,children:function(a,c,d,e,f){return i.jsxs(i.Fragment,{children:[i.jsx(b("CometColumnItem.react"),{children:i.jsx(b("MDSCircleButton.react"),{icon:f?b("MWInboxInfoQuickActionIcons.bs").Unmute.icon:b("MWInboxInfoQuickActionIcons.bs").Mute.icon,size:36,label:d,onPress:function(c){b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId("mw.infobar","quick_actions_mute."+(f?"unmute":"mute"));return b("bs_curry")._1(a,void 0)}})}),i.jsx(b("CometColumnItem.react"),{paddingTop:8,children:i.jsx(b("MWText.react"),{align:"center",color:"primary",type:"body4",numberOfLines:1,children:f?n:m})})]})}}));h=b("MAWGating.bs").isContentSearchEnabled(void 0);var w;s=0;g&&!h?w=null:s=1;s===1&&(w=i.jsx(b("MDSRowItem.react"),{children:i.jsxs(b("CometColumn.react"),{align:"center",children:[i.jsx(b("CometColumnItem.react"),{children:i.jsx(b("MDSCircleButton.react"),{icon:b("MWInboxInfoQuickActionIcons.bs").Search.icon,size:36,label:o,onPress:function(a){b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId("mw.infobar","quick_actions_toggle_search");return b("bs_curry")._1(d,a)}})}),i.jsx(b("CometColumnItem.react"),{paddingTop:8,children:i.jsx(b("MWText.react"),{align:"center",color:"primary",type:"body4",numberOfLines:1,children:o})})]})}));v=k!==void 0&&b("MWCMGating.bs").isDirectInviteEnabled&&r?i.jsx(b("MDSRowItem.react"),{children:i.jsxs(b("CometColumn.react"),{align:"center",children:[i.jsx(b("CometColumnItem.react"),{children:i.jsx(b("MDSCircleButton.react"),{icon:b("MWInboxInfoQuickActionIcons.bs").Invite.icon,size:36,label:p,onPress:function(a){b("MWPBumpEntityKey.bs").bumpEntityKeyWithAppId("mw.infobar","quick_actions_direct_invite");q(b("bs_int64").to_string(c.threadKey),b("bs_int64").to_string(k.fbGroupId));return t({folder:k,thread:c,onClose:function(a){}},function(a){return a})}})}),i.jsx(b("CometColumnItem.react"),{paddingTop:8,children:i.jsx(b("MWText.react"),{align:"center",color:"primary",type:"body4",numberOfLines:1,children:p})})]})}):null;return i.jsxs(b("MDSRow.react"),{paddingTop:20,paddingVertical:0,align:"center",spacingHorizontal:32,xstyle:[j.container],children:[v,a!==void 0?i.jsx(b("MDSRowItem.react"),{children:i.jsxs(b("CometColumn.react"),{align:"center",children:[i.jsx(b("CometColumnItem.react"),{children:i.jsx(b("MDSCircleButton.react"),{icon:b("MWInboxInfoQuickActionIcons.bs").Profile.icon,size:36,label:l,linkProps:{target:"_blank",url:b("LSContactLink.bs").getHref(a)}})}),i.jsx(b("CometColumnItem.react"),{paddingTop:8,children:i.jsx(b("MWText.react"),{align:"center",color:"primary",type:"body4",numberOfLines:1,children:l})})]})}):null,i.jsx(b("MDSRowItem.react"),{children:i.jsx(b("CometColumn.react"),{align:"center",children:u})}),w]})}c=a;f.styles=j;f.$C4gEngagementFalcoEvent$Deferred=k;f.$MAWInboxInfoQuickActionsUnmuteButton$requireCondXplat=b("cr:2877");f.make=c}),null);
__d("MAWEndToEndEncryptionKeysSection.bs",["fbt","CometLazyDialogTrigger.react","JSResource","MAWInboxInfoButton.bs","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){a=a.thread;var c=g._(/*FBT_CALL*/"Kh\u00f3a m\u00e3 h\u00f3a \u0111\u1ea7u cu\u1ed1i"/*FBT_CALL*/);return i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MAWEndToEndEncryptionKeysDialog.react").__setRef("MAWEndToEndEncryptionKeysSection.bs"),dialogProps:{thread:a},children:function(a){return i.jsx(b("MAWInboxInfoButton.bs").make,{addOnStart:i.jsx(b("MWIcon.react"),{icon:b("MWInboxInfoPrivacyAndSupportSectionIcons.bs").EndToEndEncryptionKeys.icon}),label:c,onPress:function(c){return b("bs_curry")._1(a,void 0)},testid:"maw_end_to_end_encryption_keys_button"})}})}c=a;f.make=c}),null);
__d("MAWEphemeralMessagesSettingsSection.bs",["fbt","LSMessagingThreadTypeUtil.bs","MAWEphemeralSettingUtil.bs","MAWEphemeralSettingsLazyDialogTrigger.bs","MAWInboxInfoButton.bs","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.thread;a=a.triggerLocation;var d=c.threadKey,e=g._(/*FBT_CALL*/"Disappearing messages"/*FBT_CALL*/),f=b("MAWEphemeralSettingUtil.bs").useIsEphemeralSettingEnabled(c),h=function(a,c){if(f)return i.jsx(b("MAWInboxInfoButton.bs").make,{addOnStart:i.jsx(b("MWIcon.react"),{icon:b("MWInboxInfoPrivacyAndSupportSectionIcons.bs").EphemeralMessages.icon}),label:e,onPress:function(c){return b("bs_curry")._1(a,void 0)}});else return null};if(b("LSMessagingThreadTypeUtil.bs").isSecure(c.threadType))return i.jsx(b("MAWEphemeralSettingsLazyDialogTrigger.bs").make,{threadKey:d,triggerLocation:a,renderer:h});else return null}c=a;f.make=c}),null);
__d("MAWInboxInfoPrivacyAndSupportSectionCreateSecureConversationMenuItem.bs",["fbt","MAWCreateOneToOneThread.bs","MAWInboxInfoButton.bs","MAWThreadId.bs","MWIcon.react","MWThreadListHoverButtonDropdownMenuIcons.bs","MWV2OpenTabOrThread.bs","MessagingThreadType.bs","bs_curry","bs_int64","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.contactId,d=b("MWV2OpenTabOrThread.bs").useHook(void 0),e=b("useReStore")();return i.jsx(b("MAWInboxInfoButton.bs").make,{addOnStart:i.jsx(b("MWIcon.react"),{icon:b("MWThreadListHoverButtonDropdownMenuIcons.bs").SecretConversation.icon}),label:g._(/*FBT_CALL*/"B\u1eaft \u0111\u1ea7u \u0111o\u1ea1n chat m\u00e3 h\u00f3a \u0111\u1ea7u cu\u1ed1i"/*FBT_CALL*/),onPress:function(a){b("promiseDone")(b("MAWCreateOneToOneThread.bs").call(e,c,void 0,void 0).then(function(a){return b("MAWThreadId.bs").toThreadKey(e,a.chatId)}),function(a){b("gkx")("3552");return b("bs_curry")._3(d.openTabOrInbox,void 0,{threadKey:a,clientThreadKey:void 0,threadType:b("MessagingThreadType.bs").secureMessageOverWaOneToOne},"inboxPrivacyAndInfoSection")},void 0)},testid:"mw_block_messages_button"})}c=a;f.make=c}),null);
__d("MAWInboxInfoPrivacyAndSupportSectionUnmuteThreadButton.bs",["fbt","MAWInboxInfoButton.bs","MAWSecureThreadUpdateMuteSetting.bs","MWIcon.react","MWInboxInfoPrivacyAndSupportSectionIcons.bs","MessengerMuteUtils.bs","bs_caml","bs_caml_int64","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){a=a.thread;var c=b("MAWSecureThreadUpdateMuteSetting.bs").useHook(a.threadKey,0,function(a){}),d=g._(/*FBT_CALL*/"B\u1eadt l\u1ea1i cu\u1ed9c tr\u00f2 chuy\u1ec7n"/*FBT_CALL*/);a=b("MessengerMuteUtils.bs").mutedUntilLabel(b("bs_caml").i64_eq(a.muteExpireTimeMs,b("bs_caml_int64").neg_one)?-1:b("bs_caml_int64").to_float(a.muteExpireTimeMs)/1e3);a=a!==void 0?a:void 0;d={addOnStart:i.jsx(b("MWIcon.react"),{icon:b("MWInboxInfoPrivacyAndSupportSectionIcons.bs").Notifications.Off.icon}),label:d,onPress:function(a){b("bs_curry")._1(c,void 0)},testid:"mw_notifications_section_button"};a!==void 0&&(d.subLabel=a);return i.jsx(b("MAWInboxInfoButton.bs").make,d)}c=a;f.make=c}),null);
__d("MAWSecureInboxInfoSharedPhotosSection.bs",["MAWAttachmentThumbnail.bs","MAWLoadMoreThreadSharedAttachments.bs","MWInboxInfoPhotos.bs","MWSharedAttachmentsSectionHooks.bs","bs_belt_Option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=a.thread;var c=b("MWSharedAttachmentsSectionHooks.bs").useQueryMediaAttachments(a),d=c[4],e=c[0],f=b("bs_belt_Option").getWithDefault(d,!0);d=b("MAWLoadMoreThreadSharedAttachments.bs").useHook(a,d,c[3]);c=b("MWSharedAttachmentsSectionHooks.bs").useLoader(e,f,c[2],d);d=h.useCallback(function(a){return b("MAWAttachmentThumbnail.bs").getThumbnailBlob(a)},[]);return h.jsx(b("MWInboxInfoPhotos.bs").make,{thread:a,media:e,hasMore:f,onLoadMore:c[1],isLoading:c[0],getPreviewUrl:d,navigateToRouteForMediaViewer:!1})}c=a;f.make=c}),null);/*FB_PKG_DELIM*/
__d("MAWCreateOptimisticSecureThread.bs",["LS.bs","LSAuthorityLevel.bs","LSBitOffset.bs","LSGroupParticipantJoinState.bs","LSMailboxType.bs","LSNullstateDescriptionType.bs","LSRtcCallState.bs","LSVerifyE2EEMetadataThreadExistsV2","LsSystemFolder.bs","MAWGating.bs","MAWThemeConstant.bs","MAWThreadDefaults.bs","MessagingThreadType.bs","MessengerJoinableModeType.bs","OfflineThreadingId.bs","Promise","ReQLTable.bs","bs_caml_format","bs_caml_int64","bs_caml_obj","bs_int64","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return b("LSVerifyE2EEMetadataThreadExistsV2")(c,void 0,b("LSAuthorityLevel.bs").optimistic,b("LS.bs").make(a)).then(function(c){var d=c[0];return b("ReQLTable.bs").update(a.table("threads"),{hd:d,tl:0},function(a){if(a===void 0)return b("unrecoverableViolation")("Optimistic thread is missing","messenger_e2ee_web");a=b("bs_caml_obj").caml_obj_dup(a);a.clientThreadKey=d;return a}).then(function(a){return d})})}function h(a,c){var d=b("bs_caml_format").caml_int64_of_string(b("OfflineThreadingId.bs").make(void 0));return a.table("threads").add({threadKey:d,mailboxType:b("LSMailboxType.bs").messenger,threadType:c,threadName:void 0,folderName:"inbox",threadPictureUrl:void 0,threadPictureUrlFallback:void 0,threadPictureUrlExpirationTimestampMs:void 0,lastActivityTimestampMs:(a=b("bs_caml_int64")).zero,lastReadWatermarkTimestampMs:a.zero,removeWatermarkTimestampMs:a.zero,muteExpireTimeMs:a.zero,snippet:void 0,isAdminSnippet:!1,snippetSenderContactId:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,needsAdminApprovalForNewParticipant:void 0,ongoingCallState:b("LSRtcCallState.bs").noOngoingCall,cannotReplyReason:void 0,customEmoji:void 0,customEmojiImageUrl:void 0,outgoingBubbleColor:void 0,themeFbid:b("MAWGating.bs").isOccamadillo(void 0)?void 0:b("MAWThemeConstant.bs").secureTheme,parentThreadKey:b("LsSystemFolder.bs").inbox,nullstateDescriptionText1:b("MAWThreadDefaults.bs").nullstateDescriptionText1,nullstateDescriptionType1:b("LSNullstateDescriptionType.bs").default_,nullstateDescriptionText2:void 0,nullstateDescriptionType2:void 0,nullstateDescriptionText3:void 0,nullstateDescriptionType3:void 0,draftMessage:void 0,snippetHasEmoji:!1,hasPersistentMenu:!1,disableComposerInput:!1,cannotUnsendReason:void 0,viewedPluginKey:void 0,viewedPluginContext:void 0,clientThreadKey:d,capabilities:b("MAWThreadDefaults.bs").defaultThreadCapabilities,shouldRoundThreadPicture:void 0,isCustomThreadPicture:!1,otidOfFirstMessage:void 0,normalizedSearchTerms:void 0,additionalThreadContext:void 0,disappearingThreadKey:void 0,isDisappearingMode:!1,disappearingModeInitiator:void 0,unreadDisappearingMessageCount:b("bs_caml_int64").zero,authorityLevel:b("LSAuthorityLevel.bs").optimistic,threadDescription:void 0,capabilities2:b("LSBitOffset.bs").empty,muteCallsExpireTimeMs:b("bs_caml_int64").zero,syncGroup:void 0,lastMessageCtaId:void 0,lastMessageCtaType:void 0,lastMessageCtaTimestampMs:void 0,unsendLimitMs:b("bs_caml_int64").zero,isAllUnreadMessageMissedCallXma:void 0,threadInvitesEnabled:b("MessengerJoinableModeType.bs").private_,lastNonMissedCallXmaMessageTimestampMs:void 0,threadInviteLink:void 0,threadInvitesEnabledV2:b("MessengerJoinableModeType.bs").private_,proactiveWarningDismissTime:void 0,eventStartTimestampMs:void 0,eventEndTimestampMs:void 0,hasPendingInvitation:void 0,capabilities3:b("LSBitOffset.bs").empty,igFolder:void 0}).then(function(a){return d})}function a(a,c,d){d=b("MAWGating.bs").isOccamadillo(void 0)&&b("bs_int64").equal(d,b("MessagingThreadType.bs").secureMessageOverWaOneToOne)?g(a,d):h(a,d);return d.then(function(d){return b("Promise").all(c.map(function(c){return a.table("participants").add({threadKey:d,contactId:c.id,readWatermarkTimestampMs:b("bs_caml_int64").zero,deliveredWatermarkTimestampMs:b("bs_caml_int64").zero,nickname:void 0,isAdmin:void 0,subscribeSource:void 0,normalizedSearchTerms:void 0,participantCapabilities:void 0,authorityLevel:b("LSAuthorityLevel.bs").optimistic,readActionTimestampMs:b("bs_caml_int64").zero,isSuperAdmin:void 0,isModerator:!1,groupParticipantJoinState:b("LSGroupParticipantJoinState.bs").member})})).then(function(a){return d})})}f.createSecureOccamadilloOptimisticThread=g;f.createSecureOptimisticThread=h;f.call=a}),null);/*FB_PKG_DELIM*/
__d("LSCoPresenceAction.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.enter=a;f.exit=c}),null);
__d("MWCMFetchPresence.bs",["LS.bs","LSCoPresenceAction.bs","LSFetchAggregatedUserPresenceCountsForCommunities","LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat","LSTransaction.bs","LSVec","MWCMThreadTypes.bs","MWCMUseFolder.bs","ReQL.bs","ReQLSubscription.bs","ServerTime","bs_caml","bs_caml_int64","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useReStore")();h.useEffect(function(){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSFetchAggregatedUserPresenceCountsForCommunities")(b("LSVec").make([a.folderId]),b("LS.bs").make(c))},"readWrite"),void 0,void 0)},[])}function c(a){var c=b("useReStore")(),d=b("MWCMUseFolder.bs").useHook(a);h.useEffect(function(){var e=b("MWCMThreadTypes.bs").isAnyCMThread(a.threadType);if(e&&d!==void 0){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat")(a.threadKey,b("LSCoPresenceAction.bs").enter,d.folderId,b("LS.bs").make(c))},"readWrite"),void 0,void 0);return function(e){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat")(a.threadKey,b("LSCoPresenceAction.bs").exit,d.folderId,b("LS.bs").make(c))},"readWrite"),void 0,void 0)}}},[])}function d(a){var c=b("useReStore")(),d=b("bs_caml_int64").of_float(b("ServerTime").getMillis()/1e3),e=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){var e;return(e=b("ReQL.bs")).filter(e.filter(e.getKeyRange(e.fromTableDescending(c.table("community_messaging_aggregated_copresence_counts_for_chat")),{hd:a.threadKey,tl:0}),function(a){return b("bs_caml").i64_gt(a.numActiveMembers,b("bs_caml_int64").zero)}),function(a){return b("bs_caml").i64_gt(a.activeMembersNumExpirationTimestampMilliseconds,d)})},[c,a]));if(e!==void 0)return e.numActiveMembers;else return b("bs_caml_int64").neg_one}f.useFetchFolderAggregatedPresence=a;f.useReportCMThreadCoPresence=c;f.useCMThreadCoPresence=d}),null);/*FB_PKG_DELIM*/
__d("LSFetchAggregatedUserPresenceCountsForCommunities",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("folder_ids",a[0]),d[0].set("use_case",[0,1]),d[1]=d[0].get("use_case"),d[0],d[2]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),["fetch_community_messaging_presence","_",c.i64.to_string(d[1])].join(""),[0,502],d[2],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return d[0]=new c.Map(),d[0].set("usecase",[0,2]),d[0].set("co_presence_object_id",a[0]),d[0].set("action",a[1]),d[1]=c.toJSON(d[0]),c.sp(b("LSIssueNewTask"),"ls_report_co_presence",[0,406],d[1],f,f,[0,0],[0,0],f,f,[0,0])},function(a){return c.resolve(e)}])}e.exports=a}),null);