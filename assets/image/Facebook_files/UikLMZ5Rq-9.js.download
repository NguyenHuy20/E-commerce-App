if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("ZenonMediaStatsSource",[],(function(a,b,c,d,e,f){"use strict";a=["averageRtcpInterval","firCount","frameBitDepth","frameHeight","frameWidth","nackCount","packetsLost","pliCount","qpSum","remoteId","sliCount","trackId","timestamp"];b=["bytesSent","encoderImplementation","framesEncoded","headerBytesSent","hugeFramesSent","keyFramesEncoded","lastPacketSentTimestamp","mediaSourceId","packetsSent","perDscpPacketsSent","qualityLimitationDurations","qualityLimitationReason","qualityLimitationResolutionChanges","retransmittedBytesSent","retransmittedPacketsSent","rid","senderId","targetBitrate","totalEncodedBytesTarget","totalEncodeTime","totalPacketSendDelay"];c=["audioLevel","burstDiscardCount","burstDiscardRate","burstLossCount","burstPacketsDiscarded","burstPacketsLost","bytesReceived","concealedSamples","concealmentEvents","decoderImplementation","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","fractionLost","framesDecoded","framesDropped","framesReceived","gapDiscardRate","gapLossRate","headerBytesReceived","insertedSamplesForDeceleration","jitter","jitterBufferDelay","jitterBufferEmittedCount","keyFramesDecoded","lastPacketReceivedTimestamp","packetsDiscarded","packetsDuplicated","packetsFailedDecryption","packetsReceived","packetsRepaired","perDscpPacketsReceived","receiverId","removedSamplesForAcceleration","roundTripTime","silentConcealedSamples","totalAudioEnergy","totalDecodeTime","totalInterFrameDelay","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay"];d=["delayedPacketOutageSamples","framesSent","interruptionCount","jitterBufferTargetDelay","relativePacketArrivalDelay","sumOfSquaredFramesDuration","timestamp","totalFramesDuration","totalInterruptionDuration"];e=["availableOutgoingBitrate","consentRequestsSent","requestsReceived","requestsSent","responsesReceived","responsesSent"];var g=["audioLevel","framesPerSecond","height","timestamp","totalAudioEnergy","totalSamplesDuration","width"],h=["googAccelerateRate","googCurrentDelayMs","googDecodingCNG","googDecodingCTN","googDecodingNormal","googDecodingPLC","googDecodingPLCCNG","googExpandRate","googJitterReceived","googPreemptiveExpandRate","googPreferredJitterBufferMs","googSecondaryDiscardedRate","googSpeechExpandRate","packetsLost"],i=["googActualEncBitrate"],j=["googRtt"];f.RTP_STATS=a;f.OUTBOUND_RTP_STATS=b;f.INBOUND_RTP_STATS=c;f.TRACK_STATS=d;f.CANDIDATE_PAIR_STATS=e;f.MEDIA_SOURCE_STATS=g;f.SSRC_STATS=h;f.VIDEO_BWE_STATS=i;f.GOOG_CANDIDATE_PAIR_STATS=j}),66);
__d("ZenonMediaStatsSourcePreM86",[],(function(a,b,c,d,e,f){"use strict";a=["firCount","nackCount","packetsLost","pliCount","qpSum","sliCount","timestamp"];b=["audioLevel","concealedSamples","concealmentEvents","delayedPacketOutageSamples","frameHeight","framesDropped","framesReceived","framesSent","frameWidth","insertedSamplesForDeceleration","interruptionCount","jitterBufferDelay","jitterBufferEmittedCount","jitterBufferTargetDelay","relativePacketArrivalDelay","removedSamplesForAcceleration","sumOfSquaredFramesDuration","timestamp","totalAudioEnergy","totalFramesDuration","totalInterruptionDuration","totalSamplesDuration","totalSamplesReceived"];c=["burstDiscardCount","burstDiscardRate","burstLossCount","burstPacketsDiscarded","burstPacketsLost","bytesReceived","decoderImplementation","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","framesDecoded","gapDiscardRate","gapLossRate","headerBytesReceived","jitter","keyFramesDecoded","lastPacketReceivedTimestamp","packetsDiscarded","packetsReceived","packetsRepaired","roundTripTime","totalDecodeTime","totalInterFrameDelay","totalSquaredInterFrameDelay"];d=["bytesSent","framesEncoded","headerBytesSent","hugeFramesSent","keyFramesEncoded","packetsSent","qualityLimitationResolutionChanges","retransmittedBytesSent","retransmittedPacketsSent","targetBitrate","totalEncodedBytesTarget","totalEncodeTime","totalPacketSendDelay"];f.RTP_STATS=a;f.TRACK_STATS=b;f.INBOUND_RTP_STATS=c;f.OUTBOUND_RTP_STATS=d}),66);
__d("ZenonRenderedView",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({THUMBNAIL:1,GRID:2,PINNED:3});c=a;f["default"]=c}),66);
__d("ZenonMediaStatsConfig",["UserAgent","ZenonMediaStatsSource","ZenonMediaStatsSourcePreM86","ZenonRenderedView"],(function(a,b,c,d,e,f,g){"use strict";var h={contentType:"audio",remote:!1,trackId:"globalStatsTrackId"},i=h.trackId,j=h.contentType,k={contentType:"audio",remote:!1,trackId:"pinnedAudioStatsTrackId"},l={contentType:"video",remote:!1,trackId:"pinnedVideoStatsTrackId"},m={contentType:"audio",remote:!1,trackId:"outboundAudioStatsTrackId"},n=m.trackId,o={contentType:"screen_audio",remote:!1,trackId:"outboundScreenAudioStatsTrackId"},p=o.trackId,q={contentType:"screen",remote:!1,trackId:"outboundScreenStatsTrackId"},r=q.trackId,s={contentType:"video",remote:!1,trackId:"outboundVideoStatsTrackId"},t=s.trackId,u=0,v=6e4,w={AUDIO_DEV_IS_STALLED:"audioDevIsStalled",AUDIO_DEV_REC_STALLS:"audioDevRecStalls",AUDIO_DEV_STALL_DURATION:"audioDevStallDuration",AUDIO_DEV_TOTAL_STALLS:"audioDevTotalStalls",AUDIO_LOG_LEVEL:"audioLogLevel",AUDIO_LOG_LEVEL_COUNT:"audioLogLevelCount",AUDIO_LOUDNESS_LEVEL:"audioLoudnessLevel",AV_SYNC:"avSync",AV_SYNC_ABS:"avSyncAbs",AV_SYNC_COUNT:"avSyncCount",AV_SYNC_OOB:"avSyncOob",E2E_LATENCY:"e2eLatency",FRAME_RATE_MEAN:"framerateMean",PACKETS_LOST_CORRECTED:"packetsLostCorrected",RENDERED_VIEW:"renderedView",SIMULCAST_LAYER_CHANGES:"simulcast_layer_changes",VIDEO_CAPTURE_FRAME_COUNT:"captureFrameCount",VIDEO_CAPTURE_IS_STALLED:"videoCaptureIsStalled",VIDEO_CAPTURE_STALL_DURATION:"videoCaptureStallDuration",VIDEO_CAPTURE_TOTAL_STALLS:"videoCaptureTotalStalls",VIDEO_CONVERTED_QP_SUM:"videoConvertedQpSum",VIDEO_DECODE_TIME:"videoDecodeTime",VIDEO_DECODED_BYTES:"videoDecodedBytes",VIDEO_ENCODE_IS_STALLED:"videoEncodeIsStalled",VIDEO_ENCODE_STALL_DURATION:"videoEncodeStallDuration",VIDEO_ENCODE_TOTAL_STALLS:"videoEncodeTotalStalls",VIDEO_FREEZE_COUNT:"videoFreezeCount",VIDEO_FREEZE_DURATION:"videoFreezeDuration",VIDEO_FREEZE_DURATION_500MS:"videoFreezeDuration500ms",VIDEO_PAUSE_COUNT:"videoPauseCount",VIDEO_PAUSE_DURATION:"videoPauseDuration",VIDEO_QP:"qp",VIDEO_RECEIVER_QUALITY_SCORE:"videoReceiverQualityScore",VIDEO_SENT_IS_STALLED:"videoSentIsStalled",VIDEO_SENT_STALL_DURATION:"videoSentStallDuration",VIDEO_SENT_TOTAL_STALLS:"videoSentTotalStalls",VIDEO_SUM_CAPTURE_PIXEL:"videoSumCapturePixel",VIDEO_SUM_PIXEL:"videoSumPixel"},x={AUDIO_NETEQ_WAIT_TIME:"audioNeteqWaitTime",AUDIO_PACKET_LOSS_RATE:"audioPacketLossRate",AUDIO_PLC_CNG_RATE:"audioPlcCngRate",AUDIO_PLC_RATE:"audioPlcRate",GLOBAL_AUDIO_BITRATE:"globalAudioBitrate",GLOBAL_BATTERY_USAGE:"globalBatteryUsage",GLOBAL_CPU_USAGE:"globalCpuUsage",GLOBAL_VIDEO_BITRATE:"globalVideoBitrate",ROUND_TRIP_TIME:"roundTripTime",VIDEO_AV_SYNC_ABS:"videoAvSyncAbs",VIDEO_AV_SYNC_OOB:"videoAvSyncOob",VIDEO_CROPPING_RATIO:"videoCroppingRatio",VIDEO_ENCODED_FRAME_RATE:"encodedFrameRate",VIDEO_FRAME_RATE:"videoFrameRate",VIDEO_FREEZE_COUNT_PER_MIN:"videoFreezeCountPerMin",VIDEO_FREEZE_DURATION_PER_MIN:"videoFreezeDurationPerMin",VIDEO_NETEQ_WAIT_TIME:"videoNeteqWaitTime",VIDEO_PACKET_LOSS_RATE:"videoPacketLossRate",VIDEO_QP:"videoQP",VIDEO_QUALITY:"videoQuality",VIDEO_RENDER_SCALE_RATIO:"videoRenderScaleRatio"},y=["bytesReceived","bytesSent","consentRequestsSent","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","framesDecoded","framesEncoded","framesReceived","framesSent","googDecodingCNG","googDecodingCTN","googDecodingNormal","googDecodingPLC","googDecodingPLCCNG","insertedSamplesForDeceleration","jitterBufferDelay","jitterBufferEmittedCount","keyFramesDecoded","keyFramesEncoded","nackCount","packetsLost","packetsReceived","packetsSent","pliCount","qpSum","requestsReceived","requestsSent","removedSamplesForAcceleration","responsesReceived","responsesSent","totalAudioEnergy","totalDecodeTime","totalEncodeTime","totalInterFrameDelay","totalPacketSendDelay","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay",w.AUDIO_LOG_LEVEL,w.AUDIO_LOG_LEVEL_COUNT,w.AUDIO_LOUDNESS_LEVEL,w.AUDIO_DEV_REC_STALLS,w.AUDIO_DEV_STALL_DURATION,w.AUDIO_DEV_TOTAL_STALLS,w.AV_SYNC_COUNT,w.AV_SYNC_OOB,w.PACKETS_LOST_CORRECTED,w.SIMULCAST_LAYER_CHANGES,w.VIDEO_CAPTURE_FRAME_COUNT,w.VIDEO_FREEZE_COUNT,w.VIDEO_FREEZE_DURATION,w.VIDEO_FREEZE_DURATION_500MS,w.VIDEO_PAUSE_COUNT,w.VIDEO_PAUSE_DURATION,w.VIDEO_SUM_CAPTURE_PIXEL,w.VIDEO_SUM_PIXEL,w.VIDEO_CONVERTED_QP_SUM,w.VIDEO_DECODED_BYTES,w.VIDEO_DECODE_TIME,w.VIDEO_CAPTURE_STALL_DURATION,w.VIDEO_CAPTURE_TOTAL_STALLS,w.VIDEO_ENCODE_STALL_DURATION,w.VIDEO_ENCODE_TOTAL_STALLS,w.VIDEO_SENT_STALL_DURATION,w.VIDEO_SENT_TOTAL_STALLS],z=["audioLevel","availableOutgoingBitrate","frameHeight","frameWidth","framesPerSecond","googAccelerateRate","googActualEncBitrate","googCurrentDelayMs","googExpandRate","googJitterReceived","googPreemptiveExpandRate","googPreferredJitterBufferMs","googRtt","googSecondaryDiscardedRate","googSpeechExpandRate","height","jitter","roundTripTime","width",w.AUDIO_DEV_IS_STALLED,w.RENDERED_VIEW,w.FRAME_RATE_MEAN,w.E2E_LATENCY,w.AV_SYNC,w.AV_SYNC_ABS,w.VIDEO_QP,w.VIDEO_CAPTURE_IS_STALLED,w.VIDEO_ENCODE_IS_STALLED,w.VIDEO_SENT_IS_STALLED,w.VIDEO_RECEIVER_QUALITY_SCORE],A=["availableOutgoingBitrate","bytesReceived","bytesSent","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","frameHeight","framesDecoded","framesEncoded","framesPerSecond","framesReceived","framesSent","frameWidth","googAccelerateRate","googActualEncBitrate","googCurrentDelayMs","googDecodingCNG","googDecodingCTN","googDecodingNormal","googDecodingPLC","googDecodingPLCCNG","googExpandRate","googJitterReceived","googPreemptiveExpandRate","googRtt","googSecondaryDiscardedRate","googSpeechExpandRate","height","insertedSamplesForDeceleration","jitter","jitterBufferDelay","jitterBufferEmittedCount","nackCount","keyFramesDecoded","packetsLost","packetsReceived","packetsSent","pliCount","qpSum","removedSamplesForAcceleration","roundTripTime","totalAudioEnergy","totalDecodeTime","totalEncodeTime","totalInterFrameDelay","totalPacketSendDelay","totalSamplesDuration","totalSamplesReceived","totalSquaredInterFrameDelay","width",w.AUDIO_DEV_REC_STALLS,w.AUDIO_DEV_STALL_DURATION,w.AUDIO_DEV_TOTAL_STALLS,w.VIDEO_CAPTURE_STALL_DURATION,w.VIDEO_CAPTURE_TOTAL_STALLS,w.VIDEO_ENCODE_STALL_DURATION,w.VIDEO_ENCODE_TOTAL_STALLS,w.VIDEO_SENT_STALL_DURATION,w.VIDEO_SENT_TOTAL_STALLS,w.PACKETS_LOST_CORRECTED,w.VIDEO_CAPTURE_FRAME_COUNT,w.VIDEO_FREEZE_COUNT,w.VIDEO_FREEZE_DURATION,w.VIDEO_FREEZE_DURATION_500MS,w.VIDEO_PAUSE_COUNT,w.VIDEO_PAUSE_DURATION,w.VIDEO_SUM_CAPTURE_PIXEL,w.VIDEO_SUM_PIXEL,w.VIDEO_CONVERTED_QP_SUM,w.VIDEO_DECODED_BYTES,w.VIDEO_DECODE_TIME,w.SIMULCAST_LAYER_CHANGES,w.AUDIO_DEV_IS_STALLED,w.VIDEO_CAPTURE_IS_STALLED,w.VIDEO_ENCODE_IS_STALLED,w.VIDEO_SENT_IS_STALLED,w.FRAME_RATE_MEAN,w.E2E_LATENCY,w.AV_SYNC,w.AV_SYNC_ABS],B=["audioLevel","availableOutgoingBitrate","bytesReceived","bytesSent","estimatedPlayoutTimestamp","fecPacketsDiscarded","fecPacketsReceived","firCount","frameHeight","framerateMean","framesDecoded","framesEncoded","framesPerSecond","framesReceived","framesSent","frameWidth","googAccelerateRate","googCurrentDelayMs","googDecodingCNG","googDecodingCTN","googDecodingNormal","googDecodingPLC","googDecodingPLCCNG","googExpandRate","googJitterReceived","googPreemptiveExpandRate","googPreferredJitterBufferMs","googRtt","height","jitter","jitterBufferDelay","jitterBufferEmittedCount","keyFramesEncoded","packetsLost","packetsReceived","packetsSent","pliCount","qpSum","roundTripTime","totalAudioEnergy","totalDecodeTime","totalEncodeTime","width",w.E2E_LATENCY,w.VIDEO_QP,w.VIDEO_CAPTURE_IS_STALLED,w.VIDEO_ENCODE_IS_STALLED,w.VIDEO_SENT_IS_STALLED],C=["consentRequestsSent","estimatedPlayoutTimestamp","estimatedPlayoutTimestamp_delta","fecPacketsDiscarded","fecPacketsReceived","firCount","googDecodingCNG","googDecodingCTN","googDecodingNormal","googDecodingPLC","googDecodingPLCCNG","jitterBufferDelay_delta","jitterBufferDelay","jitterBufferEmittedCount","keyFramesEncoded","packetsLost","packetsReceived","packetsSent","pliCount","qpSum_delta","requestsReceived","requestsSent","responsesReceived","responsesSent","totalAudioEnergy"],D={audioLevel:1e4,jitter:1e3,totalAudioEnergy:1e4,totalDecodeTime:1e3,totalEncodeTime:1e3,totalSamplesDuration:1e3},E=["availableOutgoingBitrate","consentRequestsSent","requestsReceived","requestsSent","responsesReceived","responsesSent"],F=["audioLevel","packetsLost","totalAudioEnergy","totalSamplesDuration"],G=[5,50,95],H=["bandwidth","rtt"];function a(){return c("UserAgent").isBrowser("Chrome < 86")||c("UserAgent").isBrowser("Edge (Chromium Based) < 86")||c("UserAgent").isBrowser("Opera < 72")}function b(){return f.exports.isPreChromium86()?d("ZenonMediaStatsSourcePreM86").TRACK_STATS:d("ZenonMediaStatsSource").TRACK_STATS}function e(){return f.exports.isPreChromium86()?d("ZenonMediaStatsSourcePreM86").INBOUND_RTP_STATS:d("ZenonMediaStatsSource").INBOUND_RTP_STATS}function I(){return f.exports.isPreChromium86()?d("ZenonMediaStatsSourcePreM86").OUTBOUND_RTP_STATS:d("ZenonMediaStatsSource").OUTBOUND_RTP_STATS}function J(){return f.exports.isPreChromium86()?d("ZenonMediaStatsSourcePreM86").RTP_STATS:d("ZenonMediaStatsSource").RTP_STATS}function K(){return d("ZenonMediaStatsSource").CANDIDATE_PAIR_STATS}function L(){return d("ZenonMediaStatsSource").MEDIA_SOURCE_STATS}function M(){return d("ZenonMediaStatsSource").SSRC_STATS}function N(){return d("ZenonMediaStatsSource").VIDEO_BWE_STATS}function O(){return d("ZenonMediaStatsSource").GOOG_CANDIDATE_PAIR_STATS}g.GLOBAL_STATS_TRACK_INFO=h;g.GLOBAL_STATS_TRACKID=i;g.GLOBAL_STATS_CONTENT_TYPE=j;g.GLOBAL_STATS_RENDERED_VIEW=c("ZenonRenderedView").GRID;g.PINNED_AUDIO_STATS_TRACK_INFO=k;g.PINNED_VIDEO_STATS_TRACK_INFO=l;g.OUTBOUND_AUDIO_STATS_TRACK_INFO=m;g.OUTBOUND_AUDIO_STATS_TRACKID=n;g.OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO=o;g.OUTBOUND_SCREEN_AUDIO_STATS_TRACKID=p;g.OUTBOUND_SCREEN_STATS_TRACK_INFO=q;g.OUTBOUND_SCREEN_STATS_TRACKID=r;g.OUTBOUND_VIDEO_STATS_TRACK_INFO=s;g.OUTBOUND_VIDEO_STATS_TRACKID=t;g.VOICE_ENERGY_THRESHOLD=u;g.AV_SYNC_CUTOFF=v;g.DERIVED_METRICS=w;g.PER_STREAM_AGG_METRICS=x;g.CUMULATIVE_STATS=y;g.DELTA_STATS=z;g.STATS_REQUESTED=A;g.TSLOG_STATS_REQUESTED=B;g.TSLOG_STATS_TO_SUPPRESS=C;g.TSLOG_METRIC_SCALE=D;g.TSLOG_STATS_REQUESTED_FROM_CANDIDATE_PAIR=E;g.RULE_VIOLATION_ALLOWLIST=F;g.PERCENTILES_REQUESTED=G;g.NETWORK_HEALTH_STATS=H;g.isPreChromium86=a;g.getTrackStats=b;g.getInboundRtpStats=e;g.getOutboundRtpStats=I;g.getRtpStats=J;g.getCandidatePairStats=K;g.getMediaSourceStats=L;g.getSsrcStats=M;g.getVideoBweStats=N;g.getGoogCandidatePairStats=O}),98);
__d("ZenonNetworkQualityMonitor",["$InternalEnum","UserAgent","ZenonInfraActionsLogger","ZenonMediaStatsConfig","ZenonNetworkQualityIndicatorConfigSitevarConfig","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=2,i="googActualEncBitrate";a=function(){function a(){var a;this.$3=0;this.$4=0;this.$5=0;this.$6=0;this.$7=[];this.$8=j.Good;this.$9=c("immutable").Map();this.$1=this.$15();this.$2=this.$16();this.$10=(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_poor_packet_loss_rate_threshold)!=null?a:Number.POSITIVE_INFINITY;this.$11=(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_fair_packet_loss_rate_threshold)!=null?a:Number.POSITIVE_INFINITY;this.$12=(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_jitter_threshold)!=null?a:Number.POSITIVE_INFINITY;this.$13=(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_avsync_threshold)!=null?a:Number.POSITIVE_INFINITY;this.$14=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").remote_use_disconnected_check||!1;c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"ZenonNetworkQualityMonitor constructed: rtt "+this.$1+", packetLoss "+this.$2})}var b=a.prototype;b.$16=function(){var a;return(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").packet_loss_rate_threshold)!=null?a:Number.POSITIVE_INFINITY};b.$15=function(){var a;return(a=c("ZenonNetworkQualityIndicatorConfigSitevarConfig").rtt_threshold)!=null?a:Number.POSITIVE_INFINITY};b.$17=function(a,b){if(a!=null){a=a.deltaStat[b];if(a!=null){a=(b=a.getLastAddedValue())!=null?b:0;a>this.$5&&(this.$5=a);return a>this.$1}}return!1};b.$18=function(a,b,c){a=a<0?0:a/(a+b);a>this.$6&&(this.$6=a);return a>=c};b.$19=function(a){if(a!=null){a=a.deltaStat[i];if(a!=null){this.$4=(a=a.getLastAddedValue())!=null?a:0}}};b.$20=function(a,b,c,d){if(a!=null&&c!=="packetsSent"){b=a.cumulativeStat[b];a=a.cumulativeStat[c];if(b!=null&&a!=null)return this.$18(b.getDeltaFromLastUpdate(),a.getDeltaFromLastUpdate(),d)}return!1};b.$21=function(a,b){var c=this,d=b.packetLostKey,e=b.packetsKey,f=b.rttKey;b=Array.from(a.values()).some(function(a){var b=c.$20(a,d,e,c.$2);c.$19(a);return b||c.$17(a,f)});return b};b.getMetricKeys=function(a){return{packetLostKey:d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED,packetsKey:a?"packetsSent":"packetsReceived",rttKey:c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")?"googRtt":"roundTripTime"}};b.getCount=function(){return this.$3};b.getCurrentBitrate=function(){return this.$4};b.getAvgBitrateDuringBadNetwork=function(){var a=this.$7.reduce(function(a,b){return a+b},0),b=this.$7.length;return b===0?0:a/b};b.$22=function(a,b){if(b){this.$8=j.Poor;this.$7.push(this.$4);return this.$8}if(a!=null){b=this.$3;var d=this.$21(a,this.getMetricKeys(!0));a=this.$21(a,this.getMetricKeys(!1));d||a?this.$3<h&&this.$3++:this.$3>0&&this.$3--;this.$3>=h?(this.$8=j.Poor,this.$7.push(this.$4)):this.$3<=0?(b!==this.$3&&this.$3===0&&this.$8!==j.Good&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[Network] Bad network window with avg bitrate: "+this.getAvgBitrateDuringBadNetwork()+", max rtt: "+this.$5+", max packet loss: "+this.$6}),this.$7=[],this.$8=j.Good):this.$3>=1&&this.$8===j.Poor&&this.$7.push(this.$4)}return this.$8};b.$23=function(a,b){var d=this;if(a==null){this.$9=c("immutable").Map();return this.$9}var e=this.$9;this.$9=c("immutable").Map().withMutations(function(c){a.forEach(function(a,f){if(a.remote===!1)return;var g=e.get(f)==null;a=[d.$24(a),d.$25(b),d.$26(a),d.$27(a,g),d.$28(a,g)];var h=j.Excellent,i=[];a.forEach(function(a){a.quality<h&&(h=a.quality);a=a.reason;a!=null&&i.push(a)});c.set(f,{quality:h,reasons:i})})});return this.$9};b.$28=function(a,b){if(!this.$14||a.contentType!=="video"||a.isMuted===!0||b)return{quality:j.Excellent};a=(b=a.cumulativeStat.packetsReceived)==null?void 0:b.getDeltaFromLastUpdate();return a===0?{quality:j.Disconnected,reason:k.ZERO_PACKETS_RECEIVED}:{quality:j.Excellent}};b.$25=function(a){return a?{quality:j.Disconnected,reason:k.ICE_DISCONNECTED}:{quality:j.Excellent}};b.$26=function(a){var b;b=(b=a.cumulativeStat.jitter)==null?void 0:b.getDeltaFromLastUpdate();return a.contentType==="audio"&&b!=null&&b>this.$12?{quality:j.Fair,reason:k.JITTER}:{quality:j.Excellent}};b.$27=function(a,b){if(b)return{quality:j.Excellent};b=(b=a.cumulativeStat.packetsReceived)==null?void 0:b.getDeltaFromLastUpdate();a=(a=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED])==null?void 0:a.getDeltaFromLastUpdate();if(b==null||a==null)return{quality:j.Excellent};if(this.$18(a,b,this.$10))return{quality:j.Poor,reason:k.PACKET_LOSS};else if(this.$18(a,b,this.$11))return{quality:j.Fair,reason:k.PACKET_LOSS};return{quality:j.Excellent}};b.$24=function(a){a=(a=a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC])==null?void 0:a.getLastAddedValue();return a!=null&&a>this.$13?{quality:j.Fair,reason:k.AV_SYNC}:{quality:j.Excellent}};b.determineNetworkStatus=function(a,b){var d=this.$22(a,b);d===j.Poor&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[Network] Showing poor network indicator with current bitrate: "+this.getCurrentBitrate()});return{local:d,remote:this.$23(a,b)}};return a}();var j=b("$InternalEnum")({Excellent:4,Good:3,Fair:2,Poor:1,Disconnected:0}),k=b("$InternalEnum").Mirrored(["PACKET_LOSS","ZERO_PACKETS_RECEIVED","END_TO_END_LANTENCY","AV_SYNC","JITTER","ICE_DISCONNECTED"]);g.ZenonNetworkQualityMonitor=a;g.ZenonNetworkQuality=j;g.ZenonNetworkQualityReason=k}),98);
__d("ZenonScreenSharingAvailabilityType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["AudioCallUnsupported","Available","GroupCallUnsupported","Unknown"]);c=a;f["default"]=c}),66);
__d("ZenonCallFeatures",["ZenonNetworkQualityMonitor","ZenonScreenSharingAvailabilityType","immutable"],(function(a,b,c,d,e,f){"use strict";a=b("ZenonNetworkQualityMonitor").ZenonNetworkQuality;c=b("immutable").Record({canAddParticipants:!1,canReplaceLocalStreams:!1,cowatchEnabled:!1,cowatchGroupEnabled:!1,dominantSpeaker:null,multiwayVideoEscalation:!1,networkStatus:{local:a.Good,remote:b("immutable").Map()},screenSharingAvailability:b("ZenonScreenSharingAvailabilityType").Available,supportMultipleStreams:!1});d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c);e.exports=d}),null);
__d("ZenonCall",["ZenonCallFeatures","ZenonCallsModelTypes","immutable"],(function(a,b,c,d,e,f){"use strict";a=b("ZenonCallsModelTypes").ZenonCallState;d=(c=b("immutable")).Record({callState:a.New,clientCallId:"",collisionContext:{groupThreadID:null,peerID:null,serverInfoData:null},endCallReason:null,features:new(b("ZenonCallFeatures"))(),groupEscalationStatus:null,mediaTracks:c.Map(),participants:c.Map(),remoteScreenSharingUserIDs:c.OrderedSet(),responseSubCode:null,rtpReceivers_I_KNOW_WHAT_I_AM_DOING:c.Set(),rtpSenders_I_KNOW_WHAT_I_AM_DOING:c.Set(),selfParticipantID:"0",stateSyncInputStates:c.Map(),stateSyncOutputStates:c.Map(),videoEscalationStatus:null});f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d);e.exports=f}),null);
__d("ZenonCallParticipant",["ZenonCallsModelTypes","immutable"],(function(a,b,c,d,e,f){"use strict";a=b("ZenonCallsModelTypes").ZenonCallParticipantState;c=b("immutable").Record({id:void 0,isExistingParticipant:void 0,isVideoSubscribed:!1,participantType:void 0,representativeID:null,state:a.Disconnected,trackIDs:void 0,userCapabilities:void 0});d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c);e.exports=d}),null);
__d("ZenonImmutableMediaTrack",["immutable"],(function(a,b,c,d,e,f){"use strict";a=b("immutable").Record({contentHint:"",contentType:void 0,displaySurface:void 0,enabled:!1,flags:Object.freeze({}),label:"",pausedDownlink:!1,remote:!1,trackId:void 0,userMuted:!1,webrtcStream:void 0,webrtcTrack:void 0});c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a);e.exports=c}),null);
__d("MAWBridgeTypes.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return{TAG:1,_0:a}}function b(a){return{TAG:2,_0:a}}function c(a){return{TAG:0,_0:a}}function d(a){return{TAG:0,_0:a}}function e(a){return{TAG:1,_0:a}}function g(a){return 0}f.makeInitialThreadRange=a;f.makeThreadRangeForLoadBefore=b;f.makeThreadRangeNoThreads=c;f.makeInitialRange=d;f.makeExtendBefore=e;f.makeNoMsg=g}),null);
__d("MAWBridgeTypes.re",["MAWBridgeTypes.bs"],(function(a,b,c,d,e,f){c=(a=b("MAWBridgeTypes.bs")).makeInitialThreadRange;f.makeInitialThreadRange=c;d=a.makeThreadRangeForLoadBefore;f.makeThreadRangeForLoadBefore=d;e=a.makeThreadRangeNoThreads;f.makeThreadRangeNoThreads=e;b=a.makeInitialRange;f.makeInitialRange=b;c=a.makeExtendBefore;f.makeExtendBefore=c;d=a.makeNoMsg;f.makeNoMsg=d}),null);
__d("WACommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};b={};c={};e={};b.internalSpec={remoteJid:[1,d("WAProtoConst").TYPES.STRING],fromMe:[2,d("WAProtoConst").TYPES.BOOL],id:[3,d("WAProtoConst").TYPES.STRING],participant:[4,d("WAProtoConst").TYPES.STRING]};c.internalSpec={text:[1,d("WAProtoConst").TYPES.STRING],mentionedJid:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.STRING]};e.internalSpec={payload:[1,d("WAProtoConst").TYPES.BYTES],version:[2,d("WAProtoConst").TYPES.INT32]};g.FUTUREPROOFBEHAVIOR=a;g.MessageKeySpec=b;g.MessageTextSpec=c;g.SubProtocolSpec=e}),98);
__d("WAArmadilloApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={ES_OPEN:1,ES_CLOSE:2};b={SCREENSHOT_IMAGE:1,SCREEN_RECORDING:2};c={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5};e={OPEN_NATIVE:11};f={SINGLE:0,PORTRAIT:3};var h={IG_STORY_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_FEED_VIDEO_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_STORY_REPLY:17,IG_STORY_REACTION:18,IG_PROFILE_SHARE:19,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,MSG_EXTERNAL_LINK_SHARE:2e3},i={PLAYED:0,SCREENSHOT:1,FORCE_DISABLE:2},j={VIEW_ONCE:0,ALLOW_REPLAY:1,KEEP_IN_CHAT:2},k={SMALL_LIKE:1,MEDIUM_LIKE:2,LARGE_LIKE:3},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={};l.internalSpec={payload:[1,d("WAProtoConst").TYPES.MESSAGE,n],metadata:[2,d("WAProtoConst").TYPES.MESSAGE,m]};m.internalSpec={};n.internalSpec={content:[1,d("WAProtoConst").TYPES.MESSAGE,E],applicationData:[2,d("WAProtoConst").TYPES.MESSAGE,s],signal:[3,d("WAProtoConst").TYPES.MESSAGE,p],subProtocol:[4,d("WAProtoConst").TYPES.MESSAGE,o],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};o.internalSpec={futureProof:[1,d("WAProtoConst").TYPES.ENUM,d("WACommon.pb").FUTUREPROOFBEHAVIOR]};p.internalSpec={encryptedBackupsSecrets:[1,d("WAProtoConst").TYPES.MESSAGE,q],__oneofs__:{signal:["encryptedBackupsSecrets"]}};q.internalSpec={backupId:[1,d("WAProtoConst").TYPES.UINT64],serverDataId:[2,d("WAProtoConst").TYPES.UINT64],epoch:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,r],tempOcmfClientState:[4,d("WAProtoConst").TYPES.BYTES],mailboxRootKey:[5,d("WAProtoConst").TYPES.BYTES],obliviousValidationToken:[6,d("WAProtoConst").TYPES.BYTES]};r.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT64],anonId:[2,d("WAProtoConst").TYPES.BYTES],rootKey:[3,d("WAProtoConst").TYPES.BYTES],status:[4,d("WAProtoConst").TYPES.ENUM,a]};s.internalSpec={metadataSync:[1,d("WAProtoConst").TYPES.MESSAGE,D],messageHistorySync:[2,d("WAProtoConst").TYPES.MESSAGE,t],__oneofs__:{applicationData:["metadataSync","messageHistorySync"]}};t.internalSpec={history:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec]};u.internalSpec={actionTimestamp:[1,d("WAProtoConst").TYPES.INT64],chatAction:[101,d("WAProtoConst").TYPES.MESSAGE,x],messageAction:[102,d("WAProtoConst").TYPES.MESSAGE,v],__oneofs__:{actionType:["chatAction","messageAction"]}};v.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],messageDelete:[101,d("WAProtoConst").TYPES.MESSAGE,w],__oneofs__:{action:["messageDelete"]}};w.internalSpec={};x.internalSpec={chatId:[1,d("WAProtoConst").TYPES.STRING],chatArchive:[101,d("WAProtoConst").TYPES.MESSAGE,A],chatDelete:[102,d("WAProtoConst").TYPES.MESSAGE,z],chatRead:[103,d("WAProtoConst").TYPES.MESSAGE,y],__oneofs__:{action:["chatArchive","chatDelete","chatRead"]}};y.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C],read:[2,d("WAProtoConst").TYPES.BOOL]};z.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C]};A.internalSpec={messageRange:[1,d("WAProtoConst").TYPES.MESSAGE,C],archived:[2,d("WAProtoConst").TYPES.BOOL]};B.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],timestamp:[2,d("WAProtoConst").TYPES.INT64]};C.internalSpec={lastMessageTimestamp:[1,d("WAProtoConst").TYPES.INT64],lastSystemMessageTimestamp:[2,d("WAProtoConst").TYPES.INT64],messages:[3,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,B]};D.internalSpec={actions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,u]};E.internalSpec={commonSticker:[1,d("WAProtoConst").TYPES.MESSAGE,K],screenshotAction:[3,d("WAProtoConst").TYPES.MESSAGE,F],extendedContentMessage:[4,d("WAProtoConst").TYPES.MESSAGE,G],ravenMessage:[5,d("WAProtoConst").TYPES.MESSAGE,J],ravenActionNotifMessage:[6,d("WAProtoConst").TYPES.MESSAGE,I],__oneofs__:{content:["commonSticker","screenshotAction","extendedContentMessage","ravenMessage","ravenActionNotifMessage"]}};F.internalSpec={screenshotType:[1,d("WAProtoConst").TYPES.ENUM,b]};G.internalSpec={associatedMessage:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],targetType:[2,d("WAProtoConst").TYPES.ENUM,h],targetUsername:[3,d("WAProtoConst").TYPES.STRING],targetId:[4,d("WAProtoConst").TYPES.STRING],targetExpiringAtSec:[5,d("WAProtoConst").TYPES.INT64],xmaLayoutType:[6,d("WAProtoConst").TYPES.ENUM,f],ctas:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,H],previews:[8,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],titleText:[9,d("WAProtoConst").TYPES.STRING],subtitleText:[10,d("WAProtoConst").TYPES.STRING],maxTitleNumOfLines:[11,d("WAProtoConst").TYPES.UINT32],maxSubtitleNumOfLines:[12,d("WAProtoConst").TYPES.UINT32],favicon:[13,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],headerImage:[14,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],headerTitle:[15,d("WAProtoConst").TYPES.STRING],overlayIconGlyph:[16,d("WAProtoConst").TYPES.ENUM,c],overlayTitle:[17,d("WAProtoConst").TYPES.STRING],overlayDescription:[18,d("WAProtoConst").TYPES.STRING],sentWithMessageId:[19,d("WAProtoConst").TYPES.STRING]};H.internalSpec={buttonType:[1,d("WAProtoConst").TYPES.ENUM,e],title:[2,d("WAProtoConst").TYPES.STRING],actionUrl:[3,d("WAProtoConst").TYPES.STRING],nativeUrl:[4,d("WAProtoConst").TYPES.STRING]};I.internalSpec={key:[1,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").MessageKeySpec],actionTimestamp:[2,d("WAProtoConst").TYPES.INT64],actionType:[3,d("WAProtoConst").TYPES.ENUM,i]};J.internalSpec={ephemeralType:[1,d("WAProtoConst").TYPES.ENUM,j],imageMessage:[2,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],videoMessage:[3,d("WAProtoConst").TYPES.MESSAGE,d("WACommon.pb").SubProtocolSpec],__oneofs__:{mediaContent:["imageMessage","videoMessage"]}};K.internalSpec={stickerType:[1,d("WAProtoConst").TYPES.ENUM,k]};g.ARMADILLO_SIGNAL_ENCRYPTED_BACKUPS_SECRETS_EPOCH_EPOCHSTATUS=a;g.ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOTTYPE=b;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_OVERLAYICONGLYPH=c;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_CTA_BUTTONTYPE=e;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_XMALAYOUTTYPE=f;g.ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_EXTENDEDCONTENTTYPE=h;g.ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTIONTYPE=i;g.ARMADILLO_CONTENT_RAVEN_MESSAGE_EPHEMERALTYPE=j;g.ARMADILLO_CONTENT_COMMON_STICKER_STICKERTYPE=k;g.ArmadilloSpec=l;g.Armadillo$MetadataSpec=m;g.Armadillo$PayloadSpec=n;g.Armadillo$SubProtocolPayloadSpec=o;g.Armadillo$SignalSpec=p;g.Armadillo$Signal$EncryptedBackupsSecretsSpec=q;g.Armadillo$Signal$EncryptedBackupsSecrets$EpochSpec=r;g.Armadillo$ApplicationDataSpec=s;g.Armadillo$ApplicationData$MessageHistorySyncSpec=t;g.Armadillo$ApplicationData$MetadataSyncActionSpec=u;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageActionSpec=v;g.Armadillo$ApplicationData$MetadataSyncAction$SyncMessageAction$ActionMessageDeleteSpec=w;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatActionSpec=x;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatReadSpec=y;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatDeleteSpec=z;g.Armadillo$ApplicationData$MetadataSyncAction$SyncChatAction$ActionChatArchiveSpec=A;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageSpec=B;g.Armadillo$ApplicationData$MetadataSyncAction$SyncActionMessageRangeSpec=C;g.Armadillo$ApplicationData$MetadataSyncNotificationSpec=D;g.Armadillo$ContentSpec=E;g.Armadillo$Content$ScreenshotActionSpec=F;g.Armadillo$Content$ExtendedContentMessageSpec=G;g.Armadillo$Content$ExtendedContentMessage$CTASpec=H;g.Armadillo$Content$RavenActionNotifMessageSpec=I;g.Armadillo$Content$RavenMessageSpec=J;g.Armadillo$Content$CommonStickerSpec=K}),98);
__d("WADualSendMsgUtils",["WAJids"],(function(a,b,c,d,e,f,g){var h="shadow_";function a(a){return a!=null&&a.startsWith(h)}function b(a){var b=a.split(h);if(b[0]===""&&b[1]!=null){var c=b[1].split("@msgr")[0];b=b[1].split("@g.us")[0];if(c!=null)return d("WAJids").toMsgrUserJid(c);else if(b!=null)return d("WAJids").toGroupJid(b)}return a}function c(a){return a.hasChild("test")}function e(a){a=a.split("_")[1];a=a.split("@g.us")[0];a=d("WAJids").toGroupJid(a);return a}function f(a){return h+a}g.DUAL_SEND_PREFIX=h;g.isDualSendJid=a;g.removeDualSendPrefix=b;g.parseMessageForDualSend=c;g.removeDualSendPrefixForGroup=e;g.prependDualSendPrefix=f}),98);
__d("MAWBridgeTypes",["MAWAckLevel.re","MAWBridgeTypes.re","MAWDbContact","MAWDbMedia","MAWDbMsg","MAWDbParticipant","MAWGlobals","MAWImageUtils","MAWVault","WAArmadilloApplication.pb","WAAssertUnreachable","WADualSendMsgUtils","WAJids","WALogger","WAMsgType","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWBridge - createBridgeXMA received unexpected media type - ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling the messages starting countdown bridge event with remaning time less or equal to 0"]);i=function(){return a};return a}function j(a){return a.xmaMessageType===d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_EXTENDEDCONTENTTYPE.FB_STORY_SHARE?!0:!1}function k(a,b){var c;if(((c=a.quote)==null?void 0:c.content)==null||a.quote.content.msgId==null&&a.quote.content.sourceId==null)return;c=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;var e=a.quote||babelHelpers["extends"]({},null);e=e.content;a=((a=a.quote)==null?void 0:a.content)||babelHelpers["extends"]({},null);var f=a.author,g=a.mediaId,h=a.msgId,i=a.sourceId,j=a.specialTextSize,k=a.type;a=a.xmaMessageType;e=e.type===d("WAMsgType").MSG_TYPE.TEXT?e.msgContent.content:void 0;var l=d("WAJids").authorToUserId(f,c);f=f===d("WAJids").AUTHOR_ME||l===c;c=b||babelHelpers["extends"]({},null);b=c.replyMediaId;var m=c.replyMediaPreviewHeight,n=c.replyMediaPreviewWidth,o=c.replyMediaUrlFallback,p=c.replyMediaUrlMimeType;c=c.replyXMAId;if(a===d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_EXTENDED_CONTENT_MESSAGE_EXTENDEDCONTENTTYPE.FB_STORY_REPLY)return{isStoryReply:!0,replyMediaId:g,replyMediaUrlMimeType:g!=null?"image/jpeg":void 0,replySenderIsMe:f,replySourceId:i,replyStatusType:g!=null?"Image":void 0,replyToUserId:l};a=d("MAWImageUtils").boundHeightWidth(m,n,96*.8);i=a.height;g=a.width;return{isStoryReply:!1,replyMediaId:b,replyMediaPreviewHeight:k===d("WAMsgType").MSG_TYPE.STICKER?i:m,replyMediaPreviewWidth:k===d("WAMsgType").MSG_TYPE.STICKER?g:n,replyMediaUrlFallback:o,replyMediaUrlMimeType:p,replyMessageText:e,replySenderIsMe:f,replySourceId:h,replyStatusType:j===1||j===2||j===3?d("WAMsgType").MSG_TYPE.STICKER:k,replyToUserId:l,replyXMAId:c}}function a(a,b,c){var e=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(a){return!0},user:function(a){return!1}});return{authoritativeThreadKey:c,cannotReplyReason:a.cannotReplyReason,chatId:a.chatId,clientThreadKey:b,folder:a.folder,isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.jid),isGroup:e,jid:a.jid,lastActivityTs:a.newestMsgTs||d("WATimeUtils").castToUnixTime(0),lastReadTs:a.lastReadMsgTs||d("WATimeUtils").castToUnixTime(0),muteCallsExpireTimeMs:(c=a.muteCallsExpireTimeMs)!=null?c:0,muteExpireTimeMs:(b=a.muteExpireTimeMs)!=null?b:0}}function b(a){return{deliveredWatermarkTs:a.deliveredWatermarkTs||d("WATimeUtils").castToUnixTime(0),fbid:d("WAJids").extractUserId(a.userJid),isAdmin:a.type==="superadmin"||a.type==="admin",isInvited:a.type==="invitedParticipant",isSuperAdmin:a.type==="superadmin",lastReadActionTs:a.lastReadActionTs||d("WATimeUtils").castToUnixTime(0),readWatermarkTs:a.lastReadWatermarkTs||d("WATimeUtils").castToUnixTime(0),threadId:a.threadId}}function e(a,b){return{fbid:d("WAJids").extractUserId(b),threadId:a}}function f(a){return{threadId:a}}function l(a,b,e){var f,g=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId;f=((f=a.isForwarded)!=null?f:!1)&&a.type!==d("WAMsgType").MSG_TYPE.STICKER;var h=d("MAWDbMsg").getCanonicalTsFromMsg(a);e=k(a,e);var i=j(a),l=d("MAWDbMsg").getSortOrderWithFallback(a),m=d("WADualSendMsgUtils").isDualSendJid(a.threadJid);switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:var n=d("MAWVault").isVaulted(a.msgContent.content)?a.msgContent.content:d("MAWVault").vault(a.msgContent.content);return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,content:n,ephemeralDurationInSec:(n=a.ephemeralSetting)==null?void 0:n.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,specialTextSize:a.specialTextSize,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,ephemeralDurationInSec:(n=a.ephemeralSetting)==null?void 0:n.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.FUTUREPROOF:return babelHelpers["extends"]({},e,{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.CIPHERTEXT:return{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.UNAVAILABLE:case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},e,{ack:d("MAWAckLevel.re").ACK.clock,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type});case d("WAMsgType").MSG_TYPE.ICDC_ALERT:return{ack:a.ack,adminContent:[a.msgContent.authorName],adminType:a.msgContent.adminType,chatId:a.thread,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return{ack:a.ack,adminContent:a.msgContent.adminMsgContent,adminType:a.msgContent.adminType,chatId:a.thread,isAdminMessage:!0,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.REVOKED:return{ack:a.ack,chatId:a.thread,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isForwarded:f,msgId:a.msgId,offlineMsg:b,originalTs:a.originalTs,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type};case d("WAMsgType").MSG_TYPE.XMA:return babelHelpers["extends"]({},e,{ack:a.ack,chatId:a.thread,ephemeralDurationInSec:(n=a.ephemeralSetting)==null?void 0:n.ephemeralExpirationInSec,isAdminMessage:!1,isAuthorMe:a.author===d("WAJids").AUTHOR_ME,isDualSend:m,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:f,isStoryShare:i,msgId:a.msgId,offlineMsg:b,rowId:a.rowId,sender:d("WAJids").authorToUserId(a.author,g),sortOrderMs:l,ts:h,type_:a.type});default:return c("WAAssertUnreachable")(a.type)}}function m(a){var b,c=a.ts;switch(a.type){case d("WAMsgType").MSG_TYPE.REVOKED:c=(b=a.originalTs)!=null?b:a.ts;break;default:c=d("MAWDbMsg").getCanonicalTsFromMsg(a)}return{msgId:a.msgId,threadId:a.thread,ts:c}}function n(a,b){b=b.map(m);return{messages:b,threadId:a}}function o(a,b){return{mediaId:b,msgId:a.msgId,threadId:a.thread}}function p(a,b){return{msgId:a.msgId,threadId:a.thread,xmaId:b}}function q(a,b){return{msgId:a.msgId,threadId:a.thread,xmaId:b}}function r(a){a=a.map(function(a){var b,c=a.messageExpirationTs;b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(c==null||b==null)return;var e=d("WATimeUtils").cappedMillisecondsUntil(c);if(e<=0){d("WALogger").ERROR(i());return}b=b*1e3;e>b&&(e=b);return{chatId:a.thread,countdownTs:c,millisecondsUntilCountdownTs:e,msgId:a.msgId,ts:d("MAWDbMsg").getCanonicalTsFromMsg(a)}}).filter(Boolean);return{msgs:a}}function s(a,b){return{countdownTs:b,msgId:a}}function t(a,b,e){var f,g=b.msgIds.filter(function(b){return d("MAWDbMsg").getThreadIdFromMsgId(b)===a});switch(b.mediaType){case"Image":return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(f=b.validatedImageInfo)==null?void 0:f.height,previewWidth:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(f=b.validatedImageInfo)==null?void 0:f.width,threadId:a,ts:b.ts};case"Video":return{duration:((f=b.validatedVideoInfo)==null?void 0:f.duration)!=null?((f=b.validatedVideoInfo)==null?void 0:f.duration)*1e3:0,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:(f=b.validatedVideoInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(f=b.validatedVideoInfo)==null?void 0:f.height,previewWidth:(f=b.validatedVideoInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(f=b.validatedVideoInfo)==null?void 0:f.width,threadId:a,ts:b.ts};case"Ptt":return{duration:((f=b.validatedAudioInfo)==null?void 0:f.duration)?b.validatedAudioInfo.duration*1e3:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:g,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,threadId:a,ts:b.ts};case"Gif":return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:b.msgIds,previewHeight:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,previewHeightLarge:(g=b.validatedImageInfo)==null?void 0:g.height,previewWidth:(f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailWidth,previewWidthLarge:(g=b.validatedImageInfo)==null?void 0:g.width,threadId:a,ts:b.ts};case"Sticker":f=d("MAWImageUtils").boundHeightWidth((f=b.validatedImageInfo)==null?void 0:f.jpegThumbnailHeight,(g=b.validatedImageInfo)==null?void 0:g.jpegThumbnailWidth,128);g=f.height;f=f.width;return{duration:null,filesize:b.size,hasMedia:e,mediaId:b.mediaId,mediaType:b.mediaType,msgIds:b.msgIds,previewHeight:g,previewHeightLarge:g,previewWidth:f,previewWidthLarge:f,threadId:a,ts:b.ts};default:return c("WAAssertUnreachable")(b.mediaType)}}function u(a){if(a==null)return void 0;switch(a){case"Image":case"Sticker":return"image/png";case"Gif":return"image/gif";case"Video":return"video/mp4";case"Ptt":return"audio/wav"}}function v(a,b,c){var e;b!=null&&b.mediaType!==d("MAWDbMedia").IMAGE&&d("WALogger").WARN(h(),b.mediaType);return{ctas:c.ctas,defaultCTA:c.defaultCTA,defaultPreviewMediaId:c.defaultPreviewMediaId,duration:null,faviconMediaId:c.faviconMediaId,filesize:b==null?void 0:b.size,headerMediaId:c.headerMediaId,maxSubtitleNumOfLines:c.maxSubtitleNumOfLines,maxTitleNumOfLines:c.maxTitleNumOfLines,mediaType:b==null?void 0:b.mediaType,msgId:c.msgId,overlayIconGlyph:c.overlayIconGlyph,playableUrlMimeType:u(b==null?void 0:b.mediaType),previewHeight:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.jpegThumbnailHeight,previewHeightLarge:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.height,previewUrlMimeType:u(b==null?void 0:b.mediaType),previewWidth:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.jpegThumbnailWidth,previewWidthLarge:b==null?void 0:(e=b.validatedImageInfo)==null?void 0:e.width,subtitleText:c.subtitleText,targetId:c.targetId,targetType:c.targetType,targetUsername:c.targetUsername,threadId:a,titleText:c.titleText,ts:b==null?void 0:b.ts,xmaId:c.xmaId,xmaLayoutType:c.xmaLayoutType}}function w(a,b,c){return{hasMoreBefore:c,minMsgRowId:b,threadId:a}}function x(a,b,c,e,f){return{deliveredWatermarkTs:c||d("WATimeUtils").castToUnixTime(0),fbid:b,lastReadActionTs:f||d("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:e||d("WATimeUtils").castToUnixTime(0),threadId:a}}function y(a){var b=a.cannotReplyReason,c=a.folder,d=a.muteExpireTimeMs,e=a.snippetParams,f=a.snippetSenderContactId,g=a.snippetType;a=a.threadId;return{cannotReplyReason:b,folder:c,muteExpireTimeMs:d,snippetParams:e,snippetSenderContactId:f,snippetType:g,threadId:a}}function z(a){return{isDualSend:d("WADualSendMsgUtils").isDualSendJid(a.groupJid),threadId:a.threadId,threadName:a.name}}function A(a,b,c,e,f,g,h,i){return{isCurrentDeviceSendingMsg:i,isDualSend:b,lastActivityTs:c,lastReadTs:e||d("WATimeUtils").castToUnixTime(0),snippetParams:g,snippetSenderContactId:h,snippetType:f,threadId:a}}function B(a,b,c){return{lastActivityTimestampMs:c,lastReadWatermarkTs:b,threadId:a}}function C(a,b,c,e){b=b;return{rangeExtensionType:b.length===0?d("MAWBridgeTypes.re").makeNoMsg():c?d("MAWBridgeTypes.re").makeInitialRange({hasMoreBefore:e,maxMsgId:b[0].msgId,minMsgId:b[b.length-1].msgId,minMsgTs:d("MAWDbMsg").getSortOrderWithFallback(b[b.length-1])}):d("MAWBridgeTypes.re").makeExtendBefore({hasMoreBefore:e,minMsgId:b[b.length-1].msgId,minMsgTs:d("MAWDbMsg").getSortOrderWithFallback(b[b.length-1])}),threadId:a}}function D(a){var b=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId,c=a.author,e=a.chatId,f=a.reaction,g=a.reactToMsgId;a=a.ts;return{actorId:d("WAJids").authorToUserId(c,b),messageId:g,reaction:f,threadId:e,ts:a}}function E(a){var b=d("WAJids").extractDeviceIDParts(d("MAWGlobals").getMyDeviceJid()).userId,c=a.author,e=a.chatId;a=a.reactToMsgId;return{actorId:d("WAJids").authorToUserId(c,b),messageId:a,threadId:e}}function F(a){return{creationTs:a.creationTs,creator:a.creator,groupJid:a.groupJid,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion,threadId:a.threadId}}function G(a){var b=d("MAWDbParticipant").getThreadIdAndUserJidFromParticipantId(a.invitedParticipantId),c=b.threadId;b=b.userJid;return{caption:a.caption,inviteCode:a.inviteCode,inviteeId:d("WAJids").extractUserId(b),inviteExpireTs:a.inviteExpirationTs,inviterId:d("WAJids").extractUserId(a.inviterJid),threadId:c}}function H(a){return{fbid:d("WAJids").extractUserId(a.contactJid)}}function I(a,b,c,e,f,g){var h=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:a.ack,externalId:a.externalId,isDS:d("WADualSendMsgUtils").isDualSendJid(b),isFirstMsg:!!e,openMessageOtid:c,openMessageParticipantCount:f,participantCount:g,threadJid:b,threadType:h,ts:a.ts,type_:a.type}}function J(a,b){return{event:b,externalIds:a}}function K(a,b,c){return{senderId:d("WAJids").extractUserId(b),state:c,threadId:a}}function L(a,b){return{fbid:d("WAJids").extractUserId(b.contactJid),relationship:(b=b.relationship)!=null?b:d("MAWDbContact").NON_CONTACT,threadId:a}}function M(a,b,c,d,e){return{actionType:e,echoDocument:d,messageId:a,sortOrderMs:c,threadId:b}}function N(a,b,c,d,e,f){return{actionType:f,echoDocument:e,folderType:b,threadId:a,transportKey:c,ts:d}}function O(a,b,c,d,e){return{deliveryObjectId:a,mediaType:b,messageId:c,productType:d,threadId:e}}function P(a,b,c,d,e,f,g){return{backupEntFbid:b,deliveryObjectId:a,mediaType:g,messageId:d,productType:f,sortOrder:c,threadId:e}}function Q(a,b,c){return{numMessages:a,oldestTs:c,threadJid:b}}Object.keys(d("MAWBridgeTypes.re")).forEach(function(a){if(a==="default"||a==="__esModule")return;g[a]=d("MAWBridgeTypes.re")[a]});g.createBridgeThread=a;g.createBridgeParticipant=b;g.createBridgeRemovedParticipant=e;g.createBridgeUpdateE2EEMetadataParticipants=f;g.createBridgeMsg=l;g.createBridgeDeletedMessage=m;g.createBridgeDeleteMessages=n;g.createBridgeMediaExpired=o;g.createBridgeXMAShareExpired=p;g.createBridgeXMAShareTombstoned=q;g.createBridgeMsgsStartCountdown=r;g.createBridgeMsgClearCountdown=s;g.createBridgeMedia=t;g.createBridgeXMA=v;g.createBridgeMediaRange=w;g.createBridgeReceivedReceipt=x;g.createBridgeUpdatedThread=y;g.createBridgeUpdatedGroupInfo=z;g.createBridgeBumpedThread=A;g.createBridgeThreadTimestampsUpdated=B;g.createBridgeMsgsLoadedInfo=C;g.createBridgeUpsertReaction=D;g.createBridgeDeleteReaction=E;g.createBridgeGroupInfo=F;g.createBridgeGroupInvite=G;g.createBridgeContact=H;g.createBridgeStartTraceData=I;g.createBridgeUpdateTraceData=J;g.createBridgeReceivedChatState=K;g.createBridgeOneToOneMessageRequestLoadedData=L;g.createBridgeUploadMessage=M;g.createBridgeUploadThread=N;g.createBridgeUploadAttachment=O;g.createBridgeResignAttachmentCDNUrl=P;g.createBridgeRestoreMessageBatch=Q}),98);
__d("ZenonCallsContext",["ZenonCallSDK","err","immutable","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({callMediaTypes:c("immutable").Map(),calls:c("immutable").Map(),callSDK:new(c("ZenonCallSDK"))({}),callTimers:c("immutable").Map(),currentClientCallId:"0",e2eeModel:null,endCallHooks:new Set(),isE2eeMandated:!1,setCurrentClientCallId:function(){throw c("err")("setCurrentClientCallId is not implemented!")},setE2eeModel:function(){throw c("err")("setE2eeModel is not implemented!")}});e=b;g["default"]=e}),98);
__d("ZenonDataMessageTopics",[],(function(a,b,c,d,e,f){"use strict";a="rtc_av_escalation_decline";f.AV_ESCALATION_DECLINE_DATA_MESSAGE_TOPIC=a}),66);
__d("ZenonRemoteVideoRenderingEnabledAtom",["Recoil"],(function(a,b,c,d,e,f,g){"use strict";a=d("Recoil").atom({"default":!0,key:"ZenonCallsRecoil_ZenonRemoteVideoRenderingEnabledAtom"});g["default"]=a}),98);
__d("ZenonRemoteVideoRenderingEnabledSelector",["Recoil","ZenonRemoteVideoRenderingEnabledAtom"],(function(a,b,c,d,e,f,g){"use strict";a=d("Recoil").selector({get:function(a){a=a.get;return a(c("ZenonRemoteVideoRenderingEnabledAtom"))},key:"ZenonVideoEscalationRecoil_ZenonRemoteVideoRenderingEnabledSelector"});g["default"]=a}),98);
__d("ZenonThreadContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(null);c=b;g["default"]=c}),98);
__d("ZenonThreadType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({OneToOne:"ONE_TO_ONE",Group:"GROUP",Other:"OTHER"});c=a;f["default"]=c}),66);
__d("ZenonThreadHooks",["MercuryIDs","ZenonThreadContext","ZenonThreadType","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.useContext,j=h.useDebugValue,k=h.useMemo;function a(){var a=i(c("ZenonThreadContext"));a=a?a.id:null;j(a);return a}function b(){var a=i(c("ZenonThreadContext"));a=a?a.participants:[];j(a);return a}function e(){var a=i(c("ZenonThreadContext")),b=(a=a==null?void 0:(a=a.mercuryThread)==null?void 0:a.participants)!=null?a:null;a=k(function(){return b?b.map(function(a){return d("MercuryIDs").getUserIDFromParticipantID(a)}).filter(Boolean):[]},[b]);j(a);return a}function f(){var a=i(c("ZenonThreadContext"));a=a?a.imageUrl:null;j(a);return a}function l(){var a=i(c("ZenonThreadContext"));a=(a=a==null?void 0:a.type)!=null?a:c("ZenonThreadType").Other;j(a);return a}function m(){var a=i(c("ZenonThreadContext"));a=a?a.name:null;j(a);return a}function n(){var a=i(c("ZenonThreadContext"));a=a?a.hasOngoingCall:null;j(a);return a}function o(){var a=i(c("ZenonThreadContext"));a=a?a.mercuryThread:null;j(a);return a}g.useThreadFBID=a;g.useThreadAndCallParticipants=b;g.useThreadParticipants=e;g.useThreadImage=f;g.useThreadType=l;g.useThreadName=m;g.useOngoingCall=n;g.useMercuryThread=o}),98);
__d("ZenonCallsHooks",["FBLogger","Recoil","UserAgent","ZenonActorHooks","ZenonCallsContext","ZenonCallsModelTypes","ZenonDataMessageTopics","ZenonNetworkQualityMonitor","ZenonRemoteVideoRenderingEnabledSelector","ZenonScreenSharingAvailabilityType","ZenonThreadHooks","ZenonUsers","ZenonUsersHooks","immutable","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useContext,j=b.useDebugValue,k=b.useEffect,l=b.useMemo,m=b.useRef,n=b.useState,o={useAddLocalTrack:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){return b.addLocalTrack(d,a)},[b,d])},useApproveParticipants:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.approveParticipants(d,a)},[b,d])},useAudioSharingRemoteUsersCount:function(){var a=o.useConnectedRemoteUsersIDs(),b=q(),c=0;b&&a.forEach(function(a){a=b.participants.get(a);if(a){a=a.trackIDs.map(function(a){return b.mediaTracks.get(a).contentType});a.includes("screen_audio")&&(c+=1)}});return c},useCallConnectedTime:function(){var a=i(c("ZenonCallsContext")),b=a.callTimers;a=a.currentClientCallId;a=(b=b.get(a))!=null?b:null;j(a);return a},useCallParticipant:function(a){var b=null,c=s();if(c){b=(c=c.get(a))!=null?c:null}j(b);return b},useCallParticipants:function(){var a=s();return(a=a)!=null?a:c("immutable").Map()},useCallParticipantsIDs:function(){var a=s(),b=l(function(){return a===null?[]:Array.from(a.keys()).sort()},[a]);j(b);return b},useCallSpecificState:function(a){if(typeof a==="function")throw c("unrecoverableViolation")("Functional state types will break useCallSpecificState!","rtc_www");var b=i(c("ZenonCallsContext")),d=b.currentClientCallId;b=n(function(){return c("immutable").Map([[d,a]])});var e=b[0],f=b[1];b=h(function(b){typeof b==="function"?f(function(c){return c.set(d,b(c.get(d,a)))}):f(e.set(d,b))},[d,a,e]);k(function(){e.has(d)||f(e.set(d,a))},[d,a,e]);return[e.get(d,a),b]},useCallState:function(){var a=q();a=a?a.callState:d("ZenonCallsModelTypes").ZenonCallState.New;j(a);return a},useCanAddParticipants:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;b=(a=(b=b.get(a))==null?void 0:b.features.canAddParticipants)!=null?a:!1;j(b);return b},useCanReplaceLocalStreams:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;b=(a=(b=b.get(a))==null?void 0:b.features.canReplaceLocalStreams)!=null?a:!1;j(b);return b},useCollisionContext:function(){var a=q();a=(a=a==null?void 0:a.collisionContext)!=null?a:null;j(a);return a},useConnectedCallParticipantsIDs:function(){var a=s(),b=l(function(){if(a!==null&&a.size>0){var b=a.filter(function(a){a=a.state;return a===d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected});return Array.from(b.keys()).sort()}return[]},[a]);j(b);return b},useConnectedRemoteUserCount:function(){var a=d("ZenonActorHooks").useZenonActor(),b=a[0],c=s();a=l(function(){return c===null?0:c.filter(function(a){var c=a.id;a=a.state;return c!==b&&a===d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}).size},[b,c]);j(a);return a},useConnectedRemoteUsers:function(){var a=d("ZenonActorHooks").useZenonActor(),b=a[0],e=s();a=l(function(){return e!==null&&e.size>0?e.filter(function(a){var c=a.id;a=a.state;return c!==b&&a===d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected}):c("immutable").Map()},[b,e]);j(a);return a},useConnectedRemoteUsersIDs:function(){var a=d("ZenonActorHooks").useZenonActor(),b=a[0],c=s();a=l(function(){if(c!==null&&c.size>0){var a=c.filter(function(a){var c=a.id;a=a.state;return c!==b&&a===d("ZenonCallsModelTypes").ZenonCallParticipantState.Connected});return Array.from(a.keys()).sort()}return[]},[b,c]);j(a);return a},useCoplayOutputState:function(){var a=q();if(a){a=(a=a.stateSyncOutputStates.get("coplay"))==null?void 0:a.data;return{eligibleParticipants:(a==null?void 0:a.eligibleParticipants)||[],matchState:(a==null?void 0:a.matchState)||null}}return null},useCurrentParticipant:function(){var a=d("ZenonActorHooks").useZenonActor();a=a[0];var b=s();return(b=b==null?void 0:b.get(a))!=null?b:null},useDataMessageSubscription:function(a,b){var e=i(c("ZenonCallsContext")),f=e.callSDK,g=e.currentClientCallId,h=o.useCallState();k(function(){h===d("ZenonCallsModelTypes").ZenonCallState.Connected&&f.createDataMessageSubscription(g,a,b);return function(){f.removeDataMessageSubscription(g,a,b)}},[f,h,g,a,b])},useDeclineVideoEscalation:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,e=a.currentClientCallId,f=o.useConnectedRemoteUsersIDs();return h(function(){b.sendGenericDataMessage(e,d("ZenonDataMessageTopics").AV_ESCALATION_DECLINE_DATA_MESSAGE_TOPIC,"",f,[])},[b,e,f])},useDenyParticipants:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.denyParticipants(d,a)},[b,d])},useDominantSpeakerID_DEPRECATED:function(){var a=q();a=(a=a==null?void 0:a.features.dominantSpeaker)!=null?a:null;j(a);return a},useEndCall:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId,e=a.endCallHooks;return h(function(a,c){b.endCall(d,a,c),e.forEach(function(b){return b(a,c)})},[b,d,e])},useEndCallReason:function(){var a=q();a=(a=a==null?void 0:a.endCallReason)!=null?a:null;j(a);return a},useGetDebugInfo:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK;a=a.currentClientCallId;var d=b.getMediaMode(a),e=b.getSdpFormat(a),f=b.getSignalingProtocol(a);b=b.getSecureFrameManagerState(a).e2eeNegotiationState;a={e2eeNegotiationState:b,mediaMode:d,sdpFormat:e,signalingProtocol:f};return a},useGetE2eeDebugStats:function(){var b=m(!0),d=n(null),e=d[0],f=d[1];d=i(c("ZenonCallsContext"));var g=d.callSDK,h=d.currentClientCallId,j=function(){var a=g.getSecureFrameManagerState(h);a=a.e2eeDebugStats;f(a?babelHelpers["extends"]({},a):null)};k(function(){b.current&&(b.current=!1,j());var c=a.setInterval(j,1e3);return function(){return a.clearInterval(c)}});return e},useGetMediaMode:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK;a=a.currentClientCallId;return b.getMediaMode(a)},useGetScreenAudio:function(){var a;a=(a=r().find(function(a){return a.contentType==="screen_audio"}))!=null?a:null;j(a);return a},useGetSdpFormat:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK;a=a.currentClientCallId;return b.getSdpFormat(a)},useGetSecureFrameManagerState:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK;a=a.currentClientCallId;return b.getSecureFrameManagerState(a)},useGetSignalingProtocol:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK;a=a.currentClientCallId;return b.getSignalingProtocol(a)},useGroupEscalationStatus:function(){var a=q();a=(a=a==null?void 0:a.groupEscalationStatus)!=null?a:null;j(a);return a},useHasParentApprovedParticipants:function(){var a=o.useConnectedRemoteUsersIDs();a=d("ZenonUsersHooks").useZenonUsers(a);return a.some(function(a){return a.userType===d("ZenonUsers").ZenonUserType.ParentApprovedUser})},useIsAudioCall:function(){var a=i(c("ZenonCallsContext")),b=a.callMediaTypes;a=a.currentClientCallId;b=b.get(a,"audio");j(b);return b==="audio"},useIsGuest:function(a){var b=o.useCallParticipant(a),c=d("ZenonThreadHooks").useThreadParticipants();return l(function(){return(b==null?void 0:b.participantType)===d("ZenonCallsModelTypes").ZenonCallParticipantType.Guest||!c.includes(a)},[b,a,c])},useLiveMediaTrack:function(a,b){var e=d("Recoil").useRecoilValue(c("ZenonRemoteVideoRenderingEnabledSelector")),f=q(),g=null;if(f&&(b!=="video"||e)){e=f.participants.get(a);if(e){g=(a=e.trackIDs.map(function(a){return f.mediaTracks.get(a)}).find(function(a){return a.contentType===b&&a.enabled&&a.webrtcTrack.readyState==="live"}))!=null?a:null}}j(g);return g},useLiveMediaTracks_DEBUG:function(a,b){var d=q(),e=c("immutable").Set();if(d){a=d.participants.get(a);if(a){a=a.trackIDs.map(function(a){return d.mediaTracks.get(a)}).filter(function(a){return a.contentType===b&&a.enabled&&a.webrtcTrack.readyState==="live"});e=a}}j(e);return e},useLiveScreenOrVideoTrack:function(a){var b=o.useLiveMediaTrack(a,"video"),c=o.useSupportMultipleStreams();a=o.useLiveMediaTrack(a,"screen");if(c){b=(c=a)!=null?c:b}return b},useLocalAudio:function(){var a;a=(a=r().find(function(a){return a.contentType==="audio"}))!=null?a:null;j(a);return a},useLocalScreen:function(){var a;a=(a=r().find(function(a){return a.contentType==="screen"}))!=null?a:null;j(a);return a},useLocalVideo:function(){var a;a=(a=r().find(function(a){return a.contentType==="video"}))!=null?a:null;j(a);return a},useMediaTrack_DEBUG:function(a,b){var c=q(),d=null;if(c){a=c.participants.get(a);if(a){d=(a=a.trackIDs.map(function(a){return c.mediaTracks.get(a)}).find(function(a){return a.contentType===b}))!=null?a:null}}j(d);return d},useMuteTrack:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.muteTrack(d,a)},[b,d])},useOnCallEnded:function(){var a=i(c("ZenonCallsContext")),b=a.endCallHooks;return h(function(a){b.add(a)},[b])},usePoorConnectionStatus:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;a=((b=b.get(a))==null?void 0:b.features.networkStatus.local)===d("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Poor;j(a);return a},usePreContactingRemoteUsersIDs:function(){var a=d("ZenonActorHooks").useZenonActor(),b=a[0],c=s();a=l(function(){if(c!==null&&c.size>0){var a=c.filter(function(a){var c=a.id;a=a.state;return c!==b&&a===d("ZenonCallsModelTypes").ZenonCallParticipantState.Precontacting});return Array.from(a.keys()).sort()}return[]},[b,c]);j(a);return a},useRemoteScreen:function(){var a=q(),b=o.useSupportMultipleStreams(),c=null;if(b){c=a===null?null:(b=a.mediaTracks.find(function(a){return a.remote===!0&&a.contentType==="screen"&&a.enabled}))!=null?b:null}j(c);return c},useRemoteScreenSharingUserIDs_DEPRECATED:function(){var a=q();return(a=a==null?void 0:a.remoteScreenSharingUserIDs)!=null?a:c("immutable").OrderedSet()},useRemoteScreenTracks:function(){var a=o.useIsAudioCall(),b=q(),c=o.useSupportMultipleStreams();a=!a&&b!==null&&c?b.mediaTracks.filter(function(a){return a.remote===!0&&a.contentType==="screen"&&a.enabled}).toArray():[];j(a);return a},useRemoteTracksNetworkQualityMap:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;a=(b=b.get(a))==null?void 0:b.features.networkStatus.remote;j(a);return a},useRemoteVideoTracks:function(){var a=d("Recoil").useRecoilValue(c("ZenonRemoteVideoRenderingEnabledSelector")),b=o.useIsAudioCall(),e=q();a=a&&!b&&e!==null?e.mediaTracks.filter(function(a){return a.remote===!0&&a.contentType==="video"&&a.enabled}).toArray():[];j(a);return a},useRemoveAllGuestParticipants:function(){var a=d("ZenonActorHooks").useZenonActor(),b=a[0],c=o.useCallParticipantsIDs(),e=o.useRemoveParticipants(),f=l(function(){return c.filter(function(a){return b!==a})},[b,c]);return h(function(){e(f)},[f,e])},useRemoveLocalTrack:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){return b.removeLocalTrack(d,a)},[b,d])},useRemoveParticipants:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.removeParticipants(d,a)},[b,d])},useReplaceLocalTrack:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a,c,e){return b.replaceLocalTrack(d,a,c,e)},[b,d])},useReplaceScreenTrack:function(){var a=o.useAddLocalTrack(),b=o.useReplaceLocalTrack(),c=o.useLocalVideo(),d=o.useLocalScreen(),e=o.useSupportMultipleStreams();return h(function(f){c==null||e?d==null?a(f):b(d.trackId,f):b(c.trackId,f)},[a,e,d,c,b])},useResponseSubCode:function(){var a=q();return(a=a==null?void 0:a.responseSubCode)!=null?a:null},useRingParticipants:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.ringParticipants(d,a)},[b,d])},useRtpReceivers_I_KNOW_WHAT_I_AM_DOING:function(){var a=q();a=(a=a==null?void 0:a.rtpReceivers_I_KNOW_WHAT_I_AM_DOING.toArray())!=null?a:[];p("useRtpReceivers");j(a);return a},useRtpSenders_I_KNOW_WHAT_I_AM_DOING:function(){var a=q();a=(a=a==null?void 0:a.rtpSenders_I_KNOW_WHAT_I_AM_DOING.toArray())!=null?a:[];p("useRtpSenders");j(a);return a},useScreenSharingAvailability:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;b=(a=(b=b.get(a))==null?void 0:b.features.screenSharingAvailability)!=null?a:c("ZenonScreenSharingAvailabilityType").Unknown;a=o.useIsAudioCall();(c("UserAgent").isBrowser("Safari")&&a||c("UserAgent").isBrowser("Oculus Browser"))&&(b=c("ZenonScreenSharingAvailabilityType").Unknown);j(b);return b},useServerInfoData:function(){var a=o.useCollisionContext();return(a=a==null?void 0:a.serverInfoData)!=null?a:null},useSubscribeToRemoteVideo:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a,c){b.subscribeToRemoteVideo(d,a,c)},[b,d])},useSupportMultipleStreams:function(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;b=(a=(b=b.get(a))==null?void 0:b.features.supportMultipleStreams)!=null?a:!1;j(b);return b},useUnmuteTrack:function(){var a=i(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return h(function(a){b.unmuteTrack(d,a)},[b,d])},useVideoEscalationStatus:function(){var a=q();a=(a=a==null?void 0:a.videoEscalationStatus)!=null?a:null;j(a);return a},useIsTwoPersonCall:function(){var a=o.useCallParticipantsIDs(),b=d("ZenonThreadHooks").useThreadName();return a.length<=2&&b==null},useIsPendingApproval:function(){var a=o.useCallState();return a===d("ZenonCallsModelTypes").ZenonCallState.PendingApproval}};function p(a){k(function(){c("FBLogger")("ZenonCallsHooks").event(a)},[a])}function q(){var a=i(c("ZenonCallsContext")),b=a.calls;a=a.currentClientCallId;a=(b=b.get(a))!=null?b:null;j(a);return a}function r(){var a=q();a=a==null?void 0:a.mediaTracks;return!a?[]:a.filter(function(a){return a.remote===!1}).toArray()}function s(){var a=q();a=(a=a==null?void 0:a.participants)!=null?a:null;j(a);return a}e=o;g["default"]=e}),98);
__d("ZenonConnectionStateTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({KEEP_ALL_PARTICIPANTS:0,REMOVE_DUPLICATED:1,DISCONNECT_DUPLICATED:2});f.ZenonDuplicatedParticipantsProcessingMode=a}),66);
__d("ZenonCallsModelEmitter",["EventEmitter","FBLogger","ZenonActorHooks","ZenonCall","ZenonCallParticipant","ZenonCallsModelTypes","ZenonConnectionStateTypes","ZenonDismissReason","ZenonParticipantState","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=100;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$ZenonCallsModelEmitter1=c("immutable").Map(),d.$ZenonCallsModelEmitter2=null,d.$ZenonCallsModelEmitter3=null,b)||babelHelpers.assertThisInitialized(d)}var e=b.prototype;e.emitCallsModel=function(a,b){var d=this.$ZenonCallsModelEmitter1.get(a);b=new(c("ZenonCall"))({callState:this.$ZenonCallsModelEmitter4(b),clientCallId:a,collisionContext:b.collisionContext,endCallReason:this.$ZenonCallsModelEmitter5(b),features:b.currentUserCapabilities,groupEscalationStatus:this.$ZenonCallsModelEmitter6(b),mediaTracks:this.$ZenonCallsModelEmitter7(b),participants:this.$ZenonCallsModelEmitter8(b),rtpReceivers_I_KNOW_WHAT_I_AM_DOING:this.$ZenonCallsModelEmitter9(b),rtpSenders_I_KNOW_WHAT_I_AM_DOING:this.$ZenonCallsModelEmitter10(b),selfParticipantID:b.selfParticipantID,stateSyncInputStates:this.$ZenonCallsModelEmitter11(b),stateSyncOutputStates:this.$ZenonCallsModelEmitter12(b),videoEscalationStatus:this.$ZenonCallsModelEmitter13(b)});var e=!1;try{var f=JSON.stringify(d),g=JSON.stringify(b);d=!(d==null?void 0:d.mediaTracks.equals(b.mediaTracks));(f!==g||d)&&(e=!0)}catch(a){c("FBLogger")("rtc_www").catching(a).warn("[ZP] Error while diffing callsModel"),e=!0}e&&(this.$ZenonCallsModelEmitter1=this.$ZenonCallsModelEmitter1.set(a,b),this.$ZenonCallsModelEmitter14(this.$ZenonCallsModelEmitter1))};e.$ZenonCallsModelEmitter14=function(a){var b=this;this.$ZenonCallsModelEmitter3!=null?this.$ZenonCallsModelEmitter2=a:(this.emitCallsModelDelegate(a),this.$ZenonCallsModelEmitter3=window.setTimeout(function(){b.$ZenonCallsModelEmitter2!=null&&(b.emitCallsModelDelegate(b.$ZenonCallsModelEmitter2),b.$ZenonCallsModelEmitter2=null),window.clearTimeout(b.$ZenonCallsModelEmitter3),b.$ZenonCallsModelEmitter3=null},h))};e.emitCallsModelDelegate=function(a){this.emit("callsModelUpdate",a)};e.$ZenonCallsModelEmitter4=function(a){return i[a.connectionState]};e.$ZenonCallsModelEmitter5=function(a){return a.dismissReason!=null?d("ZenonDismissReason").dismissToEndCallReason(a.dismissReason):null};e.$ZenonCallsModelEmitter6=function(a){return null};e.$ZenonCallsModelEmitter7=function(a){return c("immutable").Map(a.getTracks())};e.$ZenonCallsModelEmitter8=function(a){var b=a.getUserToTracksMap(),e=a.getTracks(),f=a.getExistingParticipantIds(),g=a.actorRepresentatives,h=this.$ZenonCallsModelEmitter15(a),i=c("immutable").Map().withMutations(function(i){h.forEach(function(h,j){var k;i.set(j,new(c("ZenonCallParticipant"))({id:j,isExistingParticipant:f.has(j),isVideoSubscribed:a.getIsUserVideoSubscribed(j),participantType:d("ZenonCallsModelTypes").ZenonCallParticipantType.Messenger,representativeID:(k=g.get(j))!=null?k:null,state:d("ZenonParticipantState").toCallParticipantState(h),trackIDs:c("immutable").Set((k=b.get(j))==null?void 0:k.keys()).filter(function(a){return e.has(a)}),userCapabilities:a.getUserCapabilities(j)}))})});return this.$ZenonCallsModelEmitter16(i,a)};e.$ZenonCallsModelEmitter16=function(a,b){var e=a.get(b.selfParticipantID);if(!e)return a;e=new(c("ZenonCallParticipant"))(babelHelpers["extends"]({},e.toObject(),{id:d("ZenonActorHooks").ZenonActor.getID()}));return a["delete"](b.selfParticipantID).set(e.id,e)};e.$ZenonCallsModelEmitter11=function(a){return c("immutable").Map(a.getStateSyncInputs())};e.$ZenonCallsModelEmitter12=function(a){return c("immutable").Map(a.getStateSyncOutputs())};e.$ZenonCallsModelEmitter13=function(a){return null};e.$ZenonCallsModelEmitter10=function(a){return c("immutable").Set(a.getRtpSenders_I_KNOW_WHAT_I_AM_DOING())};e.$ZenonCallsModelEmitter9=function(a){return c("immutable").Set(a.getRtpReceivers_I_KNOW_WHAT_I_AM_DOING())};e.getCallsModel=function(){return this.$ZenonCallsModelEmitter1};e.$ZenonCallsModelEmitter17=function(a){var b=a.actorRepresentatives;a=a.getConsolidatedParticipantStates();var c=new Map();a.forEach(function(a,e){e=(e=b.get(e))!=null?e:null;if(e!==null&&a<=d("ZenonParticipantState").ZenonParticipantState.CONNECTED){var f;f=(f=c.get(e))!=null?f:d("ZenonParticipantState").ZenonParticipantState.UNKNOWN;c.set(e,(e=d("ZenonParticipantState").ZenonParticipantState.cast(Math.max(f,a)))!=null?e:d("ZenonParticipantState").ZenonParticipantState.UNKNOWN)}});return c};e.$ZenonCallsModelEmitter15=function(a){var b=a.getConsolidatedParticipantStates(),c=a.duplicatedParticipantsProcessingMode;if(c===d("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.KEEP_ALL_PARTICIPANTS)return b;var e=this.$ZenonCallsModelEmitter17(a),f=a.actorRepresentatives,g=new Map();b.forEach(function(a,b){var h;h=(h=e.get(b))!=null?h:null;if(h!==null)h!==d("ZenonParticipantState").ZenonParticipantState.CONNECTING&&h!==d("ZenonParticipantState").ZenonParticipantState.CONNECTED?g.set(b,h):c===d("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.DISCONNECT_DUPLICATED&&g.set(b,d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED);else{h=(h=f.get(b))!=null?h:null;(h===null||a===d("ZenonParticipantState").ZenonParticipantState.CONNECTING||a===d("ZenonParticipantState").ZenonParticipantState.CONNECTED)&&g.set(b,a)}});return g};return b}(c("EventEmitter"));b=new a();var i=Object.freeze({clientInitiatedRenegotiation:d("ZenonCallsModelTypes").ZenonCallState.Connected,creatingSdp:d("ZenonCallsModelTypes").ZenonCallState.Connecting,init:d("ZenonCallsModelTypes").ZenonCallState.New,peerConnectionRestarting:d("ZenonCallsModelTypes").ZenonCallState.Connected,pendingApproval:d("ZenonCallsModelTypes").ZenonCallState.PendingApproval,sdpNegotiated:d("ZenonCallsModelTypes").ZenonCallState.Connected,sdpSet:d("ZenonCallsModelTypes").ZenonCallState.Connecting,serverInitiatedRenegotiating:d("ZenonCallsModelTypes").ZenonCallState.Connected,terminated:d("ZenonCallsModelTypes").ZenonCallState.Terminated,waitingForIncoming:d("ZenonCallsModelTypes").ZenonCallState.New});g.CALLS_MODEL_EMITTER_DELAY_MS=h;g.CallsModelEmitterInstance=b;g.CONNECTION_STATE_TO_CALL_STATE_MAP=i}),98);
__d("ZenonCapabilities",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;a={AddParticipantEnabled:(b=a.addParticipantEnabled)!=null?b:!1,GROUP_COWATCH:(b=a.cowatchGroupEnabled)!=null?b:!1,MultipleVideoStreamsAllowed:(b=a.multipleVideoStreamsAllowed)!=null?b:!1,MW_AV_ESCALATION:(b=a.multiwayVideoEscalation)!=null?b:!1,cowatch:(b=a.cowatchEnabled)!=null?b:!1};return JSON.stringify(a)}f.capabilitiesToString=a}),66);
__d("ZenonConnectionInitState",["ZenonCapabilities","ZenonParticipantState"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c;if(b.type!=="createConnection")return;var e=b.payload.direction==="outgoing";b=b.payload;var f=b.appMessages,g=b.dataChannels,h=b.initialSyncStates,i=b.isE2eeMandated,j=b.isSecondaryJoinRole,k=b.mwRingRequest,l=b.serializedInitialSyncStates,m=b.tracks;b=b.usersToRing;var n=e?b:k==null?void 0:(c=k.jsonPayload.body.ringRequest)==null?void 0:c.otherParticipants;a.updateConnectionModel(function(b){n==null?void 0:n.forEach(function(a){b.updateParticipantState(a,d("ZenonParticipantState").ZenonParticipantState.CONTACTING)}),b.registerTrackFetcher(function(){return a.peerConnectionManager.getTracks()}),b.registerRtpSendersFetcher(function(){return a.peerConnectionManager.getRtpSenders()}),b.registerRtpReceiversFetcher(function(){return a.peerConnectionManager.getRtpReceivers()}),m==null?void 0:m.forEach(function(a){b.addLocalTrackToTrackMap({enabled:a.enabled,participantID:b.selfParticipantID,trackID:a.trackId,type:a.contentType})})});e&&a.signalingClient.sendInvite(b,f);c=a.getConnectionModel();b=c.currentUserCapabilities;f=c.selfParticipantID;c={addParticipantEnabled:b.get("canAddParticipants"),cowatchEnabled:b.get("cowatchEnabled"),cowatchGroupEnabled:b.get("cowatchGroupEnabled"),multipleVideoStreamsAllowed:b.get("supportMultipleStreams"),multiwayVideoEscalation:b.get("multiwayVideoEscalation")};b=d("ZenonCapabilities").capabilitiesToString(c);a.signalingClient.sendClientInfo(new Map([[f,b]]),h,l,j,i);c=a.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode();m&&a.peerConnectionManager.addLocalTracks(m,c,e);var o=c==="sfu"?!1:!e,p=c==="sfu"||c==="p2p"&&((f=a.signalingClient.getSignalingModel().getRoomInfo().context)==null?void 0:f.peerID)==null;g&&g.forEach(function(b){a.sctpPeerConnectionManager!=null?a.sctpPeerConnectionManager.createDataChannel(b,o):p&&a.peerConnectionManager.createDataChannel(b,o)});if(e){(b=a.sctpPeerConnectionManager)==null?void 0:b.createOffer({})}a.peerConnectionManager.getSupportsSimulcastOverSignaling()&&a.peerConnectionManager.createDataMessageSubscription("signalingVideoUploadUpdate",function(b){return a.peerConnectionManager.onSimulcastSignalingDataMessage(b)});(e||(k==null?void 0:(h=k.jsonPayload.body.ringRequest)==null?void 0:(l=h.offer)==null?void 0:l.sdpString)==null)&&a.peerConnectionManager.applyLocalSdp()}g.onCreateConnection=a}),98);
__d("ZenonConnectionPeerConnectionRestartingState",["RpWebPeerConnectionEndDelay","ZenonDebugLogger","ZenonMWMessageTypes","ZenonParticipantState","gkx","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type!=="sdpReceived")return;b=b.payload;var c=b.mediaStates,d=b.messageID,e=b.onProcessed,f=b.renegotiationOffer,g=b.sdp;b=b.source;a.updateConnectionModel(function(a){a.updateTrackMapFromMediaStates(c.tracks)});a.secondaryPeerConnectionManager.applyRemoteSdp(g,c,b,f,e,d)}function b(a,b){if(b.type!=="connectionEstablished"||b.payload.peerConnectionRole!=="secondary")return{};var e=a.peerConnectionManager;b=a.sctpPeerConnectionManager;var f=a.secondaryPeerConnectionManager,g=a.updateConnectionModel;f.renegotiateNullSenderTransport();f.setTrackListenersFromManager(e);f.swapPeerConnectionEventHandlers(e);a.sctpHelper.setupSctpChannelApi(a.signalingClient.getSignalingModel().getSignalingID(),(b=b)!=null?b:f);a.signalingClient.sendClientEvent(d("ZenonMWMessageTypes").ZenonMWClientEventType.MEDIA_CONNECTED);g(function(a){a.registerTrackFetcher(function(){return f.getTracks()}),a.registerRtpSendersFetcher(function(){return f.getRtpSenders()}),a.registerRtpReceiversFetcher(function(){return f.getRtpReceivers()}),a.updateParticipantState(a.selfParticipantID,d("ZenonParticipantState").ZenonParticipantState.CONNECTED)});a.logEvent({name:"callConnected"});a.logEvent({name:"connectionReady"});c("gkx")("2099")?c("setTimeout")(function(){e.end(!1)},c("RpWebPeerConnectionEndDelay").DELAY):e.end(!1);b=a.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode();b==="sfu"?(a.logEvent({name:"callEscalated"}),c("ZenonDebugLogger").getInstance().logConsole("secondaryConnectionEstablished: SFU escalation complete")):c("ZenonDebugLogger").getInstance().logConsole("secondaryConnectionEstablished: De-escalation complete");return{activePeerConnection:"primary",peerConnectionManager:f,secondaryPeerConnectionManager:e}}g.onSdpReceived=a;g.onSecondaryConnectionEstablished=b}),98);
__d("ZenonConnectionSMGuards",["ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonScreenShare"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type!=="addLocalTracks"||a.getConnectionModel().currentUserCapabilities.supportMultipleStreams){c("ZenonDebugLogger").getInstance().logGuardsResults("addScreenShareTrackWithReplaceGuard",!1);return!1}b=b.payload.tracks;if(!d("ZenonScreenShare").isScreenSharingTrack(b)){c("ZenonDebugLogger").getInstance().logGuardsResults("addScreenShareTrackWithReplaceGuard",!1);return!1}b=Array.from(a.getConnectionModel().getTracks().values()).some(function(a){return!a.remote&&(a.contentType==="video"||a.contentType==="screen")});c("ZenonDebugLogger").getInstance().logGuardsResults("addScreenShareTrackWithReplaceGuard",b);return b}function b(a,b){a=b.type==="createConnection"&&b.payload.direction==="incoming";c("ZenonDebugLogger").getInstance().logGuardsResults("incomingConnectionGuard",a);return a}function e(a,b){a=b.type==="createConnection"&&b.payload.direction==="outgoing";c("ZenonDebugLogger").getInstance().logGuardsResults("outgoingConnectionGuard",a);return a}function f(a,b){if(b.type!=="removeLocalTrack"||a.getConnectionModel().currentUserCapabilities.supportMultipleStreams){c("ZenonDebugLogger").getInstance().logGuardsResults("removeScreenShareTrackWithReplaceGuard",!1);return!1}b=b.payload.trackID;var e=a.getConnectionModel().getTracks().get(b);if(e==null||!d("ZenonScreenShare").isScreenSharingTrack([e])){c("ZenonDebugLogger").getInstance().logGuardsResults("removeScreenShareTrackWithReplaceGuard",!1);return!1}b=Array.from(a.getConnectionModel().getTracks().values()).some(function(a){return a.trackId!==e.trackId&&!a.remote&&(a.contentType==="video"||a.contentType==="screen")});c("ZenonDebugLogger").getInstance().logGuardsResults("removeScreenShareTrackWithReplaceGuard",b);return b}function h(a,b){a=b.type==="sdpReceived"&&b.payload.sdp.type==="answer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpAnswerReceiveGuard",a);return a}function i(a,b){a=b.type==="sdpReceived"&&b.payload.sdp.type==="pranswer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpPrAnswerReceiveGuard",a);return a}function j(a,b){a=b.type==="sdpReceived"&&b.payload.sdp.type==="offer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferReceiveGuard",a);return a}function k(a,b){a=b.type==="sdpReceived"&&(b.payload.sdp.type==="answer"||b.payload.sdp.type==="offer"&&b.payload.mediaPath===d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P);c("ZenonDebugLogger").getInstance().logGuardsResults("sdpAnswerOrP2POfferReceiveGuard",a);return a}function l(a,b){b=b.payload!=null&&b.payload.peerConnectionRole!=null&&b.payload.peerConnectionRole===a.activePeerConnection;c("ZenonDebugLogger").getInstance().logGuardsResults("activePeerConnectionGuard",b);return b}function m(a,b){a=b.payload!=null&&b.payload.peerConnectionRole!=null&&b.payload.peerConnectionRole==="secondary";c("ZenonDebugLogger").getInstance().logGuardsResults("secondaryPeerConnectionGuard",a);return a}function n(a,b){a=b.type==="mediaUpdateResponseReceived"&&b.payload.cancelNegotiations;c("ZenonDebugLogger").getInstance().logGuardsResults("cancelNegotiationsGuard",a);b.type==="mediaUpdateResponseReceived"&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] cancel negotiations called with: "+String(b.payload.cancelNegotiations)});return a}function o(a,b){return b.type==="answerReady"||b.type==="serverRenegotiationFinished"}g.addScreenShareTrackWithReplaceGuard=a;g.incomingConnectionGuard=b;g.outgoingConnectionGuard=e;g.removeScreenShareTrackWithReplaceGuard=f;g.sdpAnswerReceiveGuard=h;g.sdpPrAnswerReceiveGuard=i;g.sdpOfferReceiveGuard=j;g.sdpAnswerOrP2POfferReceiveGuard=k;g.activePeerConnectionGuard=l;g.secondaryPeerConnectionGuard=m;g.cancelNegotiationsGuard=n;g.delayTransitioningOutOfRenegotiatingGuard=o}),98);
__d("ZenonConnectionSdpNegotiatedState",["ZenonScreenShare"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type!=="addLocalTracks"&&b.type!=="initiateAddLocalTracks")return;var c=b.payload.tracks;a.peerConnectionManager.addLocalTracks(c,a.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode());a.peerConnectionManager.applyLocalSdp();a.updateConnectionModel(function(a){c.forEach(function(b){a.addLocalTrackToTrackMap({enabled:b.enabled,participantID:a.selfParticipantID,trackID:b.trackId,type:b.contentType})})})}function b(a,b){if(b.type!=="addLocalTracks")return;var c=b.payload.tracks;if(!d("ZenonScreenShare").isScreenSharingTrack(c))return;a.peerConnectionManager.addLocalTracks(c,a.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode());a.updateConnectionModel(function(a){c.forEach(function(b){a.addLocalTrackToTrackMap({enabled:b.enabled,participantID:a.selfParticipantID,trackID:b.trackId,type:b.contentType})})})}function c(a,b){if(b.type!=="initiatePeerConnectionRestarting")return{};var c=a.peerConnectionManager,d=a.secondaryPeerConnectionManager;d.restart();d.setLocalMediaStateVersion(c.getLocalMediaStateVersion());var e=a.signalingClient.getSignalingModel().getMediaModeManager().getMediaMode();d.addLocalTracks(Array.from(c.getTracks().values()).filter(function(a){return!a.remote}),e);var f=e==="sfu"?!1:b.payload.hasRemoteOffer;e==="sfu"&&c.getDataChannelLabels().forEach(function(a){d.createDataChannel(a,f)});a.secondaryPeerConnectionManager.getSupportsSimulcastOverSignaling()&&a.secondaryPeerConnectionManager.createDataMessageSubscription("signalingVideoUploadUpdate",function(b){return a.secondaryPeerConnectionManager.onSimulcastSignalingDataMessage(b)});b.payload.hasRemoteOffer||d.applyLocalSdp();return{activePeerConnection:"secondary"}}function e(a,b){if(b.type!=="removeLocalTrack"&&b.type!=="initiateRemoveLocalTrack")return;var c=b.payload.trackID;a.peerConnectionManager.removeLocalTrack(c);a.peerConnectionManager.applyLocalSdp();a.updateConnectionModel(function(a){a.removeLocalTrackFromTrackMap(c)})}function f(a,b){if(b.type!=="removeLocalTrack")return;var c=b.payload.trackID;a.peerConnectionManager.removeLocalTrack(c);a.updateConnectionModel(function(a){a.removeLocalTrackFromTrackMap(c)})}function h(a,b){if(b.type!=="replaceLocalTrack")return;b=b.payload;var c=b.replacementTrack,d=b.trackIDToReplace;a.peerConnectionManager.replaceLocalTrack(d,c);a.updateConnectionModel(function(a){a.removeLocalTrackFromTrackMap(d),a.addLocalTrackToTrackMap({enabled:c.enabled,participantID:a.selfParticipantID,trackID:c.trackId,type:c.contentType})})}g.onAddLocalTracks=a;g.onAddScreenShareLocalTrack=b;g.onInitiatePeerConnectionRestarting=c;g.onRemoveLocalTrack=e;g.onRemoveScreenShareLocalTrack=f;g.onReplaceLocalTrack=h}),98);
__d("ZenonConnectionSdpSetState",["ZenonMWMessageTypes","ZenonParticipantState"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type!=="connectionEstablished")return;a.signalingClient.sendClientEvent(d("ZenonMWMessageTypes").ZenonMWClientEventType.MEDIA_CONNECTED);a.updateConnectionModel(function(a){a.updateParticipantState(a.selfParticipantID,d("ZenonParticipantState").ZenonParticipantState.CONNECTED)});a.logEvent({name:"callConnected"});a.logEvent({name:"connectionReady"})}g.onConnectionEstablished=a}),98);
__d("ZenonConnectionSharedActions",["DateConsts","ZenonDismissReason","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonParticipantState","immutable","justknobx","performanceNow","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=1*d("DateConsts").MS_PER_SEC;function a(a,b){if(b.type!=="addParticipants")return;var c=!1,e=b.payload.usersToRing;a.updateConnectionModel(function(a){var b=a.getConsolidatedParticipantStates();e.forEach(function(e){J(e,b)||(a.updateParticipantState(e,d("ZenonParticipantState").ZenonParticipantState.CONTACTING),c=!0)})});c&&a.signalingClient.sendAddParticipantsMessage(e)}function b(a,b){if(b.type!=="answerReady")return;b=b.payload;var c=b.mediaStates;b=b.sdp;a.signalingClient.sendSdp(b,c)}function e(a,b){if(b.type!=="capabilitiesReceived")return;var c=b.payload.capabilities;a.updateConnectionModel(function(a){a.updateCurrentUserCapabilities(c)})}function f(a,b){if(b.type!=="clientInfoReceived")return;b=b.payload;var c=b.actorRepresentatives,d=b.userCapabilities;a.updateConnectionModel(function(a){a.updateAllParticipantsCapabilities(d)});a.updateConnectionModel(function(a){c.forEach(function(b,c){a.actorRepresentatives.set(c,b)})})}function i(a,b){if(b.type!=="connectionDestroyed"||b.payload.error===null)return;var e=d("ZenonDismissReason").mediaErrorToDismissReason(b.payload.error);a.updateConnectionModel(function(a){a.updateParticipantState(a.selfParticipantID,d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED),a.dismissReason=e});c("justknobx")._("467")&&a.signalingClient.sendDismiss(e);a.logEvent({name:"connectionDestroyed"});a.logEvent({endCallReason:e,endCallSubreason:b.payload.error?b.payload.error:"",isRemoteEnded:!1,name:"callEnded"})}function j(a,b){if(b.type!=="connectionDropped")return{};b=c("performanceNow")();a.updateConnectionModel(function(a){J(a.selfParticipantID,a.getConsolidatedParticipantStates())&&a.updateParticipantState(a.selfParticipantID,d("ZenonParticipantState").ZenonParticipantState.CONNECTING)});return{disconnectTime:b}}function k(a,b){if(b.type!=="createDataMessageSubscription")return{};var d=b.payload.dataChannelLabel;b=b.payload.messageHandler;var e=a.dataMessageSubscriptions.get(d,c("immutable").Set());a=a.dataMessageSubscriptions.set(d,e.add(b));return{dataMessageSubscriptions:a}}function l(a,b){if(b.type!=="dataMessageReceived")return;b=b.payload;var c=b.data;b=b.dataChannelLabel;a=a.dataMessageSubscriptions.get(b);a&&a.forEach(function(a){return a(c)})}function m(a,b){if(b.type!=="endConnection")return;var e=c("performanceNow")();b=b.payload;var f=b.dismissReason,g=b.dismissReasonSetByRemote,i=b.dismissSubreason;b=b.shouldInformPeer;a.updateConnectionModel(function(a){a.getConsolidatedParticipantStates().forEach(function(b,c){a.updateParticipantState(c,d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED)}),a.dismissReason=f});b&&a.signalingClient.sendDismiss(f);b=i;e-a.disconnectTime<h&&(b=b!=null?b.concat(", disconnect less than 1 second"):"disconnect less than 1 second");a.logEvent({endCallReason:f,endCallSubreason:b,isRemoteEnded:g,name:"callEnded"});a.peerConnectionManager.end(!0)}function n(a,b){if(b.type!=="forceEncodingEnabled")return;a.peerConnectionManager.forceEncodingEnabled(b.payload.enabled)}function o(a,b){var c;if(b.type!=="iceCandidateReady")return;b=b.payload.candidate;b={candidateSdpString:b.candidate,sdpMid:(c=b.sdpMid)!=null?c:"",sdpMLineIndex:(c=b.sdpMLineIndex)!=null?c:0};a.signalingClient.sendIceCandidate(b)}function p(a,b){if(b.type!=="iceCandidateReceived")return;b=b.payload;b={candidate:b.candidateSdpString,sdpMid:b.sdpMid,sdpMLineIndex:b.sdpMLineIndex};var c=a.activePeerConnection,d=a.peerConnectionManager;a=a.secondaryPeerConnectionManager;c=c==="primary"?d:a;c.applyRemoteIceCandidate(b)}function q(a,b){if(b.type!=="localMediaStateUpdateProcessing")return;b=b.payload;var c=b.enabled;b=b.trackID;c?a.peerConnectionManager.unmuteLocalTrack(b):a.peerConnectionManager.muteLocalTrack(b)}function r(a,b){if(b.type!=="localMediaStateUpdateReady")return;a.signalingClient.sendMediaUpdate(b.payload.mediaStates)}function s(a,b){if(b.type!=="mediaUpdateReceived")return;a.peerConnectionManager.applyMediaUpdate(b.payload.mediaStates)}function t(a,b){if(b.type!=="mediaUpdateResponseReceived")return;if(b.payload.responseStatusCode!==d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK){b.payload.cancelNegotiations&&a.peerConnectionManager.cancelPendingNegotiation();if(b.payload.responseSubCode===d("ZenonMWMessageTypes").ZenonMWResponseSubCode.REJECTING_CMU_WHEN_SMU_PENDING){a.peerConnectionManager.localMediaStateUpdateRetry((b=b.payload.retryAfter)!=null?b:0)}}else a.peerConnectionManager.clearRetryCount()}function u(a,b){if(b.type==="addLocalTracks"){var c={payload:b.payload,type:"initiateAddLocalTracks"};a.signalingClient.initiateClientRenegotiation(c)}else if(b.type==="removeLocalTrack"){c={payload:b.payload,type:"initiateRemoveLocalTrack"};a.signalingClient.initiateClientRenegotiation(c)}}function v(a,b){if(b.type!=="offerReady")return;a.signalingClient.sendSdp(b.payload.sdp,b.payload.mediaStates)}function w(a,b){if(b.type!=="offerReady")return;a.peerConnectionManager.cancelPendingNegotiation();a.peerConnectionManager.localMediaStateUpdateRetry(0)}function x(a,b){if(b.type!=="participantUpdateReceived")return;var c=b.payload.participantStates;a.updateConnectionModel(function(b){c.forEach(function(c,d){d!==b.selfParticipantID&&(b.updateParticipantState(d,c),K(c)&&a.logEvent({name:"atLeastOneParticipantAlerted"}),L(c)&&a.logEvent({name:"atLeastOneParticipantAnswered"}))})})}function y(a,b){if(b.type!=="removeDataMessageSubscription")return{};var d=b.payload.dataChannelLabel;b=b.payload.messageHandler;var e=a.dataMessageSubscriptions.get(d,c("immutable").Set());a=a.dataMessageSubscriptions.set(d,e["delete"](b));return{dataMessageSubscriptions:a}}function z(a,b){if(b.type!=="removeParticipants")return;b=b.payload.usersToRemove;a.signalingClient.sendRemoveParticipantsRequest(b)}function A(a,b){if(b.type!=="connectionRoomUpdateReceived")return;var c=b.payload.context;a.updateConnectionModel(function(a){a.collisionContext=c})}function B(a,b){if(b.type!=="sdpReceived")return;b=b.payload;var d=b.mediaStates,e=b.messageID,f=b.onProcessed,g=b.renegotiationOffer,h=b.sdp;b=b.source;if(h.type==="pranswer"&&!c("qex")._("1748"))return;a.peerConnectionManager.applyRemoteSdp(h,d,b,g,f,e);a.updateConnectionModel(function(a){a.updateTrackMapFromMediaStates(d.tracks),a.updateExistingParticipantsFromMediaStateTracks(d.tracks)});h.type==="answer"?a.logEvent({name:"answerSdpReceived"}):h.type==="offer"?a.logEvent({name:"offerSdpReceived"}):h.type==="pranswer"&&a.logEvent({name:"prAnswerSdpReceived"});b=M(a.currentSubscriptionRequest,a);a.signalingClient.sendSubscriptionRequest(b)}function C(a,b){if(b.type!=="sendGenericDataMessage")return;b=b.payload;var c=b.data,d=b.recipientIDs,e=b.serviceRecipients;b=b.topic;a.signalingClient.sendGenericDataMessage(b,c,d,e)}function D(a,b){if(b.type!=="stateSyncUnsubscribe")return;b=b.payload.topic;a.signalingClient.sendStateSyncUnsubscribe(b)}function E(a,b){if(b.type!=="stateSyncUpdate")return;b=b.payload;var c=b.inputData;b=b.topic;a.signalingClient.sendStateSyncUpdate(b,c)}function F(a,b){if(b.type!=="stopLocalTrack")return;b=b.payload.trackID;a.peerConnectionManager.stopLocalTrack(b)}function G(a,b){if(b.type!=="subscriptionRequest")return{};var c=b.payload;b=M(c,a);a.updateConnectionModel(function(a){a.clearAllUserVideoSubscriptions(),c.subscriptions.forEach(function(b){a.updateUserVideoSubscription(b.user,!0)})});a.signalingClient.sendSubscriptionRequest(b);return{currentSubscriptionRequest:c}}function H(a,b){if(b.type!=="userApprovalRequest")return;b=b.payload;var c=b.approvalStatus;b=b.targetUsers;a.signalingClient.sendUsersApprovalRequest(c,b)}function I(a,b){if(b.type!=="sctpNegotiationStateUpdate")return;(a=a.sctpPeerConnectionManager)==null?void 0:a.processSctpState(b.payload)}function J(a,b){b=b.get(a);return b===d("ZenonParticipantState").ZenonParticipantState.CONNECTED}function K(a){switch(a){case d("ZenonParticipantState").ZenonParticipantState.UNKNOWN:case d("ZenonParticipantState").ZenonParticipantState.CONTACTING:case d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE:case d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED:case d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED:return!1;case d("ZenonParticipantState").ZenonParticipantState.RINGING:case d("ZenonParticipantState").ZenonParticipantState.CONNECTING:case d("ZenonParticipantState").ZenonParticipantState.CONNECTED:case d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED:case d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL:case d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER:case d("ZenonParticipantState").ZenonParticipantState.REJECTED:case d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED:case d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL:case d("ZenonParticipantState").ZenonParticipantState.APPROVED:case d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL:case d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM:case d("ZenonParticipantState").ZenonParticipantState.ACCEPTING:case d("ZenonParticipantState").ZenonParticipantState.ADDING:case d("ZenonParticipantState").ZenonParticipantState.APPROVING:case d("ZenonParticipantState").ZenonParticipantState.DENYING:case d("ZenonParticipantState").ZenonParticipantState.PRECONNECTING:case d("ZenonParticipantState").ZenonParticipantState.REMOVING:case d("ZenonParticipantState").ZenonParticipantState.RECONNECTING:return!0}}function L(a){switch(a){case d("ZenonParticipantState").ZenonParticipantState.UNKNOWN:case d("ZenonParticipantState").ZenonParticipantState.CONTACTING:case d("ZenonParticipantState").ZenonParticipantState.UNREACHABLE:case d("ZenonParticipantState").ZenonParticipantState.PARTICIPANT_LIMIT_REACHED:case d("ZenonParticipantState").ZenonParticipantState.RING_TYPE_UNSUPPORTED:case d("ZenonParticipantState").ZenonParticipantState.RINGING:case d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED:case d("ZenonParticipantState").ZenonParticipantState.IN_ANOTHER_CALL:case d("ZenonParticipantState").ZenonParticipantState.NO_ANSWER:case d("ZenonParticipantState").ZenonParticipantState.REJECTED:case d("ZenonParticipantState").ZenonParticipantState.PENDING_APPROVAL:case d("ZenonParticipantState").ZenonParticipantState.APPROVED:case d("ZenonParticipantState").ZenonParticipantState.FAILED_APPROVAL:case d("ZenonParticipantState").ZenonParticipantState.HANGUP_IN_WAITING_ROOM:case d("ZenonParticipantState").ZenonParticipantState.ACCEPTING:case d("ZenonParticipantState").ZenonParticipantState.ADDING:case d("ZenonParticipantState").ZenonParticipantState.APPROVING:case d("ZenonParticipantState").ZenonParticipantState.DENYING:case d("ZenonParticipantState").ZenonParticipantState.PRECONNECTING:case d("ZenonParticipantState").ZenonParticipantState.REMOVING:return!1;case d("ZenonParticipantState").ZenonParticipantState.CONNECTING:case d("ZenonParticipantState").ZenonParticipantState.RECONNECTING:case d("ZenonParticipantState").ZenonParticipantState.CONNECTED:case d("ZenonParticipantState").ZenonParticipantState.CONNECTION_DROPPED:return!0}}function M(a,b){b=b.getConnectionModel();var e=a==null?void 0:a.subscriptions;a=(a=a==null?void 0:a.includeDominantSpeaker)!=null?a:!0;var f;e==null?f=N(b):f=O(e,b);e=f;b=e.trackSubscriptions;f=e.warnings;f.length>0&&c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Subscription request warnings: "+JSON.stringify(f),errorDomain:"ZenonConnectionSharedActions_makeSubscriptionList"});a&&b.push({type:d("ZenonMWMessageTypes").ZenonMWSubscriptionType.DOMINANT_SPEAKER});return b}function N(a){var b=a.getRemoteUserToTracksMap(),c=[],e=[];b.forEach(function(b,e){a.clearFailedSubscriptionTimer(e);e=Array.from(b.entries());e=e.filter(function(a){a[0];a=a[1];return a.type!=="audio"});e.forEach(function(a){var b=a[0];a[1];c.push({options:{videoQuality:d("ZenonMWMessageTypes").ZenonMWVideoQuality.MEDIUM},trackId:b,type:d("ZenonMWMessageTypes").ZenonMWSubscriptionType.TRACK})})});return{trackSubscriptions:c,warnings:e}}function O(a,b){var e=b.getRemoteUserToTracksMap(),f=[],g=[];a.forEach(function(a){var h=a.user,i=a.videoQuality;if(h===b.selfParticipantID){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Forfeiting subscription request for self user ID: "+h});return}a=e.get(h);if(!a){f.push({msg:"userToTrackMap not found",user:h});b.startFailedSubscriptionTimer(h);return}if(a.size===0){f.push({msg:"userToTrackMap is empty",user:h});b.startFailedSubscriptionTimer(h);return}b.clearFailedSubscriptionTimer(h);h=Array.from(a.entries());a=h.filter(function(a){a[0];a=a[1];return a.type!=="audio"&&a.enabled===!1});a.length>0&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Subscribing to muted video track: "+JSON.stringify(a)});h=h.filter(function(a){a[0];a=a[1];return a.type!=="audio"});h.forEach(function(a){var b=a[0];a[1];g.push({options:{videoQuality:i},trackId:b,type:d("ZenonMWMessageTypes").ZenonMWSubscriptionType.TRACK})})});return{trackSubscriptions:g,warnings:f}}g.onAddParticipants=a;g.onAnswerReady=b;g.onCapabilitiesReceived=e;g.onClientInfoReceived=f;g.onConnectionDestroyed=i;g.onConnectionDropped=j;g.onCreateDataMessageSubscription=k;g.onDataMessageReceived=l;g.onEndConnection=m;g.onForceEncodingEnabled=n;g.onIceCandidateReady=o;g.onIceCandidateReceived=p;g.onLocalMediaStateUpdateProcessing=q;g.onLocalMediaStateUpdateReady=r;g.onMediaUpdateReceived=s;g.onMediaUpdateResponseReceived=t;g.initiateClientRenegotiation=u;g.onOfferReady=v;g.onOfferReadyCancel=w;g.onParticipantUpdateReceivedEvent=x;g.onRemoveDataMessageSubscription=y;g.onRemoveParticipants=z;g.onRoomContextUpdateReceived=A;g.onSdpReceived=B;g.onSendGenericDataMessage=C;g.onStateSyncUnsubscribe=D;g.onStateSyncUpdate=E;g.onStopLocalTrack=F;g.onSubscriptionRequest=G;g.onUserApprovalRequest=H;g.onSctpNegotiationStateUpdate=I;g.makeSubscriptionList=M}),98);
__d("ZenonConnectionTerminatedState",["ZenonMWMessageReliabilityLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type!=="sdpReceived")return;b.payload.messageID!=null&&d("ZenonMWMessageReliabilityLogger").logEventForTxid(b.payload.messageID,d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.RECEIVED_REQUEST_IN_TERMINATED_STATE,{connectionState:"terminated"})}g.onSdpReceived=a}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("xstate-4.30.6",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){Object.defineProperty(g,"__esModule",{value:!0});g.__assign=function(){g.__assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return g.__assign.apply(this,arguments)};function a(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)b.indexOf(d[e])<0&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function b(a){var b=typeof Symbol==="function"&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&typeof a.length==="number")return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(a,b){var c=typeof Symbol==="function"&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],f;try{while((b===void 0||b-->0)&&!(d=a.next()).done)e.push(d.value)}catch(a){f={error:a}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error}}return e}function d(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}g.__read=c;g.__rest=a;g.__spreadArray=d;g.__values=b}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){Object.defineProperty(l,"__esModule",{value:!0}),l.ActionTypes=void 0,(function(a){a.Start="xstate.start",a.Stop="xstate.stop",a.Raise="xstate.raise",a.Send="xstate.send",a.Cancel="xstate.cancel",a.NullEvent="",a.Assign="xstate.assign",a.After="xstate.after",a.DoneState="done.state",a.DoneInvoke="done.invoke",a.Log="xstate.log",a.Init="xstate.init",a.Invoke="xstate.invoke",a.ErrorExecution="error.execution",a.ErrorCommunication="error.communication",a.ErrorPlatform="error.platform",a.ErrorCustom="xstate.error",a.Update="xstate.update",a.Pure="xstate.pure",a.Choose="xstate.choose"})(l.ActionTypes||(l.ActionTypes={})),l.SpecialTargets=void 0,(function(a){a.Parent="#_parent",a.Internal="#_internal"})(l.SpecialTargets||(l.SpecialTargets={}))}var o=!1;function p(){o||(o=!0,n());return m.exports}var q={},r={exports:q};function s(){Object.defineProperty(q,"__esModule",{value:!0});var a=p(),b=a.ActionTypes.Start,c=a.ActionTypes.Stop,d=a.ActionTypes.Raise,e=a.ActionTypes.Send,f=a.ActionTypes.Cancel,g=a.ActionTypes.NullEvent,h=a.ActionTypes.Assign,i=a.ActionTypes.After,j=a.ActionTypes.DoneState,k=a.ActionTypes.Log,l=a.ActionTypes.Init,m=a.ActionTypes.Invoke,n=a.ActionTypes.ErrorExecution,o=a.ActionTypes.ErrorPlatform,r=a.ActionTypes.ErrorCustom,s=a.ActionTypes.Update,t=a.ActionTypes.Choose;a=a.ActionTypes.Pure;q.after=i;q.assign=h;q.cancel=f;q.choose=t;q.doneState=j;q.error=r;q.errorExecution=n;q.errorPlatform=o;q.init=l;q.invoke=m;q.log=k;q.nullEvent=g;q.pure=a;q.raise=d;q.send=e;q.start=b;q.stop=c;q.update=s}var t=!1;function u(){t||(t=!0,s());return r.exports}var v={},w={exports:v};function x(){Object.defineProperty(v,"__esModule",{value:!0});var a=".",b={},c="xstate.guard",d="";v.DEFAULT_GUARD_TYPE=c;v.EMPTY_ACTIVITY_MAP=b;v.STATE_DELIMITER=a;v.TARGETLESS_KEY=d}var y=!1;function z(){y||(y=!0,x());return w.exports}var A={},B={exports:A};function C(){Object.defineProperty(A,"__esModule",{value:!0});var a=!0;A.IS_PRODUCTION=a}var D=!1;function E(){D||(D=!0,C());return B.exports}var F={},G={exports:F};function H(){Object.defineProperty(F,"__esModule",{value:!0});var a=k(),b=z(),c=E(),d;function e(a){return Object.keys(a)}function f(a,c,d){d===void 0&&(d=b.STATE_DELIMITER);var e=l(a,d),g=l(c,d);if(J(g))return J(e)?g===e:!1;return J(e)?e in g:Object.keys(e).every(function(a){return!(a in g)?!1:f(e[a],g[a])})}function g(a){try{return J(a)||typeof a==="number"?"".concat(a):a.type}catch(a){throw new Error("Events must be strings or objects with a string event.type property.")}}function h(a){try{return J(a)||typeof a==="number"?"".concat(a):I(a)?a.name:a.type}catch(a){throw new Error("Actions must be strings or objects with a string action.type property.")}}function i(a,b){try{return H(a)?a:a.toString().split(b)}catch(b){throw new Error("'".concat(a,"' is not a valid state path."))}}function j(a){return typeof a==="object"&&"value"in a&&"context"in a&&"event"in a&&"_event"in a}function l(a,b){if(j(a))return a.value;if(H(a))return m(a);if(typeof a!=="string")return a;a=i(a,b);return m(a)}function m(a){if(a.length===1)return a[0];var b={},c=b;for(var d=0;d<a.length-1;d++)d===a.length-2?c[a[d]]=a[d+1]:(c[a[d]]={},c=c[a[d]]);return b}function n(a,b){var c={},d=Object.keys(a);for(var e=0;e<d.length;e++){var f=d[e];c[f]=b(a[f],f,a,e)}return c}function o(c,d,e){var f,b,g={};try{for(var h=a.__values(Object.keys(c)),i=h.next();!i.done;i=h.next()){var j=i.value,k=c[j];if(!e(k))continue;g[j]=d(k,j,c)}}catch(a){f={error:a}}finally{try{i&&!i.done&&(b=h["return"])&&b.call(h)}finally{if(f)throw f.error}}return g}var p=function(b){return function(d){var e,c;d=d;try{for(var f=a.__values(b),g=f.next();!g.done;g=f.next()){var h=g.value;d=d[h]}}catch(a){e={error:a}}finally{try{g&&!g.done&&(c=f["return"])&&c.call(f)}finally{if(e)throw e.error}}return d}};function q(b,c){return function(e){var f,d;e=e;try{for(var g=a.__values(b),h=g.next();!h.done;h=g.next()){var i=h.value;e=e[c][i]}}catch(a){f={error:a}}finally{try{h&&!h.done&&(d=g["return"])&&d.call(g)}finally{if(f)throw f.error}}return e}}function r(a){if(!a)return[[]];if(J(a))return[[a]];var b=t(Object.keys(a).map(function(b){var c=a[b];return typeof c!=="string"&&(!c||!Object.keys(c).length)?[[b]]:r(a[b]).map(function(a){return[b].concat(a)})}));return b}function s(c){var d,b,e={};if(c&&c.length===1&&c[0].length===1)return c[0][0];try{for(var f=a.__values(c),g=f.next();!g.done;g=f.next()){c=g.value;var h=e;for(var i=0;i<c.length;i++){var j=c[i];if(i===c.length-2){h[j]=c[i+1];break}h[j]=h[j]||{};h=h[j]}}}catch(a){d={error:a}}finally{try{g&&!g.done&&(b=f["return"])&&b.call(f)}finally{if(d)throw d.error}}return e}function t(c){var b;return(b=[]).concat.apply(b,a.__spreadArray([],a.__read(c),!1))}function u(a){return H(a)?a:[a]}function v(a){return a===void 0?[]:u(a)}function w(c,d,e){var f,b;if(I(c))return c(d,e.data);var g={};try{for(var h=a.__values(Object.keys(c)),i=h.next();!i.done;i=h.next()){var j=i.value,k=c[j];I(k)?g[j]=k(d,e.data):g[j]=k}}catch(a){f={error:a}}finally{try{i&&!i.done&&(b=h["return"])&&b.call(h)}finally{if(f)throw f.error}}return g}function x(a){return/^(done|error)\./.test(a)}function y(a){if(a instanceof Promise)return!0;return a!==null&&(I(a)||typeof a==="object")&&I(a.then)?!0:!1}function A(a){return a!==null&&typeof a==="object"&&"transition"in a&&typeof a.transition==="function"}function B(c,d){var e,b,f=a.__read([[],[]],2),g=f[0];f=f[1];try{for(var h=a.__values(c),i=h.next();!i.done;i=h.next()){c=i.value;d(c)?g.push(c):f.push(c)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(b=h["return"])&&b.call(h)}finally{if(e)throw e.error}}return[g,f]}function C(a,b){return n(a.states,function(a,c){if(!a)return void 0;c=(J(b)?void 0:b[c])||(a?a.current:void 0);return!c?void 0:{current:c,states:C(a,c)}})}function D(a,b){return{current:b,states:C(a,b)}}function G(b,d,e,f){c.IS_PRODUCTION||F.warn(!!b,"Attempting to update undefined context");e=b?e.reduce(function(c,e){var g,b,h=e.assignment;e={state:f,action:e,_event:d};var i={};if(I(h))i=h(c,d.data,e);else try{for(var j=a.__values(Object.keys(h)),k=j.next();!k.done;k=j.next()){var l=k.value,m=h[l];i[l]=I(m)?m(c,d.data,e):m}}catch(a){g={error:a}}finally{try{k&&!k.done&&(b=j["return"])&&b.call(j)}finally{if(g)throw g.error}}return Object.assign({},c,i)},b):b;return e}F.warn=function(){};c.IS_PRODUCTION||(F.warn=function(a,b){var c=a instanceof Error?a:void 0;if(!c&&a)return;if(console!==void 0){a=["Warning: ".concat(b)];c&&a.push(c);emptyFunction.apply(console,a)}});function H(a){return Array.isArray(a)}function I(a){return typeof a==="function"}function J(a){return typeof a==="string"}function K(a,c){if(!a)return void 0;if(J(a))return{type:b.DEFAULT_GUARD_TYPE,name:a,predicate:c?c[a]:void 0};return I(a)?{type:b.DEFAULT_GUARD_TYPE,name:a.name,predicate:a}:a}function L(a){try{return"subscribe"in a&&I(a.subscribe)}catch(a){return!1}}var M=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}();d=(d={},d[M]=function(){return this},d[Symbol.observable]=function(){return this},d);function N(a){return!!a&&"__xstatenode"in a}function O(a){return!!a&&typeof a.send==="function"}var P=function(){var a=0;return function(){a++;return a.toString(16)}}();function Q(b,c){return J(b)||typeof b==="number"?a.__assign({type:b},c):b}function aa(b,c){if(!J(b)&&"$$type"in b&&b.$$type==="scxml")return b;b=Q(b);return a.__assign({name:b.type,data:b,$$type:"scxml",type:"external"},c)}function R(b,c){c=u(c).map(function(c){return typeof c==="undefined"||typeof c==="string"||N(c)?{target:c,event:b}:a.__assign(a.__assign({},c),{event:b})});return c}function S(a){return a===void 0||a===b.TARGETLESS_KEY?void 0:v(a)}function T(a,b,d){if(!c.IS_PRODUCTION){var e=a.stack?" Stacktrace was '".concat(a.stack,"'"):"";if(a===b)console.error("Missing onError handler for invocation '".concat(d,"', error was '").concat(a,"'.").concat(e));else var d=b.stack?" Stacktrace was '".concat(b.stack,"'"):""}}function ba(a,c,d,e,f){var g=a.options.guards;f={state:f,cond:c,_event:e};if(c.type===b.DEFAULT_GUARD_TYPE)return((g===null||g===void 0?void 0:g[c.name])||c.predicate)(d,e.data,f);g=g===null||g===void 0?void 0:g[c.type];if(!g)throw new Error("Guard '".concat(c.type,"' is not implemented on machine '").concat(a.id,"'."));return g(d,e.data,f)}function ca(a){return typeof a==="string"?{type:a}:a}function U(a,b,c){if(typeof a==="object")return a;var d=function(){return void 0};return{next:a,error:b||d,complete:c||d}}function V(a,b){return"".concat(a,":invocation[").concat(b,"]")}F.createInvokeId=V;F.evaluateGuard=ba;F.flatten=t;F.getActionType=h;F.getEventType=g;F.interopSymbols=d;F.isActor=O;F.isArray=H;F.isBehavior=A;F.isBuiltInEvent=x;F.isFunction=I;F.isMachine=N;F.isObservable=L;F.isPromiseLike=y;F.isStateLike=j;F.isString=J;F.keys=e;F.mapContext=w;F.mapFilterValues=o;F.mapValues=n;F.matchesState=f;F.nestedPath=q;F.normalizeTarget=S;F.partition=B;F.path=p;F.pathToStateValue=m;F.pathsToStateValue=s;F.reportUnhandledExceptionOnInvocation=T;F.symbolObservable=M;F.toArray=v;F.toArrayStrict=u;F.toEventObject=Q;F.toGuard=K;F.toInvokeSource=ca;F.toObserver=U;F.toSCXMLEvent=aa;F.toStatePath=i;F.toStatePaths=r;F.toStateValue=l;F.toTransitionConfigArray=R;F.uniqueId=P;F.updateContext=G;F.updateHistoryStates=C;F.updateHistoryValue=D}var I=!1;function J(){I||(I=!0,H());return G.exports}var K={},L={exports:K};function M(){Object.defineProperty(K,"__esModule",{value:!0});var a=k(),b=p(),c=u(),d=J(),e=E(),f=d.toSCXMLEvent({type:c.init});function g(a,b){return b?b[a]||void 0:void 0}function h(b,c){var e;if(d.isString(b)||typeof b==="number"){var f=g(b,c);d.isFunction(f)?e={type:b,exec:f}:f?e=f:e={type:b,exec:void 0}}else if(d.isFunction(b))e={type:b.name||b.toString(),exec:b};else{var f=g(b.type,c);if(d.isFunction(f))e=a.__assign(a.__assign({},b),{exec:f});else if(f){c=f.type||b.type;e=a.__assign(a.__assign(a.__assign({},f),b),{type:c})}else e=b}return e}var i=function(a,b){if(!a)return[];a=d.isArray(a)?a:[a];return a.map(function(a){return h(a,b)})};function j(b){var c=h(b);return a.__assign(a.__assign({id:d.isString(b)?b:c.id},c),{type:c.type})}function l(a){return!d.isString(a)?n(a,{to:b.SpecialTargets.Internal}):{type:c.raise,event:a}}function m(a){return{type:c.raise,_event:d.toSCXMLEvent(a.event)}}function n(a,b){return{to:b?b.to:void 0,type:c.send,event:d.isFunction(a)?a:d.toEventObject(a),delay:b?b.delay:void 0,id:b&&b.id!==void 0?b.id:d.isFunction(a)?a.name:d.getEventType(a)}}function o(b,c,e,f){var g={_event:e},h=d.toSCXMLEvent(d.isFunction(b.event)?b.event(c,e.data,g):b.event);if(d.isString(b.delay)){f=f&&f[b.delay];f=d.isFunction(f)?f(c,e.data,g):f}else f=d.isFunction(b.delay)?b.delay(c,e.data,g):b.delay;c=d.isFunction(b.to)?b.to(c,e.data,g):b.to;return a.__assign(a.__assign({},b),{to:c,_event:h,event:h.data,delay:f})}function q(c,d){return n(c,a.__assign(a.__assign({},d),{to:b.SpecialTargets.Parent}))}function r(b,c,d){return n(c,a.__assign(a.__assign({},d),{to:b}))}function s(){return q(c.update)}function t(b,c){return n(b,a.__assign(a.__assign({},c),{to:function(a,b,c){a=c._event;return a.origin}}))}var v=function(a,b){return{context:a,event:b}};function w(a,b){a===void 0&&(a=v);return{type:c.log,label:b,expr:a}}var x=function(b,c,e){return a.__assign(a.__assign({},b),{value:d.isString(b.expr)?b.expr:b.expr(c,e.data,{_event:e})})},y=function(a){return{type:c.cancel,sendId:a}};function z(a){a=j(a);return{type:b.ActionTypes.Start,activity:a,exec:void 0}}function A(a){a=d.isFunction(a)?a:j(a);return{type:b.ActionTypes.Stop,activity:a,exec:void 0}}function B(a,c,e){c=d.isFunction(a.activity)?a.activity(c,e.data):a.activity;e=typeof c==="string"?{id:c}:c;a={type:b.ActionTypes.Stop,activity:e};return a}var C=function(a){return{type:c.assign,assignment:a}};function D(a){return typeof a==="object"&&"type"in a}function F(a,c){c=c?"#".concat(c):"";return"".concat(b.ActionTypes.After,"(").concat(a,")").concat(c)}function G(a,c){var d="".concat(b.ActionTypes.DoneState,".").concat(a);a={type:d,data:c};a.toString=function(){return d};return a}function H(a,c){var d="".concat(b.ActionTypes.DoneInvoke,".").concat(a);a={type:d,data:c};a.toString=function(){return d};return a}function I(a,c){var d="".concat(b.ActionTypes.ErrorPlatform,".").concat(a);a={type:d,data:c};a.toString=function(){return d};return a}function L(a){return{type:b.ActionTypes.Pure,get:a}}function M(b,c){return n(function(a,b){return b},a.__assign(a.__assign({},c),{to:b}))}function N(e,f){return q(function(a,b,f){return{type:c.error,data:d.isFunction(e)?e(a,b,f):e}},a.__assign(a.__assign({},f),{to:b.SpecialTargets.Parent}))}function O(a){return{type:b.ActionTypes.Choose,conds:a}}function P(b,f,g,j,k,l){l===void 0&&(l=!1);k=a.__read(l?[[],k]:d.partition(k,function(a){return a.type===c.assign}),2);var n=k[0];k=k[1];var p=n.length?d.updateContext(g,j,n,f):g,q=l?[g]:void 0;n=d.flatten(k.map(function(g){switch(g.type){case c.raise:return m(g);case c.send:var k=o(g,p,j,b.options.delays);e.IS_PRODUCTION||d.warn(!d.isString(g.delay)||typeof k.delay==="number","No delay reference for delay expression '".concat(g.delay,"' was found on machine '").concat(b.id,"'"));return k;case c.log:return x(g,p,j);case c.choose:k=g;k=(k=k.conds.find(function(a){a=d.toGuard(a.cond,b.options.guards);return!a||d.evaluateGuard(b,a,p,j,f)}))===null||k===void 0?void 0:k.actions;if(!k)return[];var n=a.__read(P(b,f,p,j,i(d.toArray(k),b.options.actions),l),2),r=n[0];n=n[1];p=n;q===null||q===void 0?void 0:q.push(p);return r;case c.pure:k=g.get(p,j.data);if(!k)return[];n=a.__read(P(b,f,p,j,i(d.toArray(k),b.options.actions),l),2);r=n[0];k=n[1];p=k;q===null||q===void 0?void 0:q.push(p);return r;case c.stop:return B(g,p,j);case c.assign:p=d.updateContext(p,j,[g],f);q===null||q===void 0?void 0:q.push(p);break;default:n=h(g,b.options.actions);var s=n.exec;if(s&&q){var t=q.length-1;n=a.__assign(a.__assign({},n),{exec:function(b){var c=[];for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];s.apply(void 0,a.__spreadArray([q[t]],a.__read(c),!1))}})}return n}}).filter(function(a){return!!a}));return[n,p]}K.actionTypes=c;K.after=F;K.assign=C;K.cancel=y;K.choose=O;K.done=G;K.doneInvoke=H;K.error=I;K.escalate=N;K.forwardTo=M;K.getActionFunction=g;K.initEvent=f;K.isActionObject=D;K.log=w;K.pure=L;K.raise=l;K.resolveActions=P;K.resolveLog=x;K.resolveRaise=m;K.resolveSend=o;K.resolveStop=B;K.respond=t;K.send=n;K.sendParent=q;K.sendTo=r;K.sendUpdate=s;K.start=z;K.stop=A;K.toActionObject=h;K.toActionObjects=i;K.toActivityDefinition=j}var N=!1;function O(){N||(N=!0,M());return L.exports}var P={},Q={exports:P};function aa(){Object.defineProperty(P,"__esModule",{value:!0});var a=[],b=function(b,c){a.push(b);c=c(b);a.pop();return c},c=function(b){return b(a[a.length-1])};P.consume=c;P.provide=b}var R=!1;function S(){R||(R=!0,aa());return Q.exports}var T={},ba={exports:T};function ca(){Object.defineProperty(T,"__esModule",{value:!0});var a=k(),b=J(),c=S();function d(a){var c;return c={id:a,send:function(){return void 0},subscribe:function(){return{unsubscribe:function(){return void 0}}},getSnapshot:function(){return void 0},toJSON:function(){return{id:a}}},c[b.symbolObservable]=function(){return this},c}function e(a,c,e,g){var h=b.toInvokeSource(a.src);c=(c=c===null||c===void 0?void 0:c.options.services)===null||c===void 0?void 0:c[h.type];h=a.data?b.mapContext(a.data,e,g):void 0;e=c?f(c,a.id,h):d(a.id);e.meta=a;return e}function f(a,e,f){e=d(e);e.deferred=!0;if(b.isMachine(a)){var g=e.state=c.provide(void 0,function(){return(f?a.withContext(f):a).initialState});e.getSnapshot=function(){return g}}return e}function g(a){try{return typeof a.send==="function"}catch(a){return!1}}function h(a){return g(a)&&"id"in a}function i(c){var d;return a.__assign((d={subscribe:function(){return{unsubscribe:function(){return void 0}}},id:"anonymous",getSnapshot:function(){return void 0}},d[b.symbolObservable]=function(){return this},d),c)}T.createDeferredActor=f;T.createInvocableActor=e;T.createNullActor=d;T.isActor=g;T.isSpawnedActor=h;T.toActorRef=i}var U=!1;function V(){U||(U=!0,ca());return ba.exports}var W={},da={exports:W};function ea(){Object.defineProperty(W,"__esModule",{value:!0});var a=k(),b=J(),c=function(a){return a.type==="atomic"||a.type==="final"};function d(a){return Object.keys(a.states).map(function(b){return a.states[b]})}function e(a){var f=[a];return c(a)?f:f.concat(b.flatten(d(a).map(e)))}function f(b,c){var e,f,g,i,j,k,l,m;b=new Set(b);b=h(b);var n=new Set(c);try{for(var o=a.__values(n),p=o.next();!p.done;p=o.next()){c=p.value;var q=c.parent;while(q&&!n.has(q))n.add(q),q=q.parent}}catch(a){e={error:a}}finally{try{p&&!p.done&&(f=o["return"])&&f.call(o)}finally{if(e)throw e.error}}var r=h(n);try{for(var s=a.__values(n),t=s.next();!t.done;t=s.next()){c=t.value;if(c.type==="compound"&&(!r.get(c)||!r.get(c).length))b.get(c)?b.get(c).forEach(function(a){return n.add(a)}):c.initialStateNodes.forEach(function(a){return n.add(a)});else if(c.type==="parallel")try{for(var u=(j=void 0,a.__values(d(c))),v=u.next();!v.done;v=u.next()){var w=v.value;if(w.type==="history")continue;n.has(w)||(n.add(w),b.get(w)?b.get(w).forEach(function(a){return n.add(a)}):w.initialStateNodes.forEach(function(a){return n.add(a)}))}}catch(a){j={error:a}}finally{try{v&&!v.done&&(k=u["return"])&&k.call(u)}finally{if(j)throw j.error}}}}catch(a){g={error:a}}finally{try{t&&!t.done&&(i=s["return"])&&i.call(s)}finally{if(g)throw g.error}}try{for(var x=a.__values(n),y=x.next();!y.done;y=x.next()){c=y.value;var q=c.parent;while(q&&!n.has(q))n.add(q),q=q.parent}}catch(a){l={error:a}}finally{try{y&&!y.done&&(m=x["return"])&&m.call(x)}finally{if(l)throw l.error}}return n}function g(a,b){var d=b.get(a);if(!d)return{};if(a.type==="compound"){a=d[0];if(a){if(c(a))return a.key}else return{}}var e={};d.forEach(function(a){e[a.key]=g(a,b)});return e}function h(b){var c,d,e=new Map();try{for(var f=a.__values(b),g=f.next();!g.done;g=f.next()){b=g.value;e.has(b)||e.set(b,[]);b.parent&&(e.has(b.parent)||e.set(b.parent,[]),e.get(b.parent).push(b))}}catch(a){c={error:a}}finally{try{g&&!g.done&&(d=f["return"])&&d.call(f)}finally{if(c)throw c.error}}return e}function i(a,b){b=f([a],b);return g(a,h(b))}function j(a,b){if(Array.isArray(a))return a.some(function(a){return a===b});return a instanceof Set?a.has(b):!1}function l(c){return a.__spreadArray([],a.__read(new Set(b.flatten(a.__spreadArray([],a.__read(c.map(function(a){return a.ownEvents})),!1)))),!1)}function m(a,b){if(b.type==="compound")return d(b).some(function(b){return b.type==="final"&&j(a,b)});return b.type==="parallel"?d(b).every(function(b){return m(a,b)}):!1}function n(a){a===void 0&&(a=[]);return a.reduce(function(a,b){b.meta!==void 0&&(a[b.id]=b.meta);return a},{})}function o(a){return new Set(b.flatten(a.map(function(a){return a.tags})))}W.getAdjList=h;W.getAllStateNodes=e;W.getChildren=d;W.getConfiguration=f;W.getMeta=n;W.getTagsFromConfiguration=o;W.getValue=i;W.has=j;W.isInFinalState=m;W.isLeafNode=c;W.nextEvents=l}var fa=!1;function ga(){fa||(fa=!0,ea());return da.exports}var X={},ha={exports:X};function ia(){Object.defineProperty(X,"__esModule",{value:!0});var a=k(),b=z(),c=J(),d=ga(),e=O(),f=E();function g(a,b){if(a===b)return!0;if(a===void 0||b===void 0)return!1;if(c.isString(a)||c.isString(b))return a===b;var d=Object.keys(a),e=Object.keys(b);return d.length===e.length&&d.every(function(c){return g(a[c],b[c])})}function h(a){return typeof a!=="object"||a===null?!1:"value"in a&&"_event"in a}var i=h;function j(b,c){var d=b.exec,e=a.__assign(a.__assign({},b),{exec:d!==void 0?function(){return d(c.context,c.event,{action:b,state:c,_event:c._event})}:void 0});return e}var l=function(){function g(a){var c=this,e;this.actions=[];this.activities=b.EMPTY_ACTIVITY_MAP;this.meta={};this.events=[];this.value=a.value;this.context=a.context;this._event=a._event;this._sessionid=a._sessionid;this.event=this._event.data;this.historyValue=a.historyValue;this.history=a.history;this.actions=a.actions||[];this.activities=a.activities||b.EMPTY_ACTIVITY_MAP;this.meta=d.getMeta(a.configuration);this.events=a.events||[];this.matches=this.matches.bind(this);this.toStrings=this.toStrings.bind(this);this.configuration=a.configuration;this.transitions=a.transitions;this.children=a.children;this.done=!!a.done;this.tags=(e=Array.isArray(a.tags)?new Set(a.tags):a.tags)!==null&&e!==void 0?e:new Set();this.machine=a.machine;Object.defineProperty(this,"nextEvents",{get:function(){return d.nextEvents(c.configuration)}})}g.from=function(a,b){if(a instanceof g)return a.context!==b?new g({value:a.value,context:b,_event:a._event,_sessionid:null,historyValue:a.historyValue,history:a.history,actions:[],activities:a.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):a;var c=e.initEvent;return new g({value:a,context:b,_event:c,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})};g.create=function(a){return new g(a)};g.inert=function(a,b){if(a instanceof g){if(!a.actions.length)return a;var c=e.initEvent;return new g({value:a.value,context:b,_event:c,_sessionid:null,historyValue:a.historyValue,history:a.history,activities:a.activities,configuration:a.configuration,transitions:[],children:{}})}return g.from(a,b)};g.prototype.toStrings=function(b,d){var e=this;b===void 0&&(b=this.value);d===void 0&&(d=".");if(c.isString(b))return[b];var f=Object.keys(b);return f.concat.apply(f,a.__spreadArray([],a.__read(f.map(function(a){return e.toStrings(b[a],d).map(function(b){return a+d+b})})),!1))};g.prototype.toJSON=function(){var b=this;b.configuration;b.transitions;var c=b.tags;b.machine;b=a.__rest(b,["configuration","transitions","tags","machine"]);return a.__assign(a.__assign({},b),{tags:Array.from(c)})};g.prototype.matches=function(a){return c.matchesState(a,this.value)};g.prototype.hasTag=function(a){return this.tags.has(a)};g.prototype.can=function(a){var b;f.IS_PRODUCTION&&c.warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");b=(b=this.machine)===null||b===void 0?void 0:b.getTransitionData(this,a);return!!(b===null||b===void 0?void 0:b.transitions.length)&&b.transitions.some(function(a){return a.target!==void 0||a.actions.length})};return g}();X.State=l;X.bindActionToState=j;X.isState=i;X.isStateConfig=h;X.stateValuesEqual=g}var ja=!1;function ka(){ja||(ja=!0,ia());return ha.exports}var la={},ma={exports:la};function na(){Object.defineProperty(la,"__esModule",{value:!0});var a=k(),b={deferEvents:!1},c=function(){function c(c){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=a.__assign(a.__assign({},b),c)}c.prototype.initialize=function(a){this.initialized=!0;if(a){if(!this.options.deferEvents){this.schedule(a);return}this.process(a)}this.flushEvents()};c.prototype.schedule=function(a){if(!this.initialized||this.processingEvent){this.queue.push(a);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(a);this.flushEvents()};c.prototype.clear=function(){this.queue=[]};c.prototype.flushEvents=function(){var a=this.queue.shift();while(a)this.process(a),a=this.queue.shift()};c.prototype.process=function(a){this.processingEvent=!0;try{a()}catch(a){this.clear();throw a}finally{this.processingEvent=!1}};return c}();la.Scheduler=c}var oa=!1;function pa(){oa||(oa=!0,na());return ma.exports}var qa={},ra={exports:qa};function sa(){Object.defineProperty(qa,"__esModule",{value:!0});var a=new Map(),b=0,c={bookId:function(){return"x:".concat(b++)},register:function(b,c){a.set(b,c);return b},get:function(b){return a.get(b)},free:function(b){a["delete"](b)}};qa.registry=c}var ta=!1;function ua(){ta||(ta=!0,sa());return ra.exports}var va={},wa={exports:va};function xa(){Object.defineProperty(va,"__esModule",{value:!0});var b=E();function c(){if(typeof globalThis!=="undefined")return globalThis;if(typeof self!=="undefined")return self;if(typeof window!=="undefined")return window;if(typeof a!=="undefined")return a;!b.IS_PRODUCTION}function d(){var b=c();return b&&"__xstate__"in b?b.__xstate__:void 0}function e(a){if(!c())return;var b=d();b&&b.register(a)}va.getGlobal=c;va.registerService=e}var ya=!1;function za(){ya||(ya=!0,xa());return wa.exports}var Y={},Aa={exports:Y};function Ba(){Object.defineProperty(Y,"__esModule",{value:!0});var a=O(),b=V(),c=J();function d(a,b){return{transition:a,initialState:b}}function e(b){var c={error:void 0,data:void 0,status:"pending"};return{transition:function(b,c,d){var e=d.parent,f=d.id;d=d.observers;switch(c.type){case"fulfill":e===null||e===void 0?void 0:e.send(a.doneInvoke(f,c.data));return{error:void 0,data:c.data,status:"fulfilled"};case"reject":e===null||e===void 0?void 0:e.send(a.error(f,c.error));d.forEach(function(a){a.error(c.error)});return{error:c.error,data:void 0,status:"rejected"};default:return b}},initialState:c,start:function(a){var d=a.self;b().then(function(a){d.send({type:"fulfill",data:a})},function(a){d.send({type:"reject",error:a})});return c}}}function f(a,d){d===void 0&&(d={});var e=a.initialState,f=new Set(),g=[],h=!1,i=function(){if(h)return;h=!0;while(g.length>0){var b=g.shift();e=a.transition(e,b,k);f.forEach(function(a){return a.next(e)})}h=!1},j=b.toActorRef({id:d.id,send:function(a){g.push(a),i()},getSnapshot:function(){return e},subscribe:function(a,b,d){var g=c.toObserver(a,b,d);f.add(g);g.next(e);return{unsubscribe:function(){f["delete"](g)}}}}),k={parent:d.parent,self:j,id:d.id||"anonymous",observers:f};e=a.start?a.start(k):e;return j}Y.fromPromise=e;Y.fromReducer=d;Y.spawnBehavior=f}var Ca=!1;function Da(){Ca||(Ca=!0,Ba());return Aa.exports}var Z={},Ea={exports:Z};function Fa(){Object.defineProperty(Z,"__esModule",{value:!0});var b=k(),c=p(),d=ka(),e=u(),f=O(),g=E(),h=J(),i=pa(),j=V(),l=ga(),m=ua(),n=za(),o=S(),q=Da(),r={sync:!1,autoForward:!1};Z.InterpreterStatus=void 0;(function(a){a[a.NotStarted=0]="NotStarted",a[a.Running=1]="Running",a[a.Stopped=2]="Stopped"})(Z.InterpreterStatus||(Z.InterpreterStatus={}));var s=function(){function k(a,d){var j=this;d===void 0&&(d=k.defaultOptions);this.machine=a;this.scheduler=new i.Scheduler();this.delayedEventsMap={};this.listeners=new Set();this.contextListeners=new Set();this.stopListeners=new Set();this.doneListeners=new Set();this.eventListeners=new Set();this.sendListeners=new Set();this.initialized=!1;this.status=Z.InterpreterStatus.NotStarted;this.children=new Map();this.forwardTo=new Set();this.init=this.start;this.send=function(a,b){if(h.isArray(a)){j.batch(a);return j.state}var c=h.toSCXMLEvent(h.toEventObject(a,b));if(j.status===Z.InterpreterStatus.Stopped){g.IS_PRODUCTION||h.warn(!1,'Event "'.concat(c.name,'" was sent to stopped service "').concat(j.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(c.data)));return j.state}if(j.status!==Z.InterpreterStatus.Running&&!j.options.deferEvents)throw new Error('Event "'.concat(c.name,'" was sent to uninitialized service "').concat(j.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(c.data)));j.scheduler.schedule(function(){j.forward(c);var a=j.nextState(c);j.update(a,c)});return j._state};this.sendTo=function(a,d){var i=j.parent&&(d===c.SpecialTargets.Parent||j.parent.id===d),k=i?j.parent:h.isString(d)?j.children.get(d)||m.registry.get(d):h.isActor(d)?d:void 0;if(!k){if(!i)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(j.id,"'."));g.IS_PRODUCTION||h.warn(!1,"Service '".concat(j.id,"' has no parent: unable to send event ").concat(a.type));return}"machine"in k?k.send(b.__assign(b.__assign({},a),{name:a.name===e.error?"".concat(f.error(j.id)):a.name,origin:j.sessionId})):k.send(a.data)};d=b.__assign(b.__assign({},k.defaultOptions),d);var l=d.clock,n=d.logger,o=d.parent,p=d.id;p=p!==void 0?p:a.id;this.id=p;this.logger=n;this.clock=l;this.parent=o;this.options=d;this.scheduler=new i.Scheduler({deferEvents:this.options.deferEvents});this.sessionId=m.registry.bookId()}Object.defineProperty(k.prototype,"initialState",{get:function(){var a=this;return this._initialState?this._initialState:o.provide(this,function(){a._initialState=a.machine.initialState;return a._initialState})},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"state",{get:function(){g.IS_PRODUCTION||h.warn(this.status!==Z.InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first."));return this._state},enumerable:!1,configurable:!0});k.prototype.execute=function(a,c){var d,e;try{for(var f=b.__values(a.actions),g=f.next();!g.done;g=f.next()){var h=g.value;this.exec(h,a,c)}}catch(a){d={error:a}}finally{try{g&&!g.done&&(e=f["return"])&&e.call(f)}finally{if(d)throw d.error}}};k.prototype.update=function(a,c){var d,e,g,i,j,k,m,n,o=this;a._sessionid=this.sessionId;this._state=a;this.options.execute&&this.execute(this.state);this.children.forEach(function(a){o.state.children[a.id]=a});this.devTools&&this.devTools.send(c.data,a);if(a.event)try{for(var p=b.__values(this.eventListeners),q=p.next();!q.done;q=p.next()){var r=q.value;r(a.event)}}catch(a){d={error:a}}finally{try{q&&!q.done&&(e=p["return"])&&e.call(p)}finally{if(d)throw d.error}}try{for(var s=b.__values(this.listeners),t=s.next();!t.done;t=s.next()){var r=t.value;r(a,a.event)}}catch(a){g={error:a}}finally{try{t&&!t.done&&(i=s["return"])&&i.call(s)}finally{if(g)throw g.error}}try{for(var u=b.__values(this.contextListeners),v=u.next();!v.done;v=u.next()){var w=v.value;w(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(a){j={error:a}}finally{try{v&&!v.done&&(k=u["return"])&&k.call(u)}finally{if(j)throw j.error}}w=l.isInFinalState(a.configuration||[],this.machine);if(this.state.configuration&&w){w=a.configuration.find(function(a){return a.type==="final"&&a.parent===o.machine});w=w&&w.doneData?h.mapContext(w.doneData,a.context,c):void 0;try{for(var x=b.__values(this.doneListeners),y=x.next();!y.done;y=x.next()){var r=y.value;r(f.doneInvoke(this.id,w))}}catch(a){m={error:a}}finally{try{y&&!y.done&&(n=x["return"])&&n.call(x)}finally{if(m)throw m.error}}this.stop()}};k.prototype.onTransition=function(a){this.listeners.add(a);this.status===Z.InterpreterStatus.Running&&a(this.state,this.state.event);return this};k.prototype.subscribe=function(a,b,c){var d=this;if(!a)return{unsubscribe:function(){return void 0}};var e,f=c;typeof a==="function"?e=a:(e=a.next.bind(a),f=a.complete.bind(a));this.listeners.add(e);this.status===Z.InterpreterStatus.Running&&e(this.state);f&&this.onDone(f);return{unsubscribe:function(){e&&d.listeners["delete"](e),f&&d.doneListeners["delete"](f)}}};k.prototype.onEvent=function(a){this.eventListeners.add(a);return this};k.prototype.onSend=function(a){this.sendListeners.add(a);return this};k.prototype.onChange=function(a){this.contextListeners.add(a);return this};k.prototype.onStop=function(a){this.stopListeners.add(a);return this};k.prototype.onDone=function(a){this.doneListeners.add(a);return this};k.prototype.off=function(a){this.listeners["delete"](a);this.eventListeners["delete"](a);this.sendListeners["delete"](a);this.stopListeners["delete"](a);this.doneListeners["delete"](a);this.contextListeners["delete"](a);return this};k.prototype.start=function(a){var b=this;if(this.status===Z.InterpreterStatus.Running)return this;this.machine._init();m.registry.register(this.sessionId,this);this.initialized=!0;this.status=Z.InterpreterStatus.Running;var c=a===void 0?this.initialState:o.provide(this,function(){return d.isStateConfig(a)?b.machine.resolveState(a):b.machine.resolveState(d.State.from(a,b.machine.context))});this.options.devTools&&this.attachDev();this.scheduler.initialize(function(){b.update(c,f.initEvent)});return this};k.prototype.stop=function(){var a,c,d,e,f,g,i,j,k,l,n=this;try{for(var o=b.__values(this.listeners),p=o.next();!p.done;p=o.next()){var q=p.value;this.listeners["delete"](q)}}catch(b){a={error:b}}finally{try{p&&!p.done&&(c=o["return"])&&c.call(o)}finally{if(a)throw a.error}}try{for(var r=b.__values(this.stopListeners),s=r.next();!s.done;s=r.next()){var q=s.value;q();this.stopListeners["delete"](q)}}catch(a){d={error:a}}finally{try{s&&!s.done&&(e=r["return"])&&e.call(r)}finally{if(d)throw d.error}}try{for(var t=b.__values(this.contextListeners),u=t.next();!u.done;u=t.next()){var q=u.value;this.contextListeners["delete"](q)}}catch(a){f={error:a}}finally{try{u&&!u.done&&(g=t["return"])&&g.call(t)}finally{if(f)throw f.error}}try{for(var v=b.__values(this.doneListeners),w=v.next();!w.done;w=v.next()){var q=w.value;this.doneListeners["delete"](q)}}catch(a){i={error:a}}finally{try{w&&!w.done&&(j=v["return"])&&j.call(v)}finally{if(i)throw i.error}}if(!this.initialized)return this;b.__spreadArray([],b.__read(this.state.configuration),!1).sort(function(a,b){return b.order-a.order}).forEach(function(e){var f,a;try{for(var c=b.__values(e.definition.exit),d=c.next();!d.done;d=c.next()){e=d.value;n.exec(e,n.state)}}catch(a){f={error:a}}finally{try{d&&!d.done&&(a=c["return"])&&a.call(c)}finally{if(f)throw f.error}}});this.children.forEach(function(a){h.isFunction(a.stop)&&a.stop()});try{for(var x=b.__values(Object.keys(this.delayedEventsMap)),y=x.next();!y.done;y=x.next()){q=y.value;this.clock.clearTimeout(this.delayedEventsMap[q])}}catch(a){k={error:a}}finally{try{y&&!y.done&&(l=x["return"])&&l.call(x)}finally{if(k)throw k.error}}this.scheduler.clear();this.initialized=!1;this.status=Z.InterpreterStatus.Stopped;m.registry.free(this.sessionId);return this};k.prototype.batch=function(a){var c=this;if(this.status===Z.InterpreterStatus.NotStarted&&this.options.deferEvents)g.IS_PRODUCTION||h.warn(!1,"".concat(a.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==Z.InterpreterStatus.Running)throw new Error("".concat(a.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule(function(){var e,f,g=c.state,i=!1,j=[],k=function(a){var e=h.toSCXMLEvent(a);c.forward(e);g=o.provide(c,function(){return c.machine.transition(g,e)});j.push.apply(j,b.__spreadArray([],b.__read(g.actions.map(function(a){return d.bindActionToState(a,g)})),!1));i=i||!!g.changed};try{for(var l=b.__values(a),m=l.next();!m.done;m=l.next()){var n=m.value;k(n)}}catch(a){e={error:a}}finally{try{m&&!m.done&&(f=l["return"])&&f.call(l)}finally{if(e)throw e.error}}g.changed=i;g.actions=j;c.update(g,h.toSCXMLEvent(a[a.length-1]))})};k.prototype.sender=function(a){return this.send.bind(this,a)};k.prototype.nextState=function(a){var b=this,c=h.toSCXMLEvent(a);if(c.name.indexOf(e.errorPlatform)===0&&!this.state.nextEvents.some(function(a){return a.indexOf(e.errorPlatform)===0}))throw c.data.data;a=o.provide(this,function(){return b.machine.transition(b.state,c)});return a};k.prototype.forward=function(a){var c,d;try{for(var e=b.__values(this.forwardTo),f=e.next();!f.done;f=e.next()){var g=f.value,h=this.children.get(g);if(!h)throw new Error("Unable to forward event '".concat(a,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(g,"'."));h.send(a)}}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=e["return"])&&d.call(e)}finally{if(c)throw c.error}}};k.prototype.defer=function(a){var b=this;this.delayedEventsMap[a.id]=this.clock.setTimeout(function(){a.to?b.sendTo(a._event,a.to):b.send(a._event)},a.delay)};k.prototype.cancel=function(a){this.clock.clearTimeout(this.delayedEventsMap[a]),delete this.delayedEventsMap[a]};k.prototype.exec=function(a,b,d){d===void 0&&(d=this.machine.options.actions);var i=b.context;b=b._event;d=a.exec||f.getActionFunction(a.type,d);d=h.isFunction(d)?d:d?d.exec:a.exec;if(d)try{return d(i,b.data,{action:a,state:this.state,_event:b})}catch(a){this.parent&&this.parent.send({type:"xstate.error",data:a});throw a}switch(a.type){case e.send:d=a;if(typeof d.delay==="number"){this.defer(d);return}else d.to?this.sendTo(d._event,d.to):this.send(d._event);break;case e.cancel:this.cancel(a.sendId);break;case e.start:if(this.status!==Z.InterpreterStatus.Running)return;d=a.activity;if(!this.state.activities[d.id||d.type])break;if(d.type===c.ActionTypes.Invoke){var j=h.toInvokeSource(d.src),k=this.machine.options.services?this.machine.options.services[j.type]:void 0,l=d.id,m=d.data;g.IS_PRODUCTION||h.warn(!("forward"in d),"`forward` property is deprecated (found in invocation of '".concat(d.src,"' in in machine '").concat(this.machine.id,"'). ")+"Please use `autoForward` instead.");var n="autoForward"in d?d.autoForward:!!d.forward;if(!k){g.IS_PRODUCTION||h.warn(!1,"No service found for invocation '".concat(d.src,"' in machine '").concat(this.machine.id,"'."));return}m=m?h.mapContext(m,i,b):void 0;if(typeof k==="string")return;i=h.isFunction(k)?k(i,b.data,{data:m,src:j,meta:d.meta}):k;if(!i)return;b=void 0;h.isMachine(i)&&(i=m?i.withContext(m):i,b={autoForward:n});this.spawn(i,l,b)}else this.spawnActivity(d);break;case e.stop:this.stopChild(a.activity.id);break;case e.log:j=a.label;k=a.value;j?this.logger(j,k):this.logger(k);break;default:g.IS_PRODUCTION||h.warn(!1,"No implementation found for action type '".concat(a.type,"'"));break}return void 0};k.prototype.removeChild=function(a){var b;this.children["delete"](a);this.forwardTo["delete"](a);(b=this.state)===null||b===void 0?!0:delete b.children[a]};k.prototype.stopChild=function(a){var b=this.children.get(a);if(!b)return;this.removeChild(a);h.isFunction(b.stop)&&b.stop()};k.prototype.spawn=function(a,c,d){if(h.isPromiseLike(a))return this.spawnPromise(Promise.resolve(a),c);else if(h.isFunction(a))return this.spawnCallback(a,c);else if(j.isSpawnedActor(a))return this.spawnActor(a,c);else if(h.isObservable(a))return this.spawnObservable(a,c);else if(h.isMachine(a))return this.spawnMachine(a,b.__assign(b.__assign({},d),{id:c}));else if(h.isBehavior(a))return this.spawnBehavior(a,c);else throw new Error('Unable to spawn entity "'.concat(c,'" of type "').concat(typeof a,'".'))};k.prototype.spawnMachine=function(a,c){var d=this;c===void 0&&(c={});var f=new k(a,b.__assign(b.__assign({},this.options),{parent:this,id:c.id||a.id}));a=b.__assign(b.__assign({},r),c);a.sync&&f.onTransition(function(a){d.send(e.update,{state:a,id:f.id})});c=f;this.children.set(f.id,c);a.autoForward&&this.forwardTo.add(f.id);f.onDone(function(a){d.removeChild(f.id),d.send(h.toSCXMLEvent(a,{origin:f.id}))}).start();return c};k.prototype.spawnBehavior=function(a,b){a=q.spawnBehavior(a,{id:b,parent:this});this.children.set(b,a);return a};k.prototype.spawnPromise=function(a,b){var c,d=this,e=!1,g;a.then(function(a){e||(g=a,d.removeChild(b),d.send(h.toSCXMLEvent(f.doneInvoke(b,a),{origin:b})))},function(a){if(!e){d.removeChild(b);var c=f.error(b,a);try{d.send(h.toSCXMLEvent(c,{origin:b}))}catch(e){h.reportUnhandledExceptionOnInvocation(a,e,b),d.devTools&&d.devTools.send(c,d.state),d.machine.strict&&d.stop()}}});c=(c={id:b,send:function(){return void 0},subscribe:function(b,c,d){var e=h.toObserver(b,c,d),f=!1;a.then(function(a){if(f)return;e.next(a);if(f)return;e.complete()},function(a){if(f)return;e.error(a)});return{unsubscribe:function(){return f=!0}}},stop:function(){e=!0},toJSON:function(){return{id:b}},getSnapshot:function(){return g}},c[h.symbolObservable]=function(){return this},c);this.children.set(b,c);return c};k.prototype.spawnCallback=function(a,b){var c=this,d=!1,e=new Set(),g=new Set(),i,j=function(a){i=a;g.forEach(function(b){return b(a)});if(d)return;c.send(h.toSCXMLEvent(a,{origin:b}))},k;try{k=a(j,function(a){e.add(a)})}catch(a){this.send(f.error(b,a))}if(h.isPromiseLike(k))return this.spawnPromise(k,b);j=(a={id:b,send:function(a){return e.forEach(function(b){return b(a)})},subscribe:function(a){var b=h.toObserver(a);g.add(b.next);return{unsubscribe:function(){g["delete"](b.next)}}},stop:function(){d=!0,h.isFunction(k)&&k()},toJSON:function(){return{id:b}},getSnapshot:function(){return i}},a[h.symbolObservable]=function(){return this},a);this.children.set(b,j);return j};k.prototype.spawnObservable=function(a,b){var c,d=this,e,g=a.subscribe(function(a){e=a,d.send(h.toSCXMLEvent(a,{origin:b}))},function(a){d.removeChild(b),d.send(h.toSCXMLEvent(f.error(b,a),{origin:b}))},function(){d.removeChild(b),d.send(h.toSCXMLEvent(f.doneInvoke(b),{origin:b}))});c=(c={id:b,send:function(){return void 0},subscribe:function(b,c,d){return a.subscribe(b,c,d)},stop:function(){return g.unsubscribe()},getSnapshot:function(){return e},toJSON:function(){return{id:b}}},c[h.symbolObservable]=function(){return this},c);this.children.set(b,c);return c};k.prototype.spawnActor=function(a,b){this.children.set(b,a);return a};k.prototype.spawnActivity=function(a){var b=this.machine.options&&this.machine.options.activities?this.machine.options.activities[a.type]:void 0;if(!b){g.IS_PRODUCTION||h.warn(!1,"No implementation found for activity '".concat(a.type,"'"));return}b=b(this.state.context,a);this.spawnEffect(a.id,b)};k.prototype.spawnEffect=function(a,b){this.children.set(a,(b={id:a,send:function(){return void 0},subscribe:function(){return{unsubscribe:function(){return void 0}}},stop:b||void 0,getSnapshot:function(){return void 0},toJSON:function(){return{id:a}}},b[h.symbolObservable]=function(){return this},b))};k.prototype.attachDev=function(){var c=n.getGlobal();if(this.options.devTools&&c){if(c.__REDUX_DEVTOOLS_EXTENSION__){var d=typeof this.options.devTools==="object"?this.options.devTools:void 0;this.devTools=c.__REDUX_DEVTOOLS_EXTENSION__.connect(b.__assign(b.__assign({name:this.id,autoPause:!0,stateSanitizer:function(a){return{value:a.value,context:a.context,actions:a.actions}}},d),{features:b.__assign({jump:!1,skip:!1},d?d.features:void 0)}),this.machine);this.devTools.init(this.state)}n.registerService(this)}};k.prototype.toJSON=function(){return{id:this.id}};k.prototype[h.symbolObservable]=function(){return this};k.prototype.getSnapshot=function(){return this.status===Z.InterpreterStatus.NotStarted?this.initialState:this._state};k.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)}},logger:console.log.bind(console),devTools:!1};k.interpret=w;return k}(),t=function(a){return h.isString(a)?b.__assign(b.__assign({},r),{name:a}):b.__assign(b.__assign(b.__assign({},r),{name:h.uniqueId()}),a)};function v(a,b){var c=t(b);return o.consume(function(b){if(!g.IS_PRODUCTION){var d=h.isMachine(a)||h.isFunction(a);h.warn(!!b||d,'Attempted to spawn an Actor (ID: "'.concat(h.isMachine(a)?a.id:"undefined",'") outside of a service. This will have no effect.'))}if(b)return b.spawn(a,c.name,c);else return j.createDeferredActor(a,c.name)})}function w(a,b){a=new s(a,b);return a}Z.Interpreter=s;Z.interpret=w;Z.spawn=v}var Ga=!1;function Ha(){Ga||(Ga=!0,Fa());return Ea.exports}var Ia={},Ja={exports:Ia};function Ka(){Object.defineProperty(Ia,"__esModule",{value:!0});var a=k();p();var b=u();J();E();function c(a){if(typeof a==="string"){var b={type:a};b.toString=function(){return a};return b}return a}function d(d){return a.__assign(a.__assign({type:b.invoke},d),{toJSON:function(){d.onDone;d.onError;var e=a.__rest(d,["onDone","onError"]);return a.__assign(a.__assign({},e),{type:b.invoke,src:c(d.src)})}})}Ia.toInvokeDefinition=d;Ia.toInvokeSource=c}var La=!1;function Ma(){La||(La=!0,Ka());return Ja.exports}var Na={},Oa={exports:Na};function Pa(){Object.defineProperty(Na,"__esModule",{value:!0});var a=k(),b=J(),c=p(),d=ka(),e=u(),f=O(),g=E(),h=z(),i=ga(),j=V(),l=Ma(),m="",n="#",o="*",q={},r=function(a){return a[0]===n},s=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},t=function(a,c,d){d=d.slice(0,-1).some(function(a){return!("cond"in a)&&!("in"in a)&&(b.isString(a.target)||b.isMachine(a.target))});c=c===m?"the transient event":"event '".concat(c,"'");b.warn(!d,"One or more transitions for ".concat(c," on state '").concat(a.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},v=function(){function k(c,d,e,j){var n=this;e===void 0&&(e="context"in c?c.context:void 0);this.config=c;this._context=e;this.order=-1;this.__xstatenode=!0;this.__cache={events:void 0,relativeValue:new Map(),initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0};this.idMap={};this.tags=[];this.options=Object.assign(s(),d);this.parent=j===null||j===void 0?void 0:j.parent;this.key=this.config.key||(j===null||j===void 0?void 0:j.key)||this.config.id||"(machine)";this.machine=this.parent?this.parent.machine:this;this.path=this.parent?this.parent.path.concat(this.key):[];this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:h.STATE_DELIMITER);this.id=this.config.id||a.__spreadArray([this.machine.key],a.__read(this.path),!1).join(this.delimiter);this.version=this.parent?this.parent.version:this.config.version;this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic");this.schema=this.parent?this.machine.schema:(c=this.config.schema)!==null&&c!==void 0?c:{};this.description=this.config.description;g.IS_PRODUCTION||b.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead."));this.initial=this.config.initial;this.states=this.config.states?b.mapValues(this.config.states,function(b,c){b=new k(b,{},void 0,{parent:n,key:c});Object.assign(n.idMap,a.__assign((c={},c[b.id]=b,c),b.idMap));return b}):q;var o=0;function p(b){var c,d;b.order=o++;try{for(var e=a.__values(i.getChildren(b)),f=e.next();!f.done;f=e.next()){b=f.value;p(b)}}catch(a){c={error:a}}finally{try{f&&!f.done&&(d=e["return"])&&d.call(e)}finally{if(c)throw c.error}}}p(this);this.history=this.config.history===!0?"shallow":this.config.history||!1;this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(a){a=a.event;return a===m}):m in this.config.on:!1);this.strict=!!this.config.strict;this.onEntry=b.toArray(this.config.entry||this.config.onEntry).map(function(a){return f.toActionObject(a)});this.onExit=b.toArray(this.config.exit||this.config.onExit).map(function(a){return f.toActionObject(a)});this.meta=this.config.meta;this.doneData=this.type==="final"?this.config.data:void 0;this.invoke=b.toArray(this.config.invoke).map(function(c,d){var e;if(b.isMachine(c)){var f=b.createInvokeId(n.id,d);n.machine.options.services=a.__assign((e={},e[f]=c,e),n.machine.options.services);return l.toInvokeDefinition({src:f,id:f})}else if(b.isString(c.src)){var f=c.id||b.createInvokeId(n.id,d);return l.toInvokeDefinition(a.__assign(a.__assign({},c),{id:f,src:c.src}))}else if(b.isMachine(c.src)||b.isFunction(c.src)){var f=c.id||b.createInvokeId(n.id,d);n.machine.options.services=a.__assign((e={},e[f]=c.src,e),n.machine.options.services);return l.toInvokeDefinition(a.__assign(a.__assign({id:f},c),{src:f}))}else{e=c.src;return l.toInvokeDefinition(a.__assign(a.__assign({id:b.createInvokeId(n.id,d)},c),{src:e}))}});this.activities=b.toArray(this.config.activities).concat(this.invoke).map(function(a){return f.toActivityDefinition(a)});this.transition=this.transition.bind(this);this.tags=b.toArray(this.config.tags)}k.prototype._init=function(){if(this.__cache.transitions)return;i.getAllStateNodes(this).forEach(function(a){return a.on})};k.prototype.withConfig=function(c,d){var e=this.options,b=e.actions,f=e.activities,g=e.guards,h=e.services;e=e.delays;return new k(this.config,{actions:a.__assign(a.__assign({},b),c.actions),activities:a.__assign(a.__assign({},f),c.activities),guards:a.__assign(a.__assign({},g),c.guards),services:a.__assign(a.__assign({},h),c.services),delays:a.__assign(a.__assign({},e),c.delays)},d!==null&&d!==void 0?d:this.context)};k.prototype.withContext=function(a){return new k(this.config,this.options,a)};Object.defineProperty(k.prototype,"context",{get:function(){return b.isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:b.mapValues(this.states,function(a){return a.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0});k.prototype.toJSON=function(){return this.definition};Object.defineProperty(k.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var a=this.transitions;return this.__cache.on=a.reduce(function(a,b){a[b.eventType]=a[b.eventType]||[];a[b.eventType].push(b);return a},{})},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0});k.prototype.getCandidates=function(a){if(this.__cache.candidates[a])return this.__cache.candidates[a];var b=a===m,c=this.transitions.filter(function(c){var d=c.eventType===a;return b?d:d||c.eventType===o});this.__cache.candidates[a]=c;return c};k.prototype.getDelayedTransitions=function(){var c=this,d=this.config.after;if(!d)return[];var e=function(a,d){d=b.isFunction(a)?"".concat(c.id,":delay[").concat(d,"]"):a;d=f.after(d,c.id);c.onEntry.push(f.send(d,{delay:a}));c.onExit.push(f.cancel(d));return d},g=b.isArray(d)?d.map(function(b,c){c=e(b.delay,c);return a.__assign(a.__assign({},b),{event:c})}):b.flatten(Object.keys(d).map(function(c,f){var g=d[c];g=b.isString(g)?{target:g}:g;var h=isNaN(+c)?c:+c,i=e(h,f);return b.toArray(g).map(function(b){return a.__assign(a.__assign({},b),{event:i,delay:h})})}));return g.map(function(b){var d=b.delay;return a.__assign(a.__assign({},c.formatTransition(b)),{delay:d})})};k.prototype.getStateNodes=function(c){var e,f=this;if(!c)return[];var g=c instanceof d.State?c.value:b.toStateValue(c,this.delimiter);if(b.isString(g)){c=this.getStateNode(g).initial;return c!==void 0?this.getStateNodes((e={},e[g]=c,e)):[this,this.states[g]]}c=Object.keys(g);e=[this];e.push.apply(e,a.__spreadArray([],a.__read(b.flatten(c.map(function(a){return f.getStateNode(a).getStateNodes(g[a])}))),!1));return e};k.prototype.handles=function(a){a=b.getEventType(a);return this.events.includes(a)};k.prototype.resolveState=function(b){b=b instanceof d.State?b:d.State.create(b);var c=Array.from(i.getConfiguration([],this.getStateNodes(b.value)));return new d.State(a.__assign(a.__assign({},b),{value:this.resolve(b.value),configuration:c,done:i.isInFinalState(c,this),tags:i.getTagsFromConfiguration(c),machine:this.machine}))};k.prototype.transitionLeafNode=function(a,b,c){a=this.getStateNode(a);a=a.next(b,c);return!a||!a.transitions.length?this.next(b,c):a};k.prototype.transitionCompoundNode=function(a,b,c){var d=Object.keys(a),e=this.getStateNode(d[0]);e=e._transition(a[d[0]],b,c);return!e||!e.transitions.length?this.next(b,c):e};k.prototype.transitionParallelNode=function(c,d,e){var f,g,h={};try{for(var i=a.__values(Object.keys(c)),j=i.next();!j.done;j=i.next()){var k=j.value,l=c[k];if(!l)continue;var m=this.getStateNode(k);m=m._transition(l,d,e);m&&(h[k]=m)}}catch(a){f={error:a}}finally{try{j&&!j.done&&(g=i["return"])&&g.call(i)}finally{if(f)throw f.error}}l=Object.keys(h).map(function(a){return h[a]});k=b.flatten(l.map(function(a){return a.transitions}));m=l.some(function(a){return a.transitions.length>0});if(!m)return this.next(d,e);c=b.flatten(l.map(function(a){return a.entrySet}));m=b.flatten(Object.keys(h).map(function(a){return h[a].configuration}));return{transitions:k,entrySet:c,exitSet:b.flatten(l.map(function(a){return a.exitSet})),configuration:m,source:d,actions:b.flatten(Object.keys(h).map(function(a){return h[a].actions}))}};k.prototype._transition=function(a,c,d){if(b.isString(a))return this.transitionLeafNode(a,c,d);return Object.keys(a).length===1?this.transitionCompoundNode(a,c,d):this.transitionParallelNode(a,c,d)};k.prototype.getTransitionData=function(a,c){return this._transition(a.value,a,b.toSCXMLEvent(c))};k.prototype.next=function(d,e){var f,g,h=this,i=e.name,c=[],j=[],k;try{for(var l=a.__values(this.getCandidates(i)),m=l.next();!m.done;m=l.next()){var n=m.value,o=n.cond,p=n["in"],q=d.context;p=p?b.isString(p)&&r(p)?d.matches(b.toStateValue(this.getStateNodeById(p).path,this.delimiter)):b.matchesState(b.toStateValue(p,this.delimiter),b.path(this.path.slice(0,-2))(d.value)):!0;var s=!1;try{s=!o||b.evaluateGuard(this.machine,o,q,e,d)}catch(a){throw new Error("Unable to evaluate guard '".concat(o.name||o.type,"' in transition for event '").concat(i,"' in state node '").concat(this.id,"':\n").concat(a.message))}if(s&&p){n.target!==void 0&&(j=n.target);c.push.apply(c,a.__spreadArray([],a.__read(n.actions),!1));k=n;break}}}catch(a){f={error:a}}finally{try{m&&!m.done&&(g=l["return"])&&g.call(l)}finally{if(f)throw f.error}}if(!k)return void 0;if(!j.length)return{transitions:[k],entrySet:[],exitSet:[],configuration:d.value?[this]:[],source:d,actions:c};q=b.flatten(j.map(function(a){return h.getRelativeStateNodes(a,d.historyValue)}));o=!!k.internal;s=o?[]:b.flatten(q.map(function(a){return h.nodesFromChild(a)}));return{transitions:[k],entrySet:s,exitSet:o?[]:[this],configuration:q,source:d,actions:c}};k.prototype.nodesFromChild=function(a){if(a.escapes(this))return[];var b=[];a=a;while(a&&a!==this)b.push(a),a=a.parent;b.push(this);return b};k.prototype.escapes=function(a){if(this===a)return!1;var b=this.parent;while(b){if(b===a)return!1;b=b.parent}return!0};k.prototype.getActions=function(c,d,e,g){var h,j,k,l;g=i.getConfiguration([],g?this.getStateNodes(g.value):[this]);var m=c.configuration.length?i.getConfiguration(g,c.configuration):g;try{for(var n=a.__values(m),o=n.next();!o.done;o=n.next()){var p=o.value;i.has(g,p)||c.entrySet.push(p)}}catch(a){h={error:a}}finally{try{o&&!o.done&&(j=n["return"])&&j.call(n)}finally{if(h)throw h.error}}try{for(var q=a.__values(g),r=q.next();!r.done;r=q.next()){var p=r.value;(!i.has(m,p)||i.has(c.exitSet,p.parent))&&c.exitSet.push(p)}}catch(a){k={error:a}}finally{try{r&&!r.done&&(l=q["return"])&&l.call(q)}finally{if(k)throw k.error}}g=b.flatten(c.entrySet.map(function(a){var g=[];if(a.type!=="final")return g;var h=a.parent;if(!h.parent)return g;g.push(f.done(a.id,a.doneData),f.done(h.id,a.doneData?b.mapContext(a.doneData,d,e):void 0));a=h.parent;a.type==="parallel"&&(i.getChildren(a).every(function(a){return i.isInFinalState(c.configuration,a)})&&g.push(f.done(a.id)));return g}));c.exitSet.sort(function(a,b){return b.order-a.order});c.entrySet.sort(function(a,b){return a.order-b.order});m=new Set(c.entrySet);p=new Set(c.exitSet);m=a.__read([b.flatten(Array.from(m).map(function(b){return a.__spreadArray(a.__spreadArray([],a.__read(b.activities.map(function(a){return f.start(a)})),!1),a.__read(b.onEntry),!1)})).concat(g.map(f.raise)),b.flatten(Array.from(p).map(function(b){return a.__spreadArray(a.__spreadArray([],a.__read(b.onExit),!1),a.__read(b.activities.map(function(a){return f.stop(a)})),!1)}))],2);g=m[0];p=m[1];m=f.toActionObjects(p.concat(c.actions).concat(g),this.machine.options.actions);return m};k.prototype.transition=function(c,e,f){c===void 0&&(c=this.initialState);e=b.toSCXMLEvent(e);var h;if(c instanceof d.State)h=f===void 0?c:this.resolveState(d.State.from(c,f));else{c=b.isString(c)?this.resolve(b.pathToStateValue(this.getResolvedPath(c))):this.resolve(c);f=f!==null&&f!==void 0?f:this.machine.context;h=this.resolveState(d.State.from(c,f))}if(!g.IS_PRODUCTION&&e.name===o)throw new Error("An event cannot have the wildcard type ('".concat(o,"')"));if(this.strict&&(!this.events.includes(e.name)&&!b.isBuiltInEvent(e.name)))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(e.name,"'"));c=this._transition(h.value,h,e)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:h,actions:[]};f=i.getConfiguration([],this.getStateNodes(h.value));f=c.configuration.length?i.getConfiguration(f,c.configuration):f;c.configuration=a.__spreadArray([],a.__read(f),!1);return this.resolveTransition(c,h,h.context,e)};k.prototype.resolveRaisedTransition=function(b,c,d){var e=b.actions;b=this.transition(b,c);b._event=d;b.event=d.data;(c=b.actions).unshift.apply(c,a.__spreadArray([],a.__read(e),!1));return b};k.prototype.resolveTransition=function(g,h,k,l){var n,o,p=this;l===void 0&&(l=f.initEvent);var q=g.configuration,r=!h||g.transitions.length>0,s=r?i.getValue(this.machine,q):void 0,t=h?h.historyValue?h.historyValue:g.source?this.machine.historyValue(h.value):void 0:void 0,u=this.getActions(g,k,l,h),v=h?a.__assign({},h.activities):{};try{for(var w=a.__values(u),x=w.next();!x.done;x=w.next()){var y=x.value;y.type===e.start?v[y.activity.id||y.activity.type]=y:y.type===e.stop&&(v[y.activity.id||y.activity.type]=!1)}}catch(a){n={error:a}}finally{try{x&&!x.done&&(o=w["return"])&&o.call(w)}finally{if(n)throw n.error}}y=a.__read(f.resolveActions(this,h,k,l,u,this.machine.config.preserveActionOrder),2);u=y[0];var z=y[1];y=a.__read(b.partition(u,function(a){return a.type===e.raise||a.type===e.send&&a.to===c.SpecialTargets.Internal}),2);var A=y[0];y=y[1];u=u.filter(function(a){return a.type===e.start&&((a=a.activity)===null||a===void 0?void 0:a.type)===e.invoke});u=u.reduce(function(b,a){b[a.activity.id]=j.createInvocableActor(a.activity,p.machine,z,l);return b},h?a.__assign({},h.children):{});var B=r?g.configuration:h?h.configuration:[],C=i.isInFinalState(B,this);t=new d.State({value:s||h.value,context:z,_event:l,_sessionid:h?h._sessionid:null,historyValue:s?t?b.updateHistoryValue(t,s):void 0:h?h.historyValue:void 0,history:!s||g.source?h:void 0,actions:s?y:[],activities:s?v:h?h.activities:{},events:[],configuration:B,transitions:g.transitions,children:u,done:C,tags:h===null||h===void 0?void 0:h.tags,machine:this});y=k!==z;t.changed=l.name===e.update||y;s=t.history;s&&delete s.history;v=!C&&(this._transient||q.some(function(a){return a._transient}));if(!r&&(!v||l.name===m))return t;B=t;if(!C){v&&(B=this.resolveRaisedTransition(B,{type:e.nullEvent},l));while(A.length){g=A.shift();B=this.resolveRaisedTransition(B,g._event,l)}}u=B.changed||(s?!!B.actions.length||y||typeof s.value!==typeof B.value||!d.stateValuesEqual(B.value,s.value):void 0);B.changed=u;B.history=s;B.tags=i.getTagsFromConfiguration(B.configuration);return B};k.prototype.getStateNode=function(a){if(r(a))return this.machine.getStateNodeById(a);if(!this.states)throw new Error("Unable to retrieve child state '".concat(a,"' from '").concat(this.id,"'; no child states exist."));var b=this.states[a];if(!b)throw new Error("Child state '".concat(a,"' does not exist on '").concat(this.id,"'"));return b};k.prototype.getStateNodeById=function(a){a=r(a)?a.slice(n.length):a;if(a===this.id)return this;var b=this.machine.idMap[a];if(!b)throw new Error("Child state node '#".concat(a,"' does not exist on machine '").concat(this.id,"'"));return b};k.prototype.getStateNodeByPath=function(a){if(typeof a==="string"&&r(a))try{return this.getStateNodeById(a.slice(1))}catch(a){}a=b.toStatePath(a,this.delimiter).slice();var c=this;while(a.length){var d=a.shift();if(!d.length)break;c=c.getStateNode(d)}return c};k.prototype.resolve=function(a){var c,d=this;if(!a)return this.initialStateValue||q;switch(this.type){case"parallel":return b.mapValues(this.initialStateValue,function(b,c){return b?d.getStateNode(c).resolve(a[c]||b):q});case"compound":if(b.isString(a)){var e=this.getStateNode(a);return e.type==="parallel"||e.type==="compound"?(c={},c[a]=e.initialStateValue,c):a}return!Object.keys(a).length?this.initialStateValue||{}:b.mapValues(a,function(a,b){return a?d.getStateNode(b).resolve(a):q});default:return a||q}};k.prototype.getResolvedPath=function(a){if(r(a)){var c=this.machine.idMap[a.slice(n.length)];if(!c)throw new Error("Unable to find state node '".concat(a,"'"));return c.path}return b.toStatePath(a,this.delimiter)};Object.defineProperty(k.prototype,"initialStateValue",{get:function(){var a;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var c;if(this.type==="parallel")c=b.mapFilterValues(this.states,function(a){return a.initialStateValue||q},function(a){return!(a.type==="history")});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));c=i.isLeafNode(this.states[this.initial])?this.initial:(a={},a[this.initial]=this.states[this.initial].initialStateValue,a)}else c={};this.__cache.initialStateValue=c;return this.__cache.initialStateValue},enumerable:!1,configurable:!0});k.prototype.getInitialState=function(a,b){this._init();a=this.getStateNodes(a);return this.resolveTransition({configuration:a,entrySet:a,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,b!==null&&b!==void 0?b:this.machine.context,void 0)};Object.defineProperty(k.prototype,"initialState",{get:function(){var a=this.initialStateValue;if(!a)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(a)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"target",{get:function(){var a;if(this.type==="history"){var c=this.config;b.isString(c.target)?a=r(c.target)?b.pathToStateValue(this.machine.getStateNodeById(c.target).path.slice(this.path.length-1)):c.target:a=c.target}return a},enumerable:!1,configurable:!0});k.prototype.getRelativeStateNodes=function(a,b,c){c===void 0&&(c=!0);return c?a.type==="history"?a.resolveHistory(b):a.initialStateNodes:[a]};Object.defineProperty(k.prototype,"initialStateNodes",{get:function(){var a=this;if(i.isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial){g.IS_PRODUCTION||b.warn(!1,"Compound state node '".concat(this.id,"' has no initial state."));return[this]}var c=b.toStatePaths(this.initialStateValue);return b.flatten(c.map(function(b){return a.getFromRelativePath(b)}))},enumerable:!1,configurable:!0});k.prototype.getFromRelativePath=function(b){if(!b.length)return[this];b=a.__read(b);var c=b[0];b=b.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(c,"' from node with no states"));var d=this.getStateNode(c);if(d.type==="history")return d.resolveHistory();if(!this.states[c])throw new Error("Child state '".concat(c,"' does not exist on '").concat(this.id,"'"));return this.states[c].getFromRelativePath(b)};k.prototype.historyValue=function(a){return!Object.keys(this.states).length?void 0:{current:a||this.initialStateValue,states:b.mapFilterValues(this.states,function(c,d){if(!a)return c.historyValue();d=b.isString(a)?void 0:a[d];return c.historyValue(d||c.initialStateValue)},function(a){return!a.history})}};k.prototype.resolveHistory=function(a){var c=this;if(this.type!=="history")return[this];var d=this.parent;if(!a){var e=this.target;return e?b.flatten(b.toStatePaths(e).map(function(a){return d.getFromRelativePath(a)})):d.initialStateNodes}e=b.nestedPath(d.path,"states")(a).current;return b.isString(e)?[d.getStateNode(e)]:b.flatten(b.toStatePaths(e).map(function(a){return c.history==="deep"?d.getFromRelativePath(a):[d.states[a[0]]]}))};Object.defineProperty(k.prototype,"stateIds",{get:function(){var a=this,c=b.flatten(Object.keys(this.states).map(function(b){return a.states[b].stateIds}));return[this.id].concat(c)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"events",{get:function(){var b,c,d,e;if(this.__cache.events)return this.__cache.events;var f=this.states,g=new Set(this.ownEvents);if(f)try{for(var h=a.__values(Object.keys(f)),i=h.next();!i.done;i=h.next()){var j=i.value;j=f[j];if(j.states)try{for(var k=(d=void 0,a.__values(j.events)),l=k.next();!l.done;l=k.next()){j=l.value;g.add("".concat(j))}}catch(a){d={error:a}}finally{try{l&&!l.done&&(e=k["return"])&&e.call(k)}finally{if(d)throw d.error}}}}catch(a){b={error:a}}finally{try{i&&!i.done&&(c=h["return"])&&c.call(h)}finally{if(b)throw b.error}}return this.__cache.events=Array.from(g)},enumerable:!1,configurable:!0});Object.defineProperty(k.prototype,"ownEvents",{get:function(){var a=new Set(this.transitions.filter(function(a){return!(!a.target&&!a.actions.length&&a.internal)}).map(function(a){return a.eventType}));return Array.from(a)},enumerable:!1,configurable:!0});k.prototype.resolveTarget=function(a){var c=this;return a===void 0?void 0:a.map(function(a){if(!b.isString(a))return a;var d=a[0]===c.delimiter;if(d&&!c.parent)return c.getStateNodeByPath(a.slice(1));d=d?c.key+a:a;if(c.parent)try{a=c.parent.getStateNodeByPath(d);return a}catch(a){throw new Error("Invalid transition definition for state node '".concat(c.id,"':\n").concat(a.message))}else return c.getStateNodeByPath(d)})};k.prototype.formatTransition=function(c){var d=this,e=b.normalizeTarget(c.target),g="internal"in c?c.internal:e?e.some(function(a){return b.isString(a)&&a[0]===d.delimiter}):!0,h=this.machine.options.guards;e=this.resolveTarget(e);var i=a.__assign(a.__assign({},c),{actions:f.toActionObjects(b.toArray(c.actions)),cond:b.toGuard(c.cond,h),target:e,source:this,internal:g,eventType:c.event,toJSON:function(){return a.__assign(a.__assign({},i),{target:i.target?i.target.map(function(a){return"#".concat(a.id)}):void 0,source:"#".concat(d.id)})}});return i};k.prototype.formatTransitions=function(){var c,d,e=this,h;if(!this.config.on)h=[];else if(Array.isArray(this.config.on))h=this.config.on;else{var i=this.config.on,j=o,k=i[j];k=k===void 0?[]:k;var l=a.__rest(i,[typeof j==="symbol"?j:j+""]);h=b.flatten(Object.keys(l).map(function(a){!g.IS_PRODUCTION&&a===m&&b.warn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(e.id,'".'));var c=b.toTransitionConfigArray(a,l[a]);g.IS_PRODUCTION||t(e,a,c);return c}).concat(b.toTransitionConfigArray(o,k)))}i=this.config.always?b.toTransitionConfigArray("",this.config.always):[];j=this.config.onDone?b.toTransitionConfigArray(String(f.done(this.id)),this.config.onDone):[];g.IS_PRODUCTION||b.warn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));k=b.flatten(this.invoke.map(function(c){var d=[];c.onDone&&d.push.apply(d,a.__spreadArray([],a.__read(b.toTransitionConfigArray(String(f.doneInvoke(c.id)),c.onDone)),!1));c.onError&&d.push.apply(d,a.__spreadArray([],a.__read(b.toTransitionConfigArray(String(f.error(c.id)),c.onError)),!1));return d}));var n=this.after;j=b.flatten(a.__spreadArray(a.__spreadArray(a.__spreadArray(a.__spreadArray([],a.__read(j),!1),a.__read(k),!1),a.__read(h),!1),a.__read(i),!1).map(function(a){return b.toArray(a).map(function(a){return e.formatTransition(a)})}));try{for(var p=a.__values(n),q=p.next();!q.done;q=p.next()){k=q.value;j.push(k)}}catch(a){c={error:a}}finally{try{q&&!q.done&&(d=p["return"])&&d.call(p)}finally{if(c)throw c.error}}return j};return k}();Na.StateNode=v}var Qa=!1;function Ra(){Qa||(Qa=!0,Pa());return Oa.exports}var Sa={},Ta={exports:Sa};function Ua(){Object.defineProperty(Sa,"__esModule",{value:!0});var a=Ra();function b(b,c,d){d===void 0&&(d=b.context);return new a.StateNode(b,c,d)}function c(b,c){return new a.StateNode(b,c)}Sa.Machine=b;Sa.createMachine=c}var Va=!1;function Wa(){Va||(Va=!0,Ua());return Ta.exports}var Xa={},Ya={exports:Xa};function Za(){Object.defineProperty(Xa,"__esModule",{value:!0});var a=k(),b=J();function c(c,d){var e,f,g;try{for(var h=a.__values(Object.keys(c)),i=h.next();!i.done;i=h.next()){var j=i.value;b.matchesState(j,d)&&(!g||d.length>g.length)&&(g=j)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(f=h["return"])&&f.call(h)}finally{if(e)throw e.error}}return c[g]}Xa.mapState=c}var $a=!1;function ab(){$a||($a=!0,Za());return Ya.exports}var bb={},cb={exports:bb};function db(){Object.defineProperty(bb,"__esModule",{value:!0});var a=k(),b=ka();function c(c,d,e){var f,g;c=b.State.from(c,c instanceof b.State?c.context:void 0);try{for(var h=a.__values(d),i=h.next();!i.done;i=h.next()){d=a.__read(i.value,2);var j=d[0];d=d[1];if(c.matches(j))return d(c)}}catch(a){f={error:a}}finally{try{i&&!i.done&&(g=h["return"])&&g.call(h)}finally{if(f)throw f.error}}return e(c)}bb.matchState=c}var eb=!1;function fb(){eb||(eb=!0,db());return cb.exports}var gb={},hb={exports:gb};function ib(){Object.defineProperty(gb,"__esModule",{value:!0});function a(a){return a}var b=a;gb.createSchema=a;gb.t=b}var jb=!1;function kb(){jb||(jb=!0,ib());return hb.exports}var $={},lb={exports:$};function mb(){Object.defineProperty($,"__esModule",{value:!0});var a=O(),b=V(),c=Ha(),d=Wa(),e=ab(),f=fb(),g=kb(),h=ka(),i=Ra(),j=Da(),k=p(),l=J(),m=a.assign,n=a.send,o=a.sendParent,q=a.sendUpdate,r=a.forwardTo,s=a.doneInvoke;$.actions=a;$.toActorRef=b.toActorRef;$.Interpreter=c.Interpreter;Object.defineProperty($,"InterpreterStatus",{enumerable:!0,get:function(){return c.InterpreterStatus}});$.interpret=c.interpret;$.spawn=c.spawn;$.Machine=d.Machine;$.createMachine=d.createMachine;$.mapState=e.mapState;$.matchState=f.matchState;$.createSchema=g.createSchema;$.t=g.t;$.State=h.State;$.StateNode=i.StateNode;$.spawnBehavior=j.spawnBehavior;Object.defineProperty($,"ActionTypes",{enumerable:!0,get:function(){return k.ActionTypes}});Object.defineProperty($,"SpecialTargets",{enumerable:!0,get:function(){return k.SpecialTargets}});$.matchesState=l.matchesState;$.toEventObject=l.toEventObject;$.toObserver=l.toObserver;$.toSCXMLEvent=l.toSCXMLEvent;$.assign=m;$.doneInvoke=s;$.forwardTo=r;$.send=n;$.sendParent=o;$.sendUpdate=q}var nb=!1;function ob(){nb||(nb=!0,mb());return lb.exports}function b(a){switch(a){case void 0:return ob();case"/lib/utils":return J()}}e.exports=b}),null);
__d("xstate",["xstate-4.30.6"],(function(a,b,c,d,e,f){e.exports=b("xstate-4.30.6")()}),null);
__d("ZenonDeferrableStateMachine",["DateConsts","clearTimeout","setTimeout","xstate"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC;function a(a,b){b=b===void 0?babelHelpers["extends"]({},null):b;var e=b.deferTimeout,f=b.onDeferTimeout,g=[],i=new Map(),j=d("xstate").interpret(a.withConfig({actions:{defer:function(a,b){g.push(b);if(f){i.set(b,c("setTimeout")(function(){f(b)},(a=e)!=null?a:h))}}}})).onTransition(function(a){if(a.value!==((a=a.history)==null?void 0:a.value)){a=g;g=[];while(a.length>0){var b=a.shift();j.send(b);c("clearTimeout")(i.get(b));i["delete"](b)}}}).start();return j}g.interpret=a}),98);
__d("ZenonStateMachineBase",["ZenonDebugLogger","ZenonDeferrableStateMachine","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogger","xstate"],(function(a,b,c,d,e,f,g){"use strict";a={actions:["defer"]};b=function(){function a(a){var b=this,e=a.base,f=a.logging;a=a.machine;this.$1=f.name;this.$2=e.initState;this.loggingId=f.loggingId;this.$3=f.getTransactionId;this.$4=f.loggingStateName;this.$5=f.loggableEvents;a={context:a.context,initial:a.initialState,states:a.states};e={guards:e.guards};var g={onDeferTimeout:function(a){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"["+f.shortname+"] "+a.type+" was deferred for too long"}),(f.eventToLogTimeoutsOn==null||f.eventToLogTimeoutsOn===a.type)&&b.logTransaction(a,f.timeoutEvent)}};a=d("xstate").Machine(a,e);this.sm=d("ZenonDeferrableStateMachine").interpret(a,g)}var b=a.prototype;b.processEvent=function(a){this.logEvent(a),this.sm.send(a)};b.logEvent=function(a,b){c("ZenonDebugLogger").getInstance().logStateMachine(this.$1,this.getState(),a.type,this.loggingId.toString(),b)};b.logTransaction=function(a,b){if(this.$5.includes(a.type)){var c=this.$3(a);if(c!=null){a={smEvent:a.type};a[this.$4]=this.getState();d("ZenonMWMessageReliabilityLogger").logEventForTxid(c,b,a)}}};b.logTransition=function(a,b){var d;c("ZenonDebugLogger").getInstance().logStateMachineTransition(this.$1,a.changed,a.value,(d=a.history)==null?void 0:d.value,a.event.type,a.actions,this.loggingId.toString(),b)};b.getContext=function(){return this.sm.state.context};b.getState=function(){var a=this.sm.state.toStrings();return a.length>0?a[0]:this.$2};return a}();g.defer=a;g.ZenonStateMachineBase=b}),98);
__d("ZenonConnectionStateMachine",["ZenonConnectionInitState","ZenonConnectionPeerConnectionRestartingState","ZenonConnectionSMGuards","ZenonConnectionSdpNegotiatedState","ZenonConnectionSdpSetState","ZenonConnectionSharedActions","ZenonConnectionTerminatedState","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogger","ZenonStateMachineBase","immutable","qpl","xstate"],(function(a,b,c,d,e,f,g){"use strict";var h={activePeerConnection:"primary",currentSubscriptionRequest:null,dataMessageSubscriptions:c("immutable").Map({}),disconnectTime:0},i={loggingStateName:"connectionState",name:"ConnectionStateMachine",shortname:"Connection",timeoutEvent:d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.STUCK_IN_CONNECTION_STATE_MACHINE};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;e===void 0&&(e="init");f=a.call(this,{base:{guards:d("ZenonConnectionSMGuards"),initState:"init"},logging:babelHelpers["extends"]({},i,{eventToLogTimeoutsOn:"sdpReceived",getTransactionId:function(a){return(a=a.payload)==null?void 0:a.messageID},loggableEvents:["sdpReceived"],loggingId:+b.signalingClient.getSignalingModel().getSignalingID()}),machine:{context:babelHelpers["extends"]({},h,b),initialState:e,states:I}})||this;f.sm.onTransition(function(a){var e;c("ZenonInfraActionsLogger").updateCachedValues({connectionState:a.value});f.logTransition(a);((e=a.history)==null?void 0:e.value)!==a.value&&b.updateConnectionModel(function(b){b.updateConnectionState(a.value)});f.logTransaction(a.event,d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.PROCESSED_SM_EVENT)});c("ZenonDebugLogger").getInstance().startQPL(c("qpl")._(64243854,"2452"),f.loggingId);return f}return b}(d("ZenonStateMachineBase").ZenonStateMachineBase);b={actions:[d("ZenonConnectionSharedActions").onAddParticipants]};e={actions:[d("ZenonConnectionSharedActions").onLocalMediaStateUpdateProcessing]};f={actions:[d("ZenonConnectionSharedActions").onMediaUpdateReceived]};var j={actions:[d("ZenonConnectionSharedActions").onMediaUpdateResponseReceived]},k={actions:[d("ZenonConnectionSharedActions").onStopLocalTrack]},l={actions:[d("ZenonConnectionSharedActions").onLocalMediaStateUpdateReady]},m={actions:[d("ZenonConnectionSharedActions").onEndConnection],target:"terminated"},n={actions:[d("ZenonConnectionSharedActions").onCapabilitiesReceived]},o={actions:[d("ZenonConnectionSharedActions").onClientInfoReceived]},p={actions:[d("ZenonConnectionSharedActions").onParticipantUpdateReceivedEvent]},q={actions:[d("ZenonConnectionSharedActions").onRemoveParticipants]},r={actions:[d("ZenonConnectionSharedActions").onIceCandidateReady]},s={actions:[d("xstate").assign(d("ZenonConnectionSharedActions").onCreateDataMessageSubscription)]},t={actions:[d("xstate").assign(d("ZenonConnectionSharedActions").onRemoveDataMessageSubscription)]},u={actions:[d("ZenonConnectionSharedActions").onDataMessageReceived]},v={actions:[d("ZenonConnectionSharedActions").onRoomContextUpdateReceived]},w={actions:[d("ZenonConnectionSharedActions").onIceCandidateReceived]},x={actions:[d("ZenonConnectionSharedActions").onConnectionDestroyed],cond:d("ZenonConnectionSMGuards").activePeerConnectionGuard,target:"terminated"},y={actions:[d("xstate").assign(d("ZenonConnectionSharedActions").onConnectionDropped)],cond:d("ZenonConnectionSMGuards").activePeerConnectionGuard},z={actions:[d("ZenonConnectionSdpSetState").onConnectionEstablished]},A={actions:[d("ZenonConnectionSharedActions").onStateSyncUnsubscribe]},B={actions:[d("ZenonConnectionSharedActions").onStateSyncUpdate]},C={actions:[d("xstate").assign(d("ZenonConnectionSharedActions").onSubscriptionRequest)]},D={actions:[d("ZenonConnectionSharedActions").onSendGenericDataMessage]},E={actions:[d("ZenonConnectionSharedActions").onUserApprovalRequest]},F={actions:[d("ZenonConnectionSharedActions").onForceEncodingEnabled]},G={actions:[d("xstate").assign(d("ZenonConnectionSdpNegotiatedState").onInitiatePeerConnectionRestarting)],target:"peerConnectionRestarting"},H={actions:[d("ZenonConnectionSharedActions").onSctpNegotiationStateUpdate]},I={init:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionRoomUpdateReceived:v,createConnection:[{actions:[d("ZenonConnectionInitState").onCreateConnection],cond:d("ZenonConnectionSMGuards").outgoingConnectionGuard,target:"creatingSdp"},{actions:[d("ZenonConnectionInitState").onCreateConnection],cond:d("ZenonConnectionSMGuards").incomingConnectionGuard,target:"waitingForIncoming"}],createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:f,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,participantUpdateReceived:p,removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:d("ZenonStateMachineBase").defer,sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},waitingForIncoming:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:f,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,offerReady:[{actions:[d("ZenonConnectionSharedActions").onOfferReady],target:"sdpSet"}],participantUpdateReceived:p,removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:[{actions:[d("ZenonConnectionSharedActions").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpOfferReceiveGuard,target:"creatingSdp"}],sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},creatingSdp:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,answerReady:[{actions:[d("ZenonConnectionSharedActions").onAnswerReady],target:"sdpNegotiated"}],capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:f,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,offerReady:[{actions:[d("ZenonConnectionSharedActions").onOfferReady],target:"sdpSet"}],participantUpdateReceived:p,removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:d("ZenonStateMachineBase").defer,sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},sdpSet:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionDropped:y,connectionEstablished:[{actions:[d("ZenonConnectionSdpSetState").onConnectionEstablished]}],connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiatePeerConnectionRestarting:G,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:f,mediaUpdateResponseReceived:j,participantUpdateReceived:p,pendingApproval:[{target:"pendingApproval"}],remoteSdpSet:{target:"sdpNegotiated"},removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:[{actions:[d("ZenonConnectionSharedActions").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpAnswerReceiveGuard},{actions:[d("ZenonConnectionSharedActions").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpPrAnswerReceiveGuard},babelHelpers["extends"]({},d("ZenonStateMachineBase").defer,{cond:d("ZenonConnectionSMGuards").sdpOfferReceiveGuard})],sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},pendingApproval:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,capabilitiesReceived:d("ZenonStateMachineBase").defer,clientInfoReceived:d("ZenonStateMachineBase").defer,connectionDestroyed:x,connectionRoomUpdateReceived:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataMessageReceived:d("ZenonStateMachineBase").defer,endConnection:m,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceCandidateReceived:d("ZenonStateMachineBase").defer,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiatePeerConnectionRestarting:G,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:d("ZenonStateMachineBase").defer,localMediaStateUpdateReady:d("ZenonStateMachineBase").defer,mediaUpdateReceived:f,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,participantUpdateReceived:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:d("ZenonStateMachineBase").defer,subscriptionRequest:d("ZenonStateMachineBase").defer}},sdpNegotiated:{on:{addLocalTracks:[{actions:[d("ZenonConnectionSdpNegotiatedState").onAddScreenShareLocalTrack],cond:d("ZenonConnectionSMGuards").addScreenShareTrackWithReplaceGuard},{actions:[d("ZenonConnectionSharedActions").initiateClientRenegotiation]}],addParticipants:b,capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionDropped:y,connectionEstablished:z,connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:{actions:[d("ZenonConnectionSdpNegotiatedState").onAddLocalTracks],target:"clientInitiatedRenegotiation"},initiatePeerConnectionRestarting:G,initiateRemoveLocalTrack:{actions:[d("ZenonConnectionSdpNegotiatedState").onRemoveLocalTrack],target:"clientInitiatedRenegotiation"},localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:f,mediaUpdateResponseReceived:j,offerReady:{actions:[d("ZenonConnectionSharedActions").onOfferReady],target:"clientInitiatedRenegotiation"},participantUpdateReceived:p,removeDataMessageSubscription:t,removeLocalTrack:[{actions:[d("ZenonConnectionSdpNegotiatedState").onRemoveScreenShareLocalTrack],cond:d("ZenonConnectionSMGuards").removeScreenShareTrackWithReplaceGuard},{actions:[d("ZenonConnectionSharedActions").initiateClientRenegotiation]}],removeParticipants:q,replaceLocalTrack:{actions:[d("ZenonConnectionSdpNegotiatedState").onReplaceLocalTrack]},sctpNegotiationStateUpdate:H,sdpReceived:{actions:[d("ZenonConnectionSharedActions").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpOfferReceiveGuard,target:"serverInitiatedRenegotiating"},sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:C,userApprovalRequest:E}},serverInitiatedRenegotiating:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,addParticipants:d("ZenonStateMachineBase").defer,answerReady:[{actions:[d("ZenonConnectionSharedActions").onAnswerReady],cond:d("ZenonConnectionSMGuards").delayTransitioningOutOfRenegotiatingGuard},{actions:[d("ZenonConnectionSharedActions").onAnswerReady],target:"sdpNegotiated"}],capabilitiesReceived:d("ZenonStateMachineBase").defer,clientInfoReceived:d("ZenonStateMachineBase").defer,connectionDestroyed:x,connectionDropped:y,connectionEstablished:z,connectionRoomUpdateReceived:v,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiatePeerConnectionRestarting:d("ZenonStateMachineBase").defer,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:l,mediaUpdateReceived:d("ZenonStateMachineBase").defer,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,offerReady:{actions:[d("ZenonConnectionSharedActions").onOfferReadyCancel]},participantUpdateReceived:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sendGenericDataMessage:D,serverRenegotiationFinished:[{cond:d("ZenonConnectionSMGuards").delayTransitioningOutOfRenegotiatingGuard,target:"sdpNegotiated"}],stateSyncUnsubscribe:d("ZenonStateMachineBase").defer,stateSyncUpdate:d("ZenonStateMachineBase").defer,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},clientInitiatedRenegotiation:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:x,connectionDropped:y,connectionEstablished:[{actions:[d("ZenonConnectionSdpSetState").onConnectionEstablished]}],connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:u,endConnection:m,forceEncodingEnabled:F,iceCandidateReady:r,iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiatePeerConnectionRestarting:d("ZenonStateMachineBase").defer,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:d("ZenonStateMachineBase").defer,localMediaStateUpdateReady:d("ZenonStateMachineBase").defer,mediaUpdateReceived:f,mediaUpdateResponseReceived:[{actions:[d("ZenonConnectionSharedActions").onMediaUpdateResponseReceived],cond:d("ZenonConnectionSMGuards").cancelNegotiationsGuard,target:"sdpNegotiated"},{actions:[d("ZenonConnectionSharedActions").onMediaUpdateResponseReceived]}],offerReady:{actions:[d("ZenonConnectionSharedActions").onOfferReady]},participantUpdateReceived:p,remoteSdpSet:{target:"sdpNegotiated"},removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:[{actions:[d("ZenonConnectionSharedActions").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpAnswerReceiveGuard},d("ZenonStateMachineBase").defer],sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:d("ZenonStateMachineBase").defer,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},peerConnectionRestarting:{on:{addLocalTracks:d("ZenonStateMachineBase").defer,addParticipants:b,answerReady:{actions:[d("ZenonConnectionSharedActions").onAnswerReady]},capabilitiesReceived:n,clientInfoReceived:o,connectionDestroyed:babelHelpers["extends"]({},x,{cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard}),connectionDropped:y,connectionEstablished:{actions:[d("xstate").assign(d("ZenonConnectionPeerConnectionRestartingState").onSecondaryConnectionEstablished)],cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard,target:"sdpNegotiated"},connectionRoomUpdateReceived:v,createDataMessageSubscription:s,dataMessageReceived:babelHelpers["extends"]({},u,{cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard}),endConnection:m,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:babelHelpers["extends"]({},r,{cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard}),iceCandidateReceived:w,initiateAddLocalTracks:d("ZenonStateMachineBase").defer,initiatePeerConnectionRestarting:G,initiateRemoveLocalTrack:d("ZenonStateMachineBase").defer,localMediaStateUpdateProcessing:e,localMediaStateUpdateReady:babelHelpers["extends"]({},l,{cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard}),mediaUpdateReceived:d("ZenonStateMachineBase").defer,mediaUpdateResponseReceived:d("ZenonStateMachineBase").defer,offerReady:{actions:[d("ZenonConnectionSharedActions").onOfferReady],cond:d("ZenonConnectionSMGuards").secondaryPeerConnectionGuard},participantUpdateReceived:p,removeDataMessageSubscription:t,removeLocalTrack:d("ZenonStateMachineBase").defer,removeParticipants:q,replaceLocalTrack:d("ZenonStateMachineBase").defer,sctpNegotiationStateUpdate:H,sdpReceived:[{actions:[d("ZenonConnectionPeerConnectionRestartingState").onSdpReceived],cond:d("ZenonConnectionSMGuards").sdpAnswerOrP2POfferReceiveGuard},d("ZenonStateMachineBase").defer],sendGenericDataMessage:D,stateSyncUnsubscribe:A,stateSyncUpdate:B,stopLocalTrack:k,subscriptionRequest:d("ZenonStateMachineBase").defer,userApprovalRequest:E}},terminated:{on:{sdpReceived:[{actions:[d("ZenonConnectionTerminatedState").onSdpReceived]}]}}};g["default"]=a}),98);
__d("ZenonRTWebBrowserFeatureSupport",["RTCPeerConnection"],(function(a,b,c,d,e,f,g){"use strict";function a(){return typeof window.HTMLCanvasElement==="function"&&typeof window.HTMLCanvasElement.prototype.captureStream==="function"}function b(){return h("getSenders")}function d(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.replaceTrack==="function"}function e(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.createEncodedStreams==="function"}function f(){return typeof window.RTCRtpSender==="function"&&typeof window.RTCRtpSender.prototype.transform==="function"}function h(a){return typeof c("RTCPeerConnection").prototype[a]==="function"}g.isCanvasStreamSupported=a;g.isGetSendersSupported=b;g.isReplaceTrackSupported=d;g.isInsertableStreamsSupported=e;g.isInsertableStreamsSupportedInSafari=f}),98);
__d("ZenonConnectionStateModel",["DateConsts","ZenonBrowsers","ZenonCallFeatures","ZenonConnectionStateTypes","ZenonInfraActionsLogger","ZenonNetworkQualityMonitor","ZenonParticipantState","ZenonRTWebBrowserFeatureSupport","ZenonScreenShare","ZenonScreenSharingAvailabilityType","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g,h){var i;g===void 0&&(g={groupThreadID:null,peerID:null,serverInfoData:null});h===void 0&&(h="init");this.$12=new Map();this.selfParticipantID=(i=a.getActorID())!=null?i:a.getUserInfo().userID;this.collisionContext=g;this.connectionDirection=e;this.connectionState=h;this.actorRepresentatives=new Map();this.duplicatedParticipantsProcessingMode=(i=d("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.cast(f.getZenonGeneralizedIdentityConfig().getDuplicatedParticipantsProcessingMode()))!=null?i:d("ZenonConnectionStateTypes").ZenonDuplicatedParticipantsProcessingMode.REMOVE_DUPLICATED;this.currentUserCapabilities=new(c("ZenonCallFeatures"))({canReplaceLocalStreams:!0,cowatchEnabled:!0,cowatchGroupEnabled:!0,multiwayVideoEscalation:f.getZenonPlatformSupportConfig().isMultiwayAvEscalationEnabled()&&d("ZenonBrowsers").supportsMWAVEscalation(),networkStatus:{local:d("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Good,remote:c("immutable").Map()},screenSharingAvailability:d("ZenonRTWebBrowserFeatureSupport").isReplaceTrackSupported()?c("ZenonScreenSharingAvailabilityType").Available:c("ZenonScreenSharingAvailabilityType").Unknown,supportMultipleStreams:!d("ZenonScreenShare").screenShareWithReplaceTrack()});this.$5=function(){return new Map()};this.$6=function(){return[]};this.$7=function(){return[]};this.$8=function(){return a.getStateSyncStore().getInputStates()};this.$9=function(){return a.getStateSyncStore().getOutputStates()};this.$10=new Map();this.$1=b;this.$1.set(this.selfParticipantID,d("ZenonParticipantState").ZenonParticipantState.DISCONNECTED);this.$2=new Set();this.$4=new Map(this.$1);this.$11=null;this.$13=new Map();this.$3=new Map()}var b=a.prototype;b.overrideCurrentUserCapabilities=function(a){this.currentUserCapabilities=a};b.startFailedSubscriptionTimer=function(a){if(this.$12.get(a)!=null)return;var b=15;this.$12.set(a,window.setTimeout(function(){c("ZenonInfraActionsLogger").logError({callType:"mw",checkpoint:"[ZP] Failed subscription request for user: "+a+"\n            was never retried after "+b+" seconds",errorDomain:"ZenonConnectionStateModel_startFailedSubscriptionTimer"})},b*d("DateConsts").MS_PER_SEC))};b.clearFailedSubscriptionTimer=function(a){var b=this.$12.get(a);b!=null&&(window.clearTimeout(b),this.$12["delete"](a))};b.getConsolidatedParticipantStates=function(){return this.$4};b.getConnectedParticipantIDs=function(){var a=this;return new Set(Array.from(this.$4.keys()).filter(function(b){return a.$4.get(b)===d("ZenonParticipantState").ZenonParticipantState.CONNECTED}))};b.getRemoteConnectedParticipantIDs=function(){var a=this;return new Set(Array.from(this.$4.keys()).filter(function(b){return b!==a.selfParticipantID&&a.$4.get(b)===d("ZenonParticipantState").ZenonParticipantState.CONNECTED}))};b.updateParticipantState=function(a,b){this.$1.set(a,b),this.$2.has(a)||(this.$4=this.$4.set(a,b),b!==d("ZenonParticipantState").ZenonParticipantState.CONNECTED&&this.$11!=null&&this.$11.has(a)&&this.$11["delete"](a))};b.updateConnectionState=function(a){this.connectionState=a};b.updateCurrentUserCapabilities=function(a){a.addParticipantEnabled!=null&&(this.currentUserCapabilities=this.currentUserCapabilities.set("canAddParticipants",a.addParticipantEnabled)),a.cowatchEnabled!=null&&(this.currentUserCapabilities=this.currentUserCapabilities.set("cowatchEnabled",a.cowatchEnabled)),a.cowatchGroupEnabled!=null&&(this.currentUserCapabilities=this.currentUserCapabilities.set("cowatchGroupEnabled",a.cowatchGroupEnabled)),a.multipleVideoStreamsAllowed!=null&&(this.currentUserCapabilities=this.currentUserCapabilities.set("supportMultipleStreams",a.multipleVideoStreamsAllowed)),a.multiwayVideoEscalation!=null&&(this.currentUserCapabilities=this.currentUserCapabilities.set("multiwayVideoEscalation",a.multiwayVideoEscalation))};b.updateAllParticipantsCapabilities=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];this.$3.set(e,d)}};b.getUserCapabilities=function(a){return(a=this.$3.get(a))!=null?a:""};b.updateNetworkStatus=function(a){this.currentUserCapabilities=this.currentUserCapabilities.set("networkStatus",a)};b.updateConsolidatedParticipantStates=function(){var a=new Map(this.$1);this.$2.forEach(function(b){a.set(b,d("ZenonParticipantState").ZenonParticipantState.CONNECTED)});this.$4=a};b.getTracks=function(){return this.$5()};b.registerTrackFetcher=function(a){this.$5=a};b.getRtpSenders_I_KNOW_WHAT_I_AM_DOING=function(){return this.$6()};b.registerRtpSendersFetcher=function(a){this.$6=a};b.getRtpReceivers_I_KNOW_WHAT_I_AM_DOING=function(){return this.$7()};b.registerRtpReceiversFetcher=function(a){this.$7=a};b.getStateSyncInputs=function(){return this.$8()};b.getStateSyncOutputs=function(){return this.$9()};b.getUserToTracksMap=function(){return this.$10};b.getRemoteUserToTracksMap=function(){var a=this;return new Map(Array.from(this.$10.entries()).filter(function(b){b=b[0];return b!==a.selfParticipantID}))};b.getExistingParticipantIds=function(){return this.$11||new Set()};b.addLocalTrackToTrackMap=function(a){this.$14(a,this.selfParticipantID)};b.$14=function(a,b){var c;c=(c=this.$10.get(b))!=null?c:new Map();c.set(a.trackID,a);this.$10.set(b,c)};b.removeLocalTrackFromTrackMap=function(a){var b;b=(b=this.$10.get(this.selfParticipantID))!=null?b:new Map();b["delete"](a)};b.updateTrackMapFromMediaStates=function(a){var b=this;this.$2=new Set();a.forEach(function(a){var c=a.participantID;c!=null&&(b.$14(a,c),b.$2.add(c))});this.updateConsolidatedParticipantStates()};b.updateExistingParticipantsFromMediaStateTracks=function(a){if(this.$11==null){var b=new Set();a.forEach(function(a){a=a.participantID;a!=null&&b.add(a)});this.$11=b}};b.getIsUserVideoSubscribed=function(a){return(a=this.$13.get(a))!=null?a:!1};b.updateUserVideoSubscription=function(a,b){this.$13.set(a,b)};b.clearAllUserVideoSubscriptions=function(){this.$13=new Map()};return a}();g["default"]=a}),98);
__d("ZenonConnectionStatePeerConnectionDelegate",[],(function(a,b,c,d,e,f){"use strict";var g={connectionDestroyed:function(a,b,c){a.processEvent({payload:{error:c,peerConnectionRole:b},type:"connectionDestroyed"})},connectionDropped:function(a,b){a.processEvent({payload:{peerConnectionRole:b},type:"connectionDropped"})},connectionEstablished:function(a,b){a.processEvent({payload:{peerConnectionRole:b},type:"connectionEstablished"})},createDataMessageSubscription:function(a,b,c){a.processEvent({payload:{dataChannelLabel:b,messageHandler:c},type:"createDataMessageSubscription"})},dataChannelMesageReceived:function(a,b,c,d){a.processEvent({payload:{data:d,dataChannelLabel:c,peerConnectionRole:b},type:"dataMessageReceived"})},removeDataMessageSubscription:function(a,b,c){a.processEvent({payload:{dataChannelLabel:b,messageHandler:c},type:"removeDataMessageSubscription"})},sendIceCandidate:function(a,b,c){a.processEvent({payload:{candidate:c,peerConnectionRole:b},type:"iceCandidateReady"})},sendLocalMediaStateUpdate:function(a,b,c){a.processEvent({payload:{mediaStates:c,peerConnectionRole:b},type:"localMediaStateUpdateReady"})},sendRemoteSdpSet:function(a,b){a.processEvent({payload:{peerConnectionRole:b},type:"remoteSdpSet"})},sendSdpReady:function(a,b,c,d,e){var f={tracks:[],version:c.version};d.forEach(function(a){a={enabled:a.enabled,participantID:e,trackID:a.trackId,type:a.contentType};f.tracks.push(a)});d={mediaStates:f,peerConnectionRole:b,sdp:c};c.type==="offer"?a.processEvent({payload:d,type:"offerReady"}):a.processEvent({payload:d,type:"answerReady"})},setPeerConnectionEventHandlers:function(a,b,c,d){a.setPeerConnectionEventHandlers({onConnectionDestroyed:function(a){return g.connectionDestroyed(b,c,a)},onConnectionDropped:function(){return g.connectionDropped(b,c)},onConnectionEstablished:function(){return g.connectionEstablished(b,c)},onCreateDataMessageSubscription:function(a,c){g.createDataMessageSubscription(b,a,c)},onDataChannelMessageReceived:function(a,d){return g.dataChannelMesageReceived(b,c,a,d)},onIceCandidateReady:function(a){return g.sendIceCandidate(b,c,a)},onLocalMediaStateUpdate:function(a){return g.sendLocalMediaStateUpdate(b,c,a)},onLocalSdpSet:function(a,e){return g.sendSdpReady(b,c,a,e,d().selfParticipantID)},onRemoteSdpSet:function(){return g.sendRemoteSdpSet(b,c)},onRemoveDataMessageSubscription:function(a,c){g.removeDataMessageSubscription(b,a,c)}})}};a=g;f["default"]=a}),66);
__d("ZenonConnectionStateSctpDelegate",["ZenonSignalingConstants"],(function(a,b,c,d,e,f,g){"use strict";var h={sendConnectionEstablishedEvent:function(){},sendInitiateFailoverEvent:function(){},sendMessageToStateSync:function(a,b,c,e){b={sdpString:b};e={mediaPath:e,msgType:c,sdp:b};c=d("ZenonSignalingConstants").SCTP_NEGOTIATION_STATE_SYNC_TOPIC;a.processEvent({payload:{inputData:e,topic:c},type:"stateSyncUpdate"})},setPeerConnectionEventHandlers:function(a,b){a.setPeerConnectionEventHandlers({onConnectionEstablished:function(){h.sendConnectionEstablishedEvent()},onInitiateFailover:function(){h.sendInitiateFailoverEvent()},onSendSdp:function(a,c,d){h.sendMessageToStateSync(b,a,c,d)}})}};a=h;g["default"]=a}),98);
__d("ZenonConnectionStateSignalingDelegate",[],(function(a,b,c,d,e,f){"use strict";var g={onCapabilitiesReceived:function(a,b,c){a.processEvent({payload:{capabilities:b,escalationConferenceName:c},type:"capabilitiesReceived"})},onClientInfoReceived:function(a,b,c){a.processEvent({payload:{actorRepresentatives:c,userCapabilities:b},type:"clientInfoReceived"})},onClientRenegotiationReceived:function(a,b){a.processEvent(b)},onDismissReceived:function(a,b,c){c={dismissReason:b,dismissReasonSetByRemote:!0,dismissSubreason:"Server sent dismiss message to client: "+((b=c)!=null?b:"null"),shouldInformPeer:!1};a.processEvent({payload:c,type:"endConnection"})},onGenericDataMessageReceived:function(a,b,c){c={data:c,dataChannelLabel:b};a.processEvent({payload:c,type:"dataMessageReceived"})},onIceCandidateReceived:function(a,b){a.processEvent({payload:b,type:"iceCandidateReceived"})},onMediaUpdateReceived:function(a,b){a.processEvent({payload:{mediaStates:b},type:"mediaUpdateReceived"})},onMediaUpdateResponseReceived:function(a,b){a.processEvent({payload:b,type:"mediaUpdateResponseReceived"})},onParticipantUpdateReceived:function(a,b){a.processEvent({payload:{participantStates:b},type:"participantUpdateReceived"})},onPendingApprovalReceived:function(a){a.processEvent({type:"pendingApproval"})},onRenegotiationRequested:function(a,b){a.processEvent({payload:{hasRemoteOffer:b},type:"initiatePeerConnectionRestarting"})},onRoomContextUpdateReceived:function(a,b){a.processEvent({payload:{context:b},type:"connectionRoomUpdateReceived"})},onSdpReceived:function(a,b,c,d,e,f,g,h){a.processEvent({payload:{mediaPath:c,mediaStates:d,messageID:h,onProcessed:g,renegotiationOffer:f,sdp:b,source:e},type:"sdpReceived"})},onServerRenegotiationFinished:function(a){a.processEvent({type:"serverRenegotiationFinished"})},setSignalingEventHandlers:function(a,b){a.setSignalingEventHandlers({onCapabilitiesReceived:function(a,c){return g.onCapabilitiesReceived(b,a,c)},onClientInfoReceived:function(a,c){return g.onClientInfoReceived(b,a,c)},onClientRenegotiationReceived:function(a){return g.onClientRenegotiationReceived(b,a)},onDismissReceived:function(a,c,d){return g.onDismissReceived(b,c,d)},onGenericDataMessageReceived:function(a,c){return g.onGenericDataMessageReceived(b,a,c)},onIceCandidateReceived:function(a){return g.onIceCandidateReceived(b,a)},onMediaUpdateReceived:function(a){return g.onMediaUpdateReceived(b,a)},onMediaUpdateResponseReceived:function(a){return g.onMediaUpdateResponseReceived(b,a)},onParticipantUpdateReceived:function(a){return g.onParticipantUpdateReceived(b,a)},onPendingApprovalReceived:function(){return g.onPendingApprovalReceived(b)},onRenegotiationRequested:function(a){return g.onRenegotiationRequested(b,a)},onRoomContextUpdateReceived:function(a){return g.onRoomContextUpdateReceived(b,a)},onSdpReceived:function(a,c,d,e,f,h,i){return g.onSdpReceived(b,a,c,d,e,f,h,i)},onServerRenegotiationFinished:function(){return g.onServerRenegotiationFinished(b)}})}};a=g;f["default"]=a}),66);
__d("ZenonSecureFrameManagerState",["E2eeMetricsSerializers"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return{e2eeDebugStats:{e2eeStatsByTrack:new Map(),groupE2eeMetrics:d("E2eeMetricsSerializers").GroupE2eeMetrics$DefaultConstructor()},e2eeNegotiationState:-1,identityStoreDescription:"not yet created"}};g.ZenonSecureFrameManagerState$DefaultConstructor=a}),98);
__d("ZenonConnectionStateManager",["DateConsts","Promise","ZenonCallsModelEmitter","ZenonCallsModelTypes","ZenonConnectionStateMachine","ZenonConnectionStateModel","ZenonConnectionStatePeerConnectionDelegate","ZenonConnectionStateSctpDelegate","ZenonConnectionStateSignalingDelegate","ZenonDataUtils","ZenonDismissReason","ZenonInfraActionsLogger","ZenonMqttUtil","ZenonNetworkQualityMonitor","ZenonParticipantState","ZenonPeerConnectionManager","ZenonSecureFrameManagerState","ZenonSignalingConstants","cr:2815","immutable","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="E2eeKey",i="E2eeState",j=2*d("DateConsts").MS_PER_MIN;a=function(){function a(a,e,f,g,h,i,j,k,l){var m=this,n;j===void 0&&(j=!1);this.$7={local:d("ZenonNetworkQualityMonitor").ZenonNetworkQuality.Good,remote:c("immutable").Map()};this.$13=function(){return m.$2};this.$10=function(a){a(m.$2),m.$11(),m.$18()};this.$1=a;var o=e.getSignalingModel();o.setNotifyCallback(function(){m.$10(function(a){a.collisionContext.serverInfoData=o.getRemoteSignalingID()});var a=o.getOverlayConfigServerLayer();a&&g.setServerLayer(a)});this.$2=new(c("ZenonConnectionStateModel"))(o,new Map(),f,g,{groupThreadID:null,peerID:null,serverInfoData:e.getSignalingModel().getRemoteSignalingID()});a=new Map();n=o.getMediaModeManager().getMediaMode()==="p2p"&&((n=o.getRoomInfo().context)==null?void 0:n.peerID)!=null&&f==="outgoing";f=new(c("ZenonPeerConnectionManager"))(g,a,j,function(a){return h.log(a)},k,l,n);i.setupSctpChannelApi(e.getSignalingModel().getSignalingID(),f);f.registerTrackListener(function(){m.$11()});f.registerNetworkStatusListener(function(a){var b=m.$7;m.$2.updateNetworkStatus(a);m.$11();m.$7=a;a.local!==b.local&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"ZenonNetworkQuality: "+a.local})});this.$6=f.getSdpFormat();n=new(c("ZenonPeerConnectionManager"))(g,a,j,function(a){return h.log(a)},k,l);a=b("cr:2815")?new(b("cr:2815"))(g,function(a){return h.log(a)},o.getMediaModeManager().getMediaMode()):null;this.$12(e);i.setupSctpChannelApi(e.getSignalingModel().getSignalingID(),(j=a)!=null?j:f);this.$3=new(c("ZenonConnectionStateMachine"))({getConnectionModel:this.$13,logEvent:function(a){return h.log(a)},peerConnectionManager:f,sctpHelper:i,sctpPeerConnectionManager:a,secondaryPeerConnectionManager:n,signalingClient:e,updateConnectionModel:this.$10});c("ZenonConnectionStateSignalingDelegate").setSignalingEventHandlers(e,this.$3);a&&c("ZenonConnectionStateSctpDelegate").setPeerConnectionEventHandlers(a,this.$3);c("ZenonConnectionStatePeerConnectionDelegate").setPeerConnectionEventHandlers(f,this.$3,"primary",this.$13);c("ZenonConnectionStatePeerConnectionDelegate").setPeerConnectionEventHandlers(n,this.$3,"secondary",this.$13);k!=null&&l!=null&&(this.$8=k,this.$9=l,this.$14(e));this.$4=h;e.setLoggingEventHandler(function(a){return h.log(a)});this.$5=0}var e=a.prototype;e.start=function(a){var c,e,f,g,h,i,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;this.$4.log({name:"mqttConnectionState",pending:!0});e=d("ZenonMqttUtil").getMqttChannel();r.next=5;return b("regeneratorRuntime").awrap(this.$15(e));case 5:this.$4.log({name:"mqttConnectionState",pending:!1});r.next=12;break;case 8:r.prev=8;r.t0=r["catch"](0);this.end(d("ZenonDismissReason").ZenonDismissReason.ClientError,"MQTT did not connect");return r.abrupt("return");case 12:f=a.mwRingRequest!=null?"incoming":"outgoing",(g=a.appMessages,h=a.dataChannels,i=a.initialSyncStates,j=a.isE2eeMandated,k=a.isSecondaryJoinRole,l=a.localMedia,m=a.mwRingRequest,n=a.usersToRing),o=(c=i)!=null?c:new Map(),b("cr:2815")&&o.set(d("ZenonSignalingConstants").SCTP_NEGOTIATION_STATE_SYNC_TOPIC,{}),p=this.$16(),q={appMessages:g,dataChannels:h,direction:f,initialSyncStates:o,isE2eeMandated:j,isSecondaryJoinRole:k,mwRingRequest:m,serializedInitialSyncStates:p,tracks:l,usersToRing:n},this.$3.processEvent({payload:q,type:"createConnection"});case 19:case"end":return r.stop()}},null,this,[[0,8]])};e.muteTrack=function(a){this.$17(a,!1)};e.unmuteTrack=function(a){this.$17(a,!0)};e.$17=function(a,b){b={enabled:b,trackID:a};this.$3.processEvent({payload:b,type:"localMediaStateUpdateProcessing"})};e.stopLocalTrack=function(a){a={trackID:a};this.$3.processEvent({payload:a,type:"stopLocalTrack"})};e.end=function(a,b){a={dismissReason:a,dismissReasonSetByRemote:!1,dismissSubreason:b,shouldInformPeer:!0};this.$3.processEvent({payload:a,type:"endConnection"})};e.addParticipants=function(a){a={usersToRing:a};this.$3.processEvent({payload:a,type:"addParticipants"})};e.removeParticipants=function(a){a={usersToRemove:a};this.$3.processEvent({payload:a,type:"removeParticipants"})};e.addLocalTrack=function(a){this.$3.processEvent({payload:{tracks:[a]},type:"addLocalTracks"})};e.replaceLocalTrack=function(a,b){this.$3.processEvent({payload:{replacementTrack:b,trackIDToReplace:a},type:"replaceLocalTrack"})};e.removeLocalTrack=function(a){this.$3.processEvent({payload:{trackID:a},type:"removeLocalTrack"})};e.createDataMessageSubscription=function(a,b){this.$3.processEvent({payload:{dataChannelLabel:a,messageHandler:b},type:"createDataMessageSubscription"})};e.removeDataMessageSubscription=function(a,b){this.$3.processEvent({payload:{dataChannelLabel:a,messageHandler:b},type:"removeDataMessageSubscription"})};e.sendGenericDataMessage=function(a,b,c,d){b={data:b,recipientIDs:c,serviceRecipients:d,topic:a};this.$3.processEvent({payload:b,type:"sendGenericDataMessage"})};e.updateStateSyncTopic=function(a,b){b={inputData:b,topic:a};this.$3.processEvent({payload:b,type:"stateSyncUpdate"})};e.unsubscribeFromStateSyncTopic=function(a){a={topic:a};this.$3.processEvent({payload:a,type:"stateSyncUnsubscribe"})};e.subscribeToRemoteVideo=function(a,b){b={includeDominantSpeaker:b,subscriptions:a};this.$3.processEvent({payload:b,type:"subscriptionRequest"})};e.approveParticipants=function(a){this.$3.processEvent({payload:{approvalStatus:1,targetUsers:a},type:"userApprovalRequest"})};e.denyParticipants=function(a){this.$3.processEvent({payload:{approvalStatus:0,targetUsers:a},type:"userApprovalRequest"})};e.forceEncodingEnabled=function(a){this.$3.processEvent({payload:{enabled:a},type:"forceEncodingEnabled"})};e.getConnectionState=function(){return this.$2.connectionState};e.getClientCallID=function(){return this.$1};e.getServerCallID=function(){return this.$2.collisionContext.serverInfoData};e.getSdpFormat=function(){return this.$6};e.getSecureFrameManagerState=function(){return this.$9==null?d("ZenonSecureFrameManagerState").ZenonSecureFrameManagerState$DefaultConstructor():this.$9.getState()};e.$12=function(a){var c=this;a=a.getSignalingModel().getStateSyncStore();a.addTopicHandler(d("ZenonSignalingConstants").SCTP_NEGOTIATION_STATE_SYNC_TOPIC,function(a){if(!a)return b("Promise").resolve();var d=a.mediaPath,e=a.msgType;a=a.sdp;if(!d||!e||!a)return b("Promise").resolve();c.$3.processEvent({payload:{mediaPath:d,msgType:e,sdp:a},type:"sctpNegotiationStateUpdate"});return b("Promise").resolve()})};e.$14=function(a){var c=this;a=a.getSignalingModel().getStateSyncStore();a.addTopicHandler(i,function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap((d=c.$9)==null?void 0:d.processE2eeServerState(a));case 2:case"end":return e.stop()}},null,this)});this.createDataMessageSubscription(h,function(a){var b;return(b=c.$9)==null?void 0:b.processE2eeMessage(a)})};e.$16=function(){var a;if(this.$9!=null){var b=this.$9.getSerializedE2eeClientState();b.byteLength===0&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"E2ee client state is empty"});a=new Map();a.set(i,{data:d("ZenonDataUtils").uint8ArrayToBase64(b),version:1})}return a};e.$11=function(){d("ZenonCallsModelEmitter").CallsModelEmitterInstance.emitCallsModel(this.$1,this.$2)};e.$18=function(){if(d("ZenonCallsModelEmitter").CONNECTION_STATE_TO_CALL_STATE_MAP[this.$2.connectionState]!==d("ZenonCallsModelTypes").ZenonCallState.Connected)return;var a=this.$2.getConsolidatedParticipantStates();if(a){a=Array.from(a.values());a=a.filter(function(a){return a===d("ZenonParticipantState").ZenonParticipantState.CONNECTED});a=a.length;a>this.$5&&(this.$4.log({connectedParticipantsCount:a,name:"setMaxConnectedParticipants"}),this.$5=a)}};e.$15=function(a){return new(b("Promise"))(function(b,d){if(a.getConnectionState()==="Connected")b();else{c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"MQTT not connected, deferring call start"});var e={onMQTTStateChanged:function(c){c==="Connected"&&(a.unsubscribeChannelEvents(e),window.clearTimeout(f),b())}},f=window.setTimeout(function(){a.unsubscribeChannelEvents(e),c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"MQTT never connected. Current status: "+a.getConnectionState()}),d("timeout")},j);a.subscribeChannelEvents(e)}})};return a}();g["default"]=a}),98);
__d("ZenonInsertableStreamsManager",["ZenonRTWebBrowserFeatureSupport"],(function(a,b,c,d,e,f,g){"use strict";var h="Insertable Streams not supported in E2ee mandated call";a=function(){function a(a){this.$1=a}var b=a.prototype;b.setupSenderTransform=function(a){if(d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&typeof a.createEncodedStreams==="function"&&a.track!==null&&a.senderStreams==null){var b=a.track.id,c=a.createEncodedStreams();a.senderStreams=c;this.$2(b,c.readable,c.writable)}else this.$1.terminateCallIfE2EEMandated(h)};b.setupReceiverTransform=function(a,b){if(d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&typeof b.createEncodedStreams==="function"&&b.track!==null&&b.receiverStreams==null){var c=b.track.id,e=b.createEncodedStreams();b.receiverStreams=e;this.$3(a,c,e.readable,e.writable)}else this.$1.terminateCallIfE2EEMandated(h)};b.$2=function(a,b,c){var d=this;b=b;c=c;this.$1.createEncryptorWithId(a);var e=new TransformStream({transform:function(b,c){b.data=d.$1.encrypt(a,b),c.enqueue(b)}});b.pipeThrough(e).pipeTo(c)};b.$3=function(a,b,c,d){var e=this;c=c;d=d;this.$1.createDecryptorWithId(b,a);a=new TransformStream({transform:function(a,c){a.data=e.$1.decrypt(b,a),a.data.byteLength!==0&&c.enqueue(a)}});c.pipeThrough(a).pipeTo(d)};return a}();g["default"]=a}),98);
__d("ZenonMediaUtils",["ZenonImmutableMediaTrack"],(function(a,b,c,d,e,f,g){"use strict";var h={convertToZenonImmutableMediaTrack:function(a,b,d){var e=b.contentHint,f=b.isRemote,g=b.isUserMuted,i=b.stream;b=b.trackType;i=(i=i)!=null?i:h.createStreamWithTrack(a);b=(b=b)!=null?b:a.kind==="audio"?"audio":"video";return new(c("ZenonImmutableMediaTrack"))({contentHint:(e=(e=e)!=null?e:a.contentHint)!=null?e:"",contentType:b,displaySurface:a.getSettings().displaySurface,enabled:a.enabled,label:a.label,remote:f,trackId:(e=d)!=null?e:a.id,userMuted:g,webrtcStream:i,webrtcTrack:a})},createStreamWithTrack:function(a){var b=new MediaStream();b.addTrack(a);return b}};a=h;g["default"]=a}),98);
__d("ZenonRTCVideoResolutionHelper",["gkx","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=10;a=function(){function a(){}a.getMaxParticipants180=function(){return 100};a.getMaxParticipants360=function(){return 100};a.getMaxParticipants720=function(){return 2};a.shouldUseSupportedScaleFactorList=function(){return!1};a.shouldUseConservativeWayWhenSearchingForScalingRatio=function(){return!1};a.encoderScalingEnabled=function(){return c("gkx")("1808893")};a.bitrateCappingEnabled=function(){return!0};a.getMaxBitrate720=function(){return 3e6};a.getMaxBitrate360=function(){return 1e6};a.getMaxBitrate180=function(){return 3e5};a.getMaxBitrateForResolution=function(b){if(!a.bitrateCappingEnabled())return 0;if(b===180)return a.getMaxBitrate180();if(b===360)return a.getMaxBitrate360();return b===720?a.getMaxBitrate720():0};a.getMaxEncResolution=function(b){if(!a.encoderScalingEnabled())return null;var c=a.getMaxParticipants720(),d=a.getMaxParticipants360(),e=a.getMaxParticipants180(),f={height:720,width:1280},g={height:360,width:640},h={height:180,width:320};if(c>0&&b<=c)return f;if(d>0&&b<=d)return g;if(e>0&&b<=e)return h;if(e>0)return h;if(d>0)return g;return c>0?f:null};a.getMaxEncResolutionSimulcast=function(b,d,e,f){var g={height:720,width:1280},h={height:360,width:640},i={height:180,width:320};if(d<=e&&e<=2&&d>=0&&d<f){if(f===1)return a.getMaxEncResolution(b);if(f===2)if(d===0)return i;else return b>2?h:g;if(f===3)if(d===0)return i;else if(d===1)return h;else if(d===2)return g}c("recoverableViolation")("Unsupported simulcast parameters passed to getMaxEncResolutionSimulcast","rtc_www");return null};a.getScalingFactor=function(b,c,d,e,f){f===void 0&&(f=!1);if(b.width==null||b.width<=0||b.height==null||b.height<=0||c.width==null||c.width<=0||c.height==null||c.height<=0)return null;var g=c.width;c=c.height;var h=b.width;b=b.height;if(f){f=[1,2,4];var i=Math.sqrt(g*c/(h*b));if(i<1+e)return 1;var j=1,k=Number.MAX_VALUE;for(var l=0;l<f.length;l++){var m=f[l],n=Math.abs(m-i);(a.shouldUseConservativeWayWhenSearchingForScalingRatio()?n<k:n<=k)&&Math.floor(g/m)%2===0&&Math.floor(c/m)%2===0&&(j=m,k=Math.abs(m-i))}return j}else{n=Math.sqrt(g*c/(h*b));if(n<1+e)return 1;return d?Math.floor(n+e):n}};a.maybeLimitEncodingResolutionByParticipantCountHelper=function(b,c,d,e,f,g){g===void 0&&(g=!1);if(!a.encoderScalingEnabled()||f)return;if(d!=null&&d.length>0){f=d.filter(function(a){var b;return((b=a.receiver.track)==null?void 0:b.kind)==="video"&&a.currentDirection!=="inactive"&&((b=a.receiver.track)==null?void 0:b.readyState)==="live"});d=f.length;g&&(d-=1)}else{f=c.filter(function(a){return((a=a.track)==null?void 0:a.kind)==="video"});g=f.length;d=g+1}c=a.getMaxEncResolution(d);if(!c)return;f=[c];a.maybeLimitEncodingResolution(b,f,h,i/100,e,a.shouldUseSupportedScaleFactorList())};a.maybeLimitEncodingResolution=function(b,c,d,e,f,g){g===void 0&&(g=!1);b=b.filter(function(a){return((a=a.track)==null?void 0:a.kind)==="video"});if(b.length>0){var h;b=b[0];var i=b.getParameters();h=(h=b.track)==null?void 0:h.getSettings();if(!h)return;if(i.encodings==null||c.length!==i.encodings.length)return;for(var c=c.entries(),j=Array.isArray(c),k=0,c=j?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(j){if(k>=c.length)break;l=c[k++]}else{k=c.next();if(k.done)break;l=k.value}l=l;var m=l[0];l=l[1];var n=f?1:a.getScalingFactor(l,{height:h.height,width:h.width},d,e,g);if(n==null)continue;n===1?delete i.encodings[m].scaleResolutionDownBy:i.encodings[m].scaleResolutionDownBy=n;if(!f&&l.width!=null&&l.height!=null){n=Math.min(l.width,l.height);l=a.getMaxBitrateForResolution(n);l>0&&(i.encodings[m].maxBitrate=l)}else f&&delete i.encodings[m].maxBitrate}b.setParameters(i)}};a.maybeLimitEncodingResolutionByParticipantCount=function(b,c,d,e,f){f===void 0&&(f=!1);return a.maybeLimitEncodingResolutionByParticipantCountHelper(b,c,d,a.$1>0,e,f)};a.handleStartScreenSharing=function(b,c,d,e){a.$1++;return a.maybeLimitEncodingResolutionByParticipantCountHelper(b,c,d,a.$1>0,e)};a.handleStopScreenSharing=function(b,c,d,e){a.$1--;return a.maybeLimitEncodingResolutionByParticipantCountHelper(b,c,d,a.$1>0,e)};return a}();a.$1=0;g["default"]=a}),98);
__d("ZenonSimulcastManager",["ZenonRTCVideoResolutionHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=25e5,i=25e6,j=15,k=15e4,l=3e4,m=180*320,n=90*160;e=!1;f=0;var o=2,p=3;function a(a,b,c,d,e,f,g,k,l){e===void 0&&(e=!1);f===void 0&&(f=2);g===void 0&&(g={height:720,width:1280});k===void 0&&(k=!0);l===void 0&&(l=0);d=q(b.perSsrcTargetBitrateBpsMap,d);var m=0,n=[],o=[];for(var p=0;p<a.encodings.length;p++)if(t(p,b.qualityMask)){m++;var s=d.get(p);s!=null?o.push(s):o.push(h);if(m>=f)break}while(m<l)m++,o.push(h);for(var s=0;s<m;s++)n.push(r(s,o[s],a.encodings.length-1,c,m,g,e));for(var p=0;p<a.encodings.length;p++)p<m?(a.encodings[p].active=!0,a.encodings[p].scaleResolutionDownBy=n[p],m===1?(a.encodings[p].maxBitrate=h,delete a.encodings[p].maxFramerate):(a.encodings[p].maxBitrate=o[p],p===0&&(a.encodings[p].maxFramerate=j))):(a.encodings[p].active=!1,a.encodings[p].maxBitrate=i);e&&!k&&u(a);return{params:a}}function b(a){for(var b=0;b<a.encodings.length;b++)b===0?(a.encodings[b].active=!0,a.encodings[b].scaleResolutionDownBy=1,a.encodings[b].maxBitrate=h):(a.encodings[b].active=!1,a.encodings[b].maxBitrate=i);return a}function q(a,b){var c=new Map();if(a==null||b==null)return c;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];g=a.get(g);g!=null&&c.set(f,g)}return c}function r(a,b,d,e,f,g,h){g===void 0&&(g={height:720,width:1280});h===void 0&&(h=!1);if(h)return 1;h=c("ZenonRTCVideoResolutionHelper").getMaxEncResolutionSimulcast(e,a,d,f);if(!h)return 1;h=s(a,b,h,f);return(e=c("ZenonRTCVideoResolutionHelper").getScalingFactor(h,g,!0,0,c("ZenonRTCVideoResolutionHelper").shouldUseSupportedScaleFactorList()))!=null?e:1}function s(a,b,c,d){if(d>=2&&a===0){d=c.height!=null&&c.width!=null&&c.height*c.width>n;if(d&&b<l)return{height:90,width:160};a=c.height!=null&&c.width!=null&&c.height*c.width>m;if(a&&b<k)return{height:180,width:320}}return c}function t(a,b){return(1<<a&b)!==0}function u(a){for(var b=1;b<a.encodings.length;b++)a.encodings[b].active=!1,a.encodings[b].maxBitrate=i}function d(a){var b=new Map(),c="\r\n";a=a.split(c).filter(function(a){return a.startsWith("a=ssrc-group:SIM")});if(a.length===0)return b;c=a[0].split(" ").slice(1);for(var a=0;a<c.length;a++)b.set(c[a],a);return b}g.ALLOW_SCREENSHARE_SIMULCAST=e;g.MIN_NUM_ACTIVE_LAYERS=f;g.MAX_NUM_ACTIVE_LAYERS=o;g.NUM_LAYERS=p;g.getSimulcastEncodingParameters=a;g.getSimulcastSingleLayerParameters=b;g.getSimulcastLayerToTargetBitrateMap=q;g.getSimulcastSsrcToLayerMap=d}),98);
__d("ZenonVideoDurationTracker",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a.startedAt==null&&(a.startedAt=c("performanceNow")())}function i(a){a.startedAt!=null&&(a.duration=k(a),a.startedAt=null)}function j(a,b){b=b.filter(function(a){return a.enabled&&a.webrtcTrack.readyState!=="ended"});b.length>0?h(a):i(a)}function k(a){var b=a.startedAt;return b!=null?a.duration+c("performanceNow")()-b:a.duration}a=function(){function a(){this.$1={localScreenShareDuration:{duration:0,startedAt:null},localVideoDuration:{duration:0,startedAt:null},remoteVideoDuration:{duration:0,startedAt:null}}}var b=a.prototype;b.getLocalVideoDuration=function(){return k(this.$1.localVideoDuration)};b.getLocalScreenShareDuration=function(){return k(this.$1.localScreenShareDuration)};b.getRemoteVideoDuration=function(){return k(this.$1.remoteVideoDuration)};b.update=function(a){var b=this.$1.localVideoDuration,c=Array.from(a.values()).filter(function(a){var b=a.contentType==="video"||a.contentType==="screen";return b&&!a.remote});j(b,c);b=this.$1.localScreenShareDuration;c=Array.from(a.values()).filter(function(a){var b=a.contentType==="screen";return b&&!a.remote});j(b,c);b=this.$1.remoteVideoDuration;c=Array.from(a.values()).filter(function(a){var b=a.contentType==="video"||a.contentType==="screen";return b&&a.remote});j(b,c)};return a}();g["default"]=a}),98);
__d("RefCountedAudioContextSingleton",["ZenonDebugLogger","emptyFunction","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,i=null,j=new Set(),k=0;function a(){if(c("gkx")("3330"))return{audioContext:null,destroy:c("emptyFunction")};(i===null||i.state==="closed")&&(i=new h());var a=k++;j.add(a);return{audioContext:i,destroy:function(){j["delete"](a),i!==null&&j.size<1&&(i.state!=="closed"&&i.close(),i=null)}}}g.get=a}),98);
__d("RpWebMediaActionsEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1750245");c=b("FalcoLoggerInternal").create("rp_web_media_actions_event",a);e.exports=c}),null);
__d("ZenonMediaActionLogger",["FBLogger","RpWebMediaActionsEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1={callID:void 0,conferenceName:void 0,deviceID:void 0,peerID:void 0,serverInfoData:void 0},this.$2=!1}var b=a.prototype;b.updateCachedValues=function(a){var b=a.callID,c=a.conferenceName,d=a.deviceID,e=a.peerID;a=a.serverInfoData;this.$1.callID=(b=b)!=null?b:this.$1.callID;this.$1.conferenceName=(b=c)!=null?b:this.$1.conferenceName;this.$1.deviceID=(c=d)!=null?c:this.$1.deviceID;this.$1.peerID=(b=e)!=null?b:this.$1.peerID;this.$1.serverInfoData=(d=a)!=null?d:this.$1.serverInfoData};b.disable=function(){this.$2=!0};b.logCheckpoint=function(a){this.logEvent({checkpoint:a})};b.logEvent=function(a){if(this.$2)return;var b={call_id:this.$1.callID==null?void 0:String(this.$1.callID),checkpoint:a.checkpoint,client_timestamp_milliseconds:Date.now().toString(),conference_name:this.$1.conferenceName,error_domain:a.errorDomain,error_type:a.errorType,media_id:a.mediaID,peer_id:this.$1.peerID,server_info_data:this.$1.serverInfoData,web_device_id:this.$1.deviceID};c("RpWebMediaActionsEventFalcoEvent").log(function(){return b})};b.logErrorToFbLogger=function(a,b,d,e){if(this.$2)return;var f=c("FBLogger")("rtc_www");d instanceof Error&&(f=f.catching(d));switch(e){case"debug":f.debug(a);break;case"info":f.info(a);break;case"warn":f.warn(a);break;case"mustfix":f.mustfix(a);break}this.logEvent({checkpoint:a,errorDomain:b,errorType:d==null?void 0:d.toString()})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonMediaLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";var g=typeof ((a=window.MediaStreamTrack)==null?void 0:(b=a.prototype)==null?void 0:b.getSettings)==="function";c={serializeMediaStreamTrack:function(a){var b=g?a.getSettings():null;return JSON.stringify({contentHint:a.contentHint,enabled:a.enabled,id:a.id,kind:a.kind,label:a.label,muted:a.muted,readyState:a.readyState,remote:a.remote,settings:{deviceId:b==null?void 0:b.deviceId,groupId:b==null?void 0:b.groupId}})}};d=c;f["default"]=d}),66);
__d("ZenonNoiseSuppressionAudioWorkletNode",["FBLogger","NoiseSuppressionConfig","RefCountedAudioContextSingleton","expectationViolation","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=null,k=null;function a(a){if(h==null){if(!a)return;c("expectationViolation")("Unable to toggle Noise Suppression. Make sure you initialize the AudioWorkletNode first by calling getNoiseSuppressionNodeInstance");return}if(i&&a){c("FBLogger")("rtc_www").mustfix("Failed to enable noise suppression node because it is permanently disabled");return}h.port.postMessage({enabledByUser:a});a===!1&&(k==null?void 0:k(),j=null,k=null,h=null)}function l(){return h!=null}function e(a,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!i){g.next=3;break}c("FBLogger")("rtc_www").mustfix("Failed to get noise suppression node because it is permanently disabled");return g.abrupt("return",a);case 3:if(l()){g.next=13;break}f=d("RefCountedAudioContextSingleton").get();j=f.audioContext;k=f.destroy;if(!(j==null)){g.next=9;break}return g.abrupt("return",a);case 9:g.next=11;return b("regeneratorRuntime").awrap(j.audioWorklet.addModule(c("NoiseSuppressionConfig").module_url));case 11:h=new AudioWorkletNode(j,"noise-suppression"),h.onprocessorerror=function(a){i=!0,c("FBLogger")("rtc_www").mustfix("Noise suppression node failed with error",a.message),c("FBLogger")("rtc_www").catching(a),e(h)};case 13:a.connect(h);return g.abrupt("return",h);case 15:case"end":return g.stop()}},null,this)}g.toggleNoiseSuppressionNode=a;g.isNoiseSuppressionNodeInitialized=l;g.connectNoiseSuppressionNode=e}),98);
__d("ZenonWebAudioManager",["FBLogger","RefCountedAudioContextSingleton","ZenonMediaActionLogger","ZenonMediaLoggingUtils","ZenonNoiseSuppressionAudioWorkletNode","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=null,this.$2=null}var e=a.prototype;e.setupProcessedTrack=function(a,b){if(a.label==="MediaStreamAudioDestinationNode")return a;if(this.$3(b)!==!0){d("ZenonNoiseSuppressionAudioWorkletNode").toggleNoiseSuppressionNode(b.wasmNoiseSuppression===!0);this.$4();return a}if(b.wasmNoiseSuppression!=null)return a;if(!this.$1){this.$1=this.$5();if(this.$1==null)return a}var e=this.$1,f=e.createMediaStreamSource(a.webrtcStream);e=e.createMediaStreamDestination();f.connect(e);this.connectFeatureNodesToSink(b,f,e);if(e.stream.getAudioTracks().length<=0){c("FBLogger")("rtc_www").warn("Web Audio destinationNode did not contain a media track");this.$4();return a}b=e.stream.getAudioTracks()[0];f=c("ZenonMediaLoggingUtils").serializeMediaStreamTrack(b);var g=c("ZenonMediaLoggingUtils").serializeMediaStreamTrack(a.webrtcTrack);c("ZenonMediaActionLogger").logEvent({checkpoint:"Returning processedTrack: "+f+", sourceTrack: "+g});return a.merge({label:"MediaStreamAudioDestinationNode",trackId:b.id,webrtcStream:e.stream,webrtcTrack:b})};e.$3=function(a){return Object.values(a).some(function(a){return a})};e.buildFeatureNodes=function(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(d("ZenonNoiseSuppressionAudioWorkletNode").connectNoiseSuppressionNode(c,e));case 2:f=g.sent;d("ZenonNoiseSuppressionAudioWorkletNode").toggleNoiseSuppressionNode(a.wasmNoiseSuppression===!0);return g.abrupt("return",f);case 5:case"end":return g.stop()}},null,this)};e.connectFeatureNodesToSink=function(a,d,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=2;return b("regeneratorRuntime").awrap(this.buildFeatureNodes(a,d,function(a){c("FBLogger")("rtc_www").mustfix("Web Audio pipeline reset due to processor error. One or more AudioWorkletNode might be failing"),a.disconnect(e),d.connect(e)}));case 2:f=g.sent,d.disconnect(e),f.connect(e);case 5:case"end":return g.stop()}},null,this)};e.$5=function(){var a=d("RefCountedAudioContextSingleton").get(),b=a.audioContext;a=a.destroy;this.$1=b;this.$2=a;return b};e.$4=function(){this.$2==null?void 0:this.$2(),this.$1=null,this.$2=null};return a}();g["default"]=a}),98);
__d("ZenonMediaChannelManager",["FBLogger","ZenonBrowsers","ZenonImmutableMediaTrack","ZenonInfraActionsLogger","ZenonInsertableStreamsManager","ZenonMediaStatsManager","ZenonMediaUtils","ZenonRTCVideoResolutionHelper","ZenonScreenShare","ZenonSimulcastManager","ZenonVideoDurationTracker","ZenonWebAudioManager","err","gkx","promiseDone","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="negotiationOffStreamId";a=function(){function a(a,b,d,e,f){var g=this;this.$1=null;this.$14=!1;this.$2=a;this.$5=new Map();this.$10=new Map();this.$11=new Map();this.$16=new Map();this.$8=[];this.$7=new(c("ZenonVideoDurationTracker"))();this.$6=new(c("ZenonMediaStatsManager"))(this.$2,b,this.$5,this.$16,d,this.$7);this.$15=new(c("ZenonWebAudioManager"))();this.$6.listen();this.$2.addEventListener("track",function(a){g.transformReceiverFromEvent(a),g.addRemoteTrackFromEvent(a),g.$17(),g.$18()});this.$2.addEventListener("signalingstatechange",function(){g.$18(),g.$19(),g.getCodecFromEvent()});this.$2.addEventListener("removestream",function(){g.$17(!0)});this.$12=!0;this.$13=new Map();e!=null&&f!=null&&(this.$3=e,this.$4=f,this.$1=new(c("ZenonInsertableStreamsManager"))(e))}var e=a.prototype;e.onLocalSdpSet=function(a){var b;(b=this.$4)==null?void 0:b.onLocalSdpSet(a)};e.stopStatsPolling=function(){var a;this.$6.stopPolling();(a=this.$4)==null?void 0:a.stopStatsPoll()};e.getTracks=function(){return this.$5};e.clearTracks=function(){this.$5.clear(),this.$16.clear(),this.$19()};e.$17=function(a){a===void 0&&(a=!1),c("ZenonRTCVideoResolutionHelper").maybeLimitEncodingResolutionByParticipantCount(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast(),a)};e.removeMissingTracks=function(a){var b=this;this.$5.forEach(function(c,d){c.remote&&a.find(function(a){return a.trackID===d})==null&&b.removeTrack(d)})};e.updateTrackInfo=function(a){var b=this.$5.get(a.trackID);if(b==null){c("FBLogger")("rtc_www").warn("Received track info update before track was available");this.$13.set(a.trackID,a);return}b=this.$20(b,a);this.$5.set(a.trackID,b);this.$19()};e.$20=function(a,b){if(a.contentType==="audio"&&b.type!=="screen_audio"||d("ZenonScreenShare").screenShareWithReplaceTrack())return a;var e=a.webrtcStream,f=e.getVideoTracks().length>1;b.type==="screen"&&f&&(e=c("ZenonMediaUtils").createStreamWithTrack(a.webrtcTrack),a.webrtcStream.removeTrack(a.webrtcTrack));return new(c("ZenonImmutableMediaTrack"))({contentHint:a.contentHint,contentType:(f=b.type)!=null?f:a.contentType,enabled:a.enabled,label:a.label,remote:a.remote,trackId:b.trackID,webrtcStream:e,webrtcTrack:a.webrtcTrack})};e.getLocalTracksForMWS=function(){var a=this,b=new Map(),c=this.$2.getTransceivers();this.$5.forEach(function(d,e){if(!d.remote){var f,g=(f=(f=a.$16.get(e))==null?void 0:f.trackId)!=null?f:e;f=(f=(f=c.find(function(a){return((a=a.sender.track)==null?void 0:a.id)===g}))==null?void 0:f.mid)!=null?f:null;var h=(f=a.$2.getLocalMWTrackId(f))!=null?f:e;f=d.update("trackId",function(){return h});b.set(h,f)}});return b};e.addTrack=function(a,c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a.contentType==="video"&&a.remote===!1&&(this.$9=a);d.next=3;return b("regeneratorRuntime").awrap(this.$21(a,c));case 3:this.$19();case 4:case"end":return d.stop()}},null,this)};e.transformSender=function(a){if(this.$1==null)return;this.$1.setupSenderTransform(a)};e.transformReceiverFromEvent=function(a){var b=a.receiver,d=this.$2.getCnameFromTrackId(a.track.id);if(this.$1==null)return;d==null&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"Failed to find Cname for the remote track: "+a.track.id});this.$1.setupReceiverTransform((a=d)!=null?a:h,b)};e.addReceiveOnlyVideoTransceiverIfNeeded=function(a,b){this.$22("video","recvonly",a,b)};e.addInactiveAudioTransceiverIfNeeded=function(){this.$22("audio","inactive")};e.$22=function(a,b,c,e){var f=!1;this.$5.forEach(function(b,c){if(b.contentType===a){f=!0;return}});if(f||d("ZenonBrowsers").noTransceiverForNegotiations()&&e!==!0&&c==="p2p")return;this.$2.addTransceiver(a,{direction:b})};e.removeTrack=function(a){var c,d;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:d=this.$5.get(a);if(!(d==null)){b.next=3;break}return b.abrupt("return");case 3:this.$23(d),this.$19(),(c=this.$3)==null?void 0:c.freeEncryptorAndDecryptorForId(a);case 6:case"end":return b.stop()}},null,this)};e.replaceTrack=function(a,e){var f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:g=this.$5.get(a);if(!(g==null)){m.next=3;break}return m.abrupt("return");case 3:if(!(d("ZenonScreenShare").isScreenSharingTrack([g])&&!d("ZenonScreenShare").isScreenSharingTrack([e])&&this.$9!=null)){m.next=12;break}m.next=6;return b("regeneratorRuntime").awrap(this.$24(g,this.$9));case 6:this.$12?this.unmuteTrack((h=(i=this.$9)==null?void 0:i.trackId)!=null?h:""):this.muteTrack((j=(k=this.$9)==null?void 0:k.trackId)!=null?j:"");c("ZenonRTCVideoResolutionHelper").handleStopScreenSharing(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast());g.webrtcTrack.stop();g.webrtcTrack.readyState!=="ended"&&c("ZenonInfraActionsLogger").logError({errorDomain:"stopping trackToReplace failed: "+g.label});m.next=25;break;case 12:if(!(e!=null&&d("ZenonScreenShare").isScreenSharingTrack([e])&&a===((f=this.$9)==null?void 0:f.trackId)&&this.$9!=null)){m.next=20;break}this.$12=this.$9.enabled&&this.$9.webrtcTrack.enabled;m.next=16;return b("regeneratorRuntime").awrap(this.$24(this.$9,e));case 16:this.unmuteTrack(e.trackId);c("ZenonRTCVideoResolutionHelper").handleStartScreenSharing(this.$2.getSenders(),this.$2.getReceivers(),this.$2.getTransceivers(),this.$2.supportsSimulcast());m.next=25;break;case 20:if(!(e!=null)){m.next=25;break}(this.$9==null&&e.contentType==="video"||((l=this.$9)==null?void 0:l.trackId)===a)&&(this.$9=e);m.next=24;return b("regeneratorRuntime").awrap(this.$24(g,e));case 24:g.trackId!==e.trackId&&(g.webrtcTrack.stop(),g.webrtcTrack.readyState!=="ended"&&c("ZenonInfraActionsLogger").logError({errorDomain:"stopping trackToReplace failed: "+g.label}));case 25:this.$17(),this.$19();case 27:case"end":return m.stop()}},null,this)};e.addRemoteTrackFromEvent=function(a){var b=a.transceiver;b=this.$2.getRemoteMWTrackId(b.mid);a=c("ZenonMediaUtils").convertToZenonImmutableMediaTrack(a.track,{isRemote:!0,isUserMuted:!1,stream:a.streams?a.streams[0]:null},b);b=this.$13.get(a.trackId);b!=null&&(a=this.$20(a,b),this.$13["delete"](a.trackId));b=this.$10.get(a.trackId);b!=null&&(a.contentType!=="audio"&&(a.webrtcTrack.enabled=b.enabled,a=a.set("enabled",b.enabled)),a=a.set("userMuted",b.userMuted),this.$10["delete"](a.trackId));this.$5=this.$5.set(a.trackId,a);this.$19();this.$6.onRemoteTrackAdded(a)};e.createDataChannel=function(a,b,c,d){this.$2.createDataChannel(a,b,c,d)};e.muteTrack=function(a){var b=this.$5.get(a),c=b===this.$9;if(b==null){this.$10.set(a,{enabled:!1,userMuted:!0});return}a=b;b.userMuted||(a=a.set("userMuted",!0));var d=Boolean((b==null?void 0:b.remote)&&b.contentType==="audio");!d&&!(!a.enabled&&!a.webrtcTrack.enabled)&&(a.webrtcTrack.enabled=!1,a=a.set("enabled",!1));c&&(this.$9=a);b!==a&&(this.$5=this.$5.set(a.trackId,a),this.$19())};e.unmuteTrack=function(a){var b=this.$5.get(a),c=b===this.$9;if(b==null){this.$10.set(a,{enabled:!0,userMuted:!1});return}a=b;b.userMuted&&(a=a.set("userMuted",!1));var d=Boolean((b==null?void 0:b.remote)&&b.contentType==="audio");!d&&!(a.enabled&&a.webrtcTrack.enabled)&&(a.webrtcTrack.enabled=!0,a=a.set("enabled",!0));c&&(this.$9=a);b!==a&&(this.$5=this.$5.set(a.trackId,a),this.$19())};e.forceEncodingEnabled=function(a){if(a===this.$14)return;this.$14=a;this.$18()};e.getSdpFormat=function(){return this.$2.getSdpFormat()};e.setSimulcastSingleLayerParams=function(){if(this.$2.supportsSimulcast()&&!this.$2.getSimulcastInitialized()){var a=this.$2.getSenders().filter(function(a){return a.track&&a.track.kind==="video"});if(a.length!==0){a=a[0];var b=d("ZenonSimulcastManager").getSimulcastSingleLayerParameters(a.getParameters());if(this.$25(a))return;a.setParameters(b);this.$2.setSimulcastInitialized(!0)}}};e.stopLocalTracks=function(){this.$5.forEach(function(a){a.remote===!1&&(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"stopping track: "+a.label}),a.webrtcTrack.stop(),a.webrtcTrack.readyState!=="ended"&&c("ZenonInfraActionsLogger").logError({errorDomain:"stopping track failed: "+a.label}))});if(this.$9!=null&&!this.$5.has(this.$9.trackId)){var a;c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"stopping local video track: "+this.$9.label});(a=this.$9)==null?void 0:a.webrtcTrack.stop();this.$9&&this.$9.webrtcTrack.readyState!=="ended"&&c("ZenonInfraActionsLogger").logError({errorDomain:"stopping local video track failed: "+this.$9.label})}this.$19();(a=this.$4)==null?void 0:a.freeWasmMemory()};e.stopLocalTrack=function(a){a=this.$5.get(a);if(a==null)return;if(a.remote)return;a.webrtcTrack.stop();a.webrtcTrack.readyState!=="ended"&&c("ZenonInfraActionsLogger").logError({errorDomain:"stopping local track failed: "+a.label})};e.registerNetworkStatusListener=function(a){this.$6.registerNetworkStatusListener(a)};e.registerTrackListener=function(a){this.$8.push(a)};e.setTrackListenersFromManager=function(a){this.$8=a.$8};e.timeSeries=function(){return this.$6.timeSeries()};e.resetTimeSeries=function(){this.$6.resetTimeSeries()};e.$21=function(a,c){var d,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d=a;a.contentType==="audio"&&(d=this.$15.setupProcessedTrack(a,{wasmNoiseSuppression:(e=(f=a.flags)==null?void 0:f.wasmNoiseSuppression)!=null?e:!1}));this.$11.set(a.trackId,d.trackId);this.$16.set(a.trackId,d);h.next=6;return b("regeneratorRuntime").awrap(this.$26(d,c));case 6:g=h.sent,this.transformSender(g),this.$5=this.$5.set(a.trackId,a);case 9:case"end":return h.stop()}},null,this)};e.$26=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!(c==="p2p")){e.next=8;break}d=this.$2.getTransceivers().find(function(b){var c=b.sender.track,d=b.receiver.track;if(b.currentDirection==="inactive")return!1;if(c!==null&&d==null&&c.kind===a.contentType&&a.remote)return!0;else if(d!==null&&c==null&&d.kind===a.contentType&&a.remote===!1)return!0;return!1});if(!(d!=null)){e.next=7;break}d.direction="sendrecv";e.next=6;return b("regeneratorRuntime").awrap(d.sender.replaceTrack(a.webrtcTrack));case 6:return e.abrupt("return",d.sender);case 7:return e.abrupt("return",this.$2.addTrack(a.webrtcTrack,a.webrtcStream));case 8:return e.abrupt("return",this.$2.addTransceiver(a.webrtcTrack,{direction:"sendonly",streams:[a.webrtcStream]}).sender);case 9:case"end":return e.stop()}},null,this)};e.$23=function(a){this.$5["delete"](a.trackId),this.$16["delete"](a.trackId),a.remote||(this.$2.removeTrack(a.webrtcTrack),a.webrtcTrack.stop())};e.$24=function(a,d){var e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:g=(e=this.$16.get(a.trackId))!=null?e:a;h=this.$2.getSenders().find(function(b){var c;return((c=b.track)==null?void 0:c.id)===a.webrtcTrack.id||g.trackId===((c=b.track)==null?void 0:c.id)});if(!(h===void 0)){m.next=4;break}throw c("err")("track to be replaced is not found");case 4:i=this.$11.get(a.trackId);i!=null?this.$11["delete"](a.trackId):i=a.trackId;this.$16["delete"](a.trackId);j=d;j.contentType==="audio"&&(j=this.$15.setupProcessedTrack(d,{wasmNoiseSuppression:(k=(l=j.flags)==null?void 0:l.wasmNoiseSuppression)!=null?k:!1}));m.next=11;return b("regeneratorRuntime").awrap(h.replaceTrack(j.webrtcTrack));case 11:this.$11.set(d.trackId,i),this.$16.set(d.trackId,j),this.$5["delete"](a.trackId),this.$5.set(d.trackId,d),(f=this.$3)==null?void 0:f.updateLocalTrackIdForStats(i,d.trackId);case 16:case"end":return m.stop()}},null,this)};e.$19=function(){this.$7.update(this.$5),this.$8.forEach(function(a){a()})};e.$25=function(a){a=this.$2.getTransceiverFromSender(a);return a&&a.stopped?!0:!1};e.$27=function(){var a=!1,b=this.getTracks().values(),c=b.next();while(!c.done&&!a)a=c.value.remote,c=b.next();return this.$14||a};e.$18=function(){var a=this;if(c("gkx")("1923585"))return;var b=this.$27();this.$2.getSenders().forEach(function(d){if(a.$25(d))return;var e=d.getParameters(),f=!1;if(e.encodings!=null)for(var g=0;g<e.encodings.length;g++)(g===0||!b)&&e.encodings[g].active!==b&&(e.encodings[g].active=b,f=!0);f&&c("promiseDone")(d.setParameters(e),null,function(a){c("FBLogger")("rtc_www").catching(a).mustfix("Error while trying to toggle encoding")})})};e.getCodecFromEvent=function(){var a=this,b=this.$2.getSignalingState();if(b!=="stable")return;this.$2.getReceivers().forEach(function(b){var c=a.$28(b);if(b.track!=null&&c!=null){var d;(d=a.$3)==null?void 0:d.setFrameDataHandlerTypeFromCodec(b.track.id,c)}});this.$2.getSenders().forEach(function(b){var c=a.$29(b);if(b.track!=null&&c!=null){var d;(d=a.$3)==null?void 0:d.setFrameDataHandlerTypeFromCodec(b.track.id,c)}})};e.$28=function(a){if(a.getParameters&&a.track!=null){var b=a.track.id;a=a.getParameters();var c=new Set();if(a.codecs!=null&&a.codecs.length!==0){var d=a.codecs[0].mimeType;a.codecs.forEach(function(a){c.add(a.mimeType)});(a=this.$3)==null?void 0:a.onSupportedCodecListUpdate(b,c);return d}}};e.$29=function(a){if(a.getParameters&&a.track!=null){a=a.getParameters();if(a.codecs!=null&&a.codecs.length!==0)return a.codecs[0].mimeType}};return a}();g["default"]=a}),98);
__d("ZenonReceiverRenderedResolutionUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===b)return!0;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(!d.includes(f))return!1;var g=a[f];f=b[f];var h=Object.keys(g);for(var i=0;i<h.length;i++){var j=h[i];if(g[j]!==f[j])return!1}}return!0}function a(a,b){if(a===b)return!0;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(!Object.prototype.hasOwnProperty.call(b,e))return!1;if(!g(a[e],b[e]))return!1}return!0}f.areEqualRenderResolutionMaps=a}),66);
__d("ZenonReceiverRenderedResolutionManager",["ZenonCallsContext","ZenonReceiverRenderedResolutionUtils","qex","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useContext,i=b.useMemo,j=200,k=function(){function a(a,b){var c=this;this.$3=new Map();this.$4=new Map();this.$5={};this.updateTrackIdToUserIdMap=function(a){var b=a.get(c.$1).participants,d=a.get(c.$1).mediaTracks;if(b===c.$3)return;c.$3=b;c.$4.clear();b.forEach(function(a,b,e){a.trackIDs.forEach(function(a){var e=d.get(a);if(e&&!e.remote)return;c.$4.set(a,b)})})};this.updateRenderedResolutions=function(a){var b={};a.forEach(function(a,d){if(a.contentType!=="video")return;var e=c.$4.get(d);if(e==null)return;a={renderHeight:a.renderHeight,renderWidth:a.renderWidth,streamId:d,streamType:1,userId:e};d={1:a};b[e]=d});c.updateRenderedResolutionMap(b)};this.$1=a;this.$2=b;this.$2.addListener("callsModelUpdate",this.updateTrackIdToUserIdMap)}var b=a.prototype;b.updateRenderedResolutionMap=function(a){var b=this;if(Object.keys(a).length<2)return;if(d("ZenonReceiverRenderedResolutionUtils").areEqualRenderResolutionMaps(a,this.$5))return;this.$5=a;var c={renderResolutionMap:this.$5};window.setTimeout(function(){b.$2.updateStateSyncTopic(b.$1,"config_engine",c)},this.getJitterMs())};b.getJitterMs=function(){return Math.floor(Math.random()*j)};b.getTrackIdToUserIdMap=function(){return this.$4};b.getRenderedResolutionMap=function(){return this.$5};return a}(),l=c("qex")._("554")||!1;function a(){var a=h(c("ZenonCallsContext")),b=a.callSDK,d=a.currentClientCallId;return i(function(){if(!l)return function(){};var a=new k(d,b);return a.updateRenderedResolutions},[d,b])}g.ReceiverRenderedResolutionManager=k;g.useReceiverRenderedResolutionManager=a}),98);
__d("ZenonMediaElementTracker",["FBLogger","ZenonReceiverRenderedResolutionManager","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=new Map(),j;function k(a,b){i.has(a)&&c("FBLogger")("rtc_www").warn("ZenonMediaElementTracker already has a stream associated with the given element"),i.set(a,b)}function l(a){i["delete"](a)||c("FBLogger")("rtc_www").warn("ZenonMediaElementTracker did not have a stream associated with the given element")}function a(a){var b=new Map();for(var d=i,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;var h=g[0];g=g[1];for(var g=g.getTracks(),k=Array.isArray(g),l=0,g=k?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=g.length)break;m=g[l++]}else{l=g.next();if(l.done)break;m=l.value}m=m;var n=a.get(m.id);if(n==null)continue;if(m.kind==="video"&&h instanceof HTMLVideoElement){if(h.videoWidth===0||h.videoHeight===0)continue;var o=h.getBoundingClientRect();n.renderedWidth=o.width;n.renderedHeight=o.height;var p=o.width/h.videoWidth,q=o.height/h.videoHeight,r=getComputedStyle(h);r=r.objectFit;var s=1,t=1;switch(r){case"cover":s=Math.max(p,q);t=o.width*o.height/(s*s*h.videoWidth*h.videoHeight);break;case"contain":s=Math.min(p,q);break;default:c("FBLogger")("rtc_www").warn("Unknown object-fit type %s",r)}n.scaleRatio=s*s;n.croppingRatio=t;b.set(m.id,{contentType:"video",renderHeight:o.height,renderWidth:o.width})}}}j&&j(b)}function b(a,b){j=d("ZenonReceiverRenderedResolutionManager").useReceiverRenderedResolutionManager(),h(function(){var c=a.current;if(!b||!c)return;k(c,b);return function(){l(c)}},[a,b])}g.trackElement=k;g.untrackElement=l;g.updateStats=a;g.useMediaElementTracker=b}),98);
__d("percentile",[],(function(a,b,c,d,e,f){function g(a,b){return(a||0)-(b||0)}function a(a,b){return h(a.slice().sort(g),b)}function h(a,b){b=(a.length-1)*b;var c=Math.floor(b),d=Math.ceil(b);if(c===d)return a[b];var e=a[c]*(d-b);a=a[d]*(b-c);return e+a}e.exports=a;e.exports.fromSorted=h}),null);
__d("median",["percentile"],(function(a,b,c,d,e,f){function a(a){return b("percentile")(a,.5)}e.exports=a}),null);
__d("ZenonDeltaMediaStat",["median"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[],this.$2=0,this.$3=null}var b=a.prototype;b.add=function(a){this.$1.push(a),this.$2++,this.$3=a};b.getLastAddedValue=function(){return this.$3};b.getTotal=function(){var a=this.$1.reduce(function(a,b){return a+b},0);return a};b.getCount=function(){return this.$1.length};b.getAverage=function(){return this.getTotal()/this.getCount()};b.getMin=function(){return Math.min.apply(Math,this.$1)};b.getMax=function(){return Math.max.apply(Math,this.$1)};b.getMedian=function(){return c("median")(this.$1)};return a}();g["default"]=a}),98);
__d("ZenonFirstMediaPacketFinder",["Promise","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h=500;a=function(){function a(a){this.$1={audio:null,screen:null,screen_audio:null,video:null},this.$2={audio:!1,screen:!1,screen_audio:!1,video:!1},this.$3=null,this.$4=a}var d=a.prototype;d.setUpForTrackType=function(a){var b=this;this.$2[a]=this.$1[a]==null;this.$2[a]&&this.$3==null&&(this.$3=window.setInterval(function(){b.$5()},h),this.$5())};d.getFirstPacketTimes=function(){return this.$1};d.$6=function(){return this.$4.getTransceivers().filter(function(a){return a.currentDirection==="sendrecv"||a.currentDirection==="recvonly"}).map(function(a){return a.receiver})};d.$7=function(){var a=this;return Object.keys(this.$2).some(function(b){return a.$2[b]&&a.$1[b]==null})};d.$5=function(){var a=this,d=this.$6().filter(function(a){return a.track!=null});d=d.map(function(b){var d=b.track;return d!=null?b.getStats().then(function(b){if(b.values)for(var b=b.values(),e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;g.type==="inbound-rtp"&&Number(g.packetsReceived)>0&&a.$1[d.kind]==null&&(a.$1[d.kind]=c("performanceNow")(),a.$3!=null&&!a.$7()&&(window.clearInterval(a.$3),a.$3=null))}}):null});b("Promise").all(d)};return a}();g["default"]=a}),98);
__d("ZenonHistogramCounter",[],(function(a,b,c,d,e,f){"use strict";var g=1e4;a=function(){function a(a,b,c){this.$1=[];this.$2=0;this.$3=0;this.$4=0;this.$5=!1;this.$6=1;if(a>b||c<=0)return;(Math.floor(a)!==a||Math.floor(b)!==b||Math.floor(c)!==c)&&(this.$6=g);this.$3=Math.floor(a*this.$6+.5);this.$2=Math.floor(c*this.$6+.5);a=Math.floor((Math.floor(b*this.$6+.5)-this.$3)/this.$2)+2;this.$1=new Array(a).fill(0);this.$4=this.$3+(a-2)*this.$2;this.$5=!0}var b=a.prototype;b.update=function(a){if(!this.$5||this.$1.length===0)return;a=Math.floor(a*this.$6+.5);if(a<this.$3)++this.$1[0];else if(a>=this.$4)this.$1[this.$1.length-1]++;else{a=Math.floor((a-this.$3+.5)/this.$2)+1;this.$1[a]++}};b.getStats=function(){return this.$5?this.$1:null};return a}();f["default"]=a}),66);
__d("ZenonCumulativeMediaStat",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$3=this.$5=this.$1=a,this.$7=this.$8=a,this.$9=!1,this.$4=this.$6=this.$2=c("performanceNow")(),this.$10=1}var b=a.prototype;b.$11=function(a){this.$5=this.$1,this.$6=this.$2,this.$1=a,this.$2=c("performanceNow")(),this.$10++};b.update=function(a){this.$7=this.$8;this.$8=a;a=this.$8-this.$7;a<0?(a=this.$8,this.$9=!0):this.$9=!1;this.$11(this.$1+a)};b.updateNonStrictCumulative=function(a){this.$7=this.$8,this.$8=a,this.$9=!1,this.$11(a)};b.isReset=function(){return this.$9};b.getCurrentValue=function(){return this.$1};b.getDeltaValue=function(){return this.$1-this.$3};b.getDeltaFromLastUpdate=function(){return this.$1-this.$5};b.getTimeSinceLastUpdate=function(){return this.$2-this.$6};b.getElapsedTime=function(){return this.$2-this.$4};b.getPreviousTime=function(){return this.$6};b.getCurrentTime=function(){return this.$2};b.getAverageOverTime=function(){return this.getDeltaValue()/this.getElapsedTime()};b.getCurrentTimeSinceLastUpdate=function(){return c("performanceNow")()-this.$2};b.getCount=function(){return this.$10};b.getFirstValue=function(){return this.$3};return a}();g["default"]=a}),98);
__d("ZenonMediaStatsSerializer",["ZenonCallFalcoEventUtils","ZenonCumulativeMediaStat","ZenonMediaStatsConfig","ZenonRenderedView"],(function(a,b,c,d,e,f,g){"use strict";var h=[d("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID,d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID,d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID,d("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID,d("ZenonMediaStatsConfig").PINNED_AUDIO_STATS_TRACK_INFO.trackId,d("ZenonMediaStatsConfig").PINNED_VIDEO_STATS_TRACK_INFO.trackId],i=1e4,j={tet:1e3,tpsd:1e3};function a(a,b,e,f,g,h,i){e={CoreAudioMetrics:{isstall:"0",voice_detect_pct:[]},CoreVideoMetrics:{screen:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}},video:{capture_stall:{is_stall:"0"},encode_stall:{is_stall:"0"},sent_stall:{is_stall:"0"}}},DebugAudioMetrics:{NetworkReceive:{}},extraInfo:{mediaPacketTimes:e.getFirstPacketTimes()},receiver:{},sender:{},sender_pct:{screen:{},video:{}},video:{}};var j={},p=b.get(d("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACKID);p!=null&&(s(p,e.sender),z(p,e.CoreAudioMetrics));p=b.get(d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID);p!=null&&(w(f,e.video,p),u(f,e.video,p,j),C(e.sender_pct.screen,p,c("ZenonRenderedView").GRID,"screen"));var t=b.get(d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID);t!=null&&(u(f,e.video,t,j),C(e.sender_pct.video,t,c("ZenonRenderedView").GRID,"video"));(p!=null||t!=null)&&x(e.video,t,p);o(b,e);k(b,e);m(a,b,e,h,i);l(b,e,j,f);q(b,e,j);r(e,j);n(e,g);return e}function k(a,b){a.forEach(function(a){var c=a.localIceCandidateStats;a=a.remoteIceCandidateStats;!b.extraInfo.localIceCandidate&&c&&(b.extraInfo.localIceCandidate=c);!b.extraInfo.remoteIceCandidate&&a&&(b.extraInfo.remoteIceCandidate=a)})}function l(a,b,c,d){a.forEach(function(a,e){!h.includes(e)&&a.remote===!0&&(a.contentType==="audio"?(t(a,e,b.receiver,c),y(a,c)):a.contentType==="video"&&v(d,b.video,a,c))})}function m(a,b,c,d,e){b.forEach(function(b,f){if(b.remote===!1){b=(b=d.get(f))!=null?b:a.get(f);if(b==null)return;b.enabled===!0&&b.webrtcTrack.readyState==="live"&&(b.contentType==="audio"?p(e.audioDevices,b):b.contentType==="video"&&p(e.videoDevices,b));e.audioDevices.length>0&&(c.CoreAudioMetrics.audio_device=e.audioDevices[e.audioDevices.length-1]);e.videoDevices.length>0&&(c.CoreVideoMetrics.video_device=e.videoDevices[e.videoDevices.length-1]);return}})}function n(a,b){b=(b=b.getStats())!=null?b:[];var c=b.some(function(a){return a>0});if(c){a.video.receiver=(c=a.video.receiver)!=null?c:babelHelpers["extends"]({},null);a.video.receiver.avhist=b}}function o(a,b){var c=a.get(d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID);a=a.get(d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID);c!=null&&A(c,b.CoreVideoMetrics.video);a!=null&&A(a,b.CoreVideoMetrics.screen)}function p(a,b){a.length===0?a.push(b.label):b.label!==a[a.length-1]&&a.push(b.label)}function q(a,b,c){c.totalRxLevel!=null&&c.totalRxLevelCount!=null&&c.totalRxLevelCount>0&&(b.CoreAudioMetrics.rx_chan_proc_lvl=d("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(c.totalRxLevel/c.totalRxLevelCount)));c=a.get(d("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID);if(c==null)return;a=c.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL];c=c.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];a&&c&&(b.receiver.rx_sum_lvl=a.getCurrentValue(),b.receiver.taulc=c.getCurrentValue())}function r(a,b){var c={},e=a.receiver,f=e.jbd;e=e.jbec;if(f!=null&&e!=null&&e>0){f=d("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(f/e));c.neteq={meanWait:f}}e=b.maxSpeechExpandRate!=null?Math.round(b.maxSpeechExpandRate*i):null;f=b.minSpeechExpandRate!=null?Math.round(b.minSpeechExpandRate*i):null;b=b.countSpeechExpandRate!=null&&b.countSpeechExpandRate>0&&b.sumSpeechExpandRate!=null?Math.round(b.sumSpeechExpandRate*i/b.countSpeechExpandRate):null;(e!=null||b!=null||f!=null)&&(c.speech_expand_rate={M:d("ZenonCallFalcoEventUtils").nonNullIntNumber(e),avg:d("ZenonCallFalcoEventUtils").nonNullIntNumber(b),m:d("ZenonCallFalcoEventUtils").nonNullIntNumber(f)});a.DebugAudioMetrics.NetworkReceive={jb_nm:c}}function s(a,b){var c=a.cumulativeStat,e=c.bytesSent;c=c.packetsSent;var f=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],g=a.deltaStat.googRtt,h=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL],i=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];f=new Map([["bytes",e],["plost",f],["psent",c]]);f.forEach(function(a,c){a!=null&&c!=="codec"&&c!=="ice"&&c!=="ice_g0"&&(b[c]=a.getCurrentValue())});if(e){c=e.getElapsedTime();c>0&&(b.ube_avg=Math.round(e.getDeltaValue()*8/c*1e3))}if(g){f=g.getTotal();e=g.getCount();if(e>0){b.avgrtt=Math.round(f/e);b.maxrtt=Math.max((c=b.maxrtt)!=null?c:Number.MIN_SAFE_INTEGER,g.getMax());b.minrtt=Math.min((f=b.minrtt)!=null?f:Number.MAX_SAFE_INTEGER,g.getMin())}}a.codec!=null&&a.codec!==""&&(b.codec={www:a.codec});h&&i&&(b.tx_sum_lvl=h.getCurrentValue(),b.taulc=i.getCurrentValue());return b}function t(a,b,c,e){a.codec!=null&&a.codec!==""&&(c.codec==null&&(c.codec={}),c.codec[b]=a.codec);b=a.cumulativeStat;var f=b.bytesReceived,g=b.fecPacketsDiscarded,h=b.fecPacketsReceived,i=b.googDecodingCNG,j=b.googDecodingCTN,k=b.googDecodingNormal,l=b.googDecodingPLC,m=b.googDecodingPLCCNG,n=b.insertedSamplesForDeceleration,o=b.jitterBufferDelay,p=b.jitterBufferEmittedCount,q=b.packetsReceived,r=b.removedSamplesForAcceleration,s=b.totalAudioEnergy,t=b.totalSamplesDuration;b=b.totalSamplesReceived;var u=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],v=a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY];a=a.deltaStat;var w=a.googRtt,x=a.googSpeechExpandRate;a=a.jitter;if(f){var y=f.getElapsedTime();if(y>0){var z=D(c.dbe_total_bytes,f.getDeltaValue());c.dbe_total_bytes=z;y=D(c.dbe_total_time,y);c.dbe_total_time=y;c.dbe_avg=Math.round(z*8/y*1e3)}}if(v!=null&&q!=null){e.sumAudioE2eLatency=((z=e.sumAudioE2eLatency)!=null?z:0)+v.getAverage()*q.getCurrentValue();e.countAudioE2eLatency=((y=e.countAudioE2eLatency)!=null?y:0)+q.getCurrentValue();e.sumAudioE2eLatency!=null&&e.countAudioE2eLatency>0&&(c.e2el=Math.round(e.sumAudioE2eLatency/e.countAudioE2eLatency))}if(w){e.sumrtt=((z=e.sumrtt)!=null?z:0)+w.getTotal();e.countrtt=((v=e.countrtt)!=null?v:0)+w.getCount();e.sumrtt!=null&&e.countrtt>0&&(c.avgrtt=Math.round(e.sumrtt/e.countrtt));c.maxrtt=Math.max((y=c.maxrtt)!=null?y:Number.MIN_SAFE_INTEGER,w.getMax());c.minrtt=Math.min((z=c.minrtt)!=null?z:Number.MAX_SAFE_INTEGER,w.getMin())}if(x){e.sumSpeechExpandRate=((v=e.sumSpeechExpandRate)!=null?v:0)+x.getTotal();e.countSpeechExpandRate=((y=e.countSpeechExpandRate)!=null?y:0)+x.getCount();e.maxSpeechExpandRate=Math.max((z=e.maxSpeechExpandRate)!=null?z:Number.MIN_SAFE_INTEGER,x.getMax());e.minSpeechExpandRate=Math.min((w=e.minSpeechExpandRate)!=null?w:Number.MAX_SAFE_INTEGER,x.getMin())}o&&(c.jbd=D(c.jbd,1e3*o.getCurrentValue()));s&&(c.taue=D(c.taue,1e5*s.getCurrentValue()),c.taut=D(c.taut,s.getElapsedTime()));t&&(c.sp_dur=D(c.sp_dur,1e3*t.getCurrentValue()));if(b){v=b.getCurrentValue();if(v>0&&j!=null){if(r!=null){y=Math.round(r.getCurrentValue()*j.getCurrentValue()/v);c.dec_ar=D(c.dec_ar,y)}if(n){z=Math.round(n.getCurrentValue()*j.getCurrentValue()/v);c.dec_per=D(c.dec_per,z)}}}w=new Map([["dec_plc",l],["dec_plc_cng",m],["dec_cng",i],["dec_normal",k],["neteq_calls",j],["decel_cnt",n],["bytes",f],["plost",u],["precv",q],["fecpd",g],["fecpr",h],["jbec",p],["sp_dur",t],["sp_r",b]]);w.forEach(function(a,b){a!=null&&b!=="codec"&&b!=="ice"&&b!=="ice_g0"&&(c[b]=D(c[b],a.getCurrentValue()))});if(a&&q&&c.precv!=null&&c.precv>0){x=c.precv;o=a.getTotal()*q.getCurrentValue();e.weightedJitterSum=((s=e.weightedJitterSum)!=null?s:0)+o;c.jitter=Math.round(1e3*e.weightedJitterSum/x)}return c}function u(a,b,e,f){b.ld=Math.round(a.getLocalVideoDuration());var g=b.sender||babelHelpers["extends"]({},null);e.codec!=null&&e.codec!==""&&(g.ename=e.codec);if(e.histResScale){g.histResScale==null&&(g.histResScale=new Array(5).fill(0));var h=g.histResScale;h.forEach(function(a,b){h[b]+=e.histResScale[b]})}a=e.cumulativeStat;var i=a.bytesSent,k=a.captureFrameCount,l=a.firCount,m=a.framesEncoded,n=a.framesSent,o=a.keyFramesEncoded,p=a.nackCount,q=a.packetsSent,r=a.pliCount,s=a.simulcast_layer_changes,t=a.totalEncodeTime,u=a.totalPacketSendDelay,v=a.videoConvertedQpSum,w=a.videoSumCapturePixel;a=a.videoSumPixel;var x=e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],y=e.deltaStat,z=y.frameHeight,A=y.frameWidth,B=y.height;y=y.width;i=new Map([["enc_bytes",i],["eiframes",k],["eqps",v],["plost",x],["psent",q],["pli",r],["fcsn",n],["fir",l],["tet",t],["tpsd",u],["fcap",k],["frames",m],["kframes",o],["nack",p],["sim_l_chg",s],["ah",z],["aw",A],["ch",B],["cw",y]]);i.forEach(function(a,b){if(a!=null&&b!=="ename"&&b!=="histResScale"&&b!=="ehist"&&b!=="ss")if(a instanceof c("ZenonCumulativeMediaStat")){var d;d=(d=j[b])!=null?d:1;g[b]=D(g[b],a.getCurrentValue()*d)}else{g[b]=Math.round((d=a.getLastAddedValue())!=null?d:0)}});b.ld!=null&&b.ld>0&&g.frames!=null&&g.frames>0&&(g.efrate=Math.round(g.frames*1e3/b.ld));if(w&&g.fcap!=null&&g.fcap>0){v=g.fcap;f.videoSumCapturePixel=D((x=f.videoSumCapturePixel)!=null?x:void 0,w.getCurrentValue());g.video_sum_capture_pixel=f.videoSumCapturePixel;g.eipxl=Math.round(f.videoSumCapturePixel/v)}if(a&&g.frames!=null&&g.frames>0){q=g.frames;f.videoSumPixel=D((r=f.videoSumPixel)!=null?r:void 0,a.getCurrentValue());g.video_sum_encoded_pixel=f.videoSumPixel;g.eopxl=Math.round(f.videoSumPixel/q)}e.codecHistory!=null&&(g.ehist=Object.fromEntries(e.codecHistory.map(function(a){var b=a.codec;a=a.updateTime;return[Math.round(a).toString(),b]})));b.sender=g}function v(a,b,c,e){b.rd=Math.round(a.getRemoteVideoDuration());a=b.receiver;var f=a===void 0?{}:a;c.codec!=null&&c.codec!==""&&c.lastUpdate>((a=e.lastCodecUpdate)!=null?a:Number.MIN_SAFE_INTEGER)&&(f.dname=c.codec,e.lastCodecUpdate=c.lastUpdate);a=c.cumulativeStat;var g=a.bytesReceived,h=a.firCount,i=a.framesDecoded,j=a.framesReceived,k=a.jitterBufferDelay,l=a.jitterBufferEmittedCount,m=a.jitterBufferFramesSentToDecoder,n=a.keyFramesDecoded,o=a.nackCount,p=a.packetsReceived,q=a.pliCount,r=a.totalDecodeTime,s=a.tracktimestamp,t=a.videoConvertedQpSum,u=a.videoDecodedBytes,v=a.videoDecodeTime,w=a.videoFreezeCount,x=a.videoFreezeDuration,y=a.videoFreezeDuration500ms,z=a.videoPauseCount,A=a.videoPauseDuration;a=a.videoSumPixel;var B=c.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED],C=c.deltaStat,E=C.avSync,F=C.avSyncAbs,G=C.e2eLatency,H=C.frameHeight;C=C.frameWidth;if(i){if(c.maxTotalDecodeTime!=null){f.dec_time=Math.round(Math.max(c.maxTotalDecodeTime,(c=f.dec_time)!=null?c:0))}c=D(f.frd,i.getCurrentValue());if(G&&c>0){var I;G=G.getAverage()*i.getCurrentValue();f.e2el=(I=f.e2el)!=null?I:0;f.frd=(I=f.frd)!=null?I:0;f.e2el=Math.round((f.e2el*f.frd+G)/c)}if(a!=null&&c>0){G=((I=e.aggVideoSumPixel)!=null?I:0)+a.getCurrentValue();f.dpxl=Math.round(G/c);e.aggVideoSumPixel=G;f.agg_video_sum_decoded_pixel=G}if(E!=null&&F!=null&&c>0){a=((I=e.weigtedAvSync)!=null?I:0)+E.getAverage()*i.getCurrentValue();I=((G=e.weigtedAvSyncAbs)!=null?G:0)+F.getAverage()*i.getCurrentValue();f.av=Math.round(a/c);f.avabs=Math.round(I/c);e.weigtedAvSync=a;e.weigtedAvSyncAbs=I}f.frd=c;f.dec_frame=c}if(C&&H&&s.getCurrentTime()>((E=e.lastFrameUpdate)!=null?E:Number.MIN_SAFE_INTEGER)){f.rh=(G=H.getLastAddedValue())!=null?G:0;f.rw=(F=C.getLastAddedValue())!=null?F:0;e.lastFrameUpdate=s.getCurrentTime()}r&&(f.tdt=D(f.tdt,1e3*r.getCurrentValue()));k&&(f.jbd=D(f.jbd,1e3*k.getCurrentValue()));i=new Map([["recv",g],["qps",t],["plost",B],["precv",p],["pli",q],["pact",z],["padur",A],["jbec",l],["jtasb",j],["jtfrm",m],["jtkey",n],["nack",o],["fir",h],["frcnt",w],["frdur",x],["frdur500",y],["dec_time_all_streams",v],["dec_bytes",u]]);i.forEach(function(a,b){a!=null&&b!=="dname"&&b!=="avhist"&&(f[b]=D(f[b],a.getCurrentValue()))});f.jbd!=null&&f.jbec!=null&&f.jbec>0&&(f.recjbl=Math.round(f.jbd/f.jbec));b.receiver=f}function w(a,b,c){var d,e=((d=b.sender)==null?void 0:d.ss)||babelHelpers["extends"]({},null);e.dur=Math.round(a.getLocalScreenShareDuration());d=c.cumulativeStat;a=d.captureFrameCount;var f=d.framesEncoded,g=d.videoBytesSent,h=d.videoConvertedQpSum,i=d.videoSumCapturePixel;d=d.videoSumPixel;c=c.deltaStat.availableOutgoingBitrate;a=new Map([["eiframes",a],["eqps",h],["frames",f]]);a.forEach(function(a,b){a!=null&&(e[b]=a.getCurrentValue())});if(i!=null&&e.eiframes!=null&&e.eiframes>0){h=e.eiframes;e.video_sum_capture_pixel=i.getCurrentValue();e.eipxl=Math.round(i.getCurrentValue()/h)}if(d!=null&&e.frames!=null&&e.frames>0){f=e.frames;e.video_sum_encoded_pixel=d.getCurrentValue();e.eopxl=Math.round(d.getCurrentValue()/f)}c&&(e.avbw=Math.round(c.getAverage()));if(g&&e.dur!=null&&e.dur>0){a=e.dur;e.avbr=Math.round(g.getCurrentValue()*8/a)}b.sender=(i=b.sender)!=null?i:babelHelpers["extends"]({},null);b.sender.ss=e}function x(a,b,c){b=(b=b==null?void 0:b.deltaStat)!=null?b:babelHelpers["extends"]({},null);b=b.googActualEncBitrate;c=(c=c==null?void 0:c.deltaStat)!=null?c:babelHelpers["extends"]({},null);c=c.googActualEncBitrate;var d=0,e=0;b!=null&&(d+=b.getTotal(),e+=b.getCount());c!=null&&(d+=c.getTotal(),e+=c.getCount());e!==0&&(a.bwe={avg_enc_bitrate:Math.round(d/e)})}function y(a,b){var c=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL];a=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];if(c&&a){var e;b.totalRxLevel=((e=b.totalRxLevel)!=null?e:0)+c.getCurrentValue();b.totalRxLevelCount=((e=b.totalRxLevelCount)!=null?e:0)+a.getCurrentValue()}}function z(a,b){var c=a.cumulativeStat,e=c.audioDevRecStalls,f=c.audioDevStallDuration;c=c.audioDevTotalStalls;var g=a.deltaStat.audioDevIsStalled;c=new Map([["astall",c],["sdur",f],["rstall",e]]);c.forEach(function(a,c){a!=null&&c!=="audio_device"&&c!=="rx_chan_proc_lvl_hist"&&c!=="voice_detect_pct"&&(b[c]=d("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(a.getCurrentValue())))});if(g){b.isstall=d("ZenonCallFalcoEventUtils").nonNullIntNumber((f=g.getLastAddedValue())!=null?f:0)}e=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL];c=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT];c!=null&&c.getCurrentValue()>0&&e!=null&&(b.captured_lvl=d("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(e.getCurrentValue()/c.getCurrentValue())),b.loudness_level=String(e.getCurrentValue()),b.loudness_level_count=String(c.getCurrentValue()))}function A(a,b){var c=a.cumulativeStat,d=c.videoCaptureStallDuration,e=c.videoCaptureTotalStalls,f=c.videoEncodeStallDuration,g=c.videoEncodeTotalStalls,h=c.videoSentStallDuration;c=c.videoSentTotalStalls;a=a.deltaStat;var i=a.videoCaptureIsStalled,j=a.videoEncodeIsStalled;a=a.videoSentIsStalled;B(b.capture_stall,e,d,i);B(b.encode_stall,g,f,j);B(b.sent_stall,c,h,a)}function B(a,b,c,e){b=new Map([["nstall",b],["sdur",c]]);b.forEach(function(b,c){b!=null&&c!=="video_device"&&(a[c]=d("ZenonCallFalcoEventUtils").nonNullIntNumber(Math.round(b.getCurrentValue())))});if(e){a.is_stall=d("ZenonCallFalcoEventUtils").nonNullIntNumber((c=e.getLastAddedValue())!=null?c:0)}}function C(a,b,c,e){if(a!=null){b=b.percentStat;var f=b.encodedFrameRate,g=b.roundTripTime,h=b.videoQP;b=b.videoQuality;f=new Map([["efr",f],["vqs",b],["vrtt",g],["qp",h]]);f.forEach(function(b,f){if(b!=null){b=b.getAvgAndPercentile(d("ZenonMediaStatsConfig").PERCENTILES_REQUESTED,c,e);a[f]={};b.avg!=null&&a[f]!=null&&(a[f].avg=b.avg);b.percentiles!=null&&a[f]!=null&&(a[f].p5=b.percentiles[0],a[f].p50=b.percentiles[1],a[f].p95=b.percentiles[2])}})}}function D(a,b){return a===void 0?Math.round(b):Math.round(a+b)}g.getMediaStats=a}),98);
__d("ZenonMediaStatsManager",["FBLogger","Network","ZenonDeltaMediaStat","ZenonFirstMediaPacketFinder","ZenonHistogramCounter","ZenonMediaActionLogger","ZenonMediaStatsConfig","ZenonMediaStatsReportPoller","ZenonMediaStatsSerializer","ZenonNetworkQualityMonitor","cr:1234","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,e,f,g,h,i,j){j===void 0&&(j=5e3),this.$9=null,this.__iceconnectionstate="disconnected",this.$1=a,this.$2=f,this.$3=g,this.$4=e,this.$6=h,this.$7=new(b("cr:1234"))(),this.__videoDurationTracker=i,this.$8=j,this.$5=function(){},this.$10=new(d("ZenonNetworkQualityMonitor").ZenonNetworkQualityMonitor)(),this.$11={audioDevices:[],videoDevices:[]},this.$12=new(c("ZenonFirstMediaPacketFinder"))(a),this.$13=new(c("ZenonHistogramCounter"))(200,1e3,200),this.$14=new Map(),this.$15=new Map()}var e=a.prototype;e.listen=function(){var a=this;this.$1.addEventListener("iceconnectionstatechange",function(b){b=b.target;a.__iceconnectionstate=b.iceConnectionState;switch(a.__iceconnectionstate){case"connected":a.pollRecurring();break;case"failed":case"disconnected":a.updateNetworkStatus(a.$10.determineNetworkStatus(null,!0));break}})};e.pollOnce=function(){var a;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0;a=Array.from(new Set([].concat(Array.from(this.$2.values()),Array.from(this.$3.values()))));e.next=4;return b("regeneratorRuntime").awrap(d("ZenonMediaStatsReportPoller").updateStatsFromConnection(a,this.$4,this.$13,this.$1,this.$7,this.$8));case 4:this.$9!=null&&this.$6(d("ZenonMediaStatsSerializer").getMediaStats(this.$2,this.$4,this.$12,this.__videoDurationTracker,this.$13,this.$3,this.$11));e.next=7;return b("regeneratorRuntime").awrap(d("ZenonMediaStatsReportPoller").updateVideoCodecFromReceivers(a,this.$1,this.$15));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),c("FBLogger")("rtc_www").catching(e.t0).warn("Error polling media metrics.");case 12:this.updateNetworkStatus(this.$10.determineNetworkStatus(this.$4,this.__iceconnectionstate==="failed"||this.__iceconnectionstate==="disconnected")),this.updateNetworkHealthStats();case 14:case"end":return e.stop()}},null,this,[[0,9]])};e.pollRecurring=function(){var a=this;if(this.$9!=null)return;this.$9=window.setInterval(function(){return a.pollOnce()},this.$8);this.pollOnce()};e.stopPolling=function(){this.$9!=null&&(window.clearInterval(this.$9),this.$9=null),this.logNetworkHealthStats()};e.onRemoteTrackAdded=function(a){this.$12.setUpForTrackType(a.contentType)};e.timeSeries=function(){return this.$7.serialize()};e.resetTimeSeries=function(){this.$7=new(b("cr:1234"))()};e.registerNetworkStatusListener=function(a){this.$5=a};e.updateNetworkStatus=function(a){this.$5(a)};e.updateNetworkHealthStats=function(){if(!c("Network").containsNetworkInformation())return;for(var a=d("ZenonMediaStatsConfig").NETWORK_HEALTH_STATS.values(),b=Array.isArray(a),e=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(b){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=this.$14.get(f);g==null&&(g=new(c("ZenonDeltaMediaStat"))(),this.$14.set(f,g));this.$16(f,g)}};e.$16=function(a,b){var e=0;switch(a){case"bandwidth":e=c("Network").getBandwidth();break;case"rtt":e=c("Network").getRTT();break;default:c("FBLogger")("rtc_www").warn(a+" stats collection is not implemented")}e!=null?b.add(e):d("ZenonMediaStatsConfig").isPreChromium86()&&c("FBLogger")("rtc_www").warn(a+" in null. Skipped logging")};e.logNetworkHealthStats=function(){var a;a=JSON.stringify({bandwidth:(a=this.$14.get("bandwidth"))==null?void 0:a.getAverage(),rtt:(a=this.$14.get("rtt"))==null?void 0:a.getAverage()});c("ZenonMediaActionLogger").logEvent({checkpoint:"Network health stats "+a})};e.getNetworkHealthStats=function(){return this.$14};return a}();g["default"]=a}),98);
__d("ZenonAudioLevelDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=9.5/Math.log(32767);function i(a,b){a=Math.round(20+h*Math.log(a/b));a=Math.max(1,Math.min(a,20));return a}function j(a,b){var c=-127;a>0&&b>0&&(c=Math.round(10*Math.log10(a/b)),c=Math.max(-127,Math.min(c,0)));c+=127;return c}function k(a,b,e){a!=null&&(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL]==null?e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL]=new(c("ZenonCumulativeMediaStat"))(a):e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL].update(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL].getCurrentValue()+a)),b!=null&&(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL]==null?e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL]=new(c("ZenonCumulativeMediaStat"))(b):e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL].update(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOUDNESS_LEVEL].getCurrentValue()+b)),e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT]==null?e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT]=new(c("ZenonCumulativeMediaStat"))(1):e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT].update(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_LOG_LEVEL_COUNT].getCurrentValue()+1)}function a(a,b){var c=0,e=0;a.filter(function(a){return a.webrtcTrack.readyState==="live"&&a.contentType==="audio"}).forEach(function(a){if(a.remote&&a.webrtcTrack.enabled===!1)return;var d=b.get(a.trackId);if(d==null||d.cumulativeStat.totalAudioEnergy==null||d.cumulativeStat.totalSamplesDuration==null)return;var f=d.cumulativeStat,g=f.totalAudioEnergy;f=f.totalSamplesDuration;g=g.getDeltaFromLastUpdate();f=f.getDeltaFromLastUpdate();if(f===0)return;if(a.remote===!0){c+=g;e=Math.max(e,f);a=i(g,f);k(a,null,d)}else{a=j(g,f);k(null,a,d)}});a=b.get(d("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID);if(a==null||e===0)return;var f=j(c,e);k(null,f,a)}g.computeAudioLevels=a}),98);
__d("ZenonAudioPlaybackIssueLogger",["ZenonMediaActionLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3;a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.detectAudioPlaybackIssue=function(a,b){var c=this;a.filter(function(a){return a.webrtcTrack.enabled&&a.webrtcTrack.readyState==="live"&&a.contentType==="audio"&&a.remote}).forEach(function(a){var d=b.get(a.trackId);if(d==null)return;d=d.cumulativeStat;var e=d.bytesReceived;d=d.totalAudioEnergy;if(e==null||d==null||e.getTimeSinceLastUpdate()===0)return;d=d.getDeltaFromLastUpdate();var f=e.getDeltaFromLastUpdate()*8;e=e.getTimeSinceLastUpdate()/1e3;f=f/e;c.$1.has(a.trackId)||c.$1.set(a.trackId,!1);e=c.$1.get(a.trackId);d===0&&f>h?e===!1&&(c.logAudioPlaybackIssueCheckpoint("start",a.trackId,f,d),c.$1.set(a.trackId,!0)):e===!0&&(c.logAudioPlaybackIssueCheckpoint("end",a.trackId,f,d),c.$1.set(a.trackId,!1))})};b.logAudioPlaybackIssueCheckpoint=function(a,b,d,e){c("ZenonMediaActionLogger").logEvent({checkpoint:(a==="start"?"Detected new":"No longer detecting")+" audio playback issue for track "+b+". Bitrate is "+d+" bps, audio energy delta is "+e+".",mediaID:b})};return a}();b=new a();g["default"]=b}),98);
__d("ZenonSimulcastStats",[],(function(a,b,c,d,e,f){"use strict";b=function(){function a(){this.$1=0,this.$2=new Map(),this.$3=new Map()}var b=a.prototype;b.update=function(a){a=g(a,this.$2,this.$3);var b=0;for(var c=a,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];f&&b++}if(this.$3.size===0)b>0&&this.$1++;else{f=!1;for(var e=a,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;b=e[c++]}else{c=e.next();if(c.done)break;b=c.value}b=b;var h=b[0];b=b[1];(!this.$3.has(h)||this.$3.get(h)!==b)&&(f=!0)}f&&this.$1++}this.$3=a};b.getNumLayerChanges=function(){return this.isSimulcastCall()?this.$1:0};b.isSimulcastCall=function(){return this.$3.size>1};return a}();function g(a,b,c){var d=new Map();for(var a=a.values(),e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(g.ssrc===void 0||g.framesSent===void 0)continue;var h=String(g.ssrc);g=Number(g.framesSent);if(b.has(h)){var i=b.get(h);i!==void 0&&d.set(h,g>i)}else d.set(h,g>0);b.set(h,g)}for(var i=c,h=Array.isArray(i),g=0,i=h?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(h){if(g>=i.length)break;f=i[g++]}else{g=i.next();if(g.done)break;f=g.value}e=f;a=e[0];e[1];d.has(a)||d.set(a,!1)}return d}function a(a){if(a.length===1)return a[0];var b=null,c=null,d=0;for(var e=0;e<a.length;e++){var f=a[e];if(f.frameWidth){var g=Number(f.frameWidth),h=!1;(c==null||g<c)&&(c=g,h=!0);var i=!1;if(f.framesEncoded){var j=Number(f.framesEncoded);j>d&&(i=!0,d=j)}(h||g===c&&i)&&(b=f)}}return b}f.ZenonSimulcastStats=b;f.getBaseLayerReport=a}),66);
__d("ZenonVideoScaleHistogram",[],(function(a,b,c,d,e,f){"use strict";function g(a){if(a>=.765625)return 0;else if(a>=.390625)return 1;else if(a>=.19140625)return 2;else if(a>=.09765625)return 3;return 4}function a(a,b){var c=["video","screen"];a.filter(function(a){return c.includes(a.contentType)&&a.remote===!1}).forEach(function(a){a=b.get(a.trackId);if(!a||!a.cumulativeStat||!a.histResScale)return;var c=a.cumulativeStat,d=c.framesEncoded;c=c.tracktimestamp;var e=a.deltaStat,f=e.frameHeight,h=e.frameWidth,i=e.height;e=e.width;if(d!=null&&e!=null&&i!=null&&h!=null&&f!=null&&d.getDeltaFromLastUpdate()>0&&c.getCurrentValue()>a.lastUpdate){c=d.getDeltaFromLastUpdate();d=((d=e.getLastAddedValue())!=null?d:0)*((e=i.getLastAddedValue())!=null?e:0);h=((i=h.getLastAddedValue())!=null?i:0)*((e=f.getLastAddedValue())!=null?e:0);if(d>0){i=h/d;f=g(i);a.histResScale[f]+=c}}})}f.getBinFromScale=g;f.updateTrackerWithScaleHistogram=a}),66);
__d("ZenonMediaStatsParser",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonSimulcastStats","ZenonVideoScaleHistogram","isTruthy","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h=["inbound-rtp","outbound-rtp","track","media-source","candidate-pair"];function i(a,b){var c=new Map();b.forEach(function(b,d){(b.type==="ssrc"&&b.googTrackId!=null&&b.googTrackId===a.webrtcTrack.id||b.type==="VideoBwe"||b.type==="googCandidatePair"&&b.googActiveConnection==="true"&&b.googRtt!=null)&&c.set(d,b)});return c}function a(a){var b=new Map();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];h.includes(e.type)&&b.set(f,e)}return b}function j(a,b){var e=b.contentType,f=b.remote;b=b.trackId;var g=a.get(b);g==null&&(g={codec:null,contentType:e,cumulativeStat:{},deltaStat:{},duration:0,histResScale:new Array(d("ZenonVideoScaleHistogram").getBinFromScale(0)+1).fill(0),lastUpdate:0,maxTotalDecodeTime:0,percentStat:{},remote:f,startTime:c("performanceNow")()},a.set(b,g));return g}function k(a){return d("ZenonMediaStatsConfig").CUMULATIVE_STATS.includes(a)}function l(a){return d("ZenonMediaStatsConfig").DELTA_STATS.includes(a)}function b(a){if(a instanceof Map)return a;var b=new Map();if(a.result)for(var c=a.result(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g={id:f.id,timestamp:f.timestamp,type:f.type};for(var h=f.names(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;g[k]==null&&(g[k]=f.stat(k))}b.set(g.id,g)}else for(var k=a.values(),j=Array.isArray(k),i=0,k=j?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(j){if(i>=k.length)break;h=k[i++]}else{i=k.next();if(i.done)break;h=i.value}f=h;b.set(f.id,f)}return b}function e(a,b,c){c=i(a,c);for(var c=c.values(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=j(b,a);p(a,g,f);f=n(f);f!=null&&(g.codec=f)}}function f(a,b,c){var e=null,f=[];for(var c=c.values(),g=Array.isArray(c),h=0,c=g?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=c.length)break;i=c[h++]}else{h=c.next();if(h.done)break;i=h.value}i=i;i.type==="outbound-rtp"&&i.trackId&&(e=j(b,a),typeof i.trackId==="string"&&(e.sender=i.trackId));switch(i.type){case"inbound-rtp":e=j(b,a);q(e,i,d("ZenonMediaStatsConfig").getInboundRtpStats().concat(d("ZenonMediaStatsConfig").getRtpStats()));break;case"outbound-rtp":i.kind==="video"?f.push(i):(e=j(b,a),q(e,i,d("ZenonMediaStatsConfig").getOutboundRtpStats().concat(d("ZenonMediaStatsConfig").getRtpStats())));break;case"media-source":e=j(b,a);q(e,i,d("ZenonMediaStatsConfig").getMediaSourceStats());break;case"track":e=j(b,a);q(e,i,d("ZenonMediaStatsConfig").getTrackStats());break;case"candidate-pair":e=j(b,a);q(e,i,d("ZenonMediaStatsConfig").getCandidatePairStats());break;case"codec":var k=String(i.mimeType).split("/")[1];k!=null&&k!==""&&(e=j(b,a),o(e,k));break;case"local-candidate":e=j(b,a);e.localIceCandidateStats=s(i);break;case"remote-candidate":e=j(b,a);e.remoteIceCandidateStats=s(i);break;default:break}}if(f.length>0){e=j(b,a);r(e,f);k=d("ZenonSimulcastStats").getBaseLayerReport(f);k!=null&&q(e,k,d("ZenonMediaStatsConfig").getOutboundRtpStats().concat(d("ZenonMediaStatsConfig").getRtpStats()))}}function m(a,b,c){b=j(b,a);if(typeof c.getParameters==="function"){c=c.getParameters();c=c.encodings;var d=b.audioEncoding,e=b.videoEncoding;if(Array.isArray(c)){c=c.some(function(a){return a.active});a.contentType==="audio"?!d?b.audioEncoding={enabled:c,prevState:null}:(d.prevState=d.enabled,d.enabled=c):!e?b.videoEncoding={enabled:c,prevState:null}:(e.prevState=e.enabled,e.enabled=c)}}}function n(a){var b=null;a.googCodecName!=null&&a.googCodecName!==""&&(b=String(a.googCodecName),a.codecImplementationName!=null&&(b+=String(a.codecImplementationName)));return b}function o(a,b){a.startTime==null&&(a.startTime=c("performanceNow")());var d=a.startTime;a.codecHistory==null&&(a.codecHistory=[]);b.length>0&&(a.codecHistory.length===0||a.codecHistory[a.codecHistory.length-1].codec!==b)&&a.codecHistory.push({codec:b,updateTime:c("performanceNow")()-d});a.codec=b}function p(a,b,e){Object.entries(e).forEach(function(f){var g=f[0];f=Number(f[1]);if(e.type==="ssrc"&&d("ZenonMediaStatsConfig").STATS_REQUESTED.includes(g)&&d("ZenonMediaStatsConfig").getSsrcStats().includes(g)||e.type==="VideoBwe"&&d("ZenonMediaStatsConfig").getVideoBweStats().includes(g)&&a.contentType!=="audio"&&a.remote===!1||e.type==="googCandidatePair"&&d("ZenonMediaStatsConfig").getGoogCandidatePairStats().includes(g))if(d("ZenonMediaStatsConfig").CUMULATIVE_STATS.includes(g)){if(g==="packetsLost"&&a.remote)return;b.cumulativeStat[g]!=null?g==="packetsLost"?b.cumulativeStat[g].updateNonStrictCumulative(f):b.cumulativeStat[g].update(f):b.cumulativeStat[g]=new(c("ZenonCumulativeMediaStat"))(f)}else d("ZenonMediaStatsConfig").DELTA_STATS.includes(g)&&(b.deltaStat[g]==null&&(b.deltaStat[g]=new(c("ZenonDeltaMediaStat"))()),b.deltaStat[g].add(f))})}function q(a,b,e){Object.entries(b).forEach(function(f){var g=f[0];f=Number(f[1]);if(!e||e.includes(g))if(k(g))a.cumulativeStat[g]!=null?g==="packetsLost"?a.cumulativeStat[g].updateNonStrictCumulative(f):a.cumulativeStat[g].update(f):a.cumulativeStat[g]=new(c("ZenonCumulativeMediaStat"))(f);else if(g==="timestamp"){var h=b.type+g;a.cumulativeStat[h]!=null?a.cumulativeStat[h].update(f):a.cumulativeStat[h]=new(c("ZenonCumulativeMediaStat"))(f)}else if(g===d("ZenonMediaStatsConfig").DERIVED_METRICS.FRAME_RATE_MEAN){h=null;b.framesEncoded!=null?h=Number(b.framesEncoded):b.framesDecoded!=null&&(h=Number(b.framesDecoded));c("isTruthy")(h)&&(a.deltaStat[g]==null&&(a.deltaStat[g]=new(c("ZenonDeltaMediaStat"))()),a.deltaStat[g].add(f))}else l(g)&&(a.deltaStat[g]==null&&(a.deltaStat[g]=new(c("ZenonDeltaMediaStat"))()),a.deltaStat[g].add(f))})}function r(a,b){var e;a.simulcastStats===void 0&&(a.simulcastStats=new(d("ZenonSimulcastStats").ZenonSimulcastStats)());(e=a.simulcastStats)==null?void 0:e.update(b);b=(e=a.simulcastStats)==null?void 0:e.getNumLayerChanges();if(b!=null){e=d("ZenonMediaStatsConfig").DERIVED_METRICS.SIMULCAST_LAYER_CHANGES;a.cumulativeStat[e]!=null?a.cumulativeStat[e].update(b):a.cumulativeStat[e]=new(c("ZenonCumulativeMediaStat"))(b)}}function s(a){var b=a.candidateType,c=a.networkType;a=a.protocol;var d={};b&&typeof b==="string"&&(d.candidateType=b);c&&typeof c==="string"&&(d.networkType=c);a&&typeof a==="string"&&(d.protocol=a);return d}g.filterLegacyMediaReports=i;g.filterMediaReports=a;g.getOrCreateTrackerFromMap=j;g.isCumulativeStat=k;g.isDeltaStat=l;g.makeStatsReportMap=b;g.updateTrackStatsWithChromiumLegacyReport=e;g.updateTrackStatsWithReport=f;g.updateTrackStatsFromSender=m}),98);
__d("ZenonAudioStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaActionLogger","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3;function i(a){var b=a.audioEncoding;a=a.cumulativeStat;var e=a.bytesSent,f=a["media-sourcetimestamp"];a=a[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION];var g=(b==null?void 0:b.enabled)===!1||(b==null?void 0:b.enabled)===!0&&(b==null?void 0:b.prevState)===!1;if(!g&&e!=null&&f!=null){if(e.getCurrentTimeSinceLastUpdate()>h&&a!=null){if(a.getCurrentTimeSinceLastUpdate()!==0){c("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated a stall due to byteSent update time "+e.getCurrentTimeSinceLastUpdate()+" greater than threshold. audioEncoding: "+JSON.stringify((g=b)!=null?g:{})})}return a.getCurrentTimeSinceLastUpdate()}if((e.getCurrentValue()===0||e.getDeltaFromLastUpdate()===0)&&f.getDeltaFromLastUpdate()!==0){c("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated a stall due to no "+(e.getCurrentValue()===0?"current bytes":"delta bytes")+".  audioEncoding: "+JSON.stringify((g=b)!=null?g:{})})}return e.getCurrentValue()===0||e.getDeltaFromLastUpdate()===0?f.getDeltaFromLastUpdate():0}return 0}function j(a){a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]==null&&(a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]=new(c("ZenonDeltaMediaStat"))()),a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS]==null&&(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS]=new(c("ZenonCumulativeMediaStat"))(0)),a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS]==null&&(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS]=new(c("ZenonCumulativeMediaStat"))(0)),a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION]==null&&(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION]=new(c("ZenonCumulativeMediaStat"))(0))}function k(a){var b=i(a),c=b===0?0:1;j(a);var e=!m(a)&&c?1:0;a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].getCurrentValue()+e);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS].getCurrentValue()+e);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].getCurrentValue()+b);a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].add(c)}function l(a,b){b=b?0:1;var e=!m(a)&&b?1:0;a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_REC_STALLS].getCurrentValue()+e);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_TOTAL_STALLS].getCurrentValue()+e);a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].add(b);var f=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION];b=b&&f?f.getCurrentTimeSinceLastUpdate():0;a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_STALL_DURATION].getCurrentValue()+b);e!==0&&c("ZenonMediaActionLogger").logEvent({checkpoint:"[audio stall deriver] calculated additional stall due no tracks"})}function m(a){return a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED]!=null&&a.deltaStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AUDIO_DEV_IS_STALLED].getLastAddedValue()===1}function a(a,b){var c=0;a.filter(function(a){return a.contentType==="audio"&&!a.remote&&a.webrtcTrack.readyState==="live"}).forEach(function(a){c++;a=b.get(a.trackId);a!=null&&k(a)});a=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACK_INFO);a!=null&&(j(a),c===0?l(a,!1):l(a,!0))}g.updateStatsWithDerivedMetric=a}),98);
__d("ZenonAvSyncDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.webrtcStream.getAudioTracks();return a!=null&&a.length>0?a[0].id:null}function i(a){var b;if(a.cumulativeStat.totalAudioEnergy!=null&&a.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate()<=d("ZenonMediaStatsConfig").VOICE_ENERGY_THRESHOLD){a.isAudioEnergyLow=!0;return!0}b=(b=a.isAudioEnergyLow)!=null?b:!1;a.isAudioEnergyLow=!1;return b}function a(a,b,e){a.filter(function(a){return a.contentType==="video"&&a.remote}).forEach(function(f){var g=h(f),k=a.find(function(a){return a.webrtcTrack.id===g});if(k!=null){k=b.get(k.trackId);var l=b.get(f.trackId);if(k!=null&&k.cumulativeStat.estimatedPlayoutTimestamp!=null&&l!=null&&l.cumulativeStat.estimatedPlayoutTimestamp!=null){var m,n,o;f=l.cumulativeStat.estimatedPlayoutTimestamp;var p=k.cumulativeStat.estimatedPlayoutTimestamp;m=(m=l.lastEstimatedPlayoutTimestamp)!=null?m:0;n=(n=k.lastEstimatedPlayoutTimestamp)!=null?n:0;l.lastEstimatedPlayoutTimestamp=f.getCurrentValue();k.lastEstimatedPlayoutTimestamp=p.getCurrentValue();var q=l.cumulativeStat.packetsReceived?l.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()>0:!1,r=k.cumulativeStat.packetsReceived?k.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()>0:!1;if(((o=l.lastEstimatedPlayoutTimestamp)!=null?o:0)<=m||((o=k.lastEstimatedPlayoutTimestamp)!=null?o:0)<=n||i(k)||!q||!r){j(l,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT,0);j(l,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,0);return}j(l,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT,1);m=p.getCurrentValue()-f.getCurrentValue();o=Math.abs(m);if(o>d("ZenonMediaStatsConfig").AV_SYNC_CUTOFF){j(l,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,1);return}j(l,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB,0);n=[{key:d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC,value:m},{key:d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_ABS,value:o}];n.forEach(function(a){l.deltaStat[a.key]==null&&(l.deltaStat[a.key]=new(c("ZenonDeltaMediaStat"))()),l.deltaStat[a.key].add(a.value)});e.update(o)}}})}function j(a,b,d){a.cumulativeStat[b]==null&&(a.cumulativeStat[b]=new(c("ZenonCumulativeMediaStat"))(0)),a.cumulativeStat[b].update(a.cumulativeStat[b].getCurrentValue()+d)}g.findAssociatedAudioTrackId=h;g.isMutedDuringInterval=i;g.updateTrackerWithAvSync=a}),98);
__d("ZenonE2ELatencyDeriver",["ZenonDeltaMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=-22089888e5;function a(a,b){a.filter(function(a){return a.remote}).forEach(function(a){a=b.get(a.trackId);var e=d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY;if(a!=null&&a.cumulativeStat.estimatedPlayoutTimestamp!=null&&a.cumulativeStat.estimatedPlayoutTimestamp.getDeltaFromLastUpdate()>0){var f=Date.now()-h-a.cumulativeStat.estimatedPlayoutTimestamp.getCurrentValue();a.deltaStat[e]==null&&(a.deltaStat[e]=new(c("ZenonDeltaMediaStat"))());a.deltaStat[e].add(f)}})}g.updateTrackerWithE2ELatency=a}),98);
__d("ZenonMuteStateDeriver",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.forEach(function(a){var c=b.get(a.trackId);if(c==null)return;c.isMuted=!a.enabled||a.webrtcTrack.readyState==="ended"})}f.updateMuteState=a}),66);
__d("ZenonOutboundStatsWriter",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({audio:d("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACK_INFO,screen:d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACK_INFO,screen_audio:d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO,video:d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACK_INFO});function i(a,b,e){if(e==null)return;a.cumulativeStat[b]==null?a.cumulativeStat[b]=new(c("ZenonCumulativeMediaStat"))(e.getCurrentValue()):b==="packetsLost"||b===d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED?a.cumulativeStat[b].updateNonStrictCumulative(a.cumulativeStat[b].getCurrentValue()+e.getDeltaFromLastUpdate()):a.cumulativeStat[b].update(a.cumulativeStat[b].getCurrentValue()+e.getDeltaFromLastUpdate())}function j(a,b,d){if(d==null)return;a.deltaStat[b]==null&&(a.deltaStat[b]=new(c("ZenonDeltaMediaStat"))());d=d.getLastAddedValue();d!=null&&a.deltaStat[b].add(d)}function a(a,b){a.filter(function(a){return a.remote===!1&&a.webrtcTrack.readyState==="live"}).forEach(function(a){var c=b.get(a.trackId);if(c!=null){a=h[a.contentType];a=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,a);var e=c.cumulativeStat,f=c.deltaStat,g=c.histResScale;c.percentStat;c.simulcastStats;c=babelHelpers.objectWithoutPropertiesLoose(c,["cumulativeStat","deltaStat","histResScale","percentStat","simulcastStats"]);Object.assign(a,c);a.histResScale=[].concat(g);for(var c in e)i(a,c,e[c]);for(var g in f)j(a,g,f[g])}})}g.updateOutboundStats=a}),98);
__d("ZenonPacketsLostDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a.filter(function(a){return a.webrtcTrack.enabled===!0&&a.webrtcTrack.readyState==="live"}).forEach(function(a){var e=b.get(a.trackId);if(e==null||e.cumulativeStat.packetsLost==null)return;var f=e.cumulativeStat.packetsLost;a.remote?a=e.cumulativeStat.packetsReceived:a=e.cumulativeStat.packetsSent;if(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED]==null)e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED]=new(c("ZenonCumulativeMediaStat"))(f.getCurrentValue());else{a=a!=null&&a.isReset()?f.getCurrentValue():f.getDeltaFromLastUpdate();e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED].updateNonStrictCumulative(e.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED].getCurrentValue()+a)}})}g.updatePacketsLost=a}),98);
__d("ZenonHistogram",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){return(a.value||0)-(b.value||0)}a=function(){function a(){this.$1=[],this.$2=!0}var b=a.prototype;b.$3=function(){this.$2===!1&&this.$1.sort(g),this.$2=!0};b.add=function(a){this.$1.push(a),this.$2=!1};b.getAvgAndPercentile=function(a,b){this.$2||this.$3();var c=b?this.$1.filter(b):this.$1;if(c.length===0)return{avg:null,percentiles:null};b=c.reduce(function(a,b){return a+b.value},0)/c.length;a=a.map(function(a){a=Math.min(100,Math.max(0,a));a=(c.length-1)*a/100;var b=Math.floor(a),d=Math.ceil(a);if(b===d)return c[b].value;var e=c[b].value*(d-a);d=c[d].value*(a-b);return e+d});return{avg:b,percentiles:a}};return a}();f["default"]=a}),66);
__d("ZenonPercentMediaStat",["ZenonHistogram","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("ZenonHistogram"))()}var b=a.prototype;b.add=function(a,b,c,d){c={contentType:c,value:a,view:b,voiceEnergy:d};this.$1.add(c)};b.getAvgAndPercentile=function(a,b,c,e){var f;e==null?f=function(a){return a.view===b&&a.contentType===c}:f=function(a){var f=a.voiceEnergy>d("ZenonMediaStatsConfig").VOICE_ENERGY_THRESHOLD;return a.view===b&&a.contentType===c&&f===e};return this.$1.getAvgAndPercentile(a,f)};return a}();g["default"]=a}),98);
__d("ZenonVideoQualityDeriver",["ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=1280*720;b=160*96;var i=Math.log2(h/b);c=51;var j=16,k=c-j,l=k+Math.floor(i*6);function m(a){var b=Math.max(1,Math.min(63,a));a=[1,5,12,28,42,53,64];var c=a.findIndex(function(a){return a>b});return c==null?0:Math.min(51,Math.floor(12+6*c+6*(b-a[c-1])/(a[c]-a[c-1])))}function a(a){var b=a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM],c=a.cumulativeStat.framesEncoded,e=a.deltaStat,f=e.frameHeight;e=e.frameWidth;if(b==null||c==null||f==null||e==null)return;c=c.getDeltaFromLastUpdate();b=b.getDeltaFromLastUpdate();e=e.getLastAddedValue();f=f.getLastAddedValue();if(c===0||f==null||e==null||e<=0||f<=0)return;b=b/c;if(b<=0)return;((c=a.codec)==null?void 0:c.indexOf("264"))===-1&&((c=a.codec)==null?void 0:c.indexOf("265"))===-1?a=m(b):a=b;c=Math.max(0,Math.min(k,a-j));b=e*f;a=Math.max(0,Math.min(i,Math.log2(h/b)));return Math.max(0,l-c-a*6)/l*100}g._convertToH264QP=m;g.computeVideoQuality=a}),98);
__d("ZenonPerStreamAggregator",["ZenonAvSyncDeriver","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonPercentMediaStat","ZenonRenderedView","ZenonVideoQualityDeriver"],(function(a,b,c,d,e,f,g){"use strict";var h=Object.freeze({audio:d("ZenonMediaStatsConfig").OUTBOUND_AUDIO_STATS_TRACK_INFO,screen:d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACK_INFO,screen_audio:d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_AUDIO_STATS_TRACK_INFO,video:d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACK_INFO});function a(a,b){s(a,b),r(a,b),q(a,b)}function i(a,b,d,e,f,g){if(d==null)return;a.percentStat[b]==null&&(a.percentStat[b]=new(c("ZenonPercentMediaStat"))());a.percentStat[b].add(d,e,f,g)}function j(a,b){return a<b?a:b}function k(a,b){var c=b.get(a.trackId),e=0;if(c==null)return e;if(a.contentType==="audio")c.cumulativeStat.totalAudioEnergy!=null&&(e=c.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate());else{c=d("ZenonAvSyncDeriver").findAssociatedAudioTrackId(a);if(c!=null){a=b.get(c);a!=null&&a.cumulativeStat.totalAudioEnergy!=null&&(e=a.cumulativeStat.totalAudioEnergy.getDeltaFromLastUpdate(),d("ZenonAvSyncDeriver").isMutedDuringInterval(a)&&(e=0))}}return e}function l(a,b){var e,f=d("ZenonMediaStatsConfig").DERIVED_METRICS.RENDERED_VIEW;b=b.get(a.trackId);if(b==null)return c("ZenonRenderedView").GRID;b.deltaStat[f]==null&&(b.deltaStat[f]=new(c("ZenonDeltaMediaStat"))());a=(a=b.renderedView)!=null?a:c("ZenonRenderedView").GRID;e=(e=c("ZenonRenderedView").cast(b.deltaStat[f].getLastAddedValue()))!=null?e:a;b.deltaStat[f].add(a);b=j(a,e);return b}function m(a,b,c,d){if(a.cumulativeStat[c]&&a.cumulativeStat[c].getDeltaFromLastUpdate()!==0&&a.cumulativeStat[b]!=null){b=a.cumulativeStat[b].getDeltaFromLastUpdate()/a.cumulativeStat[c].getDeltaFromLastUpdate();return b*((a=d)!=null?a:1)}return null}function n(a){var b=null,c=d("ZenonMediaStatsConfig").DERIVED_METRICS.PACKETS_LOST_CORRECTED;a.cumulativeStat.packetsReceived!=null&&a.cumulativeStat[c]!=null&&a.cumulativeStat[c].getDeltaFromLastUpdate()+a.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()!==0&&(b=a.cumulativeStat[c].getDeltaFromLastUpdate()/(a.cumulativeStat[c].getDeltaFromLastUpdate()+a.cumulativeStat.packetsReceived.getDeltaFromLastUpdate()));return b}function o(a,b,c){if(a.cumulativeStat[b]&&a.cumulativeStat[b].getTimeSinceLastUpdate()!==0){a=a.cumulativeStat[b].getDeltaFromLastUpdate()/a.cumulativeStat[b].getTimeSinceLastUpdate();return a*((b=c)!=null?b:1)}return null}function p(a,b,c){if(a.deltaStat[b]){a=a.deltaStat[b].getLastAddedValue();return a!=null?a*((b=c)!=null?b:1):null}return null}function q(a,b){var c=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").GLOBAL_STATS_TRACK_INFO),e=0,f=0,g=0,h=0,j=0,k=0;a.filter(function(a){return a.webrtcTrack.readyState==="live"&&a.webrtcTrack.muted===!1}).forEach(function(a){var c=b.get(a.trackId);if(c!=null)if(a.remote===!1)c.cumulativeStat.totalEncodeTime!=null&&c.cumulativeStat.totalEncodeTime.getTimeSinceLastUpdate()>0&&(h+=c.cumulativeStat.totalEncodeTime.getDeltaFromLastUpdate(),j+=c.cumulativeStat.totalEncodeTime.getTimeSinceLastUpdate(),k++);else{var d=o(c,"bytesReceived",8e3);if(d==null)return;a.contentType==="audio"?f+=d:g+=d;c.cumulativeStat.totalDecodeTime!=null&&c.cumulativeStat.totalDecodeTime.getTimeSinceLastUpdate()>0&&(h+=c.cumulativeStat.totalDecodeTime.getDeltaFromLastUpdate(),j+=c.cumulativeStat.totalDecodeTime.getTimeSinceLastUpdate(),k++)}});if(k>0){a=j/k;a=h*1e3/a;i(c,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.GLOBAL_CPU_USAGE,a,d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,d("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,e)}f+g>0&&(i(c,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.GLOBAL_AUDIO_BITRATE,f,d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,d("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,e),i(c,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.GLOBAL_VIDEO_BITRATE,g,d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,d("ZenonMediaStatsConfig").GLOBAL_STATS_CONTENT_TYPE,e))}function r(a,b){a.filter(function(a){return a.remote===!1&&a.webrtcTrack.readyState==="live"}).forEach(function(a){var c=b.get(a.trackId);if(c!=null){var e=h[a.contentType];e=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,e);i(e,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.ROUND_TRIP_TIME,p(c,"googRtt",1),d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,a.contentType,0);var f=d("ZenonVideoQualityDeriver").computeVideoQuality(c);i(e,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_QUALITY,f,d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,a.contentType,0);i(e,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_ENCODED_FRAME_RATE,o(c,"framesEncoded",1e3),d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,a.contentType,0);i(e,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_QP,m(c,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM,"framesEncoded",1),d("ZenonMediaStatsConfig").GLOBAL_STATS_RENDERED_VIEW,a.contentType,0)}})}function s(a,b){var e=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").PINNED_AUDIO_STATS_TRACK_INFO),f=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").PINNED_VIDEO_STATS_TRACK_INFO);a.filter(function(a){return a.webrtcTrack.readyState==="live"&&a.remote===!0}).forEach(function(a){var g=b.get(a.trackId);if(g!=null){var h=k(a,b),j=l(a,b);if(a.contentType==="audio"){var q=j===c("ZenonRenderedView").PINNED?e:g;i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PLC_RATE,m(g,"googDecodingPLC","googDecodingCTN"),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PLC_CNG_RATE,m(g,"googDecodingPLCCNG","googDecodingCTN"),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_NETEQ_WAIT_TIME,m(g,"jitterBufferDelay","jitterBufferEmittedCount",1e3),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.AUDIO_PACKET_LOSS_RATE,n(g),j,a.contentType,h)}else if(a.contentType==="video"){q=j===c("ZenonRenderedView").PINNED?f:g;i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_NETEQ_WAIT_TIME,m(g,"jitterBufferDelay","jitterBufferEmittedCount",1e3),j,a.contentType,h);if(g.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT]!=null&&g.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_COUNT].getDeltaFromLastUpdate()>0){var r=0;g.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB]==null||g.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_OOB].getDeltaFromLastUpdate()===0?i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_AV_SYNC_ABS,p(g,d("ZenonMediaStatsConfig").DERIVED_METRICS.AV_SYNC_ABS,1),j,a.contentType,h):r=1;i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_AV_SYNC_OOB,r,j,a.contentType,h)}i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FRAME_RATE,o(g,"framesDecoded",1e3),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FREEZE_COUNT_PER_MIN,o(g,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_COUNT,6e4),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_FREEZE_DURATION_PER_MIN,o(g,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION,6e4),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_PACKET_LOSS_RATE,n(g),j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_RENDER_SCALE_RATIO,g.scaleRatio,j,a.contentType,h);i(q,d("ZenonMediaStatsConfig").PER_STREAM_AGG_METRICS.VIDEO_CROPPING_RATIO,g.croppingRatio,j,a.contentType,h)}}})}g.aggregatePerStream=a}),98);
__d("ZenonVideoQpConversion",[],(function(a,b,c,d,e,f){"use strict";var g=[0,1,2,3,4,5,7,8,9,10,12,13,15,17,18,19,20,21,23,24,25,26,27,28,29,30,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,64,67,70,73,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,127],h=[1,5,12,28,42,53,64];function i(a){for(var b=0;b<g.length;b++)if(g[b]>=a)return b;return 63}function j(a){a=i(a);a=Math.max(1,Math.min(63,a));var b=h.length-1;for(var c=0;c<h.length;c++)if(h[c]>a){b=c;break}return Math.min(51,Math.floor(12+6*b+6*(a-h[b-1])/(h[b]-h[b-1])))}function a(a,b,c){if(a===0)return 0;else b=b/a;a=b;c||(a=j(a));return Math.round(a)}f.convertQp=a}),66);
__d("ZenonReceiverVideoQualityScoreDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig","ZenonVideoQpConversion"],(function(a,b,c,d,e,f,g){"use strict";var h=["video"];a=160*96;var i=1280*720,j=Math.log(i/a)/Math.log(2);b=51;var k=16,l=b-k,m=l+Math.floor(j*6),n={getVideoQualityIndex:function(a,b,c,e,f){if(a<=0||c==null||e==null||c===0||e===0)return null;a=d("ZenonVideoQpConversion").convertQp(a,b,!f);b=Math.max(0,Math.min(a-k,l));f=c*e;a=Math.max(0,Math.min(Math.log(i/f)/Math.log(2),j));c=6*1.6;e=100*(m-b-a*c)/m;return Math.max(0,e)},updateStatsWithDerivedMetric:function(a,b){a.filter(function(a){return h.includes(a.contentType)&&a.remote===!0}).forEach(function(a){if(a!==null){a=b.get(a.trackId);if(a!=null){var e=a.cumulativeStat,f=e.framesDecoded;e=e.qpSum;var g=a.deltaStat,h=g.frameHeight;g=g.frameWidth;if(f==null||e==null||h==null||g==null)return;f=f.getCurrentValue();if(g&&h&&f>0){var i=a.codec,j=!0;if(i==null)return;else i!=="unknown"&&(j=!(i.includes("264")||i.includes("265")));i=n.getVideoQualityIndex(e.getDeltaFromLastUpdate(),f,g.getLastAddedValue(),h.getLastAddedValue(),j);i!=null&&(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE]==null?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE]=new(c("ZenonCumulativeMediaStat"))(i):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_RECEIVER_QUALITY_SCORE].update(i))}}}})}};e=n;g["default"]=e}),98);
__d("ZenonResourceUsageStatsTracker",["FBLogger","Promise","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function d(){var a;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.prev=0;d.next=3;return b("regeneratorRuntime").awrap(h());case 3:a=d.sent;return d.abrupt("return",a);case 7:d.prev=7,d.t0=d["catch"](0),c("FBLogger")("rtc_www").catching(d.t0).info("Exception logging monitor extension stats");case 10:return d.abrupt("return",null);case 11:case"end":return d.stop()}},null,this,[[0,7]])}function h(){var c,d="gdpnckbgamaigmkbcklkeoipnfaalgad";c=(c=(c=a.chrome)==null?void 0:c.runtime)!=null?c:null;return c===null?b("Promise").resolve(null):c.sendMessage(d,"",function(c){var d;if((d=a.chrome)==null?void 0:(d=d.runtime)==null?void 0:d.lastError)return b("Promise").resolve(null);if(((d=c)!=null?d:null)===null)return b("Promise").resolve(null);if(Object.keys(c).length===0)return b("Promise").resolve(null);var e=[];Object.keys(c).forEach(function(a){a=c[a];e.push.apply(e,a)});d=0;var f=0,g=0,h=0;e.length>0&&(e.sort(function(a,b){return a.timestamp>b.timestamp?1:-1}),d=Math.round(e.reduce(function(a,b){return a+b.cpu},0)/e.length),h=Math.round(e[e.length-1].cpu),f=Math.round(Math.max.apply(Math,e.map(function(a){return a.cpu}).concat([0]))),g=Math.round(Math.min.apply(Math,e.map(function(a){return a.cpu}))));d={avgCpu:d,maxCpu:f,minCpu:g,mostRecentCpu:h};return b("Promise").resolve(d)})}g.getProcessStats=d}),98);
__d("ZenonVideoCaptureMetricDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h={VIDEO_CAPTURE_FRAME_COUNT_STAT_KEY:d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT,VIDEO_SUM_CAPTURE_PIXEL_STAT_KEY:d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL,calculateVideoCaptureFrameCount:function(a){var b=a.cumulativeStat.tracktimestamp,c=a.deltaStat.framesPerSecond;if(c!=null&&b!=null&&b.getCurrentValue()>a.lastUpdate&&b.getDeltaFromLastUpdate()!==b.getCurrentValue()){a=c.getLastAddedValue();c=b.getDeltaFromLastUpdate();if(typeof a==="number"){b=Math.round(a*c/1e3);return b}}return 0},calculateVideoSumCapturePixel:function(a,b){var c=a.cumulativeStat,d=c.captureFrameCount;c=c.tracktimestamp;var e=a.deltaStat,f=e.height;e=e.width;if(d!=null&&e!=null&&f!=null&&c!=null&&c.getCurrentValue()>a.lastUpdate){c=b?d.getCurrentValue():d.getDeltaFromLastUpdate();b=(a=e.getLastAddedValue())!=null?a:0;e=(d=f.getLastAddedValue())!=null?d:0;a=c*b*e;return a}return 0},updateStatsWithDerivedMetric:function(a,b){var e=["video","screen"];a.filter(function(a){return e.includes(a.contentType)&&a.remote===!1}).forEach(function(a){a=b.get(a.trackId);if(a!=null){if(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT]!=null){var e=a.cumulativeStat.framesEncoded;if(e!=null)if(e.getDeltaFromLastUpdate()<0)a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT].update(0);else{e=h.calculateVideoCaptureFrameCount(a);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT].getCurrentValue()===0&&(e+=e);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT].getCurrentValue()+e)}}else a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_FRAME_COUNT]=new(c("ZenonCumulativeMediaStat"))(0);if(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL]!=null){e=a.cumulativeStat.captureFrameCount;e=e.getDeltaFromLastUpdate()<0;var f=h.calculateVideoSumCapturePixel(a,e);e?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL].update(f):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL].getCurrentValue()+f)}else{e=h.calculateVideoSumCapturePixel(a,!0);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_CAPTURE_PIXEL]=new(c("ZenonCumulativeMediaStat"))(e)}}})}};a=h;g["default"]=a}),98);
__d("ZenonVideoConvertedQpDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig","ZenonVideoQpConversion"],(function(a,b,c,d,e,f,g){"use strict";var h=["video","screen"],i={calculateVideoConvertedQP:function(a){var b=a.cumulativeStat,c=b.framesDecoded,e=b.framesEncoded,f=b.qpSum;b=b.tracktimestamp;var g=a.codec;e=e!=null?e:c;if(f!=null&&e!=null&&g!=null&&b!=null&&b.getCurrentValue()>a.lastUpdate){c=e.getCount()===1||f.getCount()===1;c?(b=f.getCurrentValue(),a=e.getCurrentValue()):(b=f.getDeltaFromLastUpdate(),a=e.getDeltaFromLastUpdate());c=g.includes("264");f=d("ZenonVideoQpConversion").convertQp(a,b,c);return f*a}return 0},updateStatsWithDerivedMetric:function(a,b){a.filter(function(a){return h.includes(a.contentType)&&a.webrtcTrack.readyState==="live"&&a.webrtcTrack.muted===!1}).forEach(function(a){a=b.get(a.trackId);if(a!=null){var e=a.cumulativeStat.qpSum;if(e!=null){e=e.getDeltaFromLastUpdate()<0;var f=i.calculateVideoConvertedQP(a),g=d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CONVERTED_QP_SUM;a.cumulativeStat[g]!=null?e?a.cumulativeStat[g].update(f):a.cumulativeStat[g].update(a.cumulativeStat[g].getCurrentValue()+f):a.cumulativeStat[g]=new(c("ZenonCumulativeMediaStat"))(f)}}})}};a=i;g["default"]=a}),98);
__d("ZenonVideoDecodeTimeDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var d=a.filter(function(a){return a.contentType!=="audio"&&a.remote&&a.webrtcTrack.readyState!=="ended"}).reduce(function(a,d){d=b.get(d.trackId);if(d!=null&&d.cumulativeStat.framesDecoded!=null&&d.cumulativeStat.framesDecoded.getDeltaFromLastUpdate()>0){var e=d.cumulativeStat.framesDecoded.getTimeSinceLastUpdate();d.cumulativeStat.framesDecoded.getCount()===2&&(e+=h(d.cumulativeStat.framesDecoded,c));return Math.max(e,a)}return a},0);b.forEach(function(a){if(a.cumulativeStat.framesDecoded!=null){a.maxTotalDecodeTime=((a=a.maxTotalDecodeTime)!=null?a:0)+d}})}function b(a,b,e){a.filter(function(a){return a.contentType!=="audio"&&a.remote&&a.webrtcTrack.readyState!=="ended"}).forEach(function(a){a=b.get(a.trackId);if(a!=null&&a.cumulativeStat.framesDecoded!=null&&a.cumulativeStat.framesDecoded.getDeltaFromLastUpdate()>0){var f=a.cumulativeStat.framesDecoded.getTimeSinceLastUpdate();a.cumulativeStat.framesDecoded.getCount()===2&&(f+=h(a.cumulativeStat.framesDecoded,e));a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME]==null?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME]=new(c("ZenonCumulativeMediaStat"))(f):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODE_TIME].getCurrentValue()+f)}})}function h(a,b){return a.getDeltaFromLastUpdate()>0?Math.round(b*a.getFirstValue()/a.getDeltaFromLastUpdate()):0}g.findMaxDecodeTime=a;g.updateTrackerWithDecodeTime=b}),98);
__d("ZenonVideoDecodedBytesDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a.filter(function(a){return a.contentType!=="audio"&&a.remote&&a.webrtcTrack.readyState!=="ended"}).forEach(function(a){a=b.get(a.trackId);if(a!=null){var e=a.cumulativeStat,f=e.bytesReceived;e=e.framesDecoded;if(f&&e){var g=e.getElapsedTime()===0&&e.getCurrentValue()>0;if(g||e.getDeltaFromLastUpdate()>0){e=f.getDeltaFromLastUpdate();g&&(e=f.getCurrentValue());a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES]==null?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES]=new(c("ZenonCumulativeMediaStat"))(e):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_DECODED_BYTES].getCurrentValue()+e)}}}})}g.updateTrackerWithDecodedBytes=a}),98);
__d("ZenonVideoFreezeCountDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i=.5,j={aggregateFreezes:function(a,b,c,d){if(a){a=d.getDeltaFromLastUpdate();d=b-c*c/3;return Math.sqrt(d*(a-1))*1e3}return 0},calculateVideoFreeze:function(a){a=a.cumulativeStat;var b=a.framesDecoded,c=a.totalInterFrameDelay;a=a.totalSquaredInterFrameDelay;if(b!=null&&c!=null&&a!=null&&b.getDeltaFromLastUpdate()>1){var d=b.getDeltaFromLastUpdate(),e=b.getAverageOverTime()*1e3;c=c.getDeltaFromLastUpdate();a=a.getDeltaFromLastUpdate();e=1/e;var f=e*h/100;e=Math.max(3*e,e+.15);e=f*f/3+e*e/(d-1);var g=f*f/3+i*i/(d-1);a=(a-c*c/d)/d;c=a>e?1:0;d=a>g?1:0;e=j.aggregateFreezes(c,a,f,b);g=j.aggregateFreezes(d,a,f,b);return{count:c,duration:e,duration500ms:g}}return{count:0,duration:0,duration500ms:0}},updateStatsWithDerivedMetric:function(a,b){var e=d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_COUNT,f=d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION,g=d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_FREEZE_DURATION_500MS;a.filter(function(a){return a.contentType==="video"&&a.remote&&a.webrtcTrack.readyState!=="ended"}).forEach(function(a){a=b.get(a.trackId);if(a!=null){var d=j.calculateVideoFreeze(a);a.cumulativeStat[e]!=null?a.cumulativeStat[e].update(a.cumulativeStat[e].getCurrentValue()+d.count):a.cumulativeStat[e]=new(c("ZenonCumulativeMediaStat"))(d.count);a.cumulativeStat[f]!=null?a.cumulativeStat[f].update(a.cumulativeStat[f].getCurrentValue()+d.duration):a.cumulativeStat[f]=new(c("ZenonCumulativeMediaStat"))(d.duration);a.cumulativeStat[g]!=null?a.cumulativeStat[g].update(a.cumulativeStat[g].getCurrentValue()+d.duration500ms):a.cumulativeStat[g]=new(c("ZenonCumulativeMediaStat"))(d.duration500ms)}})}};a=j;g["default"]=a}),98);
__d("ZenonVideoPauseDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=5e3;function a(a,b){a.filter(function(a){return a.contentType==="video"&&a.remote}).forEach(function(a){a=b.get(a.trackId);a!=null&&i(a)})}function i(a){var b=a.cumulativeStat,e=b.framesDecoded;b=b.packetsReceived;if(b!=null){var f;f=(f=a.isVideoPaused)!=null?f:!1;if(!f)b.getDeltaFromLastUpdate()===0&&b.getTimeSinceLastUpdate()>1e3&&(a.isVideoPaused=!0,a.lastVideoPacketTime=b.getPreviousTime());else if(e!=null&&e.getDeltaFromLastUpdate()>0){a.isVideoPaused=!1;e=(b.getCurrentTime()+b.getPreviousTime())/2-((f=a.lastVideoPacketTime)!=null?f:b.getPreviousTime());a.lastVideoPacketTime=void 0;e>=h&&(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT]!=null?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT].getCurrentValue()+1):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_COUNT]=new(c("ZenonCumulativeMediaStat"))(1),a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION]!=null?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION].getCurrentValue()+e):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_PAUSE_DURATION]=new(c("ZenonCumulativeMediaStat"))(e))}}}g.updateVideoPause=a}),98);
__d("ZenonVideoStallStatsDeriver",["ZenonCumulativeMediaStat","ZenonDeltaMediaStat","ZenonMediaStatsConfig","ZenonMediaStatsParser"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4,i=1500,j=6e3,k=[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_IS_STALLED],l=[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_STALL_DURATION,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_STALL_DURATION,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_STALL_DURATION],m=[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_TOTAL_STALLS,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_TOTAL_STALLS,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_TOTAL_STALLS],n=function(a){return((a=a==null?void 0:a.getCurrentTimeSinceLastUpdate())!=null?a:0)>j};function o(a,b){var c=0;b!=null&&r(a)&&(c=b.getDeltaFromLastUpdate());return c}function p(a,b){var c=0;b!=null&&s(a)&&(c=b.getDeltaFromLastUpdate());return c}function q(a,b,c){var d=0;c!=null&&t(a,b)&&(d=c.getDeltaFromLastUpdate());return d}function r(a){var b=!1;a!=null&&a.getElapsedTime()!==0&&(b=n(a)||a.getDeltaFromLastUpdate()===0||a.getCurrentValue()===0);return b}function s(a){var b=!1;a!=null&&a.getElapsedTime()!==0&&(b=n(a)||a.getDeltaFromLastUpdate()===0||a.getCurrentValue()===0);return b}function t(a,b){var c=!1;if(b!=null&&b.getElapsedTime()!==0){var d=h;a.contentType==="screen"&&(d=i);c=n(b)||b.getDeltaFromLastUpdate()<=d||b.getCurrentValue()===0}return c}function u(a){k.forEach(function(b){a.deltaStat[b]==null&&(a.deltaStat[b]=new(c("ZenonDeltaMediaStat"))())}),l.forEach(function(b){a.cumulativeStat[b]==null&&(a.cumulativeStat[b]=new(c("ZenonCumulativeMediaStat"))(0))}),m.forEach(function(b){a.cumulativeStat[b]==null&&(a.cumulativeStat[b]=new(c("ZenonCumulativeMediaStat"))(0))})}function v(a,b){var c=b.cumulativeStat,e=c.bytesSent,f=c.captureFrameCount,g=c.framesEncoded;c=c["media-sourcetimestamp"];var h=b.videoEncoding;if(a.webrtcTrack.enabled===!1)return;else if((h==null?void 0:h.enabled)===!1)return;h=o(f,c);w(b,h,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_STALL_DURATION,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_TOTAL_STALLS);f=p(g,c);w(b,f,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_STALL_DURATION,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_TOTAL_STALLS);h=q(a,e,c);w(b,h,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_STALL_DURATION,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_TOTAL_STALLS)}function w(a,b,c,d,e){var f=b===0?0:1,g=!x(a,c)&&f?1:0;a.cumulativeStat[e].update(a.cumulativeStat[e].getCurrentValue()+g);a.cumulativeStat[d].update(a.cumulativeStat[d].getCurrentValue()+b);a.deltaStat[c].add(f)}function x(a,b){return a.deltaStat[b]!=null&&a.deltaStat[b].getLastAddedValue()===1}function a(a,b){a.filter(function(a){return(a.contentType==="video"||a.contentType==="screen")&&!a.remote}).forEach(function(a){var c=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACK_INFO);a.contentType==="screen"&&(c=d("ZenonMediaStatsParser").getOrCreateTrackerFromMap(b,d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACK_INFO));c!=null&&(u(c),v(a,c))})}g.updateStatsWithDerivedMetric=a}),98);
__d("ZenonVideoSumPixelDeriver",["ZenonCumulativeMediaStat","ZenonMediaStatsConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=["video","screen"],i={calculateVideoSumPixel:function(a,b,c){var d=a.cumulativeStat,e=d.framesDecoded,f=d.framesEncoded;d=d.tracktimestamp;var g=a.deltaStat,h=g.frameHeight;g=g.frameWidth;c=c?e:f;if(c!=null&&g!=null&&h!=null&&d!=null&&d.getCurrentValue()>a.lastUpdate){e=b?c.getCurrentValue():c.getDeltaFromLastUpdate();d=(f=g.getLastAddedValue())!=null?f:0;b=(a=h.getLastAddedValue())!=null?a:0;c=e*d*b;return c}return 0},updateStatsWithDerivedMetric:function(a,b){a.filter(function(a){return h.includes(a.contentType)}).forEach(function(a){var e=a.remote;a=b.get(a.trackId);if(a!=null)if(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL]!=null){var f=a.cumulativeStat,g=f.framesDecoded;f=f.framesEncoded;g=e?g:f;if(g!=null){f=g.getDeltaFromLastUpdate()<0;g=i.calculateVideoSumPixel(a,f,e);f?a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL].update(g):a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL].update(a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL].getCurrentValue()+g)}}else{f=i.calculateVideoSumPixel(a,!0,e);a.cumulativeStat[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SUM_PIXEL]=new(c("ZenonCumulativeMediaStat"))(f)}})}};a=i;g["default"]=a}),98);
__d("ZenonMediaStatsReportPoller",["Promise","UserAgent","ZenonAudioLevelDeriver","ZenonAudioPlaybackIssueLogger","ZenonAudioStallStatsDeriver","ZenonAvSyncDeriver","ZenonE2ELatencyDeriver","ZenonMediaElementTracker","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonMuteStateDeriver","ZenonOutboundStatsWriter","ZenonPacketsLostDeriver","ZenonPerStreamAggregator","ZenonReceiverVideoQualityScoreDeriver","ZenonResourceUsageStatsTracker","ZenonSpeakerTracker","ZenonVideoCaptureMetricDeriver","ZenonVideoConvertedQpDeriver","ZenonVideoDecodeTimeDeriver","ZenonVideoDecodedBytesDeriver","ZenonVideoFreezeCountDeriver","ZenonVideoPauseDeriver","ZenonVideoScaleHistogram","ZenonVideoStallStatsDeriver","ZenonVideoSumPixelDeriver","gkx","immutable","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return b.toArray().find(function(b){return b.trackIDs.contains(a.trackId)})}function i(a,e,f,g,i,j,k){var l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:l=f.getSenders().map(function(f){var j,l,m,n,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:l=(j=f.track)==null?void 0:j.id;if(!(l!=null)){p.next=12;break}m=a.find(function(a){return a.webrtcTrack.id===l});if(!(m!=null&&m.webrtcTrack.readyState!=="ended")){p.next=12;break}p.next=6;return b("regeneratorRuntime").awrap(f.getStats());case 6:n=p.sent,o=d("ZenonMediaStatsParser").makeStatsReportMap(n),c("gkx")("965758")&&g.addData(m.enabled,d("ZenonMediaStatsParser").filterMediaReports(o),d("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED,m.contentType,h(m,i)),d("ZenonMediaStatsParser").updateTrackStatsWithReport(m,e,o),d("ZenonMediaStatsParser").updateTrackStatsFromSender(m,e,f),k.push(m);case 12:case"end":return p.stop()}},null,this)});n.next=3;return b("regeneratorRuntime").awrap(b("Promise").all(l));case 3:m=f.getReceivers().map(function(f){var k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:l=(k=f.track)==null?void 0:k.id;if(!(l!=null)){q.next=11;break}m=a.find(function(a){return a.webrtcTrack.id===l});if(!(m!=null&&m.webrtcTrack.readyState!=="ended")){q.next=11;break}q.next=6;return b("regeneratorRuntime").awrap(f.getStats());case 6:n=q.sent,o=d("ZenonMediaStatsParser").makeStatsReportMap(n),c("gkx")("965758")&&(p=m.contentType==="audio"?m.userMuted:m.enabled,g.addData(p,d("ZenonMediaStatsParser").filterMediaReports(o),d("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED,m.contentType,h(m,i))),d("ZenonMediaStatsParser").updateTrackStatsWithReport(m,e,o),j.push(m);case 11:case"end":return q.stop()}},null,this)});n.next=6;return b("regeneratorRuntime").awrap(b("Promise").all(m));case 6:case"end":return n.stop()}},null,this)}function j(a,e,f,g,i){var j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:j=function(){return new(b("Promise"))(function(a){f.getStats(a)})};m.next=3;return b("regeneratorRuntime").awrap(j());case 3:k=m.sent,l=d("ZenonMediaStatsParser").makeStatsReportMap(k),a.forEach(function(a){a.webrtcTrack.readyState!=="ended"&&(c("gkx")("965758")&&g.addData(a.enabled,d("ZenonMediaStatsParser").filterLegacyMediaReports(a,l),d("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED,a.contentType,h(a,i)),d("ZenonMediaStatsParser").updateTrackStatsWithChromiumLegacyReport(a,e,l))});case 6:case"end":return m.stop()}},null,this)}function k(a,b){a.forEach(function(a){a=b.get(a.trackId);a!=null&&a.cumulativeStat.tracktimestamp!=null&&(a.lastUpdate=a.cumulativeStat.tracktimestamp.getCurrentValue())})}function a(a,e,f,g,h,l,m){var n,o,p,q,r;return b("regeneratorRuntime").async(function(s){while(1)switch(s.prev=s.next){case 0:m===void 0&&(m=c("immutable").Map());n=[];o=[];s.next=5;return b("regeneratorRuntime").awrap(i(a,e,g,h,m,n,o));case 5:if(!(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Edge (Chromium Based)"))){s.next=8;break}s.next=8;return b("regeneratorRuntime").awrap(j(a,e,g,h,m));case 8:d("ZenonMediaElementTracker").updateStats(e);if(!c("gkx")("965758")){s.next=23;break}s.next=12;return b("regeneratorRuntime").awrap(g.getStats());case 12:p=s.sent;q=d("ZenonMediaStatsParser").makeStatsReportMap(p);h.addCandidatePairStats(q);h.addNonMediaStates();h.addRenderedFrameData(e,q);s.next=19;return b("regeneratorRuntime").awrap(d("ZenonResourceUsageStatsTracker").getProcessStats());case 19:r=s.sent,r!=null&&h.addCallCpuData(d("ZenonMediaStatsConfig").GLOBAL_STATS_TRACKID,r),h.addSenderVideoStallData(e),h.advance();case 23:d("ZenonSpeakerTracker").updateStats(a,e),d("ZenonPacketsLostDeriver").updatePacketsLost(a,e),d("ZenonMuteStateDeriver").updateMuteState(a,e),c("ZenonVideoFreezeCountDeriver").updateStatsWithDerivedMetric(a,e),d("ZenonVideoPauseDeriver").updateVideoPause(a,e),c("ZenonVideoCaptureMetricDeriver").updateStatsWithDerivedMetric(a,e),c("ZenonVideoSumPixelDeriver").updateStatsWithDerivedMetric(a,e),c("ZenonVideoConvertedQpDeriver").updateStatsWithDerivedMetric(a,e),d("ZenonVideoDecodedBytesDeriver").updateTrackerWithDecodedBytes(a,e),d("ZenonVideoDecodeTimeDeriver").findMaxDecodeTime(a,e,l),d("ZenonVideoDecodeTimeDeriver").updateTrackerWithDecodeTime(a,e,l),d("ZenonVideoScaleHistogram").updateTrackerWithScaleHistogram(a,e),d("ZenonE2ELatencyDeriver").updateTrackerWithE2ELatency(a,e),d("ZenonAudioLevelDeriver").computeAudioLevels(a,e),d("ZenonAudioStallStatsDeriver").updateStatsWithDerivedMetric(a,e),d("ZenonVideoStallStatsDeriver").updateStatsWithDerivedMetric(a,e),d("ZenonAvSyncDeriver").updateTrackerWithAvSync(a,e,f),c("ZenonReceiverVideoQualityScoreDeriver").updateStatsWithDerivedMetric(a,e),d("ZenonOutboundStatsWriter").updateOutboundStats(o,e),d("ZenonPerStreamAggregator").aggregatePerStream([].concat(n,o),e),c("ZenonAudioPlaybackIssueLogger").detectAudioPlaybackIssue(a,e),k(a,e);case 45:case"end":return s.stop()}},null,this)}function e(a,c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=c.getReceivers().map(function(c){var e,f,g,h,i,j,k,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:f=(e=c.track)==null?void 0:e.id;if(!(f!=null)){o.next=23;break}g=a.find(function(a){return a.webrtcTrack.id===f});if(!(g!=null&&g.webrtcTrack.readyState!=="ended")){o.next=23;break}o.next=6;return b("regeneratorRuntime").awrap(c.getStats());case 6:h=o.sent;if(h instanceof Map||h.result){o.next=23;break}i=h.values(),j=Array.isArray(i),k=0,i=j?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 9:if(!j){o.next=15;break}if(!(k>=i.length)){o.next=12;break}return o.abrupt("break",23);case 12:l=i[k++];o.next=19;break;case 15:k=i.next();if(!k.done){o.next=18;break}return o.abrupt("break",23);case 18:l=k.value;case 19:m=l,m.type==="inbound-rtp"&&m.kind==="video"&&m.codecId!=null&&typeof m.codecId==="string"&&(n=h.get(m.codecId),(n==null?void 0:n.type)==="codec"&&d.set(f,n.mimeType.toString()));case 21:o.next=9;break;case 23:case"end":return o.stop()}},null,this)});f.next=3;return b("regeneratorRuntime").awrap(b("Promise").all(e));case 3:case"end":return f.stop()}},null,this)}g.updateStatsFromConnection=a;g.updateVideoCodecFromReceivers=e}),98);
__d("ZenonLayout",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Grid","DominantSpeaker"]);c=a;f["default"]=c}),66);
__d("ZenonSpeakerTracker",["ZenonCallsHooks","ZenonLayout","ZenonRenderedView","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useEffect,i=null,j=[],k=[];function l(a,b,c){i=a,j=b,k=c}function a(a,b){for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(!f.remote)continue;var g=b.get(f.trackId);if(!g)continue;g.isDominantSpeaker=j.indexOf(f.trackId)!==-1;if(i!=null)switch(i){case c("ZenonLayout").Grid:g.renderedView=c("ZenonRenderedView").GRID;break;case c("ZenonLayout").DominantSpeaker:f=k.indexOf(f.trackId)!==-1;g.renderedView=f?c("ZenonRenderedView").PINNED:c("ZenonRenderedView").THUMBNAIL;break}}}function b(a,b,d){var e,f=(e=c("ZenonCallsHooks").useLiveMediaTrack((e=b)!=null?e:"","video"))==null?void 0:e.trackId,g=(b=c("ZenonCallsHooks").useLiveMediaTrack((e=b)!=null?e:"","audio"))==null?void 0:b.trackId,i=(b=c("ZenonCallsHooks").useLiveMediaTrack((e=d)!=null?e:"","video"))==null?void 0:b.trackId,j=(b=c("ZenonCallsHooks").useLiveMediaTrack((e=d)!=null?e:"","audio"))==null?void 0:b.trackId;h(function(){l(a,[f,g],[i,j])},[i,j,a,f,g])}g.updateLayout=l;g.updateStats=a;g.useUpdateSpeakerTracker=b}),98);
__d("StructuredConfigBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getBool=function(a){return this.$1.getValue(a)>0};b.getInt=function(a){return this.$1.getValue(a)};return a}();f["default"]=a}),66);
__d("Configs",["StructuredConfigBase"],(function(a,b,c,d,e,f){"use strict";c=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ExampleConfig1=c.getBool(0),c.$ExampleConfig2=c.getBool(2),c.$ExampleConfig3=c.getBool(1724),c.$ExampleConfig4=c.getBool(2044),c.$ExampleConfig5=c.getInt(1),c.$ExampleConfig6=c.getInt(3),c.$ExampleConfig7=c.getInt(2011),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$ExampleConfig1=this.getBool(0),this.$ExampleConfig2=this.getBool(2),this.$ExampleConfig3=this.getBool(1724),this.$ExampleConfig4=this.getBool(2044),this.$ExampleConfig5=this.getInt(1),this.$ExampleConfig6=this.getInt(3),this.$ExampleConfig7=this.getInt(2011)};c.isEnabled=function(){return this.$ExampleConfig1};c.isSomeBoolean=function(){return this.$ExampleConfig2};c.isSomeOtherIntegerHasValue=function(){return this.$ExampleConfig3};c.isSomeOtherBoolean=function(){return this.$ExampleConfig4};c.getSomeInteger=function(){return this.$ExampleConfig5};c.getSomeOtherInteger=function(){return this.$ExampleConfig6};c.getSomeDouble=function(){return this.$ExampleConfig7};return b}(a=b("StructuredConfigBase"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$SimulcastOverSignalingConfig1=c.getBool(651),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$SimulcastOverSignalingConfig1=this.getBool(651)};c.isSimulcastOverSignalingEnabled=function(){return this.$SimulcastOverSignalingConfig1};return b}(a);f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ZenonSdpTransformConfig1=c.getBool(244),c.$ZenonSdpTransformConfig2=c.getBool(420),c.$ZenonSdpTransformConfig3=c.getBool(421),c.$ZenonSdpTransformConfig4=c.getBool(245),c.$ZenonSdpTransformConfig5=c.getBool(246),c.$ZenonSdpTransformConfig6=c.getBool(248),c.$ZenonSdpTransformConfig7=c.getBool(1448),c.$ZenonSdpTransformConfig8=c.getBool(1444),c.$ZenonSdpTransformConfig9=c.getBool(1445),c.$ZenonSdpTransformConfig10=c.getInt(1446),c.$ZenonSdpTransformConfig11=c.getInt(1447),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$ZenonSdpTransformConfig1=this.getBool(244),this.$ZenonSdpTransformConfig2=this.getBool(420),this.$ZenonSdpTransformConfig3=this.getBool(421),this.$ZenonSdpTransformConfig4=this.getBool(245),this.$ZenonSdpTransformConfig5=this.getBool(246),this.$ZenonSdpTransformConfig6=this.getBool(248),this.$ZenonSdpTransformConfig7=this.getBool(1448),this.$ZenonSdpTransformConfig8=this.getBool(1444),this.$ZenonSdpTransformConfig9=this.getBool(1445),this.$ZenonSdpTransformConfig10=this.getInt(1446),this.$ZenonSdpTransformConfig11=this.getInt(1447)};c.isPreserveH264=function(){return this.$ZenonSdpTransformConfig1};c.isPreferH264ForMwCall=function(){return this.$ZenonSdpTransformConfig2};c.isPreferSwH264=function(){return this.$ZenonSdpTransformConfig3};c.isAddAudioNack=function(){return this.$ZenonSdpTransformConfig4};c.isDisableOpusStereo=function(){return this.$ZenonSdpTransformConfig5};c.isPreferIsacForGroupAudio=function(){return this.$ZenonSdpTransformConfig6};c.isEnableOpusFmtpMunging=function(){return this.$ZenonSdpTransformConfig7};c.isSetOpusUsedtx=function(){return this.$ZenonSdpTransformConfig8};c.isSetOpusUseinbandfec=function(){return this.$ZenonSdpTransformConfig9};c.getSetOpusMaxplaybackrate=function(){return this.$ZenonSdpTransformConfig10};c.getSetOpusMaxaveragebitrate=function(){return this.$ZenonSdpTransformConfig11};return b}(a);b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$ZenonPeerConnectionConfig1=c.getBool(302),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$ZenonPeerConnectionConfig1=this.getBool(302)};c.isRtpDataChannels=function(){return this.$ZenonPeerConnectionConfig1};return b}(a);var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonStartCallImmediatelyConfig1=c.getBool(308),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonStartCallImmediatelyConfig1=this.getBool(308)};c.isEnabled=function(){return this.$ZenonStartCallImmediatelyConfig1};return a}(a),h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonGeneralizedIdentityConfig1=c.getInt(1891),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonGeneralizedIdentityConfig1=this.getInt(1891)};c.getDuplicatedParticipantsProcessingMode=function(){return this.$ZenonGeneralizedIdentityConfig1};return a}(a),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonMultiCallSupportConfig1=c.getInt(309),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonMultiCallSupportConfig1=this.getInt(309)};c.getMaxConnectedCalls=function(){return this.$ZenonMultiCallSupportConfig1};return a}(a),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonPlatformSupportConfig1=c.getBool(316),c.$ZenonPlatformSupportConfig2=c.getBool(318),c.$ZenonPlatformSupportConfig3=c.getBool(1900),c.$ZenonPlatformSupportConfig4=c.getInt(317),c.$ZenonPlatformSupportConfig5=c.getInt(319),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonPlatformSupportConfig1=this.getBool(316),this.$ZenonPlatformSupportConfig2=this.getBool(318),this.$ZenonPlatformSupportConfig3=this.getBool(1900),this.$ZenonPlatformSupportConfig4=this.getInt(317),this.$ZenonPlatformSupportConfig5=this.getInt(319)};c.isSupportsZenonPlatform=function(){return this.$ZenonPlatformSupportConfig1};c.isStartImmediatelyEnabled=function(){return this.$ZenonPlatformSupportConfig2};c.isMultiwayAvEscalationEnabled=function(){return this.$ZenonPlatformSupportConfig3};c.getMaxConnectedCalls=function(){return this.$ZenonPlatformSupportConfig4};c.getParentWindowConnectionTimeoutMs=function(){return this.$ZenonPlatformSupportConfig5};return a}(a),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$ZenonSimulcastConfig1=c.getBool(453),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$ZenonSimulcastConfig1=this.getBool(453)};c.isSimulcastEnabled=function(){return this.$ZenonSimulcastConfig1};return a}(a),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.$DynamicRuleConfig1=c.getBool(1342),c.$DynamicRuleConfig2=c.getBool(1597),c.$DynamicRuleConfig3=c.getBool(1821),c.$DynamicRuleConfig4=c.getBool(1820),c.$DynamicRuleConfig5=c.getInt(1359),c.$DynamicRuleConfig6=c.getInt(1510),c.$DynamicRuleConfig7=c.getInt(1612),a)||babelHelpers.assertThisInitialized(c)}var c=a.prototype;c.updateParams=function(){this.$DynamicRuleConfig1=this.getBool(1342),this.$DynamicRuleConfig2=this.getBool(1597),this.$DynamicRuleConfig3=this.getBool(1821),this.$DynamicRuleConfig4=this.getBool(1820),this.$DynamicRuleConfig5=this.getInt(1359),this.$DynamicRuleConfig6=this.getInt(1510),this.$DynamicRuleConfig7=this.getInt(1612)};c.isEnabled=function(){return this.$DynamicRuleConfig1};c.isDebugLoggingEnabled=function(){return this.$DynamicRuleConfig2};c.isDisableCallTypeConditional=function(){return this.$DynamicRuleConfig3};c.isDisableAbweSubscriber=function(){return this.$DynamicRuleConfig4};c.getProcessIntervalMs=function(){return this.$DynamicRuleConfig5};c.getNetworkProcessIntervalMs=function(){return this.$DynamicRuleConfig6};c.getDebugLoggingIntervalMs=function(){return this.$DynamicRuleConfig7};return a}(a);a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$SignalingPingConfig1=c.getInt(1470),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.updateParams=function(){this.$SignalingPingConfig1=this.getInt(1470)};c.getPingIntervalMs=function(){return this.$SignalingPingConfig1};return b}(a);e.exports={ExampleConfig:c,SimulcastOverSignalingConfig:d,ZenonSdpTransformConfig:f,ZenonPeerConnectionConfig:b,ZenonStartCallImmediatelyConfig:g,ZenonGeneralizedIdentityConfig:h,ZenonMultiCallSupportConfig:i,ZenonPlatformSupportConfig:j,ZenonSimulcastConfig:k,DynamicRuleConfig:l,SignalingPingConfig:a}}),null);
__d("OverlayConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze([1,0,0,20,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,0,0,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,0,1,-1,-1,-1,-1,-1,-1,1,1,0,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,16e3,2e4,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6e4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2e3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);e.exports=a}),null);
__d("OverlayConfigDefaultsLayer",["OverlayConfigDefaults","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.getLayerSource=function(){return c("OverlayConfigLayerSource").DEFAULT};b.getValue=function(a){return c("OverlayConfigDefaults")[a]};b.logExposure=function(a){};return a}();g["default"]=a}),98);
__d("OverlayConfigLayerManager",["OverlayConfigConstants","OverlayConfigDefaultsLayer","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=[new(c("OverlayConfigDefaultsLayer"))()]}var b=a.prototype;b.getValue=function(a){for(var b=this.$1.length-1;b>=0;b--){var e=this.$1[b].getValue(a);if(e>d("OverlayConfigConstants").OverlayConfigNotPresentFlagValue)return e}throw c("unrecoverableViolation")("OverlayConfigLayerManager: No value found for id "+String(a),"rtc_www")};b.addLayer=function(a){this.$1.push(a);return this.$1.length-1};b.replaceLayer=function(a,b){if(a===0)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Tried to replace default layer!","rtc_www");else if(this.$1[a]==null)throw c("unrecoverableViolation")("OverlayConfigLayerManager: Layer does not exist at index "+String(a),"rtc_www");this.$1[a]=b};b.clone=function(){var b=new a();b.$1=this.$1.slice();return b};return a}();g["default"]=a}),98);
__d("OverlayConfigManager",["Configs","OverlayConfigLayerManager"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("Configs")).ExampleConfig,h=a.SimulcastOverSignalingConfig,i=a.ZenonSdpTransformConfig,j=a.ZenonPeerConnectionConfig,k=a.ZenonStartCallImmediatelyConfig,l=a.ZenonGeneralizedIdentityConfig,m=a.ZenonMultiCallSupportConfig,n=a.ZenonPlatformSupportConfig,o=a.ZenonSimulcastConfig,p=a.DynamicRuleConfig,q=a.SignalingPingConfig;c=function(){function a(){this.layerManager=new(b("OverlayConfigLayerManager"))()}var c=a.prototype;c.getExampleConfig=function(){return new g(this.layerManager)};c.getSimulcastOverSignalingConfig=function(){return new h(this.layerManager)};c.getZenonSdpTransformConfig=function(){return new i(this.layerManager)};c.getZenonPeerConnectionConfig=function(){return new j(this.layerManager)};c.getZenonStartCallImmediatelyConfig=function(){return new k(this.layerManager)};c.getZenonGeneralizedIdentityConfig=function(){return new l(this.layerManager)};c.getZenonMultiCallSupportConfig=function(){return new m(this.layerManager)};c.getZenonPlatformSupportConfig=function(){return new n(this.layerManager)};c.getZenonSimulcastConfig=function(){return new o(this.layerManager)};c.getDynamicRuleConfig=function(){return new p(this.layerManager)};c.getSignalingPingConfig=function(){return new q(this.layerManager)};return a}();e.exports=c}),null);
__d("OverlayConfigManagerWithServerLayer",["OverlayConfigManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OverlayConfigManagerWithServerLayer1=-1;b!=null&&(c.layerManager=b.layerManager.clone());return c}var c=b.prototype;c.setServerLayer=function(a){if(this.$OverlayConfigManagerWithServerLayer1>-1){this.layerManager.replaceLayer(this.$OverlayConfigManagerWithServerLayer1,a);return}this.$OverlayConfigManagerWithServerLayer1=this.layerManager.addLayer(a)};return b}(c("OverlayConfigManager"));g["default"]=a}),98);
__d("SCTPSignalingListener",["FBLogger","ZenonDebugLogger","ZenonMWMessageReliabilityLogger","ZenonMWMessageTranslator","ZenonSignalingConstants"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.subscribe=function(a,b){this.$2=a,this.$1.createDataMessageSubscription(d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC,this.$3(a))};b.unsubscribe=function(){this.$2!=null&&this.$1.removeDataMessageSubscription(d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC,this.$3(this.$2))};b.$3=function(a){return function(b){try{b=JSON.parse(b);var e=c("ZenonDebugLogger").getInstance();d("ZenonMWMessageReliabilityLogger").logReceivedMessage(b);e.logMWMessage("RECEIVED","SCTP",b);e=d("ZenonMWMessageTranslator").toSignalingMessage(b);a(e);d("ZenonMWMessageReliabilityLogger").logProcessingMessage(b)}catch(a){c("FBLogger")("rpweb").catching(a).warn("Error receiving SCTP message from Signaling Listener")}}};return a}();g["default"]=a}),98);
__d("ZenonAlwaysTrustIdentityStore",["Promise","WASignalKeys"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a,this.$2=d("WASignalKeys").makeSerializedKeyPair()}var c=a.prototype;c.getLocalUserId=function(){return this.$1};c.getLocalPublicPrivateIdentityKey=function(){return b("Promise").resolve(this.$2)};c.getShortDescription=function(){return"Always trust"};c.getRemotePublicIdentityKey=function(a,c){return b("Promise").resolve(d("WASignalKeys").serializeIdentity(new Uint8Array(32)))};c.saveRemotePublicIdentityKey=function(a,c,d){return b("Promise").resolve(0)};c.getLocalDeviceId=function(){return b("Promise").resolve(0)};return a}();function a(a){return new h(a)}g.createNewAlwaysTrustIdentityStore=a}),98);
__d("WASortedLists",[],(function(a,b,c,d,e,f){function a(){return[]}function b(){return[]}function c(a,b){return a.filter(b)}function d(a,b){return l(a.map(b))}function e(a,b){var c=a.length===b.length;for(var d=0;c&&d<a.length;d++)a[d]!==b[d]&&(c=!1);return c}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a;return a.concat([b]).sort()}function h(a,b){if(a.length<b.length)return!1;var c=!0;for(var d=0,e=0;c&&e<b.length;e++)do c=a[d]===b[e];while(!c&&++d<a.length);return c}function i(a,b){var c=[];for(var d=0,e=0;d<a.length;d++){var f=a[d];while(e<b.length&&f>b[e])e++;(e===b.length||f<b[e])&&c.push(f)}return c}function j(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length){var f=a[d],g=b[e];f<g?d++:f===g?(c.push(f),d++,e++):e++}return c}function k(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length)a[d]<b[e]?c.push(a[d++]):a[d]===b[e]?(c.push(a[d++]),e++):c.push(b[e++]);while(d<a.length)c.push(a[d++]);while(e<b.length)c.push(b[e++]);return c}function l(a){return m(a.slice().sort())}function m(a){var b=!1;for(var c=0;c<a.length-1;c++)a[c]===a[c+1]&&(b=!0);if(!b)return a;c=[];for(var b=0;b<a.length-1;b++)a[b]!==a[b+1]&&c.push(a[b]);c.push(a[a.length-1]);return c}function n(a){return Array.from(a).sort()}function o(a){return a.slice().sort()}function p(a,b,c){var d=null;for(var e=0;!d&&e<a.length;e++)a[e]===b&&(d=a.slice(),d[e]=c,d=m(d.sort()));return d||a}function q(a){return[a]}function r(a){return a.length<1}function s(a,b,c){return a.slice(b,c)}f.emptySet=a;f.emptyList=b;f.filter=c;f.map=d;f.areEqual=e;f.addToSet=g;f.contains=h;f.subtract=i;f.intersect=j;f.joinUniq=k;f.sortAndDedupe=l;f.asSortedSet=n;f.sort=o;f.swapIn=p;f.singleElement=q;f.isEmpty=r;f.slice=s}),66);
__d("ZenonMAWIdentityStore",["MAWGetLocalDeviceIdApi","MAWGetLocalPublicPrivateIdentityKeyApi","MAWGetRemotePublicIdentityKeyApi","MAWJids","MAWRemotePresenceSetup","MAWSaveRemotePublicIdentityKeyApi","ODS","WAJids","ZenonInfraActionsLogger","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a){this.$1=a}var b=a.prototype;b.getLocalUserId=function(){return this.$1};b.getShortDescription=function(){return"MAW"};b.getLocalPublicPrivateIdentityKey=function(){this.$2==null&&(this.$2=d("MAWGetLocalPublicPrivateIdentityKeyApi").getLocalPublicPrivateIdentityKey());return this.$2};b.getRemotePublicIdentityKey=function(a,b){b=d("WAJids").unsafeCoerceToDeviceId(b);return d("MAWGetRemotePublicIdentityKeyApi").getRemotePublicIdentityKey(b,a)};b.saveRemotePublicIdentityKey=function(a,b,c){b=d("WAJids").unsafeCoerceToDeviceId(b);var e=d("MAWJids").toUserJid(this.getLocalUserId());return d("MAWSaveRemotePublicIdentityKeyApi").saveRemotePublicIdentityKey(b,a,c,e)};b.getLocalDeviceId=function(){this.$3==null&&(this.$3=d("MAWGetLocalDeviceIdApi").getLocalDeviceId());return this.$3};return a}();function a(a){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.prev=0;f.next=3;return b("regeneratorRuntime").awrap(d("MAWRemotePresenceSetup").setupArmadilloWebForRP(a));case 3:e=new h(a);return f.abrupt("return",e);case 7:f.prev=7,f.t0=f["catch"](0),d("ODS").bumpEntityKey(4083,"zenon_e2ee","identity_store_initialization_error"),c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZSFM] [E2EE] Error initializing identity store: "+f.t0});case 11:case"end":return f.stop()}},null,this,[[0,7]])}g.createNewMAWIdentityStore=a}),98);
__d("ZenonIdentityStoreFactory",["ZenonActorHooks","ZenonAlwaysTrustIdentityStore","ZenonMAWIdentityStore","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(a){f.next=2;break}return f.abrupt("return",d("ZenonAlwaysTrustIdentityStore").createNewAlwaysTrustIdentityStore(d("ZenonActorHooks").ZenonActor.getID()));case 2:f.next=4;return b("regeneratorRuntime").awrap(d("ZenonMAWIdentityStore").createNewMAWIdentityStore(d("ZenonActorHooks").ZenonActor.getID()));case 4:e=f.sent;if(!(e==null)){f.next=7;break}throw c("err")("could not create a MAW identity store on an e2ee-mandated call");case 7:return f.abrupt("return",e);case 8:case"end":return f.stop()}},null,this)}e={create:a};g.ZenonIdentityStoreFactory=e}),98);
__d("ZenonMultiwayReliabilityLogProcessor",["ChannelClientID","RtcInfraReliabilityFalcoEvent","ZenonActorHooks","ZenonPeerID","ZenonSignalingProtocolUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h={version:"1",web_app_id:d("ZenonActorHooks").ZenonActor.getAppID(),web_device_id:c("ChannelClientID").getID()},i={beginRemoteSdpMunging:"BEGIN_REMOTE_SDP_MUNGING",connectionReady:"CONNECTION_READY",endRemoteSdpMunging:"END_REMOTE_SDP_MUNGING",endSetRemoteDescription:"END_SET_REMOTE_DESCRIPTION",inviteResponseReceived:"INVITE_RESPONSE_RECEIVED",mediaConnected:"RELAY_CONNECTED",setRemoteSdpAnswer:"BEGIN_SET_REMOTE_DESCRIPTION"};a=function(){function a(a){c("ZenonSignalingProtocolUtils").isMwSupportedProtocol(a.protocol)&&(a.peerID=d("ZenonPeerID").ZenonMWPeerID),this.$1=a.conferenceName,this.$3=a.signalingID,this.$2=a.serverInfoData}var e=a.prototype;e.processEvent=function(a){var d=this;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.name in i&&c("RtcInfraReliabilityFalcoEvent").log(function(){return babelHelpers["extends"]({client_session_id:d.$3,conference_name:d.$1,event_name:i[a.name],server_info_data:d.$2,tc:Date.now().toString()},h)});case 1:case"end":return b.stop()}},null,this)};return a}();g["default"]=a}),98);
__d("ZenonRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=null,j=null,k=0,l=null,m="https://www.facebook.com/help/211644178877843",n="https://www.facebook.com/help/work/919532078125908",o="https://www.facebook.com/help/232232800134371",p="https://www.facebook.com/help/work/180714775754632";function a(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;h=b;i=c;j=d;k=e;l=a}function b(){return h}function d(){return i}function e(){return j}function f(){return k}function q(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}}function r(){var a;return(a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.unsupported_browser)!=null?a:c("CurrentUser").isWorkUser()?n:m}function s(){var a;return(a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_error)!=null?a:c("CurrentUser").isWorkUser()?p:o}function t(){var a;return(a=(a=l)==null?void 0:(a=a.troubleshooting_urls)==null?void 0:a.user_media_permission_error)!=null?a:c("CurrentUser").isWorkUser()?p:o}function u(){var a;return((a=l)==null?void 0:a.is_messenger_dot_com)===!0}function v(){var a;return((a=l)==null?void 0:a.messenger_call_ui)===!0}function w(){var a;return((a=l)==null?void 0:a.use_hd_video_quality)===!0}function x(){var a;return((a=l)==null?void 0:a.data_channel)===!0}function y(){var a;return((a=l)==null?void 0:a.disable_url_manager)===!0}g.setConfig=a;g.getIsVCEndpointCall=b;g.getMeetingID=d;g.getMeetingPassword=e;g.getPeerID=f;g.statsInterpreterConfig=q;g.unsupportedBrowserUrl=r;g.userMediaErrorUrl=s;g.userMediaPermissionErrorUrl=t;g.isMessengerDotCom=u;g.useMessengerCallUI=v;g.shouldUseHDVideoQuality=w;g.shouldCreateDataChannel=x;g.disableURLManager=y}),98);
__d("ZenonSdpFormat",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({UNIFIED_PLAN:"unified-plan"});c=a;f["default"]=c}),66);
__d("ZenonRTCPeerConnectionConfig",["ZenonBrowsers","ZenonRTCConfig","ZenonRTWebBrowserFeatureSupport","ZenonSdpFormat","qex"],(function(a,b,c,d,e,f,g){"use strict";var h="stun:stun.fbsbx.com:3478";function i(a,b,c){a={urls:a};b!==void 0&&c!==void 0&&(a.username=b,a.credential=c);return[a]}function j(a,b,c){if(d("ZenonBrowsers").isChromium()&&d("ZenonBrowsers").webrtcVersion()>=34){var e={urls:a};b!==void 0&&c!==void 0&&(e.username=b,e.credential=c);return[e]}e=[];for(var f=0;f<a.length;f++)b!==void 0&&c!==void 0?e.push({credential:c,url:a[f],username:b}):e.push({url:a[f]});return e}a=function(){function a(){this.sslPort="",this.tcpPort="",this.turnIP="",this.turnPassword="",this.turnUsername="",this.udpPort=""}var b=a.prototype;b.setTurnCredentials=function(a){this.turnIP=a.ip,this.udpPort=a.udp_port,this.tcpPort=a.tcp_port,this.sslPort=a.ssl_tcp_port,this.turnUsername=a.username,this.turnPassword=a.password};b.getConfig=function(){if(d("ZenonRTCConfig").getIsVCEndpointCall())return{iceServers:[]};var a=j([h]).concat(j(this.$1(),this.turnUsername,this.turnPassword));return{iceServers:a}};b.getConfigZenonPlatform=function(){var a;a=(a=c("qex")._("1722"))!=null?a:!1;a=d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&a;var b="max-compat",e=this.turnIP==="",f=c("ZenonSdpFormat").UNIFIED_PLAN;e?e=i([h]):e=i([h]).concat(i(this.$1(),this.turnUsername,this.turnPassword));return{bundlePolicy:b,encodedInsertableStreams:a,iceServers:e,sdpSemantics:f}};b.getConstraints=function(a){a===void 0&&(a=!1);var b=!0;d("ZenonBrowsers").isChromium()&&d("ZenonBrowsers").webrtcVersion()<57&&a&&(b=!1);return{mandatory:{},optional:[{DtlsSrtpKeyAgreement:b}]}};b.$2=function(a){var b=this.turnIP,c,d=a;switch(a){case"tcp":c=this.tcpPort;break;case"udp":c=this.udpPort;break;case"ssl":c=this.sslPort;d="tcp";break;default:c=this.udpPort;d=null;break}return!((b==null?void 0:b.length)&&((a=c)==null?void 0:a.length))?null:d!=null&&d.length>0?"turn:"+b+":"+c+"?transport="+d:"turn:"+b+":"+c};b.$1=function(){if(d("ZenonBrowsers").isFirefox()&&d("ZenonBrowsers").webrtcVersion()<27)return[this.$2()].filter(Boolean);else return[this.$2("udp"),this.$2("tcp"),this.$2("ssl")].filter(Boolean)};return a}();b=new a();g["default"]=b}),98);
__d("ZenonSctpMWMessageSender",["Promise","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageLogger","ZenonMWMessageReliabilityLogger","ZenonMWMessageTranslator","ZenonMWMessageTypes","ZenonSignalingConstants","ZenonValidateMWMessage","err","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=15e3,i="SCTP not opened";a=function(){function a(a){this.$3=a}var e=a.prototype;e.waitForSctpOpened=function(a){var e=this;return new(b("Promise"))(function(b,f){var g=e.$3.getDataChannelState(a,d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC);switch((g=g)!=null?g:"does-not-exist"){case"open":b();break;case"closed":case"closing":f("channel is closed");break;case"does-not-exist":case"connecting":c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"SCTP not opened, deferring sending MWS message"});c("ZenonInfraActionsLogger").startTimer(i);var j=function f(){c("ZenonInfraActionsLogger").stopTimer(i),c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"SCTP not opened, deferring sending MWS message"}),e.$3.unsubscribeDataChannelOpen(a,f,d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC),window.clearTimeout(k),b()},k=window.setTimeout(function(){e.$3.unsubscribeDataChannelOpen(a,j,d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC),c("ZenonInfraActionsLogger").stopTimer(i),c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"SCTP never opened."}),f("timeout")},h);e.$3.subscribeDataChannelOpen(a,j,d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC);break}})};e.asyncSendMessage=function(a){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:f=(e=a.jsonPayload.header.clientSessionId)!=null?e:"";h.prev=1;h.next=4;return b("regeneratorRuntime").awrap(this.waitForSctpOpened(f));case 4:h.next=10;break;case 6:h.prev=6;h.t0=h["catch"](1);c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"Not sending MWS message through SCTP because SCTP could not connect. Error: "+h.t0});return h.abrupt("return");case 10:g=c("ZenonDebugLogger").getInstance();d("ZenonMWMessageReliabilityLogger").logSendingMessage(a);g.logMWMessage("SENDING","SCTP",a);this.$2&&d("ZenonMWMessageLogger").logSentMessage(a,this.$2);try{this.$3.sendDataMessage(f,d("ZenonSignalingConstants").SCTP_SIGNALING_TOPIC,JSON.stringify(a)),d("ZenonMWMessageReliabilityLogger").logSentMessage(a)}catch(b){this.$4(a,b.toString())}case 15:case"end":return h.stop()}},null,this,[[1,6]])};e.$4=function(a,b){var e=c("ZenonDebugLogger").getInstance();b=b!=null?b:"SCTP Message Send Error";d("ZenonMWMessageReliabilityLogger").logSendMessageFailed(a);e.logSendMultiwayMessageFailure(b,a.jsonPayload.header.type)};e.sendMessage=function(a){a=d("ZenonMWMessageTranslator").toMWMessage(a);if(!a||!c("ZenonValidateMWMessage")(a))return b("Promise").reject(c("err")("Invalid MW message"));var e=a.jsonPayload.header.type;return c("gkx")("3864")&&e===d("ZenonMWMessageTypes").ZenonMWSignalingPayloadType.SERVER_MEDIA_UPDATE?this.asyncSendMessage(a):b("Promise").reject(c("err")("SCTP only supports SMU"))};e.setMessageReceiver=function(a){this.$1=a};e.setLoggingEventHandler=function(a){this.$2=a};return a}();g["default"]=a}),98);
__d("ZenonSctpMWMessageSenderHelper",["ZenonInfraActionsLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.setupSctpChannelApi=function(a,b){this.$1.set(a,b)};b.sendDataMessage=function(a,b,c){a=this.$1.get(a);a!=null?a.sendDataMessage(b,c):this.$2()};b.getDataChannelState=function(a,b){a=this.$1.get(a);if(a!=null)return a.getDataChannelState(b);else this.$2()};b.subscribeDataChannelOpen=function(a,b,c){a=this.$1.get(a);a!=null?a.subscribeDataChannelOpen(b,c):this.$2()};b.unsubscribeDataChannelOpen=function(a,b,c){a=this.$1.get(a);a!=null?a.unsubscribeDataChannelOpen(b,c):this.$2()};b.$2=function(){var a="ZenonSctpMessageSenderHelper",b="[ZP] Peer Connection Manager was not setup for SCTP communication yet";c("ZenonInfraActionsLogger").logError({checkpoint:b,errorDomain:a})};return a}();g["default"]=a}),98);
__d("ZenonSignalingChildTransport",["Promise","Random","SecurePostMessage","URI","ZenonSignalingTransportTypes","gkx","isEmpty","isFacebookishURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,e,f){var g=this;this.$6=null;this.$10=function(a){a.data.type!=null&&a.data.type===d("ZenonSignalingTransportTypes").ChildTransportMessageType.PARENT_INITIATED_CALL&&a.data.nonce===g.$1&&(g.$6&&g.$6(a.data.mwRingRequest))};this.$2=a;this.$1=this.$8();this.$3=b;this.$7=c;this.$4=e;this.$5=f}var e=a.prototype;e.connect=function(){var a=this,c=b("Promise").race([new(b("Promise"))(function(b){a.$6=function(a){return b({isTimeout:!1,mwRingRequest:a})},a.$9()}),new(b("Promise"))(function(b){window.setTimeout(function(){b({isTimeout:!0,mwRingRequest:null})},a.$7)})]);return c.then(function(b){var c;a.$6=null;if((c=b.isTimeout)!=null?c:!0)return{state:"join_unavailable"};else return{mwRingRequest:b.mwRingRequest,state:"join_ready"}})};e.$9=function(){var a=this;if(window.opener&&window.opener.postMessage){window.addEventListener("message",this.$10,!1);var b={childNonce:this.$1,nonce:this.$2,peerID:this.$3,roomID:this.$4,serverInfoData:this.$5,type:d("ZenonSignalingTransportTypes").ChildTransportMessageType.CHILD_WINDOW_READY},e=new MessageChannel();e.port1.onmessage=function(b){a.$10(b)};var f=window.location.origin;c("gkx")("1443572")||!c("isEmpty")(document.referrer)&&f!==document.referrer&&(c("isFacebookishURI")(new(c("URI"))(document.referrer))&&(f=document.referrer));d("SecurePostMessage").sendMessageToSpecificOrigin(window.opener,b,f,[e.port2])}};e.$8=function(){return String(d("Random").random())};return a}();g["default"]=a}),98);
__d("ZenonSignalingInitState",["setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h=1e4;function a(a,b){if(b.type==="receiveInviteRequest"){a.onInviteReceived(b.payload,b.configuration);return{inviteMessageID:b.messageID}}return{}}function b(a,b){b.type==="sendInviteRequest"&&a.sendSignalingEvent(b.payload)}function d(a){if(!a.pingTimer){var b;b=(b=(b=a.config)==null?void 0:b.getConfigManager().getSignalingPingConfig().getPingIntervalMs())!=null?b:h;var d={eventName:"pingRequest"};b=c("setInterval")(function(){a.sendSignalingEvent(d)},b);return{pingTimer:b}}return{}}g.onReceiveInvite=a;g.onSendInvite=b;g.startPingTimer=d}),98);
__d("ZenonSignalingInviteReceivedState",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b.type==="sendInviteResponse"&&(a.inviteMessageID!=null?b.payload.status!=="OK"&&(b.payload.ackMessageId=a.inviteMessageID,a.sendSignalingEvent(b.payload)):c("FBLogger")("rtc_www").mustfix("onSendInviteResponse handler invoked without populated inviteMessageID in signaling state machine context."))}g.onSendInviteResponse=a}),98);
__d("ZenonSignalingNegotiationCompleteState",["ZenonDebugLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b.type==="receiveRemoteSdpRequest"){var d,e=b.payload,f=e.fromVersion;f=f===void 0?-1:f;var g=e.mediaPath,h=e.mediaStates,i=e.onProcessed,j=e.sdp;e=e.source;d=(d=a.lastAckedLocalSdpVersion)!=null?d:-1;c("ZenonDebugLogger").getInstance().logConsole("negotiationComplete receiveAnswer: lastAckedLocalSdpVersion: "+d+", fromVersion: "+f+", source: "+e);a.onSdpReceived(j,g,h,(d=e)!=null?d:null,null,i,b.payload.ackMessageId);return{lastRemoteMediaUpdateVersion:j.version}}return{}}function b(a,b){if(b.type==="sendMediaUpdateRequest")if(a.isMediaUpdateResponsePending===!0)return{mediaUpdateRequestToSend:b.payload};else{a=a.sendSignalingEvent(b.payload);return{isMediaUpdateResponsePending:!0,mediaUpdateRequestToSend:null,mediaUpdateRequestTransactionId:a}}return{}}g.onReceiveAnswer=a;g.onSendMediaUpdateRequest=b}),98);
__d("ZenonSignalingSharedActions",["ZenonDebugLogger","ZenonMWMessageTypes","ZenonSignalingTypes","killswitch"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b.type!=="messageSent"&&a.sendSignalingEvent(b.payload)}function b(a,b){if(b.type!=="receiveCapabilitiesRequest")return;a.onCapabilitiesReceived(b.payload.capabilities,(a=b.payload.escalationConferenceName)!=null?a:null)}function e(a,b){if(b.type!=="receiveClientInfoRequest")return;a.onClientInfoReceived(b.payload.userCapabilities,b.payload.actorRepresentatives)}function f(a,b){if(b.type!=="receiveGenericDataMessageRequest")return;a.sendSignalingEvent({ackMessageId:b.messageID,eventName:"genericDataMessageResponse"});a.onGenericDataMessageReceived(b.payload.topic,b.payload.data)}function h(a,b){if(b.type!=="receiveIceCandidateRequest")return;var c={ackMessageId:b.messageID,eventName:"iceCandidateResponse"};a.sendSignalingEvent(c);var d=a.onIceCandidateReceived;b.payload.iceCandidates.forEach(function(a){return d(a)})}function i(a,b){var e;if(b.type!=="receiveInitiateRenegotiationRequest")return{};var f=b.payload,g=f.hasRemoteOffer;f=f.messageTags;var h=x(a.lastRemoteMediaUpdateVersion,b.payload.fromVersion);e={ackMessageId:b.messageID,acknowledgedVersion:h?(e=a.lastRemoteMediaUpdateVersion)!=null?e:0:b.payload.version,eventName:"initiateRenegotiationResponse",hasRemoteOffer:g,messageTags:f,statusCode:h?d("ZenonSignalingTypes").ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH:d("ZenonSignalingTypes").ZenonSignalingStatusCode.OK};a.sendSignalingEvent(e);b.payload.onProcessed();if(h)return{};f=a.signalingModel.getMediaModeManager();b.payload.mediaPath===d("ZenonMWMessageTypes").ZenonMWMediaPath.P2P?(f.onDeescalated(),g?(a.logEvent({name:"renegotiationSmuReqWithOfferReceived"}),c("ZenonDebugLogger").getInstance().logConsole("initiateRenegotiationRequest: De-escalation callee")):(a.logEvent({name:"renegotiationSmuReqWithAnswerReceived"}),c("ZenonDebugLogger").getInstance().logConsole("initiateRenegotiationRequest: De-escalation caller"))):(f.onSfuEscalated(),c("ZenonDebugLogger").getInstance().logConsole("initiateRenegotiationRequest: SFU escalation"));a.onRenegotiationRequested(g);return g?{}:C((e=a.lastRemoteMediaUpdateVersion)!=null?e:null,b.payload.version)}function j(a,b){if(b.type!=="receiveLocalSdpResponse")return;b.payload.source==="joinResponse"&&a.logEvent({name:"inviteResponseReceived"});b=b.payload.hasAnswerInJoinResponse;!b?a.logEvent({name:"inviteResponseProcessed"}):a.signalingModel.getMediaModeManager().onSfuEscalated();a.logEvent({hasAnswerInJoinResponse:b,name:"setHasAnswerInJoinResponse"});a.logEvent({name:"startHeartbeat"})}function k(a,b){if(b.type!=="receiveMediaUpdateRequest")return{};var c=a.lastRemoteMediaUpdateVersion,e=b.payload,f=e.mediaStates,g=f.fromVersion;f=f.version;var h=e.messageTags;e=e.onProcessed;e&&e();e=c!=null&&g!=null&&c!==g;g={ackMessageId:b.messageID,acknowledgedVersion:e&&a.lastRemoteMediaUpdateVersion!=null?a.lastRemoteMediaUpdateVersion:b.payload.mediaStates.version,eventName:"mediaUpdateResponse",messageTags:h,responseStatusCode:e?d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.CONDITIONAL_REQUEST_FAILED:d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK};a.sendSignalingEvent(g);if(!e){a.onMediaUpdateReceived(b.payload.mediaStates);if(c==null||f>c)return{lastRemoteMediaUpdateVersion:f}}return{}}function l(a,b){if(b.type!=="receiveParticipantUpdateRequest")return;var c={ackMessageId:b.messageID,eventName:"participantUpdateResponse",requestVersionId:b.payload.versionId};a.sendSignalingEvent(c);a.onParticipantUpdateReceived(b.payload.participantStates)}function m(a){a.onPendingApprovalReceived(),a.logEvent({name:"pendingApproval"})}function n(a){a.onServerRenegotiationFinished()}function o(a,b){var c;if(b.type!=="receiveRemoteSdpRequest")return{};var e=x(a.lastRemoteMediaUpdateVersion,b.payload.fromVersion);if(((c=b.payload)==null?void 0:c.source)!=="joinResponse"){c={ackMessageId:b.messageID,acknowledgedVersion:e?a.lastRemoteMediaUpdateVersion:b.payload.sdp.version,eventName:"remoteSdpResponse",messageTags:b.payload.messageTags,negotiateType:b.payload.negotiateType,statusCode:e?d("ZenonSignalingTypes").ZenonSignalingStatusCode.REJECTED_FROM_VERSION_DOES_NOT_MATCH:d("ZenonSignalingTypes").ZenonSignalingStatusCode.OK,type:b.payload.sdp.type};a.sendSignalingEvent(c)}if(e){b.payload.onProcessed&&b.payload.onProcessed();return{}}b.payload.source==="serverMediaUpdateRequest"&&b.payload.sdp.type==="answer"&&a.logEvent({name:"smuWithAnswerReceived"});a.onSdpReceived(b.payload.sdp,b.payload.mediaPath,b.payload.mediaStates,(c=b.payload.source)!=null?c:null,b.payload.renegotiationOffer,b.payload.onProcessed,b.payload.ackMessageId);return babelHelpers["extends"]({},C((e=a.lastRemoteMediaUpdateVersion)!=null?e:null,b.payload.sdp.version),{lastRemoteSdpResponseMessageId:b.messageID})}function p(a,b){if(b.type!=="receiveRoomContextUpdateRequest")return;a.onRoomContextUpdateReceived(b.payload.context)}function q(a,b){if(b.type!=="receiveStateSyncNotifyRequest")return;var c=a.signalingModel,d=b.payload,e=d.data,f=d.responseRequired,g=d.topic;d=d.version;c.getStateSyncStore().updateOutputState(g,{data:e,version:d});c.notify();if(f){e={ackMessageId:b.messageID,eventName:"stateSyncNotifyResponse",topic:g,version:d};a.sendSignalingEvent(e)}}function r(a,b){if(b.type!=="receiveOverlayConfigServerUpdateRequest")return;if(c("killswitch")("RP_ZENON_OVERLAYCONFIG_SERVER_LAYER"))return;a=a.signalingModel;a.updateOverlayConfigServerLayer(b.payload.serverLayer);a.notify()}function s(a,b){if(b.type!=="receiveTerminateRequest")return;b.payload.fromJoinResponse===!0&&a.logEvent({name:"inviteResponseReceived"});if(b.payload.shouldInformPeer){var c={ackMessageId:b.messageID,eventName:"dismissResponse"};a.sendSignalingEvent(c)}a.onDismissReceived(a.signalingModel.getSignalingID(),b.payload.reason,(c=b.payload.subreason)!=null?c:null)}function t(a,b){if(b.type!=="sendSubscriptionRequest")return{};var c=a.lastSubscriptions;a=a.sendSignalingEvent;var d=[].concat(b.payload.subscriptions).sort(D);d=JSON.stringify(d);c!==d&&a(b.payload);return{lastSubscriptions:d}}function u(a,b){if(b.type!=="sendClientRenegotiationRequest")return;b=b.payload.negotiationEvent;a.onClientRenegotiationReceived(b)}function v(a,b){b.type==="sendTerminateRequest"&&b.payload.shouldInformPeer&&a.sendSignalingEvent(b.payload)}function w(a,b){if(b.type!=="sendUsersApprovalRequest")return;a.sendSignalingEvent(b.payload)}function x(a,b){return a!=null&&b!=null&&a!==b}function y(a,b){return A(a,b,!1)}function z(a,b){return A(a,b,!0)}function A(a,b,d){if(b.type==="receiveMediaUpdateResponse"){var e;e=(e=a==null?void 0:a.lastAckedLocalSdpVersion)!=null?e:-1;var f=b.payload.acknowledgedVersion;c("ZenonDebugLogger").getInstance().logConsole("receiveMediaUpdate: lastAckedSdpVersion "+String(e)+", remoteAckedVersion: "+String(f));if(f>=e){a.lastAckedLocalSdpVersion=f;a.onMediaUpdateResponseReceived({cancelNegotiations:d,responseStatusCode:(e=b.payload.responseStatusCode)!=null?e:null,responseSubCode:(f=b.payload.responseSubCode)!=null?f:null,retryAfter:(d=b.payload.retryAfter)!=null?d:null})}else c("ZenonDebugLogger").getInstance().logConsole("mediaUpdateResponse: Ignoring old message response");e=a.mediaUpdateRequestToSend;if(e){f=a.sendSignalingEvent(e);return{isMediaUpdateResponsePending:!0,lastAckedLocalSdpVersion:a.lastAckedLocalSdpVersion,mediaUpdateRequestToSend:null,mediaUpdateRequestTransactionId:f}}else return{isMediaUpdateResponsePending:!1,lastAckedLocalSdpVersion:a.lastAckedLocalSdpVersion,mediaUpdateRequestTransactionId:""}}return{}}function B(a,b){if(b.type!=="sendLocalSdpRequest")return{};a=a.sendSignalingEvent(b.payload);return{mediaUpdateRequestTransactionId:a}}function C(a,b){return a==null||b>a?{lastRemoteMediaUpdateVersion:b}:{}}function D(a,b){if(a.type!==b.type)return a.type-b.type;a=(a=a.trackId)!=null?a:null;b=(b=b.trackId)!=null?b:null;if(a===null||b===null)return 0;else return a.localeCompare(b)}g.genericEventSender=a;g.onReceiveCapabilitiesRequest=b;g.onReceiveClientInfoRequest=e;g.onReceiveGenericDataMessageRequest=f;g.onReceiveIceCandidateRequest=h;g.onReceiveInitiateRenegotiationRequest=i;g.onReceiveLocalSdpResponse=j;g.onReceiveMediaUpdateRequest=k;g.onReceiveParticipantUpdateRequest=l;g.onReceivePendingApprovalRequest=m;g.onServerRenegotiationFinished=n;g.onReceiveRemoteSdpRequest=o;g.onReceiveRoomContextUpdateRequest=p;g.onReceiveStateSyncNotifyRequest=q;g.onReceiveOverlayConfigServerUpdateRequest=r;g.onReceiveTerminateRequest=s;g.onSendSubscriptionRequest=t;g.onSendClientRenegotiationRequest=u;g.onSendTerminateRequest=v;g.onSendUsersApprovalRequest=w;g.shouldRejectRequest=x;g.onNonSDPReceiveMediaUpdateResponse=y;g.onReceiveMediaUpdateResponse=z;g.onSendLocalSdpRequestOffer=B}),98);
__d("ZenonSignalingSMGuards",["ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageTypes","ZenonSignalingSharedActions","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=b.type==="receiveRemoteSdpRequest"&&b.payload.sdp.type==="offer"&&d("ZenonSignalingSharedActions").shouldRejectRequest(a.lastRemoteMediaUpdateVersion,b.payload.fromVersion)===!1;c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferReceiveNotRejectedGuard",a);return a}function b(a,b){a=b.type==="receiveRemoteSdpRequest"&&b.payload.sdp.type==="offer"&&d("ZenonSignalingSharedActions").shouldRejectRequest(a.lastRemoteMediaUpdateVersion,b.payload.fromVersion);c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferReceiveRejectedGuard",a);return a}function e(a,b){if(!c("qex")._("1748"))return!1;a=b.type==="receiveRemoteSdpRequest"&&b.payload.sdp.type==="pranswer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpPrAnswerReceiveGuard",a);return a}function f(a,b){a=b.type==="receiveRemoteSdpRequest"&&b.payload.sdp.type==="answer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpAnswerReceiveGuard",a);return a}function h(a,b){a=b.type==="sendLocalSdpRequest"&&b.payload.sdp.type==="answer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpAnswerSendGuard",a);return a}function i(a,b){a=b.type==="receiveLocalSdpResponse"&&b.payload.source==="joinResponse";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpJoinResponseReceiveGuard",a);return a}function j(a,b){a=b.type==="receiveRemoteSdpRequest"&&(b.payload.source==="serverMediaUpdateRequest"||b.payload.source==="clientMediaUpdateResponse");b.type==="receiveRemoteSdpRequest"&&!a&&c("gkx")("891")&&(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Calling the processed function for transaction id: "+String(b.payload.ackMessageId)+". Payload source: "+String(b.payload.source)+"."}),b.payload.onProcessed&&b.payload.onProcessed());return a}function k(a,b){a=b.type==="receiveRemoteSdpRequest"&&b.payload.sdp.type==="offer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferReceiveGuard",a);return a}function l(a,b){a=b.type==="sendLocalSdpRequest"&&b.payload.sdp.type==="offer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferSendGuard",a);return a}function m(a,b){a=b.type==="sendLocalSdpRequest"&&b.payload.sdp.type==="offer";c("ZenonDebugLogger").getInstance().logGuardsResults("sdpOfferSendGuardNegotiationComplete",a);return a}function n(a,b){var e=b.type==="receiveMediaUpdateResponse"&&b.payload.responseStatusCode!==d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK&&b.payload.ackMessageId===a.mediaUpdateRequestTransactionId;c("ZenonDebugLogger").getInstance().logGuardsResults("receiveNonOkMediaUpdateResponseGuard",e);b.type==="receiveMediaUpdateResponse"&&b.payload.responseStatusCode!==d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.OK&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Server rejected offer with code: "+String(b.payload.responseStatusCode)+". Outgoing transaction id was: "+String(a.mediaUpdateRequestTransactionId)+". Incoming transaction id was: "+String(b.payload.ackMessageId)+". Transaction should be canceled: "+String(e)+"."});return e}function o(a,b){var d=b.type==="messageSent"&&b.messageID===a.lastRemoteSdpResponseMessageId;b=b.messageID;if(c("gkx")("2890")){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"lastRemoteSdpResponseMessageIdSentGuard: "+(d?"Passed":"Failed")+" Last ID: "+((a=a.lastRemoteSdpResponseMessageId)!=null?a:"null")+". 'Incoming ID: "+((a=b)!=null?a:"null")})}return d}g.sdpOfferReceiveNotRejectedGuard=a;g.sdpOfferReceiveRejectedGuard=b;g.sdpPrAnswerReceiveGuard=e;g.sdpAnswerReceiveGuard=f;g.sdpAnswerSendGuard=h;g.sdpJoinResponseReceiveGuard=i;g.receiveRemoteSdpRequestSmuOrCmuGuard=j;g.sdpOfferReceiveGuard=k;g.sdpOfferSendGuard=l;g.sdpOfferSendGuardNegotiationComplete=m;g.receiveNonOkMediaUpdateResponseGuard=n;g.lastRemoteSdpResponseMessageIdSentGuard=o}),98);
__d("ZenonSignalingTerminatedState",["ZenonMWMessageReliabilityLogger","ZenonMWMessageTypes","ZenonSignalingTypes","clearInterval"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a.pingTimer){c("clearInterval")(a.pingTimer);delete a.pingTimer;return a}return{}}function b(a,b){var c;if(b.type!=="receiveRemoteSdpRequest")return;b.payload.ackMessageId!=null&&d("ZenonMWMessageReliabilityLogger").logEventForTxid(b.payload.ackMessageId,d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.RECEIVED_REQUEST_IN_TERMINATED_STATE,{signalingState:"terminated"});b.payload.onProcessed&&b.payload.onProcessed();c={ackMessageId:(c=b.payload.ackMessageId)!=null?c:b.messageID,acknowledgedVersion:b.payload.sdp.version,eventName:"remoteSdpResponse",messageTags:b.payload.messageTags,negotiateType:b.payload.negotiateType,statusCode:d("ZenonSignalingTypes").ZenonSignalingStatusCode.METHOD_NOT_ALLOWED,subCode:d("ZenonSignalingTypes").ZenonSignalingStatusSubCode.CLIENT_TERMINATED,type:b.payload.sdp.type};a.sendSignalingEvent(c)}function e(a,b){if(b.type!=="receiveInitiateRenegotiationRequest")return;b.payload.onProcessed&&b.payload.onProcessed();b={ackMessageId:b.messageID,acknowledgedVersion:b.payload.version,eventName:"initiateRenegotiationResponse",hasRemoteOffer:!1,statusCode:d("ZenonSignalingTypes").ZenonSignalingStatusCode.METHOD_NOT_ALLOWED,subCode:d("ZenonSignalingTypes").ZenonSignalingStatusSubCode.CLIENT_TERMINATED};a.sendSignalingEvent(b)}function f(a,b){if(b.type!=="receiveMediaUpdateRequest")return;b.payload.onProcessed&&b.payload.onProcessed();b={ackMessageId:b.messageID,acknowledgedVersion:b.payload.mediaStates.version,eventName:"mediaUpdateResponse",responseStatusCode:d("ZenonMWMessageTypes").ZenonMWResponseStatusCode.METHOD_NOT_ALLOWED,responseSubCode:d("ZenonMWMessageTypes").ZenonMWResponseSubCode.CLIENT_TERMINATED};a.sendSignalingEvent(b)}g.stopPingTimer=a;g.onReceiveRemoteSdpRequest=b;g.onReceiveInitiateRenegotiationRequest=e;g.onReceiveMediaUpdateRequest=f}),98);
__d("getReceiveEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){switch(a.eventName){case"addParticipantsRequest":return{payload:a,type:"receiveAddParticipantsRequest"};case"addParticipantsResponse":return{payload:a,type:"receiveAddParticipantsResponse"};case"pendingApprovalRequest":return{configuration:c,messageID:b,payload:a,type:"receivePendingApprovalRequest"};case"answerIntentRequest":return null;case"clientEventRequest":return null;case"clientRenegotiationRequest":return null;case"capabilitiesRequest":return{configuration:c,messageID:b,payload:a,type:"receiveCapabilitiesRequest"};case"clientInfoRequest":return{configuration:c,messageID:b,payload:a,type:"receiveClientInfoRequest"};case"dismissResponse":return{configuration:c,messageID:b,payload:a,type:"receiveDismissResponse"};case"iceCandidateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveIceCandidateRequest"};case"iceCandidateResponse":return{configuration:c,messageID:b,payload:a,type:"receiveIceCandidateResponse"};case"initiateRenegotiationRequest":return{configuration:c,messageID:b,payload:a,type:"receiveInitiateRenegotiationRequest"};case"initiateRenegotiationResponse":return null;case"inviteRequest":return{configuration:c,messageID:b,payload:a,type:"receiveInviteRequest"};case"inviteResponse":return{configuration:c,messageID:b,payload:a,type:"receiveInviteResponse"};case"localSdpRequest":return null;case"localSdpResponse":return{configuration:c,messageID:b,payload:a,type:"receiveLocalSdpResponse"};case"mediaUpdateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveMediaUpdateRequest"};case"mediaUpdateResponse":return{configuration:c,messageID:b,payload:a,type:"receiveMediaUpdateResponse"};case"overlayConfigServerUpdateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveOverlayConfigServerUpdateRequest"};case"participantUpdateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveParticipantUpdateRequest"};case"participantUpdateResponse":return{configuration:c,messageID:b,payload:a,type:"receiveParticipantUpdateResponse"};case"pingResponse":return{configuration:c,messageID:b,payload:a,type:"receivePingResponse"};case"pingRequest":return null;case"remoteSdpRequest":return{configuration:c,messageID:b,payload:a,type:"receiveRemoteSdpRequest"};case"remoteSdpResponse":return{configuration:c,messageID:b,payload:a,type:"receiveRemoteSdpResponse"};case"stateSyncNotifyRequest":return{configuration:c,messageID:b,payload:a,type:"receiveStateSyncNotifyRequest"};case"stateSyncNotifyResponse":return null;case"stateSyncUnsubscribeRequest":return null;case"stateSyncUnsubscribeResponse":return{configuration:c,messageID:b,payload:a,type:"receiveStateSyncUnsubscribeResponse"};case"stateSyncUpdateRequest":return null;case"stateSyncUpdateResponse":return{configuration:c,messageID:b,payload:a,type:"receiveStateSyncUpdateResponse"};case"subscriptionRequest":return null;case"removeParticipantsRequest":return null;case"usersApprovalRequest":return null;case"terminateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveTerminateRequest"};case"hangupResponse":return null;case"roomContextUpdateRequest":return{configuration:c,messageID:b,payload:a,type:"receiveRoomContextUpdateRequest"};case"genericDataMessageRequest":return{configuration:c,messageID:b,payload:a,type:"receiveGenericDataMessageRequest"};case"genericDataMessageResponse":return{configuration:c,messageID:b,payload:a,type:"receiveGenericDataMessageResponse"};default:a;return null}}f["default"]=a}),66);
__d("getSendEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a.eventName){case"addParticipantsRequest":return{payload:a,type:"sendAddParticipantsRequest"};case"addParticipantsResponse":return{payload:a,type:"sendAddParticipantsResponse"};case"answerIntentRequest":return{payload:a,type:"sendAnswerIntentRequest"};case"usersApprovalRequest":return{payload:a,type:"sendUsersApprovalRequest"};case"capabilitiesRequest":return{payload:a,type:"sendCapabilitiesRequest"};case"clientEventRequest":return{payload:a,type:"sendClientEventRequest"};case"clientInfoRequest":return{payload:a,type:"sendClientInfoRequest"};case"clientRenegotiationRequest":return{payload:a,type:"sendClientRenegotiationRequest"};case"dismissResponse":return{payload:a,type:"sendDismissResponse"};case"iceCandidateRequest":return{payload:a,type:"sendIceCandidateRequest"};case"iceCandidateResponse":return{payload:a,type:"sendIceCandidateResponse"};case"initiateRenegotiationRequest":return null;case"initiateRenegotiationResponse":return{payload:a,type:"sendInitiateRenegotiationResponse"};case"inviteRequest":return{payload:a,type:"sendInviteRequest"};case"inviteResponse":return{payload:a,type:"sendInviteResponse"};case"localSdpRequest":return{payload:a,type:"sendLocalSdpRequest"};case"localSdpResponse":return{payload:a,type:"sendLocalSdpResponse"};case"mediaUpdateRequest":return{payload:a,type:"sendMediaUpdateRequest"};case"mediaUpdateResponse":return{payload:a,type:"sendMediaUpdateResponse"};case"overlayConfigServerUpdateRequest":return{payload:a,type:"sendOverlayConfigServerUpdateRequest"};case"participantUpdateRequest":return{payload:a,type:"sendParticipantUpdateRequest"};case"participantUpdateResponse":return{payload:a,type:"sendParticipantUpdateResponse"};case"pingResponse":return null;case"pingRequest":return{payload:a,type:"sendPingRequest"};case"remoteSdpRequest":return null;case"remoteSdpResponse":return{payload:a,type:"sendRemoteSdpResponse"};case"subscriptionRequest":return{payload:a,type:"sendSubscriptionRequest"};case"removeParticipantsRequest":return{payload:a,type:"sendRemoveParticipantsRequest"};case"stateSyncNotifyRequest":return null;case"stateSyncNotifyResponse":return{payload:a,type:"sendStateSyncNotifyResponse"};case"stateSyncUnsubscribeRequest":return{payload:a,type:"sendStateSyncUnsubscribeRequest"};case"stateSyncUnsubscribeResponse":return null;case"stateSyncUpdateRequest":return{payload:a,type:"sendStateSyncUpdateRequest"};case"stateSyncUpdateResponse":return null;case"terminateRequest":return{payload:a,type:"sendTerminateRequest"};case"hangupResponse":return null;case"roomContextUpdateRequest":return null;case"genericDataMessageRequest":return{payload:a,type:"sendGenericDataMessageRequest"};case"pendingApprovalRequest":return null;case"genericDataMessageResponse":return{payload:a,type:"sendGenericDataMessageResponse"};default:a;return null}}f["default"]=a}),66);
__d("ZenonSignalingStateMachine",["ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogger","ZenonSignalingInitState","ZenonSignalingInviteReceivedState","ZenonSignalingNegotiationCompleteState","ZenonSignalingSMGuards","ZenonSignalingSharedActions","ZenonSignalingTerminatedState","ZenonStateMachineBase","getReceiveEvent","getSendEvent","qex","qpl","xstate"],(function(a,b,c,d,e,f,g){"use strict";var h=["receiveRemoteSdpRequest","receiveInitiateRenegotiationRequest","receiveMediaUpdateRequest"],i={loggingStateName:"signalingState",name:"SignalingStateMachine",shortname:"Signaling",timeoutEvent:d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.STUCK_IN_SIGNALING_STATE_MACHINE};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;e===void 0&&(e="init");f=a.call(this,{base:{guards:d("ZenonSignalingSMGuards"),initState:"init"},logging:babelHelpers["extends"]({},i,{eventToLogTimeoutsOn:null,getTransactionId:function(a){return a.type!=="messageSent"?a.payload.ackMessageId:null},loggableEvents:h,loggingId:+b.signalingModel.getSignalingID()}),machine:{context:babelHelpers["extends"]({},b),initialState:e,states:D}})||this;f.sm.onTransition(function(a){c("ZenonInfraActionsLogger").updateCachedValues({signalingState:a.value});var b=a.event.type==="receiveRemoteSdpRequest"?a.event.messageID:null;f.logTransition(a,b);f.logTransaction(a.event,d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.PROCESSED_SM_EVENT)});c("ZenonDebugLogger").getInstance().startQPL(c("qpl")._(64245348,"8823"),f.loggingId);return f}var e=b.prototype;e.processSendEvent=function(a){a=c("getSendEvent")(a);a!=null&&this.$ZenonSignalingStateMachine1(a)};e.processReceiveEvent=function(a,b,d){a=c("getReceiveEvent")(a,b,d);a!=null&&this.$ZenonSignalingStateMachine1(a)};e.processEvent=function(a){this.$ZenonSignalingStateMachine1(a)};e.$ZenonSignalingStateMachine1=function(a){var b=a.type==="receiveRemoteSdpRequest"?a.messageID:null;this.logEvent(a,b);this.sm.send(a)};return b}(d("ZenonStateMachineBase").ZenonStateMachineBase);b={actions:[d("ZenonSignalingSharedActions").genericEventSender]};e={actions:[d("ZenonSignalingSharedActions").onReceiveTerminateRequest],target:"terminated"};f={actions:[d("ZenonSignalingSharedActions").genericEventSender]};var j={actions:[d("ZenonSignalingSharedActions").genericEventSender]},k={actions:[d("ZenonSignalingSharedActions").genericEventSender]},l={actions:[d("ZenonSignalingSharedActions").onReceiveCapabilitiesRequest]},m={actions:[d("ZenonSignalingSharedActions").onReceiveClientInfoRequest]},n={actions:[d("ZenonSignalingSharedActions").onReceiveGenericDataMessageRequest]},o={actions:[d("ZenonSignalingSharedActions").onReceiveIceCandidateRequest]},p={actions:[d("ZenonSignalingSharedActions").genericEventSender]},q={actions:[d("ZenonSignalingSharedActions").genericEventSender]},r={actions:[d("ZenonSignalingSharedActions").genericEventSender]},s={actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onSendSubscriptionRequest)]},t={actions:[d("ZenonSignalingSharedActions").onSendTerminateRequest],target:"terminated"},u={actions:[d("ZenonSignalingSharedActions").genericEventSender]},v={actions:[d("ZenonSignalingSharedActions").onReceiveParticipantUpdateRequest]},w={actions:[d("ZenonSignalingSharedActions").onReceiveRoomContextUpdateRequest]},x={actions:[d("ZenonSignalingSharedActions").onReceiveOverlayConfigServerUpdateRequest]},y={actions:[d("ZenonSignalingSharedActions").onReceiveStateSyncNotifyRequest]},z={actions:[d("ZenonSignalingSharedActions").genericEventSender]},A={actions:[d("ZenonSignalingSharedActions").genericEventSender]},B={actions:[d("ZenonSignalingSharedActions").onSendUsersApprovalRequest]},C={actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveMediaUpdateRequest)]},D={init:{on:{sendInviteRequest:{actions:[d("xstate").assign(d("ZenonSignalingInitState").startPingTimer),d("ZenonSignalingInitState").onSendInvite],target:"inviteSent"},receiveInviteRequest:{target:"inviteReceived",actions:[d("xstate").assign(d("ZenonSignalingInitState").startPingTimer),d("xstate").assign(d("ZenonSignalingInitState").onReceiveInvite)]},receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendClientInfoRequest:b,sendRemoveParticipantsRequest:u,sendUsersApprovalRequest:B,sendSubscriptionRequest:s,sendTerminateRequest:t,receiveMediaUpdateRequest:C,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,receiveCapabilitiesRequest:d("ZenonStateMachineBase").defer,receiveClientInfoRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,receiveIceCandidateRequest:d("ZenonStateMachineBase").defer,receiveParticipantUpdateRequest:d("ZenonStateMachineBase").defer,receiveLocalSdpResponse:d("ZenonStateMachineBase").defer,receiveMediaUpdateResponse:d("ZenonStateMachineBase").defer,receiveRemoteSdpRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendIceCandidateRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,sendCapabilitiesRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},inviteSent:{on:{sendLocalSdpRequest:{actions:[d("ZenonSignalingSharedActions").genericEventSender],cond:d("ZenonSignalingSMGuards").sdpOfferSendGuard,target:"offerSdpSent"},receiveIceCandidateRequest:o,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendCapabilitiesRequest:r,sendClientInfoRequest:b,sendRemoveParticipantsRequest:u,receiveMediaUpdateRequest:C,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendSubscriptionRequest:s,sendTerminateRequest:t,sendUsersApprovalRequest:B,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,sendIceCandidateRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},offerSdpSent:{on:{receiveLocalSdpResponse:{actions:[d("ZenonSignalingSharedActions").onReceiveLocalSdpResponse],cond:d("ZenonSignalingSMGuards").sdpJoinResponseReceiveGuard,target:"offerSdpAcknowledged"},receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:C,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendAddParticipantsRequest:q,sendAnswerIntentRequest:f,sendUsersApprovalRequest:B,sendClientInfoRequest:b,sendRemoveParticipantsRequest:u,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendSubscriptionRequest:s,receivePendingApprovalRequest:d("ZenonStateMachineBase").defer,receiveRemoteSdpRequest:d("ZenonStateMachineBase").defer,receiveInitiateRenegotiationRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendIceCandidateRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,sendTerminateRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},offerSdpAcknowledged:{on:{receivePendingApprovalRequest:{actions:[d("ZenonSignalingSharedActions").onReceivePendingApprovalRequest]},receiveRemoteSdpRequest:[{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpPrAnswerReceiveGuard},{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpAnswerReceiveGuard,target:"negotiationComplete"}],receiveInitiateRenegotiationRequest:{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveInitiateRenegotiationRequest)],target:"negotiationComplete"},receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:C,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendAddParticipantsRequest:q,sendAnswerIntentRequest:f,sendUsersApprovalRequest:B,sendClientInfoRequest:b,sendRemoveParticipantsRequest:u,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendStateSyncUnsubscribeRequest:A,sendStateSyncUpdateRequest:z,sendSubscriptionRequest:s,sendTerminateRequest:t,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendIceCandidateRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},inviteReceived:{on:{sendInviteResponse:{actions:[d("ZenonSignalingInviteReceivedState").onSendInviteResponse],target:"inviteAcknowledged"},receiveRoomContextUpdateRequest:w,sendAnswerIntentRequest:f,sendIceCandidateRequest:k,sendUsersApprovalRequest:B,sendRemoveParticipantsRequest:u,receiveMediaUpdateRequest:C,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendStateSyncUnsubscribeRequest:A,sendStateSyncUpdateRequest:z,sendSubscriptionRequest:s,sendTerminateRequest:t,receiveCapabilitiesRequest:d("ZenonStateMachineBase").defer,receiveClientInfoRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,receiveIceCandidateRequest:d("ZenonStateMachineBase").defer,receiveParticipantUpdateRequest:d("ZenonStateMachineBase").defer,receiveRemoteSdpRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,receiveTerminateRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer}},inviteAcknowledged:{on:{sendLocalSdpRequest:[{actions:[d("ZenonSignalingSharedActions").genericEventSender],cond:d("ZenonSignalingSMGuards").sdpOfferSendGuard,target:"offerSdpSent"},{actions:[d("ZenonSignalingSharedActions").genericEventSender],cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard,target:"negotiationComplete"}],receiveRemoteSdpRequest:{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpOfferReceiveGuard,target:"offerSdpReceived"},receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:C,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendAnswerIntentRequest:f,sendClientInfoRequest:b,sendIceCandidateRequest:k,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendSubscriptionRequest:s,sendTerminateRequest:t,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,sendUsersApprovalRequest:d("ZenonStateMachineBase").defer,sendRemoveParticipantsRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},offerSdpReceived:{on:{sendLocalSdpRequest:[{actions:d("ZenonSignalingSharedActions").genericEventSender,cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard,target:"negotiationComplete"}],receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:C,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,receiveTerminateRequest:e,sendAnswerIntentRequest:f,sendCapabilitiesRequest:r,sendClientInfoRequest:b,sendIceCandidateRequest:k,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendSubscriptionRequest:s,sendTerminateRequest:t,receiveLocalSdpResponse:{actions:[d("ZenonSignalingSharedActions").onReceiveLocalSdpResponse],target:"negotiationComplete"},sendUsersApprovalRequest:d("ZenonStateMachineBase").defer,sendRemoveParticipantsRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,receiveRemoteSdpRequest:d("ZenonStateMachineBase").defer,sendGenericDataMessageRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer}},negotiationComplete:{on:{receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveGenericDataMessageRequest:n,receiveIceCandidateRequest:o,receiveInitiateRenegotiationRequest:{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveInitiateRenegotiationRequest)]},receiveLocalSdpResponse:{actions:[d("ZenonSignalingSharedActions").onReceiveLocalSdpResponse],cond:d("ZenonSignalingSMGuards").sdpJoinResponseReceiveGuard},receiveMediaUpdateRequest:C,receiveMediaUpdateResponse:{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onNonSDPReceiveMediaUpdateResponse)]},receiveOverlayConfigServerUpdateRequest:x,receiveParticipantUpdateRequest:v,receivePendingApprovalRequest:{actions:[d("ZenonSignalingSharedActions").onReceivePendingApprovalRequest]},receiveRemoteSdpRequest:[{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpOfferReceiveNotRejectedGuard,target:"serverInitiatedRenegotiating"},{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpOfferReceiveRejectedGuard},{actions:[d("xstate").assign(d("ZenonSignalingNegotiationCompleteState").onReceiveAnswer)],cond:d("ZenonSignalingSMGuards").sdpAnswerReceiveGuard}],receiveRoomContextUpdateRequest:w,receiveStateSyncNotifyRequest:y,receiveTerminateRequest:e,sendAddParticipantsRequest:q,sendClientEventRequest:p,sendClientRenegotiationRequest:{actions:[d("ZenonSignalingSharedActions").onSendClientRenegotiationRequest],target:"clientInitiatedRenegotiating"},sendGenericDataMessageRequest:j,sendIceCandidateRequest:k,sendLocalSdpRequest:[{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onSendLocalSdpRequestOffer)],cond:d("ZenonSignalingSMGuards").sdpOfferSendGuardNegotiationComplete,target:"clientInitiatedRenegotiating"},{actions:[d("ZenonSignalingSharedActions").genericEventSender],cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard}],sendMediaUpdateRequest:[{actions:[d("xstate").assign(d("ZenonSignalingNegotiationCompleteState").onSendMediaUpdateRequest)]}],sendPingRequest:{actions:[d("ZenonSignalingSharedActions").genericEventSender]},sendRemoveParticipantsRequest:u,sendStateSyncUnsubscribeRequest:A,sendStateSyncUpdateRequest:z,sendSubscriptionRequest:s,sendTerminateRequest:t,sendUsersApprovalRequest:B}},serverInitiatedRenegotiating:{on:{sendLocalSdpRequest:[{actions:["defer"],cond:d("ZenonSignalingSMGuards").sdpOfferSendGuard},c("qex")._("481")?{actions:d("ZenonSignalingSharedActions").genericEventSender,cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard}:{actions:[d("ZenonSignalingSharedActions").genericEventSender,d("ZenonSignalingSharedActions").onServerRenegotiationFinished],cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard,target:"negotiationComplete"}],messageSent:{actions:[d("ZenonSignalingSharedActions").onServerRenegotiationFinished],cond:d("ZenonSignalingSMGuards").lastRemoteSdpResponseMessageIdSentGuard,target:"negotiationComplete"},receiveCapabilitiesRequest:d("ZenonStateMachineBase").defer,receiveClientInfoRequest:d("ZenonStateMachineBase").defer,receiveGenericDataMessageRequest:n,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:d("ZenonStateMachineBase").defer,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,sendUsersApprovalRequest:B,receiveTerminateRequest:e,sendAddParticipantsRequest:d("ZenonStateMachineBase").defer,sendIceCandidateRequest:k,sendRemoveParticipantsRequest:d("ZenonStateMachineBase").defer,receiveOverlayConfigServerUpdateRequest:d("ZenonStateMachineBase").defer,receiveStateSyncNotifyRequest:d("ZenonStateMachineBase").defer,sendStateSyncUnsubscribeRequest:d("ZenonStateMachineBase").defer,sendStateSyncUpdateRequest:d("ZenonStateMachineBase").defer,sendSubscriptionRequest:d("ZenonStateMachineBase").defer,sendTerminateRequest:t,sendGenericDataMessageRequest:j,sendClientEventRequest:p,receiveLocalSdpResponse:d("ZenonStateMachineBase").defer,receiveRemoteSdpRequest:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer,receiveMediaUpdateResponse:d("ZenonStateMachineBase").defer}},clientInitiatedRenegotiating:{on:{sendLocalSdpRequest:[{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onSendLocalSdpRequestOffer)],cond:d("ZenonSignalingSMGuards").sdpOfferSendGuard},{actions:["defer"],cond:d("ZenonSignalingSMGuards").sdpAnswerSendGuard}],receiveRemoteSdpRequest:[{actions:["defer"],cond:d("ZenonSignalingSMGuards").sdpOfferReceiveGuard},{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveRemoteSdpRequest)],cond:d("ZenonSignalingSMGuards").sdpAnswerReceiveGuard,target:"negotiationComplete"}],receiveMediaUpdateResponse:[{actions:[d("xstate").assign(d("ZenonSignalingSharedActions").onReceiveMediaUpdateResponse)],cond:d("ZenonSignalingSMGuards").receiveNonOkMediaUpdateResponseGuard,target:"negotiationComplete"},{actions:["defer"]}],receiveCapabilitiesRequest:l,receiveClientInfoRequest:m,receiveGenericDataMessageRequest:n,receiveIceCandidateRequest:o,receiveMediaUpdateRequest:C,receiveParticipantUpdateRequest:v,receiveRoomContextUpdateRequest:w,sendUsersApprovalRequest:B,receiveTerminateRequest:e,sendAddParticipantsRequest:q,sendIceCandidateRequest:k,sendRemoveParticipantsRequest:u,receiveOverlayConfigServerUpdateRequest:x,receiveStateSyncNotifyRequest:y,sendStateSyncUnsubscribeRequest:A,sendStateSyncUpdateRequest:z,sendSubscriptionRequest:s,sendTerminateRequest:t,sendGenericDataMessageRequest:j,sendClientEventRequest:p,receiveLocalSdpResponse:d("ZenonStateMachineBase").defer,sendMediaUpdateRequest:d("ZenonStateMachineBase").defer,sendClientRenegotiationRequest:d("ZenonStateMachineBase").defer}},terminated:{entry:[d("xstate").assign(d("ZenonSignalingTerminatedState").stopPingTimer)],on:{receiveRemoteSdpRequest:[{actions:[d("ZenonSignalingTerminatedState").onReceiveRemoteSdpRequest],cond:d("ZenonSignalingSMGuards").receiveRemoteSdpRequestSmuOrCmuGuard}],receiveInitiateRenegotiationRequest:[{actions:[d("ZenonSignalingTerminatedState").onReceiveInitiateRenegotiationRequest]}],receiveMediaUpdateRequest:[{actions:[d("ZenonSignalingTerminatedState").onReceiveMediaUpdateRequest]}]}}};g["default"]=a}),98);
__d("ZenonSignalingClient",["ZenonActorHooks","ZenonInfraActionsLogger","ZenonMediaActionLogger","ZenonSignalingStateMachine","qex","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){var g=this;f===void 0&&(f=null);this.$5=null;this.$6=function(){};this.$1=a;var h=this.$7();this.$2=new(c("ZenonSignalingStateMachine"))(babelHelpers["extends"]({config:f,logEvent:function(a){return g.$6(a)},onInviteReceived:function(a,b){e(a,b,g)},sendSignalingEvent:function(a){return d.sendEvent(a)}},h,{signalingModel:a}));b.setReceiver(function(a,b,c){return g.$2.processReceiveEvent(a,b,c)});b.setMessageSentHandler(function(a){c("qex")._("481")&&g.$2.processEvent({messageID:a,type:"messageSent"})});this.$3=b;this.$4=d}var b=a.prototype;b.getSignalingModel=function(){return this.$1};b.sendInvite=function(a,b,c,e){e===void 0&&(e=d("ZenonActorHooks").ZenonActor.getID());c={actorID:null,appMessages:b,eventName:"inviteRequest",inviterID:"0",isRemoteOfferer:!1,otherParticipants:a,requestingVideo:!1,roomInfo:{name:"mock"},userID:e};this.$2.processSendEvent(c)};b.initiateClientRenegotiation=function(a){a={eventName:"clientRenegotiationRequest",negotiationEvent:a};this.$2.processSendEvent(a)};b.sendSdp=function(a,b){var c=this.$1.getMediaModeManager().getMediaMode();c={eventName:"localSdpRequest",mediaMode:c,mediaStates:b,sdp:a};this.$2.processSendEvent(c)};b.sendIceCandidate=function(a){a={eventName:"iceCandidateRequest",iceCandidates:[a]};this.$2.processSendEvent(a)};b.sendClientEvent=function(a){a={clientEventType:a,eventName:"clientEventRequest"};this.$2.processSendEvent(a)};b.sendDismiss=function(a){this.$6({name:"dismissSent"});a={eventName:"terminateRequest",fromJoinResponse:!1,reason:a,shouldInformPeer:!0};this.$2.processSendEvent(a)};b.sendGenericDataMessage=function(a,b,c,d){b={data:b,eventName:"genericDataMessageRequest",recipientIDs:c,serviceRecipients:d,topic:a};this.$2.processSendEvent(b)};b.sendMediaUpdate=function(a){a={eventName:"mediaUpdateRequest",mediaStates:a};this.$2.processSendEvent(a)};b.sendAddParticipantsMessage=function(a){a={eventName:"addParticipantsRequest",participants:a};this.$2.processSendEvent(a)};b.sendRemoveParticipantsRequest=function(a){a={eventName:"removeParticipantsRequest",participants:a};this.$2.processSendEvent(a)};b.sendUsersApprovalRequest=function(a,b){a={approvalStatus:a,eventName:"usersApprovalRequest",targetUsers:b};this.$2.processSendEvent(a)};b.sendClientInfo=function(a,b,c,d,e){var f=this,g;(b||c)&&(g=new Map());b&&b.forEach(function(a,b){var c;(c=g)==null?void 0:c.set(b,f.getSignalingModel().getStateSyncStore().updateInputState(b,a))});c&&c.forEach(function(a,b){var c;(c=g)==null?void 0:c.set(b,a)});b={actorRepresentatives:new Map(),eventName:"clientInfoRequest",initialSyncStates:g,isE2eeMandated:e,isSecondaryJoinRole:d,userCapabilities:a};this.$2.processSendEvent(b)};b.sendStateSyncUnsubscribe=function(a){var b=this.getSignalingModel(),c=b.getStateSyncStore().unsubscribe(a);a={eventName:"stateSyncUnsubscribeRequest",topic:a,version:c.version};this.$2.processSendEvent(a);b.notify()};b.sendStateSyncUpdate=function(a,b){var c=this.getSignalingModel();b=c.getStateSyncStore().updateInputState(a,b);a={data:b.data!=null?b.data:void 0,eventName:"stateSyncUpdateRequest",topic:a,version:b.version};this.$2.processSendEvent(a);c.notify()};b.sendSubscriptionRequest=function(a){a={eventName:"subscriptionRequest",subscriptions:a};this.$2.processSendEvent(a)};b.receiveMessage=function(a){var b=a.getHeader(),d=b.remoteSignalingID;b=b.roomInfo;d!=null&&this.$1.getRemoteSignalingID()!==d&&(this.$1.updateRemoteSignalingID(d),this.$6({conferenceName:b.name,name:"setRemoteSignalingID",remoteSignalingID:d}),this.$1.notify());b!=null&&this.$1.getRoomInfo().name!==b.name&&(c("ZenonInfraActionsLogger").updateCachedValues({conferenceName:b.name}),c("ZenonMediaActionLogger").updateCachedValues({conferenceName:b.name}),this.$1.updateRoomInfo(b),this.$1.notify());this.$3.receiveMessage(a)};b.isTerminated=function(){return this.$2.getState()==="terminated"};b.sendAnswerIntent=function(){var a={eventName:"answerIntentRequest"};this.$2.processSendEvent(a)};b.respondToInvite=function(a){a={ackMessageId:"",eventName:"inviteResponse",status:a};this.$2.processSendEvent(a)};b.setSignalingEventHandlers=function(a){if(this.$5!=null){c("recoverableViolation")("setSignalingEventHandlers should only be called once, to avoid accidentally losing handlers.","rtc_www");return}this.$5=a};b.setLoggingEventHandler=function(a){this.$6=a,this.$3.setLoggingEventHandler(a)};b.$7=function(){return{onCapabilitiesReceived:this.$8("onCapabilitiesReceived"),onClientInfoReceived:this.$8("onClientInfoReceived"),onClientRenegotiationReceived:this.$8("onClientRenegotiationReceived"),onDismissReceived:this.$8("onDismissReceived"),onGenericDataMessageReceived:this.$8("onGenericDataMessageReceived"),onIceCandidateReceived:this.$8("onIceCandidateReceived"),onInviteAcknowledgeSent:this.$8("onInviteAcknowledgeSent"),onMediaUpdateReceived:this.$8("onMediaUpdateReceived"),onMediaUpdateResponseReceived:this.$8("onMediaUpdateResponseReceived"),onParticipantUpdateReceived:this.$8("onParticipantUpdateReceived"),onPendingApprovalReceived:this.$8("onPendingApprovalReceived"),onRenegotiationRequested:this.$8("onRenegotiationRequested"),onRoomContextUpdateReceived:this.$8("onRoomContextUpdateReceived"),onSdpReceived:this.$8("onSdpReceived"),onServerRenegotiationFinished:this.$8("onServerRenegotiationFinished")}};b.$8=function(a){var b=this;return function(){if(b.$5&&b.$5[a]){var c;(c=b.$5)[a].apply(c,arguments)}}};return a}();g["default"]=a}),98);
__d("ZenonSimulcastUtils",["UserAgent","ZenonSimulcastManager","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;a=(a=c("gkx")("527"))!=null?a:!1;return a}function a(a){return a&&i()&&h()}function i(){return c("UserAgent").isBrowser("Chrome >= 88")}function b(){return c("gkx")("527")?d("ZenonSimulcastManager").NUM_LAYERS:1}function e(){return c("qex")._("325")?3:d("ZenonSimulcastManager").MAX_NUM_ACTIVE_LAYERS}g.shouldUseChromeSimulcast=h;g.shouldUseSimulcast=a;g.isCurrentBrowserCompatibleWithSimulcast=i;g.getNumLayers=b;g.getMaxNumLayers=e}),98);
__d("ZenonTransportEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.emitJoinReady=function(a){this.emit("transportPlatformEvent",{messageType:"joinReady",mwRingRequest:a})};c.emitParentWindowConnectionTimeout=function(){this.emit("transportPlatformEvent",{messageType:"parentWindowConnectionTimeout",mwRingRequest:null})};return b}(c("EventEmitter"));b=new a();d=b;g["default"]=d}),98);
__d("XVideoCallTurnDiscoveryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/turndiscovery/",{version:{type:"Int",required:!0},call_id:{type:"String"}})}),null);
__d("ZenonUtils",["AsyncRequest","AsyncResponse","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h=6e3;function a(a,b,d,e,f,g){b===void 0&&(b=c("emptyFunction"));d===void 0&&(d=c("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=h);g===void 0&&(g={});a=new(c("AsyncRequest"))().setURI(a).setData(g).setAllowCrossPageTransition(!0).setHandler(b).setErrorHandler(d).setTimeoutHandler(f,function(a){d(new(c("AsyncResponse"))(a,{}))});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()}g.sendServerRequest=a}),98);
__d("ZenonTurnDiscovery",["Promise","XVideoCallTurnDiscoveryController","ZenonDebugLogger","ZenonInfraActionsLogger","ZenonUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=3,i=null;function a(a,e,f){f===void 0&&(f=h);if(i){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] returning cached TURN credentials"});return i}var g=1,j=c("XVideoCallTurnDiscoveryController").getURIBuilder().setInt("version",g).setString("call_id",a).getURI();c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] sending TURN server request to url "+j.toString()});i=new(b("Promise"))(function(b,g){h(f);function h(f){d("ZenonUtils").sendServerRequest(j,function(a){a=a.payload;return b(a)},function(){f>0?(c("ZenonDebugLogger").getFBLogger({callID:a,peerID:e}).warn("Failed turn; going to retry"),h(f-1)):g(c("err")("failed"))})}});return i}g.requestTurnCreds=a}),98);
__d("ZenonCallsManager",["invariant","FBLogger","OverlayConfigManagerWithServerLayer","PersistedQueue","Promise","SCTPSignalingListener","ZenonActorHooks","ZenonCallLogger","ZenonConnectionStateManager","ZenonDataUtils","ZenonDebugLogger","ZenonDismissReason","ZenonGraphQLMWMessageSender","ZenonIdentityStoreFactory","ZenonInfraActionsLogger","ZenonMWMessageTranslator","ZenonMessageSenderChain","ZenonMqttMWMessageSender","ZenonMqttUtil","ZenonMultiwayReliabilityLogProcessor","ZenonRTCPeerConnectionConfig","ZenonRTWebBrowserFeatureSupport","ZenonSDKRateLimiter","ZenonSctpMWMessageSender","ZenonSctpMWMessageSenderHelper","ZenonSecureFrameManagerState","ZenonSignalingChildTransport","ZenonSignalingClient","ZenonSignalingClientManager","ZenonSignalingProtocol","ZenonSimulcastUtils","ZenonTransportEventEmitter","ZenonTurnDiscovery","cr:11367","cr:1156","cr:1557768","cr:3246","cr:3249","cr:3250","cr:3454","gkx","immutable","performanceNow","promiseDone","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i="E2eeKey";a=function(){function a(a){var e=this;this.$4=new Map();this.$5=null;this.$7=null;this.$8=new(c("ZenonSctpMWMessageSenderHelper"))();this.$7=new(c("ZenonSDKRateLimiter"))();this.$1=c("immutable").Map();this.$2=a;var f=null,g=new(c("ZenonMessageSenderChain"))([new(c("ZenonMqttMWMessageSender"))(),new(c("ZenonGraphQLMWMessageSender"))(),new(c("ZenonSctpMWMessageSender"))(this.$8)]);b("cr:11367")!==null?f=new(b("cr:11367"))(g):f=g;this.$3=new(c("ZenonSignalingClientManager"))(c("ZenonSignalingClient"),function(a,b,c){return e.onInviteReceived(a,b,c)},f,a);this.$6=this.$9();var h=c("performanceNow")(),i=0,j=c("ZenonDebugLogger").getInstance();g=d("ZenonMqttUtil").getMqttChannel();g.getConnectionState()==="Connected"&&(j.logMQTTConnectStats(0,0),h=null,i++);g.subscribeChannelEvents({onMQTTStateChanged:function(a){var b=h;if((a==="Disconnected"||a==="Connecting")&&b==null)h=c("performanceNow")();else if(a==="Connected"&&b!=null){b=Math.round(c("performanceNow")()-b);j.logMQTTConnectStats(b,i);i++;h=null}j.logMQTTStateChange(a)}})}var e=a.prototype;e.$9=function(){var a,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({callType:"mw",checkpoint:"[ZP] starting TURN discovery"});a=Date.now();g.prev=2;g.next=5;return b("regeneratorRuntime").awrap(d("ZenonTurnDiscovery").requestTurnCreds("ZenonPlatform","MW_PEER_ID"));case 5:e=g.sent;c("ZenonRTCPeerConnectionConfig").setTurnCredentials(e);c("gkx")("2890")?(f={ip:e.ip,ssl_tcp_port:e.ssl_tcp_port,tcp_port:e.tcp_port,udp_port:e.udp_port},c("ZenonInfraActionsLogger").logCheckpoint({callType:"mw",checkpoint:"[ZP] successfully acquired TURN credentials: "+JSON.stringify(f)+". Took "+(Date.now()-a)+" ms."})):c("ZenonInfraActionsLogger").logCheckpoint({callType:"mw",checkpoint:"[ZP] successfully acquired TURN credentials. Took "+(Date.now()-a)+" ms."});g.next=13;break;case 10:g.prev=10,g.t0=g["catch"](2),c("ZenonInfraActionsLogger").logError({callType:"mw",checkpoint:"[ZP] failed to get TURN credentials. Took "+(Date.now()-a)+" ms. Error message: "+g.t0,errorDomain:"ZenonCallsManager_fetchTurnCredentials"});case 13:case"end":return g.stop()}},null,this,[[2,10]])};e.getLogProcessors=function(){var a=[b("cr:3246"),c("ZenonMultiwayReliabilityLogProcessor")];b("cr:1557768")&&a.push(b("cr:1557768"));b("cr:3250")&&a.push(b("cr:3250"));b("cr:3249")&&a.push(b("cr:3249"));b("cr:1156")&&a.push(b("cr:1156"));return a};e.onInviteReceived=function(a,b,e){b=this.$2.getConfigManager().getZenonMultiCallSupportConfig().getMaxConnectedCalls();var f=this.$1.filter(function(a){return a.getConnectionState()!=="terminated"}),g=f.filter(function(b){return b.getServerCallID()===((b=a.roomInfo.context)==null?void 0:b.serverInfoData)});if(g.size>0){e.respondToInvite("OK");return}g=f.some(function(a){return a.getServerCallID()==null});f.size>=b&&(f.size>b&&c("FBLogger")("rtc_www").warn("We have more than supported number of calls occurring"),e.respondToInvite("IN_ANOTHER_CALL"),g||e.sendDismiss(d("ZenonDismissReason").ZenonDismissReason.InAnotherCall))};e.join=function(a){var e,f,g,j,k,l=this,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;return b("regeneratorRuntime").async(function(W){while(1)switch(W.prev=W.next){case 0:c("PersistedQueue").eventEmitter.emit("active",null);a.peerID!=null||h(0,18600);a.peerIDForJoiningContext!=null||a.roomID!=null||h(0,54965);m={userID:a.peerID};n=a.actorID,o=a.callTrigger,p=a.clientCallID,q=a.isE2eeMandated,r=q===void 0?!1:q,s=a.localMedia,t=a.mwRingRequest,u=a.peerID,v=a.peerIDForJoiningContext,w=a.roomID,x=w===void 0?null:w,y=a.serverCallID,z=a.setE2eeModel,A=a.usersToRing;B={context:{groupThreadID:null,peerID:v,serverInfoData:null},name:x};t!=null&&(t.jsonPayload.header.clientSessionId=(C=y)!=null?C:"");if(!(this.$1.get(p)!=null)){W.next=9;break}throw c("unrecoverableViolation")("Call with id "+p+" already exists. Use a new clientCallID/clientSessionID if rejoining.","rtc_www");case 9:D=null;y!=null&&(D=this.$3.getSignalingClient(y));E=(e=(f=n)!=null?f:t==null?void 0:(g=t.jsonPayload.header.receiver)==null?void 0:g.actorId)!=null?e:null;D==null?D=this.$3.createSignalingClient(y,m,a.serverInfoData,c("ZenonSignalingProtocol").MWPP,B,E,d("ZenonActorHooks").ZenonActor.getID()):D.getSignalingModel().setActorID(E);F=D.getSignalingModel();G=F.getSignalingID();H=t==null;I=(t==null?void 0:(j=t.jsonPayload.body.ringRequest)==null?void 0:(k=j.offer)==null?void 0:k.sdpString)!=null;F.getMediaModeManager().onJoin(H,A.length,I);J=this.$4.get(p);J==null&&(L=s.find(function(a){return a.contentType==="video"})!=null,J=new(c("ZenonCallLogger"))({callID:(K=y)!=null?K:p,callTrigger:o,conferenceName:a.roomID,disableTsData:r,isCaller:H,isVideo:L,peerID:u,protocol:c("ZenonSignalingProtocol").MWPP,serverInfoData:a.serverInfoData,signalingID:G},this.getLogProcessors()),this.$4.set(p,J),c("ZenonInfraActionsLogger").updateCachedValues({signalingID:G}));M=d("ZenonSimulcastUtils").shouldUseSimulcast(!0);D!=null||h(0,23327);if(!(F.getMediaModeManager().getMediaMode()==="p2p")){W.next=25;break}W.next=25;return b("regeneratorRuntime").awrap(this.$6);case 25:if(!(d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()&&b("cr:3454")!=null&&z!=null)){W.next=41;break}c("ZenonInfraActionsLogger").startTimer("[E2ee] Create Identity Store");W.next=29;return b("regeneratorRuntime").awrap(d("ZenonIdentityStoreFactory").ZenonIdentityStoreFactory.create(r));case 29:P=W.sent;c("ZenonInfraActionsLogger").stopTimer("[E2ee] Create Identity Store");c("ZenonInfraActionsLogger").startTimer("[E2ee] Create E2ee Components");Q=function(a){l.endCall(p,"EndToEndEncryptionInvariantViolated",a)};W.next=35;return b("regeneratorRuntime").awrap(b("cr:3454").createE2eeComponents(r,P,function(a){var b;(b=J)==null?void 0:b.log({e2eeStats:a,name:"updateE2EEStats"})},function(a,b){var e;c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZSFM][E2EE] sending e2ee message containing "+b.length+" bytes to "+a});(e=D)==null?void 0:e.sendGenericDataMessage(i,d("ZenonDataUtils").uint8ArrayToString(b),[a],[])},z,Q));case 35:R=W.sent;N=R.encryptionKeysManager;O=R.secureFrameManager;c("ZenonInfraActionsLogger").stopTimer("[E2ee] Create E2ee Components");W.next=42;break;case 41:r&&z==null&&this.endCall(p,"EndToEndEncryptionInvariantViolated","SetE2eeModel is null for e2ee mandated call");case 42:S=new(c("OverlayConfigManagerWithServerLayer"))(this.$2.getConfigManager());T=new(c("ZenonConnectionStateManager"))(p,D,H?"outgoing":"incoming",S,J,this.$8,M,O,N);J.log({hasOfferInRingRequest:I,isCaller:H,name:"callJoinRequest"});this.$1=this.$1.set(p,T);W.next=48;return b("regeneratorRuntime").awrap(T.start(a));case 48:c("ZenonInfraActionsLogger").logCheckpoint({callID:y,callType:"mw",checkpoint:"[ZP] ZenonCallsManager_join called, starting connectionStateManager",conferenceName:a.roomID,isCaller:H}),t&&(U=d("ZenonMWMessageTranslator").toSignalingMessage(t),this.$3.receiveMessage(U)),c("gkx")("3864")&&(V=new(c("SCTPSignalingListener"))(T),V.subscribe(function(a){return l.$3.receiveMessage(a)})),c("gkx")("965758")?c("ZenonInfraActionsLogger").logCheckpoint({callID:this.$10(y,p),callType:"mw",checkpoint:"[ZP] Eligible for tslog logging",conferenceName:a.roomID,isCaller:H,serverInfoData:a.serverInfoData}):c("ZenonInfraActionsLogger").logCheckpoint({callID:this.$10(y,p),callType:"mw",checkpoint:"[ZP] Not eligible for tslog logging",conferenceName:a.roomID,isCaller:H,serverInfoData:a.serverInfoData});case 52:case"end":return W.stop()}},null,this)};e.$10=function(a,b){return(a=a)!=null?a:b};e.addLocalTrack=function(a,b){this.$11(a,function(a){a.addLocalTrack(b)})};e.removeLocalTrack=function(a,b){this.$11(a,function(a){a.removeLocalTrack(b)})};e.muteTrack=function(a,b){this.$11(a,function(a){a.muteTrack(b)})};e.unmuteTrack=function(a,b){this.$11(a,function(a){a.unmuteTrack(b)})};e.stopLocalVideo=function(a,b){this.$11(a,function(a){a.stopLocalTrack(b)})};e.initializeV2Infrastructure=function(a,b){var e=b.actorID,f=b.callID,g=b.callTrigger,h=b.initializeVideo,i=b.peerID,j=b.peerIDForJoiningContext,k=b.roomID;k=k===void 0?null:k;b=b.serverInfoData;var l={userID:i};j={context:{groupThreadID:null,peerID:j,serverInfoData:null},name:k};j=this.$3.createSignalingClient(f==null?void 0:String(f),l,b,c("ZenonSignalingProtocol").MWPP,j,(l=e)!=null?l:null,d("ZenonActorHooks").ZenonActor.getID());e=j.getSignalingModel().getSignalingID();l=new(c("ZenonCallLogger"))({callID:f==null?a:String(f),callTrigger:g,conferenceName:k,isCaller:!0,isVideo:h,peerID:i,protocol:c("ZenonSignalingProtocol").MWPP,serverInfoData:b,signalingID:e},this.getLogProcessors());this.$4.set(a,l);c("ZenonInfraActionsLogger").updateCachedValues({signalingID:e})};e.initializeSignaling=function(a,b,e,f){var g=this,h=this.$2.getSignalingListener();h.subscribe(function(a){return g.$3.receiveMessage(a)},function(a){});h=d("ZenonMqttUtil").getMqttChannel();c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Subscribed to MQTT channels. MQTT connection state: "+h.getConnectionState()});h=this.$2.getConfigManager().getZenonStartCallImmediatelyConfig().isEnabled();if(h)c("ZenonTransportEventEmitter").emitJoinReady();else if(b!=null){h=this.$2.getConfigManager().getZenonPlatformSupportConfig().getParentWindowConnectionTimeoutMs();this.$5=new(c("ZenonSignalingChildTransport"))(b,a,h,e,f)}else c("ZenonTransportEventEmitter").emitParentWindowConnectionTimeout();this.$5&&c("promiseDone")(this.$5.connect(),function(a){a.state==="join_ready"?c("ZenonTransportEventEmitter").emitJoinReady(a.mwRingRequest):c("ZenonTransportEventEmitter").emitParentWindowConnectionTimeout()})};e.endCall=function(a,b,e){b=d("ZenonDismissReason").endCallToDismissReason(b);var f=this.$1.get(a);if(f)f.end(b,e);else{f=this.$4.get(a);f!=null?f.log({endCallReason:b,endCallSubreason:e,isRemoteEnded:!1,name:"callEnded"}):c("FBLogger")("rtc_www").warn("ZenonCallLogger missing for endCall")}};e.ringParticipants=function(a,b){this.$11(a,function(a){a.addParticipants(b)})};e.removeParticipants=function(a,b){this.$11(a,function(a){a.removeParticipants(b)})};e.replaceLocalTrack=function(a,c,d,e){e===void 0;this.$11(a,function(a){a.replaceLocalTrack(c,d)});return b("Promise").resolve()};e.forceEncodingEnabled=function(a,b){this.$11(a,function(a){a.forceEncodingEnabled(b)})};e.submitRating=function(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d=null);a=this.$4.get(a);a&&(b!=null&&a.log({name:"callRated",rating:b}),c!=null&&a.log({feedback:c,name:"callFeedbackSubmitted"}),d!=null&&a.log({name:"callSurveyChoiceSubmitted",surveyChoice:d}))};e.setRatingImpression=function(a,b){};e.setLinkSurface=function(a,b){a=this.$4.get(a);if(!a)return;b!=null&&a.log({linkSurface:b,name:"setLinkSurface"})};e.getCalls=function(){return this.$1};e.setCalls=function(a){this.$1=a};e.createDataMessageSubscription=function(a,b,c){this.$11(a,function(a){a.createDataMessageSubscription(b,c)})};e.removeDataMessageSubscription=function(a,b,c){this.$11(a,function(a){a.removeDataMessageSubscription(b,c)})};e.sendGenericDataMessage=function(a,b,c,d,e){if(!this.$12("dataMessage-"+b))return;this.$11(a,function(a){a.sendGenericDataMessage(b,c,d,e)})};e.getLogIdentifiers=function(a){return(a=this.$4.get(a))==null?void 0:a.getLogIdentifiers()};e.subscribeToRemoteVideo=function(a,b,c){a=this.$1.get(a);a!=null&&a.subscribeToRemoteVideo(b,c)};e.updateStateSyncTopic=function(a,b,c){if(!this.$12("updateStateSync-"+b))return;this.$11(a,function(a){a.updateStateSyncTopic(b,c)})};e.unsubscribeFromStateSyncTopic=function(a,b){this.$11(a,function(a){a.unsubscribeFromStateSyncTopic(b)})};e.approveParticipants=function(a,b){this.$11(a,function(a){a.approveParticipants(b.toArray())})};e.denyParticipants=function(a,b){this.$11(a,function(a){a.denyParticipants(b.toArray())})};e.getSdpFormat=function(a){return this.$11(a,function(a){return a.getSdpFormat()})};e.getSecureFrameManagerState=function(a){a=this.$11(a,function(a){return a.getSecureFrameManagerState()});return a===null?d("ZenonSecureFrameManagerState").ZenonSecureFrameManagerState$DefaultConstructor():a};e.getSignalingProtocol=function(a){a=this.$13(a);return a==null?null:(a=this.$3.getSignalingClientWithRemoteSignalingID(a))==null?void 0:a.getSignalingModel().getProtocol()};e.getMediaMode=function(a){a=this.$13(a);return a==null?null:(a=this.$3.getSignalingClientWithRemoteSignalingID(a))==null?void 0:a.getSignalingModel().getMediaModeManager().getMediaMode()};e.getConferenceName=function(a){a=this.$13(a);return a==null?null:(a=this.$3.getSignalingClientWithRemoteSignalingID(a))==null?void 0:a.getSignalingModel().getRoomInfo().name};e.$13=function(a){return this.$11(a,function(a){return a.getServerCallID()})};e.$12=function(a){if(this.$7&&!this.$7.take(a)){c("FBLogger")("rtc_www").mustfix("[ZP] Dropping "+a+" invocation. This SDK method is being called too rapidly.");return!1}return!0};e.$11=function(a,b){var d=this.$1.get(a);if(d!=null)return b(d);c("FBLogger")("rtc_www").warn("No call with id "+a+" was found. Call the join() method before invoking other call methods.");return null};return a}();g["default"]=a}),98);
__d("ZenonClientTslogUploader",["DateConsts","ZenonInfraActionsLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=5*d("DateConsts").MS_PER_MIN,i="[ZP] Tslog Uploader";a=function(){function a(a,b){a===void 0&&(a=function(){}),this.$1=function(){},this.$3=null,this.$4=1,this.$5=0,this.$1=a,this.$2=b}var b=a.prototype;b.$6=function(a){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:i+" - "+a})};b.$7=function(a,b,c){a=a.timeSeries;if(a==null||a.length===0){this.$6("TSLog is empty - stop sending");return}var d=a.length-this.$5;if(b||d>=c){this.$5=a.length;this.$6("TSLog chunk ID: "+this.$4+" with length "+d+" >= "+c+" will be sent and isTerminal: "+(b?"1":"0"));a=this.getSimulatedTslogWithSize(d);this.$1({name:"logTSData",serializedTSLog:{format:"EXPERIMENTAL",isTerminal:b,sequenceNumber:this.$4,timeSeries:a}});this.$4+=1}else this.$6("TSLog chunk ID: "+this.$4+" with length "+d+" < "+c+" is not sent")};b.$8=function(a,b,d){var e=a.timeSeries;if(e==null||e.length===0){this.$6("TSLog is empty - stop sending");return}var f=e.length;if(b||f>=d){this.$6("TSLog chunk ID: "+this.$4+" with length "+f+" >= "+d+" will be sent and isTerminal: "+(b?"1":"0"));if(c("gkx")("2718"))return;this.$1({name:"logTSData",serializedTSLog:{format:a.format,isTerminal:b,sequenceNumber:this.$4,timeSeries:e}});this.$2.resetTimeSeries();this.$4+=1}else this.$6("TSLog chunk ID: "+this.$4+" with length "+f+" < "+d+" is not sent")};b.$9=function(a,b){c("gkx")("2475")?this.$8(a,b,2e5):this.$7(a,b,2e5)};b.$10=function(){this.$3!=null&&(this.$6("Ending polling"),window.clearInterval(this.$3),this.$3=null)};b.$11=function(){var a=this;this.$3==null&&(this.$4=1,this.$3=window.setInterval(function(){a.$12()},h))};b.$12=function(){var a=this.$2.timeSeries();this.$9(a,!1)};b.$13=function(){if(c("gkx")("2718")){this.$6("TSLog collection is stopped by gk - stop sending");return!0}return!1};b.getSimulatedTslogWithSize=function(a){return Array(a+1).join("a")};b.stopTslogUploadInChunks=function(){this.$10();if(this.$13())return;var a=this.$2.timeSeries();this.$9(a,!0)};b.logTslogInChunks=function(){if(this.$13())return;this.$6("Call is sending chunked TSLogs");this.$11()};b.logTslog=function(){if(this.$13())return;var a=this.$2.timeSeries();if(a.timeSeries==null||a.timeSeries.length===0){this.$6("TSLog is empty - stop sending from logTslog");return}this.$1({name:"logTSData",serializedTSLog:a})};return a}();g["default"]=a}),98);
__d("ZenonPeerConnectionDataActions",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){if(b.type==="createDataChannel"){b=b.payload;var c=b.dataChannelEstablished,d=b.dataChannelLabel,e=b.onDataChannelMessage;b=b.onDataChannelOpen;a.mediaChannelManager.createDataChannel(d,e,b,c)}};b=function(a,b){if(b.type==="dataChannelMessageReceived"){b=b.payload;var c=b.data;b=b.dataChannelLabel;a.onDataChannelMessageReceived(b,c)}};c=function(a,b){if(b.type==="createDataMessageSubscription"){b=b.payload;var c=b.dataChannelLabel;b=b.onSignalingDataMessage;a.onCreateDataMessageSubscription(c,b)}};d=function(a,b){if(b.type==="removeDataMessageSubscription"){b=b.payload;var c=b.dataChannelLabel;b=b.onSignalingDataMessage;a.onRemoveDataMessageSubscription(c,b)}};f.onCreateDataChannel=a;f.onDataChannelMessageReceived=b;f.onCreateDataMessageSubscription=c;f.onRemoveDataMessageSubscription=d}),66);
__d("ZenonPeerConnectionIceActions",["ZenonInfraActionsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h={onIceConnected:function(a){a.onConnectionEstablished()},onIceConnectionStateChanged:function(a,b){if(b.type==="iceConnectionStateChange"){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"iceConnectionStateChange: "+b.payload.iceConnectionState});var d=b.payload.iceConnectionState==="connected"||b.payload.iceConnectionState==="completed",e=b.payload.iceConnectionState==="disconnected"||b.payload.iceConnectionState==="failed";d?h.onIceConnected(a):e&&a.onConnectionDropped();return b.payload}return{}}};a=h;g["default"]=a}),98);
__d("ZenonPeerConnectionMediaActions",["AggregateError","Promise","ZenonInfraActionsLogger","ZenonLoggingEventTypes","err","gkx","promiseDone","qex","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";f=function(a,b){b.type==="applyRemoteIceCandidate"&&b.payload!=null&&c("promiseDone")(a.sdpManager.setRemoteIceCandidate(b.payload),function(){a.logEvent({direction:d("ZenonLoggingEventTypes").ZenonUpdateIceInfoDirection.Receive,name:"updateIceInfo",sdpString:b.payload.candidate})})};var h=function(a,b){c("ZenonInfraActionsLogger").logError({checkpoint:"Failed to add local tracks: "+b.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onAddLocalTracks"})},i=function(a,b){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully added local tracks"});return b.data},j=function(a,d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:if(!(d.type!=="addLocalTracks")){h.next=2;break}return h.abrupt("return",{});case 2:e=d.payload.tracks;f=[];h.next=6;return b("regeneratorRuntime").awrap(b("Promise").allSettled(e.map(function(c){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(a.mediaChannelManager.addTrack(c,d.payload.mediaMode));case 2:z(a,c.trackId,c.enabled);case 3:case"end":return e.stop()}},null,this)})));case 6:g=h.sent;g.forEach(function(a){a.status==="rejected"&&f.push(c("err")(a.reason))});if(!(f.length>0)){h.next=10;break}throw new(c("AggregateError"))(f);case 10:a.mediaChannelManager.addReceiveOnlyVideoTransceiverIfNeeded(d.payload.mediaMode,d.payload.callInitiator);c("gkx")("1829601")&&a.mediaChannelManager.addInactiveAudioTransceiverIfNeeded();c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"add local tracks"});return h.abrupt("return",{localMediaStateVersion:a.localMediaStateVersion+e.length});case 14:case"end":return h.stop()}},null,this)},k=function(a,b){if(b.type!=="forceEncodingEnabled")return;a.mediaChannelManager.forceEncodingEnabled(b.payload.enabled)},l=function(a,b){b.type==="iceCandidateReady"&&a.onIceCandidateReady(b.payload)},m=function(a,b){if(b.type!=="localMediaStateUpdateRetry")return{};c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"local media state update retry with media status only"});b=A(a);a=b.localMediaStateVersion;return{localMediaStateUpdateRetryTimerId:null,localMediaStateVersion:a}},n=function(a,b){if(b.type==="muteLocalTrack"){a=y(a,b.payload.trackId,!1);c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"mute local track"});return a}return{}},o=function(a,b){c("ZenonInfraActionsLogger").logError({checkpoint:"Failed to remove local track: "+b.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onRemoveLocalTracks"})},p=function(a,b){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully removed local track"});return b.data},q=function(a,d){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:if(!(d.type!=="removeLocalTrack")){g.next=2;break}return g.abrupt("return",{});case 2:e=d.payload.trackId;g.next=5;return b("regeneratorRuntime").awrap(a.mediaChannelManager.removeTrack(e));case 5:f=y(a,e,!1);c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"remove local track with id "+e});return g.abrupt("return",f);case 8:case"end":return g.stop()}},null,this)},r=function(a,b){c("ZenonInfraActionsLogger").logError({checkpoint:"Failed to replace local tracks: "+b.data.toString(),errorDomain:"ZenonPeerConnectionMediaActions_onReplaceLocalTrack"})},s=function(a,d){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(d.type!=="replaceLocalTrack")){i.next=2;break}return i.abrupt("return",a);case 2:e=d.payload,f=e.replacementTrack,g=e.trackIdToReplace;i.next=5;return b("regeneratorRuntime").awrap(a.mediaChannelManager.replaceTrack(g,f));case 5:h=y(a,d.payload.trackIdToReplace,!1);h=y(babelHelpers["extends"]({},a,h),d.payload.replacementTrack.trackId,d.payload.replacementTrack.enabled);c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"replace local track with id "+g+" by track "+f.trackId});return i.abrupt("return",h);case 9:case"end":return i.stop()}},null,this)},t=function(a,b){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Successfully replaced local track"});return b.data},u=function(a,b){return b.type!=="setLocalMediaStateVersion"?{}:{localMediaStateVersion:b.payload.version}},v=function(a,b){if(b.type!=="stopLocalTrack")return;b=b.payload.trackId;a.mediaChannelManager.stopLocalTrack(b)},w=function(a,b){if(b.type==="unmuteLocalTrack"){a=y(a,b.payload.trackId,!0);c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"unmute local track"});return a}return{}};function a(a,b){if(b.type!=="applyMediaUpdate")return;x(a.mediaChannelManager,b.payload.mediaStates)}function x(a,b,c){c===void 0&&(c=!0),b&&(b.tracks.forEach(function(b){var c=b.enabled,d=b.trackID;if(d==="data"||d==="stream_label")return;a.updateTrackInfo(b);c?a.unmuteTrack(d):a.muteTrack(d)}),c&&a.removeMissingTracks(b.tracks))}function y(a,b,c){z(a,b,c);return A(a)}function z(a,b,c){a=a.mediaChannelManager;c?a.unmuteTrack(b):a.muteTrack(b)}function A(a){var b=a.mediaChannelManager,c=[];b=b.getLocalTracksForMWS();b.forEach(function(a){a={enabled:a.enabled,trackID:a.trackId,type:a.contentType};c.push(a)});b=a.localMediaStateVersion+1;var d={tracks:c,version:b};a.onLocalMediaStateUpdate(d);return{localMediaStateVersion:b}}function e(a){c("qex")._("1747")&&a.tslogUploader.logTslogInChunks()}g.applyRemoteIceCandidate=f;g.onAddLocalTracksError=h;g.onAddedLocalTracks=i;g.onAddingLocalTracks=j;g.onForceEncodingEnabled=k;g.onIceCandidateReady=l;g.onLocalMediaStateUpdateRetry=m;g.onMuteLocalTrack=n;g.onRemoveLocalTrackError=o;g.onRemovedLocalTrack=p;g.onRemovingLocalTrack=q;g.onReplaceLocalTrackError=r;g.onReplacingLocalTrack=s;g.onReplacedLocalTrack=t;g.onSetLocalMediaStateVersion=u;g.onStopLocalTrack=v;g.onUnmuteLocalTrack=w;g.onApplyMediaUpdate=a;g.applyMediaStates=x;g.startTslog=e}),98);
__d("ZenonPeerConnectionSMGuards",["ZenonDebugLogger","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=b.type==="applyRemoteSdp"&&b.payload.sdp.type==="offer";c("ZenonDebugLogger").getInstance().logGuardsResults("applyRemoteOfferSdpGuard",a);return a}function b(a,b){a=b.type==="applyRemoteSdp"&&b.payload.sdp.type==="answer";c("ZenonDebugLogger").getInstance().logGuardsResults("applyRemoteAnswerSdpGuard",a);return a}function d(a,b){a=b.type==="iceConnectionStateChange"&&(b.payload.iceConnectionState==="connected"||b.payload.iceConnectionState==="completed");c("ZenonDebugLogger").getInstance().logGuardsResults("iceConnectedEventGuard",a);return a}function e(a){a=a.iceConnectionState==="connected"||a.iceConnectionState==="completed";c("ZenonDebugLogger").getInstance().logGuardsResults("iceConnectedGuard",a);return a}function f(a){a=(a.iceConnectionState==="connected"||a.iceConnectionState==="completed")&&!c("justknobx")._("430");c("ZenonDebugLogger").getInstance().logGuardsResults("iceConnectedGuardLegacy",a);return a}function h(a){a=a.iceConnectionState!=="connected"&&a.iceConnectionState!=="completed"&&!c("justknobx")._("430");c("ZenonDebugLogger").getInstance().logGuardsResults("iceNotConnectedGuardLegacy",a);return a}function i(a,b){a=b.type==="iceConnectionStateChange"&&b.payload.iceConnectionState==="disconnected";c("ZenonDebugLogger").getInstance().logGuardsResults("iceDisconnectedEventGuard",a);return a}function j(a){a=a.iceConnectionState!=="connected"&&a.iceConnectionState!=="completed";c("ZenonDebugLogger").getInstance().logGuardsResults("iceNotConnectedGuard",a);return a}function k(a){a=(a=a.outstandingLocalOffer)!=null?a:!1;c("ZenonDebugLogger").getInstance().logGuardsResults("outstandingLocalOfferGuard",a);return a}g.applyRemoteOfferSdpGuard=a;g.applyRemoteAnswerSdpGuard=b;g.iceConnectedEventGuard=d;g.iceConnectedGuard=e;g.iceConnectedGuardLegacy=f;g.iceNotConnectedGuardLegacy=h;g.iceDisconnectedEventGuard=i;g.iceNotConnectedGuard=j;g.outstandingLocalOfferGuard=k}),98);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-grammar",[],(function $module_sdp_transform_grammar(global,require,requireDynamic,requireLazy,module,exports){

var grammar = module.exports = {
  v: [{
    name: 'version',
    reg: /^(\d*)$/
  }],
  o: [{ //o=- 20518 0 IN IP4 203.0.113.1
    // NB: sessionId will be a String in most cases because it is huge
    name: 'origin',
    reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,
    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],
    format: '%s %s %d %s IP%d %s'
  }],
  // default parsing of these only (though some of these feel outdated)
  s: [{ name: 'name' }],
  i: [{ name: 'description' }],
  u: [{ name: 'uri' }],
  e: [{ name: 'email' }],
  p: [{ name: 'phone' }],
  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..
  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly
  //k: [{}], // outdated thing ignored
  t: [{ //t=0 0
    name: 'timing',
    reg: /^(\d*) (\d*)/,
    names: ['start', 'stop'],
    format: '%d %d'
  }],
  c: [{ //c=IN IP4 10.47.197.26
    name: 'connection',
    reg: /^IN IP(\d) (\S*)/,
    names: ['version', 'ip'],
    format: 'IN IP%d %s'
  }],
  b: [{ //b=AS:4000
    push: 'bandwidth',
    reg: /^(TIAS|AS|CT|RR|RS):(\d*)/,
    names: ['type', 'limit'],
    format: '%s:%s'
  }],
  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31
    // NB: special - pushes to session
    // TODO: rtp/fmtp should be filtered by the payloads found here?
    reg: /^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,
    names: ['type', 'port', 'protocol', 'payloads'],
    format: '%s %d %s %s'
  }],
  a: [
    { //a=rtpmap:110 opus/48000/2
      push: 'rtp',
      reg: /^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,
      names: ['payload', 'codec', 'rate', 'encoding'],
      format: function (o) {
        return (o.encoding) ?
          'rtpmap:%d %s/%s/%s':
          o.rate ?
          'rtpmap:%d %s/%s':
          'rtpmap:%d %s';
      }
    },
    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000
      //a=fmtp:111 minptime=10; useinbandfec=1
      push: 'fmtp',
      reg: /^fmtp:(\d*) ([\S| ]*)/,
      names: ['payload', 'config'],
      format: 'fmtp:%d %s'
    },
    { //a=control:streamid=0
      name: 'control',
      reg: /^control:(.*)/,
      format: 'control:%s'
    },
    { //a=rtcp:65179 IN IP4 193.84.77.194
      name: 'rtcp',
      reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,
      names: ['port', 'netType', 'ipVer', 'address'],
      format: function (o) {
        return (o.address != null) ?
          'rtcp:%d %s IP%d %s':
          'rtcp:%d';
      }
    },
    { //a=rtcp-fb:98 trr-int 100
      push: 'rtcpFbTrrInt',
      reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/,
      names: ['payload', 'value'],
      format: 'rtcp-fb:%d trr-int %d'
    },
    { //a=rtcp-fb:98 nack rpsi
      push: 'rtcpFb',
      reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,
      names: ['payload', 'type', 'subtype'],
      format: function (o) {
        return (o.subtype != null) ?
          'rtcp-fb:%s %s %s':
          'rtcp-fb:%s %s';
      }
    },
    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
      //a=extmap:1/recvonly URI-gps-string
      push: 'ext',
      reg: /^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,
      names: ['value', 'direction', 'uri', 'config'],
      format: function (o) {
        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');
      }
    },
    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32
      push: 'crypto',
      reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,
      names: ['id', 'suite', 'config', 'sessionConfig'],
      format: function (o) {
        return (o.sessionConfig != null) ?
          'crypto:%d %s %s %s':
          'crypto:%d %s %s';
      }
    },
    { //a=setup:actpass
      name: 'setup',
      reg: /^setup:(\w*)/,
      format: 'setup:%s'
    },
    { //a=mid:1
      name: 'mid',
      reg: /^mid:([^\s]*)/,
      format: 'mid:%s'
    },
    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a
      name: 'msid',
      reg: /^msid:(.*)/,
      format: 'msid:%s'
    },
    { //a=ptime:20
      name: 'ptime',
      reg: /^ptime:(\d*)/,
      format: 'ptime:%d'
    },
    { //a=maxptime:60
      name: 'maxptime',
      reg: /^maxptime:(\d*)/,
      format: 'maxptime:%d'
    },
    { //a=sendrecv
      name: 'direction',
      reg: /^(sendrecv|recvonly|sendonly|inactive)/
    },
    { //a=ice-lite
      name: 'icelite',
      reg: /^(ice-lite)/
    },
    { //a=ice-ufrag:F7gI
      name: 'iceUfrag',
      reg: /^ice-ufrag:(\S*)/,
      format: 'ice-ufrag:%s'
    },
    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g
      name: 'icePwd',
      reg: /^ice-pwd:(\S*)/,
      format: 'ice-pwd:%s'
    },
    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33
      name: 'fingerprint',
      reg: /^fingerprint:(\S*) (\S*)/,
      names: ['type', 'hash'],
      format: 'fingerprint:%s %s'
    },
    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host
      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10
      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10
      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10
      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10
      push:'candidates',
      reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],
      format: function (o) {
        var str = 'candidate:%s %d %s %d %s %d typ %s';

        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';

        // NB: candidate has three optional chunks, so %void middles one if it's missing
        str += (o.tcptype != null) ? ' tcptype %s' : '%v';

        if (o.generation != null) {
          str += ' generation %d';
        }

        str += (o['network-id'] != null) ? ' network-id %d' : '%v';
        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';
        return str;
      }
    },
    { //a=end-of-candidates (keep after the candidates line for readability)
      name: 'endOfCandidates',
      reg: /^(end-of-candidates)/
    },
    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...
      name: 'remoteCandidates',
      reg: /^remote-candidates:(.*)/,
      format: 'remote-candidates:%s'
    },
    { //a=ice-options:trickle fb-force-5245
      name: 'iceOptions',
      reg: /^ice-options:(.*)/,
      format: 'ice-options:%s'
    },
    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1
      push: 'ssrcs',
      reg: /^ssrc:(\d*) ([\w_]*)(?::(.*))?/,
      names: ['id', 'attribute', 'value'],
      format: function (o) {
        var str = 'ssrc:%d';
        if (o.attribute != null) {
          str += ' %s';
          if (o.value != null) {
            str += ':%s';
          }
        }
        return str;
      }
    },
    { //a=ssrc-group:FEC 1 2
      //a=ssrc-group:FEC-FR 3004364195 1080772241
      push: 'ssrcGroups',
      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E
      reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,
      names: ['semantics', 'ssrcs'],
      format: 'ssrc-group:%s %s'
    },
    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV
      name: 'msidSemantic',
      reg: /^msid-semantic:\s?(\w*) (\S*)/,
      names: ['semantic', 'token'],
      format: 'msid-semantic: %s %s' // space after ':' is not accidental
    },
    { //a=group:BUNDLE audio video
      push: 'groups',
      reg: /^group:(\w*) (.*)/,
      names: ['type', 'mids'],
      format: 'group:%s %s'
    },
    { //a=rtcp-mux
      name: 'rtcpMux',
      reg: /^(rtcp-mux)/
    },
    { //a=rtcp-rsize
      name: 'rtcpRsize',
      reg: /^(rtcp-rsize)/
    },
    { //a=sctpmap:5000 webrtc-datachannel 1024
      name: 'sctpmap',
      reg: /^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,
      names: ['sctpmapNumber', 'app', 'maxMessageSize'],
      format: function (o) {
        return (o.maxMessageSize != null) ?
          'sctpmap:%s %s %s' :
          'sctpmap:%s %s';
      }
    },
    { //a=x-google-flag:conference
      name: 'xGoogleFlag',
      reg: /^x-google-flag:([^\s]*)/,
      format: 'x-google-flag:%s'
    },
    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0
      push: 'rids',
      reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,
      names: ['id', 'direction', 'params'],
      format: function (o) {
        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';
      }
    },
    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]
      //a=imageattr:* send [x=800,y=640] recv *
      //a=imageattr:100 recv [x=320,y=240]
      push: 'imageattrs',
      reg: new RegExp(
        //a=imageattr:97
        '^imageattr:(\\d+|\\*)' +
        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]
        '[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)' +
        //recv [x=330,y=250]
        '(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?'
      ),
      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],
      format: function (o) {
        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');
      }
    },
    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8
      //a=simulcast:recv 1;4,5 send 6;7
      name: 'simulcast',
      reg: new RegExp(
        //a=simulcast:
        '^simulcast:' +
        //send 1,2,3;~4,~5
        '(send|recv) ([a-zA-Z0-9\\-_~;,]+)' +
        //space + recv 6;~7,~8
        '(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?' +
        //end
        '$'
      ),
      names: ['dir1', 'list1', 'dir2', 'list2'],
      format: function (o) {
        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');
      }
    },
    { //Old simulcast draft 03 (implemented by Firefox)
      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03
      //a=simulcast: recv pt=97;98 send pt=97
      //a=simulcast: send rid=5;6;7 paused=6,7
      name: 'simulcast_03',
      reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/,
      names: ['value'],
      format: 'simulcast: %s'
    },
    {
      //a=framerate:25
      //a=framerate:29.97
      name: 'framerate',
      reg: /^framerate:(\d+(?:$|\.\d+))/,
      format: 'framerate:%s'
    },
    { // any a= that we don't understand is kepts verbatim on media.invalid
      push: 'invalid',
      names: ['value']
    }
  ]
};

// set sensible defaults to avoid polluting the grammar with boring details
Object.keys(grammar).forEach(function (key) {
  var objs = grammar[key];
  objs.forEach(function (obj) {
    if (!obj.reg) {
      obj.reg = /(.*)/;
    }
    if (!obj.format) {
      obj.format = '%s';
    }
  });
});

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-parser",["sdp-transform-grammar"],(function $module_sdp_transform_parser(global,require,requireDynamic,requireLazy,module,exports){

var toIntIfInt = function (v) {
  return String(Number(v)) === v ? Number(v) : v;
};

var attachProperties = function (match, location, names, rawName) {
  if (rawName && !names) {
    location[rawName] = toIntIfInt(match[1]);
  }
  else {
    for (var i = 0; i < names.length; i += 1) {
      if (match[i+1] != null) {
        location[names[i]] = toIntIfInt(match[i+1]);
      }
    }
  }
};

var parseReg = function (obj, location, content) {
  var needsBlank = obj.name && obj.names;
  if (obj.push && !location[obj.push]) {
    location[obj.push] = [];
  }
  else if (needsBlank && !location[obj.name]) {
    location[obj.name] = {};
  }
  var keyLocation = obj.push ?
    {} :  // blank object that will be pushed
    needsBlank ? location[obj.name] : location; // otherwise, named location or root

  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);

  if (obj.push) {
    location[obj.push].push(keyLocation);
  }
};

var grammar = require('sdp-transform-grammar');
var validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);

exports.parse = function (sdp) {
  var session = {}
    , media = []
    , location = session; // points at where properties go under (one of the above)

  // parse lines we understand
  sdp.split(/(\r\n|\r|\n)/).filter(validLine).forEach(function (l) {
    var type = l[0];
    var content = l.slice(2);
    if (type === 'm') {
      media.push({rtp: [], fmtp: []});
      location = media[media.length-1]; // point at latest media line
    }

    for (var j = 0; j < (grammar[type] || []).length; j += 1) {
      var obj = grammar[type][j];
      if (obj.reg.test(content)) {
        return parseReg(obj, location, content);
      }
    }
  });

  session.media = media; // link it up
  return session;
};

var paramReducer = function (acc, expr) {
  var s = expr.split(/=(.+)/, 2);
  if (s.length === 2) {
    acc[s[0]] = toIntIfInt(s[1]);
  }
  return acc;
};

exports.parseParams = function (str) {
  return str.split(/\;\s?/).reduce(paramReducer, {});
};

// For backward compatibility - alias will be removed in 3.0.0
exports.parseFmtpConfig = exports.parseParams;

exports.parsePayloads = function (str) {
  return str.split(' ').map(Number);
};

exports.parseRemoteCandidates = function (str) {
  var candidates = [];
  var parts = str.split(' ').map(toIntIfInt);
  for (var i = 0; i < parts.length; i += 3) {
    candidates.push({
      component: parts[i],
      ip: parts[i + 1],
      port: parts[i + 2]
    });
  }
  return candidates;
};

exports.parseImageAttributes = function (str) {
  return str.split(' ').map(function (item) {
    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});
  });
};

exports.parseSimulcastStreamList = function (str) {
  return str.split(';').map(function (stream) {
    return stream.split(',').map(function (format) {
      var scid, paused = false;

      if (format[0] !== '~') {
        scid = toIntIfInt(format);
      } else {
        scid = toIntIfInt(format.substring(1, format.length));
        paused = true;
      }

      return {
        scid: scid,
        paused: paused
      };
    });
  });
};

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform-writer",["sdp-transform-grammar"],(function $module_sdp_transform_writer(global,require,requireDynamic,requireLazy,module,exports){

var grammar = require('sdp-transform-grammar');

// customized util.format - discards excess arguments and can void middle ones
var formatRegExp = /%[sdv%]/g;
var format = function (formatStr) {
  var i = 1;
  var args = arguments;
  var len = args.length;
  return formatStr.replace(formatRegExp, function (x) {
    if (i >= len) {
      return x; // missing argument
    }
    var arg = args[i];
    i += 1;
    switch (x) {
    case '%%':
      return '%';
    case '%s':
      return String(arg);
    case '%d':
      return Number(arg);
    case '%v':
      return '';
    }
  });
  // NB: we discard excess arguments - they are typically undefined from makeLine
};

var makeLine = function (type, obj, location) {
  var str = obj.format instanceof Function ?
    (obj.format(obj.push ? location : location[obj.name])) :
    obj.format;

  var args = [type + '=' + str];
  if (obj.names) {
    for (var i = 0; i < obj.names.length; i += 1) {
      var n = obj.names[i];
      if (obj.name) {
        args.push(location[obj.name][n]);
      }
      else { // for mLine and push attributes
        args.push(location[obj.names[i]]);
      }
    }
  }
  else {
    args.push(location[obj.name]);
  }
  return format.apply(null, args);
};

// RFC specified order
// TODO: extend this with all the rest
var defaultOuterOrder = [
  'v', 'o', 's', 'i',
  'u', 'e', 'p', 'c',
  'b', 't', 'r', 'z', 'a'
];
var defaultInnerOrder = ['i', 'c', 'b', 'a'];


module.exports = function (session, opts) {
  opts = opts || {};
  // ensure certain properties exist
  if (session.version == null) {
    session.version = 0; // 'v=0' must be there (only defined version atm)
  }
  if (session.name == null) {
    session.name = ' '; // 's= ' must be there if no meaningful name set
  }
  session.media.forEach(function (mLine) {
    if (mLine.payloads == null) {
      mLine.payloads = '';
    }
  });

  var outerOrder = opts.outerOrder || defaultOuterOrder;
  var innerOrder = opts.innerOrder || defaultInnerOrder;
  var sdp = [];

  // loop through outerOrder for matching properties on session
  outerOrder.forEach(function (type) {
    grammar[type].forEach(function (obj) {
      if (obj.name in session && session[obj.name] != null) {
        sdp.push(makeLine(type, obj, session));
      }
      else if (obj.push in session && session[obj.push] != null) {
        session[obj.push].forEach(function (el) {
          sdp.push(makeLine(type, obj, el));
        });
      }
    });
  });

  // then for each media line, follow the innerOrder
  session.media.forEach(function (mLine) {
    sdp.push(makeLine('m', grammar.m[0], mLine));

    innerOrder.forEach(function (type) {
      grammar[type].forEach(function (obj) {
        if (obj.name in mLine && mLine[obj.name] != null) {
          sdp.push(makeLine(type, obj, mLine));
        }
        else if (obj.push in mLine && mLine[obj.push] != null) {
          mLine[obj.push].forEach(function (el) {
            sdp.push(makeLine(type, obj, el));
          });
        }
      });
    });
  });

  return sdp.join('\r\n') + '\r\n';
};

/*  */}),null);
/**
 * Released under the MIT license. Copyright (c) 2013 Eirik Albrigtsen.
 *
 * @nolint
 * @preserve-header
 * @preserve-whitespace
 */
__d("sdp-transform",["sdp-transform-parser","sdp-transform-writer"],(function $module_sdp_transform(global,require,requireDynamic,requireLazy,module,exports){

var parser = require('sdp-transform-parser');
var writer = require('sdp-transform-writer');

exports.write = writer;
exports.parse = parser.parse;
exports.parseFmtpConfig = parser.parseFmtpConfig;
exports.parseParams = parser.parseParams;
exports.parsePayloads = parser.parsePayloads;
exports.parseRemoteCandidates = parser.parseRemoteCandidates;
exports.parseImageAttributes = parser.parseImageAttributes;
exports.parseSimulcastStreamList = parser.parseSimulcastStreamList;

/*  */}),null);
/**
 * Copyright @ 2015 Atlassian Pty Ltd
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Modified by Meta.
 *
 * @emails oncall+rp_rooms_infra_www
 * 
 * @format
 * @preserve-header
 * @preserve-whitespace
 */__d("ZenonSDPInteropTransform",["sdp-transform"],(function $module_ZenonSDPInteropTransform(global,require,importDefault,importNamespace,requireLazy,module,exports){

"use strict";










exports.write=function(
session,
opts,
options)
{
if(
session!==undefined&&
session.media!==undefined&&
Array.isArray(session.media))
{
session.media.forEach(function(mLine){







var groupedSsrcs=[];
var ungroupedSsrcs=Object.keys(mLine.sources||{});


if(mLine.ssrcGroups!==undefined&&Array.isArray(mLine.ssrcGroups)){
mLine.ssrcGroups.forEach(function(ssrcGroup){
if(ssrcGroup.ssrcs!==undefined&&Array.isArray(ssrcGroup.ssrcs)){
var ssrcsArray=ssrcGroup.ssrcs;

groupedSsrcs=groupedSsrcs.concat(ssrcsArray);
ungroupedSsrcs=ungroupedSsrcs.filter(
function(ssrc){return ssrcsArray.indexOf(ssrc)===-1;});

ssrcGroup.ssrcs=ssrcsArray.join(" ");
}
});
}


if(
mLine.sources!==undefined&&
Object.keys(mLine.sources).length!==0)
{
var mLine_sources=mLine.sources;
var alreadyAddedSsrcs=new Set();
var mLine_ssrcs=[];
groupedSsrcs.concat(ungroupedSsrcs).forEach(function(ssrc){
var source=mLine_sources[ssrc];
Object.keys(source).forEach(function(attribute){
var newSsrcKey=[
ssrc,
String(attribute),
String(source[attribute])].
join("|");
if(!alreadyAddedSsrcs.has(newSsrcKey)){
mLine_ssrcs.push({
attribute:String(attribute),
id:parseInt(ssrc,10),
value:String(source[attribute])});

alreadyAddedSsrcs.add(newSsrcKey);
}
});
});
mLine.ssrcs=mLine_ssrcs;
if(options&&options.iceOptions){
mLine.iceOptions=options.iceOptions;
}
delete mLine.sources;
}
});
}


if(
session!==undefined&&
session.groups!==undefined&&
Array.isArray(session.groups))
{
session.groups.forEach(function(g){
if(g.mids!==undefined&&Array.isArray(g.mids)){
g.mids=g.mids.join(" ");
}
});
}

return importDefault("sdp-transform").write(session,opts);
};

exports.parse=function(sdp){
var session=importDefault("sdp-transform").parse(sdp);

if(
session!==undefined&&
session.media!==undefined&&
Array.isArray(session.media))
{
session.media.forEach(function(mLine){

if(mLine.ssrcs!==undefined&&Array.isArray(mLine.ssrcs)){
mLine.sources={};
mLine.ssrcs.forEach(function(ssrc){
if(!mLine.sources[ssrc.id]){
mLine.sources[ssrc.id]={};
}
mLine.sources[ssrc.id][ssrc.attribute]=ssrc.value;
});

delete mLine.ssrcs;
}


if(mLine.ssrcGroups!==undefined&&Array.isArray(mLine.ssrcGroups)){
mLine.ssrcGroups.forEach(function(ssrcGroup){
if(typeof ssrcGroup.ssrcs==="string"){
ssrcGroup.ssrcs=ssrcGroup.ssrcs.split(" ");
}
});
}
});
}

if(
session!==undefined&&
session.groups!==undefined&&
Array.isArray(session.groups))
{
session.groups.forEach(function(g){
if(typeof g.mids==="string"){
g.mids=g.mids.split(" ");
}
});
}

return session;
};}),34);
__d("ZenonSDP",["ZenonSDPInteropTransform","gkx","nullthrows","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c){this.$1={};var e=a.sdp;e!=null&&(this.$1=d("ZenonSDPInteropTransform").parse(e));this.$3=a.type;this.$2=b;this.$4=c}var b=a.prototype;b.$5=function(a,b,c){a=a.split(";");var d=a.findIndex(function(a){return a.startsWith(b+"=")});c=b+"="+c;d>=0?a[d]=c:a.push(c);return""+a.join(";")};b.getMedia=function(){var a=this.$1.media;return a};b.getGroups=function(){var a;return(a=this.$1.groups)!=null?a:null};b.getMsidSemantic=function(){return this.$1.msidSemantic};b.getMediaCname=function(){var a="",b=this.$1.media;b!=null&&b.some(function(b){return b.sources==null?!1:Object.keys(b.sources).some(function(d){if(d!=null&&typeof d==="string"){d=c("nullthrows")(b.sources)[d];if(d!=null&&d.cname!=null){a=d.cname;return!0}}return!1})});return a};b.getTrackIdAndCnameMap=function(){var a=this,b=new Map(),c=this.$1.media;c.forEach(function(c){var d=c.msid;c=c.sources;d=a.$6(d);c=a.$7(c);d!=null&&c!=null&&b.set(d,c)});return b};b.$7=function(a){var b=null;a!=null&&Object.keys(a).some(function(d){if(d!=null&&typeof d==="string"){d=c("nullthrows")(a)[d];if(d!=null&&d.cname!=null){b=d.cname;return!0}}return!1});return b};b.$6=function(a){if(a!=null){a=a.split(" ");if(a.length>=2)return a[1]}return null};b.addFmtpConfig=function(a,b,c){var d=this,e=this.$1.media;e!=null&&e.forEach(function(e){e.rtp.filter(function(b){return b.codec===a}).forEach(function(a){var f=e.fmtp.find(function(b){return b.payload===a.payload});f==null?e.fmtp.push({config:b+"="+c,payload:a.payload}):f.config=d.$5(f.config,b,c)})})};b.maybeAddPtimeForOpusOnly=function(a){var b=this.$1.media;if(b==null)return;b.forEach(function(b){if(b.type!=="audio")return;var c=b.rtp.filter(function(a){return a.codec!=="opus"}).length>=1;if(c)return;c=b.rtp.find(function(a){return a.codec==="opus"});if(c==null)return;if(b.ptime!=null)return;b.ptime=a})};b.addAudioNACK=function(){var a=this.$1.media;a!=null&&a.forEach(function(a){if(a.type!=="audio")return;a.rtcpFb==null&&(a.rtcpFb=[]);a.rtp.forEach(function(b){var c;if(!((c=a.rtcpFb)==null?void 0:c.some(function(a){return a.payload===b.payload&&a.type==="nack"}))){(c=a.rtcpFb)==null?void 0:c.push({payload:b.payload,type:"nack"})}})})};b.replaceAudioCname=function(a){var b=this.$1.media;b!=null&&b.forEach(function(b){b.type==="audio"&&b.sources!=null&&Object.keys(b.sources).forEach(function(d){if(d!=null&&typeof d==="string"){d=c("nullthrows")(b.sources)[d];d!=null&&d.cname!=null&&(d.cname=a+d.cname)}})})};b.filterExtension=function(a){var b=this.$1.media;b!=null&&b.forEach(function(b){b.type==="video"&&b.ext!=null&&(b.ext=b.ext.filter(function(b){return!b.uri.includes(a)}))})};b.useDTLSOverCrypto=function(){var a=this.$1.media;a!=null&&a.forEach(function(a){a.fingerprint!=null&&delete a.crypto})};b.addSetupActPass=function(){if(this.$3==="offer"){var a=this.$1.media;a!=null&&a.forEach(function(a){a.setup==null&&(a.setup="actpass")})}};b.removeCodec=function(a){var b=this.$1.media;b!=null&&b.forEach(function(b){var c=b.rtp.filter(function(b){return b.codec===a}).map(function(a){a=a.payload;return a}),d=b.fmtp.filter(function(a){a=a.config.match(/apt=(\d*)/);return a!=null?c.includes(Number(a[1])):!1}).map(function(a){a=a.payload;return a}),e=c.concat(d);if(e.length<1)return;b.rtp=b.rtp.filter(function(a){return!e.includes(a.payload)});b.fmtp=b.fmtp.filter(function(a){return!e.includes(a.payload)});b.rtcpFb!=null&&(b.rtcpFb=b.rtcpFb.filter(function(a){return!e.includes(a.payload)}));b.rtcpFbTrrInt!=null&&(b.rtcpFbTrrInt=b.rtcpFbTrrInt.filter(function(a){return!e.includes(a.payload)}));d=new RegExp("("+e.join("|")+") ?","g");b.payloads=b.payloads.replace(d,"").trim()})};b.preferCodec=function(a,b){var c=b.preferredCodec,d=b.preferredCodecRate;b=this.$1.media;b!=null&&b.forEach(function(b){if(b.type===a){var e=b.rtp.find(function(a){return a.codec===c&&a.rate===d});e!=null&&(b.payloads=b.payloads.replace(e.payload+" ",""),b.payloads=e.payload+" "+b.payloads)}})};b.mungeInactiveMediaSSRC=function(a){var b=new Map();a!=null&&a.$1.media!=null&&a.$1.media.forEach(function(a){a.sources!=null&&a.mid!=null&&b.set(a.mid,a.sources)});a=this.$1.media;a==null?void 0:a.forEach(function(a){if(a.mid!=null&&a.direction==="inactive"&&a.sources==null){var c=b.get(a.mid);c!=null&&(a.sources=c)}})};b.preferH264Codec=function(a){var b=this.$1.media;b!=null&&b.forEach(function(b){if(b.type==="video"){var c=[];b.rtp.forEach(function(a){a.codec==="H264"&&c.push(a.payload)});var d=a.levelAsymmetryAllowed?"1":"0",e=a.packetizationMode?"1":"0",f=new RegExp("level-asymmetry-allowed="+d+";packetization-mode="+e+";profile-level-id="+a.profileLevelId);d=b.fmtp.find(function(a){return a.config.match(f)&&c.includes(a.payload)});d!=null&&(b.payloads=b.payloads.replace(d.payload+" ",""),b.payloads=d.payload+" "+b.payloads)}})};b.stripDataChannel=function(){var a=this.$1,b=a.groups;a=a.media;var c=null;a!=null&&a.forEach(function(a){a.type==="application"&&(a.port=0,a.protocol="UDP/DTLS/SCTP",c=typeof a.mid==="number"?a.mid.toString():a.mid,a.rtp=[],a.payloads="webrtc-datachannel")});b!=null&&c!==null&&b.forEach(function(a){var b=typeof a.mids==="string"?a.mids.split(" "):a.mids;a.mids=b.filter(function(a){return a!==c})})};b.convertMediaSetupActpass=function(){var a=this.$1.media;if(a==null)return;a.forEach(function(a){if(a.type==="application")return;a.setup="actpass"})};b.copyWithTypeAndActpass=function(a){a=this.copyWithType(a);a.convertMediaSetupActpass();return a};b.copyWithType=function(b){return new a({sdp:this.toDesc().sdp,type:b},this.$2,this.$4)};b.setVersion=function(a){this.$1.origin.sessionVersion=a};b.getSdpFormat=function(){return this.$2};b.getType=function(){return this.$3};b.toDesc=function(){var a=function(a){return a!=null&&a.split(" ").includes("renomination")},b="trickle fb-force-5245";(this.isRemote()?this.$1.media.every(function(b){return a(b.iceOptions)}):c("gkx")("3545"))&&(b+=" renomination");return{sdp:d("ZenonSDPInteropTransform").write(this.$1,{},{iceOptions:b}),type:this.$3}};b.isRemote=function(){return this.$4==="remote"};b.toLoggingString=function(){var a="\n",b=[" IP4 "," IP6 "],c=this.toDesc().sdp.split(a);c.forEach(function(a,d){a.startsWith("a=crypto:")?c[d]="a=crypto:**-----**":a.startsWith("a=candidate:")?c[d]="a=candidate:**-----**":b.forEach(function(b){var e=a.indexOf(b);e!==-1&&(c[d]=a.slice(0,e+b.length)+"**-----**")})});return c.join(a)};b.enableExtension=function(a,b,c){var d=this.$1.media;d.forEach(function(d){var e;d.ext==null&&(d.ext=[]);e=(e=(e=d.ext)==null?void 0:e.some(function(b){return b.uri===a}))!=null?e:!1;if(e)return;if(b!==""&&d.type!==b)return;(e=d.ext)==null?void 0:e.push({uri:a,value:c})})};b.updateMSection=function(a,b){b=d("ZenonSDPInteropTransform").parse(b);b=b.media;if(b.length<1)throw c("unrecoverableViolation")("Could not parse body from delta SDP","rtc_www");b=b[0];var e=this.$1.media;a<e.length?e[a]=b:e.push(b)};b.updateMids=function(a){var b;b=(b=this.$1.groups)!=null?b:[];var c=b.find(function(a){return a.type==="BUNDLE"});if(c){var d;typeof c.mids==="string"?d=c.mids.split(" "):d=c.mids;d=new Set([].concat(d,a));c.mids=Array.from(d)}else b.push({mids:a,type:"BUNDLE"}),this.$1.groups=b};b.updateMsidSemantic=function(){var a=this.$1.media,b=new Set();a.forEach(function(a){a=(a=a.msid)==null?void 0:a.split(" ");a!=null&&a.length>0&&a[0].length>0&&a[0]!=="-"&&b.add(a[0])});this.$1.msidSemantic={semantic:"WMS",token:Array.from(b).join(" ")}};return a}();g["default"]=a}),98);
__d("ZenonPeerConnectionSdpActions",["Promise","ZenonBrowsers","ZenonInfraActionsLogger","ZenonPeerConnectionMediaActions","ZenonSDP","regeneratorRuntime","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){a.onRemoteSdpSet()};e=function(a,e){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:if(!(e.type!=="remoteSdpFailed")){i.next=2;break}return i.abrupt("return");case 2:c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"trying to rollback to last successful sdp pair",sdpFormat:a.sdpManager.getSdpFormat()});if(!d("ZenonBrowsers").supportsRollback()){i.next=8;break}i.next=6;return b("regeneratorRuntime").awrap(a.sdpManager.rollbackSdp());case 6:i.next=15;break;case 8:if(!(a.lastSuccessfulSdpPair==null)){i.next=10;break}throw c("unrecoverableViolation")("No last successfully negotiated SDP pair, should never happen here","rtc_www");case 10:f=a.lastSuccessfulSdpPair,g=f.localSdp,h=f.remoteSdp;i.next=13;return b("regeneratorRuntime").awrap(a.sdpManager.setLocalSdp(g));case 13:i.next=15;return b("regeneratorRuntime").awrap(a.sdpManager.setRemoteSdp(h,a.logEvent));case 15:c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"successful rollback to last successful sdp pair",sdpFormat:a.sdpManager.getSdpFormat()});case 16:case"end":return i.stop()}},null,this)};f=function(a,d){var e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:if(!(d.type==="applyLocalSdp"||d.type==="localMediaStateUpdateRetry"||d.type==="iceRestart")){h.next=8;break}e=d.type==="iceRestart";f=a.localMediaStateVersion+1;h.next=5;return b("regeneratorRuntime").awrap(a.sdpManager.createAndSetLocalSdp(f,"offer",{iceRestart:e}));case 5:c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply local SDP",sdpFormat:a.sdpManager.getSdpFormat()});g=d.type==="localMediaStateUpdateRetry"?null:a.localMediaStateUpdateRetryTimerId;return h.abrupt("return",{localMediaStateUpdateRetryTimerId:g,localMediaStateVersion:f,outstandingLocalOffer:!0});case 8:return h.abrupt("return",b("Promise").resolve({}));case 9:case"end":return h.stop()}},null,this)};var h=function(a,e){var f,g,h,i,j,k,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:if(!(e.type==="applyRemoteSdp")){o.next=21;break}f=a.mediaChannelManager,g=a.sdpManager;h=e.payload.sdp,i=h.sdp,j=h.type;if(!(j==="answer")){o.next=9;break}a.logEvent({name:"setRemoteSdpAnswer"});o.next=7;return b("regeneratorRuntime").awrap(g.setRemoteSdp(new(c("ZenonSDP"))({sdp:i,type:j},f.getSdpFormat(),"remote"),a.logEvent));case 7:a.logEvent({name:"endSetRemoteDescription"}),c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply remote answer",sdpFormat:a.sdpManager.getSdpFormat()});case 9:d("ZenonPeerConnectionMediaActions").applyMediaStates(f,e.payload.mediaStates);k=e.payload.renegotiationOffer;if(!(k!=null)){o.next=19;break}l=k.sdp,m=k.type;o.next=15;return b("regeneratorRuntime").awrap(g.setRemoteSdp(new(c("ZenonSDP"))({sdp:l,type:m},f.getSdpFormat(),"remote"),a.logEvent));case 15:n=a.localMediaStateVersion+1;o.next=18;return b("regeneratorRuntime").awrap(a.sdpManager.createAndSetLocalSdp(n,"answer"));case 18:c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Apply renegotiation offer and set local answer",sdpFormat:a.sdpManager.getSdpFormat()});case 19:e.payload.source==="joinResponse"?a.logEvent({name:"inviteResponseProcessed"}):e.payload.source==="serverMediaUpdateRequest"&&e.payload.sdp.type==="answer"&&a.logEvent({name:"smuWithAnswerProcessed"}),e.payload.onProcessed&&e.payload.onProcessed();case 21:case"end":return o.stop()}},null,this)},i=function(a,e){var f,g,h,i,j,k,l,m,n,o;return b("regeneratorRuntime").async(function(p){while(1)switch(p.prev=p.next){case 0:f=a.mediaChannelManager,g=a.sdpManager;if(!(e.type==="applyRemoteSdp")){p.next=18;break}h=e.payload.sdp;if(!(h.type==="offer")){p.next=18;break}a.logEvent({name:"setRemoteSdpOffer"});j=f.getSdpFormat();h.update?(i=(k=a.sdpManager.getRemoteSdp())!=null?k:new(c("ZenonSDP"))({type:h.type},j,"remote"),l=Object.keys(h.update.media),l.forEach(function(a){var b=h.update.media[a].body;i.updateMSection(parseInt(a,10),b)}),i.setVersion(h.version),i.updateMids(l.map(function(a){return h.update.media[a].mid})),i.updateMsidSemantic()):i=new(c("ZenonSDP"))({sdp:h.sdp,type:h.type},j,"remote");p.next=9;return b("regeneratorRuntime").awrap(g.setRemoteSdp(i,a.logEvent));case 9:m=p.sent;d("ZenonPeerConnectionMediaActions").applyMediaStates(f,e.payload.mediaStates,h.update==null);e.payload.onProcessed&&e.payload.onProcessed();n=a.localMediaStateVersion+1;p.next=15;return b("regeneratorRuntime").awrap(a.sdpManager.createAndSetLocalSdp(n,"answer"));case 15:o=p.sent;c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"apply remote offer and set local answer",sdpFormat:a.sdpManager.getSdpFormat()});return p.abrupt("return",{lastSuccessfulSdpPair:{localSdp:o.copyWithTypeAndActpass("offer"),remoteSdp:m.copyWithType("answer")},localMediaStateVersion:n});case 18:return p.abrupt("return",{});case 19:case"end":return p.stop()}},null,this)},j=function(a,b){c("ZenonInfraActionsLogger").logError({checkpoint:"Failed to apply remote offer and set local answer: "+b.data.toString(),errorDomain:"ZenonPeerConnectionSdpActions_onApplyRemoteOfferAndSetLocalAnswer",sdpFormat:a.sdpManager.getSdpFormat()})},k=function(a){var b=a.sdpManager.getLocalSdp();if(b==null)throw c("unrecoverableViolation")("Local sdp should never be null after setting remote answer","rtc_www");a=a.sdpManager.getRemoteSdp();if(a==null)throw c("unrecoverableViolation")("Remote sdp should never be null after setting remote answer","rtc_www");return{lastSuccessfulSdpPair:{localSdp:b,remoteSdp:a},outstandingLocalOffer:!1}},l=function(a){a.logEvent({name:"negotiationComplete"})},m=function(a,b){var c=a.sdpManager.getLocalSdp();b=b.data;if(c!==null&&b.localMediaStateVersion!=null){var d=c.toDesc(),e=d.sdp;d=d.type;a.onLocalSdpSet({sdp:e,type:d,version:b.localMediaStateVersion},a.mediaChannelManager.getLocalTracksForMWS())}c!==null&&a.mediaChannelManager.onLocalSdpSet(c);return b};g.onRemoteSdpSet=a;g.applyingLastSuccessfulSdpPair=e;g.applyLocalSdp=f;g.applyRemoteAnswer=h;g.applyRemoteOfferAndSetLocalAnswer=i;g.onApplyRemoteOfferSetLocalAnswerError=j;g.updateSdpPair=k;g.logNegotiationCompleted=l;g.onLocalSdpSet=m}),98);
__d("ZenonPeerConnectionTerminatedState",[],(function(a,b,c,d,e,f){"use strict";a=function(a){a.sdpManager.restartPeerConnection()};f.restart=a}),66);
__d("ZenonPeerConnectionTerminatingState",["FBLogger","Promise","ZenonInfraActionsLogger","ZenonMediaError","qex"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,e){var f;a.mediaChannelManager.stopStatsPolling();(e.type!=="endCall"||e.payload.stopLocalTracks)&&(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"stopping local tracks"}),a.mediaChannelManager.stopLocalTracks());switch(e.type){case"endCall":if(((f=e.payload)==null?void 0:f.restart)!==!0){a.onConnectionDestroyed((f=e.payload.error)!=null?f:null)}break;case"applyLocalSdp":case"error.platform.applyLocalSdpInvoke":a.onConnectionDestroyed(d("ZenonMediaError").ZenonMediaError.SetLocalSdpFailed);break;case"applyRemoteSdp":case"error.platform.applyRemoteSdpInvoke":case"error.platform.renegotiatingInvoke":a.onConnectionDestroyed(d("ZenonMediaError").ZenonMediaError.SetRemoteSdpFailed);break;case"error.platform.rollingSdpBackInvoke":a.onConnectionDestroyed(d("ZenonMediaError").ZenonMediaError.RollbackSdpFailed);break;default:c("FBLogger")("rtc_www").warn("Event "+e.type+" logged as unknown error. Please add a more specific error for this event type.");a.onConnectionDestroyed(d("ZenonMediaError").ZenonMediaError.UnknownError);break}a.sdpManager.closePeerConnection();c("qex")._("1747")&&a.tslogUploader.stopTslogUploadInChunks();a.tslogUploader.logTslog();return b("Promise").resolve(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"cleaning up peer connection"}))};e=function(a,b){};g.cleanUp=a;g.done=e}),98);
__d("ZenonPeerConnectionStateMachine",["ZenonDebugLogger","ZenonInfraActionsLogger","ZenonMWMessageReliabilityLogger","ZenonPeerConnectionDataActions","ZenonPeerConnectionIceActions","ZenonPeerConnectionMediaActions","ZenonPeerConnectionSMGuards","ZenonPeerConnectionSdpActions","ZenonPeerConnectionTerminatedState","ZenonPeerConnectionTerminatingState","ZenonStateMachineBase","qpl","xstate"],(function(a,b,c,d,e,f,g){"use strict";var h={iceConnectionState:"new",iceConnectionTimeoutID:null,lastSuccessfulSdpPair:null,localMediaStateUpdateRetryTimerId:null,localMediaStateVersion:1,outstandingLocalOffer:!1,retryCount:0},i={loggingStateName:"peerConnectionState",name:"PeerConnectionStateMachine",shortname:"Peer Connection",timeoutEvent:d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.STUCK_IN_PEER_CONNECTION_STATE_MACHINE};function j(a){var b;return((b=a.payload)==null?void 0:b.messageID)!=null?String((b=a.payload)==null?void 0:b.messageID):null}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;e===void 0&&(e="init");f=a.call(this,{base:{guards:d("ZenonPeerConnectionSMGuards"),initState:"init"},logging:babelHelpers["extends"]({},i,{eventToLogTimeoutsOn:"applyRemoteSdp",getTransactionId:j,loggableEvents:["applyRemoteSdp"],loggingId:Date.now()}),machine:{context:babelHelpers["extends"]({},h,b),initialState:e,states:m}})||this;f.sm.onTransition(function(a){f.logTransaction(a.event,d("ZenonMWMessageReliabilityLogger").MWMessageReliabilityEvent.PROCESSED_SM_EVENT)});f.sm.onTransition(function(a){c("ZenonInfraActionsLogger").updateCachedValues({peerConnectionState:a.value}),f.logTransition(a),a.value==="terminated"&&c("ZenonDebugLogger").getInstance().endQPL(c("qpl")._(64239068,"6172"),f.loggingId)});c("ZenonDebugLogger").getInstance().startQPL(c("qpl")._(64239068,"6172"),f.loggingId);return f}var e=b.prototype;e.getLocalMediaStateVersion=function(){return this.sm.state.context.localMediaStateVersion};return b}(d("ZenonStateMachineBase").ZenonStateMachineBase);b={actions:[d("ZenonPeerConnectionMediaActions").onApplyMediaUpdate]};e={actions:[d("xstate").assign(c("ZenonPeerConnectionIceActions").onIceConnectionStateChanged)]};f={actions:[d("ZenonPeerConnectionDataActions").onDataChannelMessageReceived]};var k={actions:[d("ZenonPeerConnectionMediaActions").onForceEncodingEnabled]},l={actions:[d("ZenonPeerConnectionMediaActions").onIceCandidateReady]},m={init:{exit:[d("ZenonPeerConnectionMediaActions").startTslog],on:{addLocalTracks:{target:"addingLocalTracks"},applyLocalSdp:{target:"applyingLocalSdp"},applyMediaUpdate:b,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:{cond:d("ZenonPeerConnectionSMGuards").applyRemoteOfferSdpGuard,target:"renegotiating"},createDataChannel:{actions:[d("ZenonPeerConnectionDataActions").onCreateDataChannel]},createDataMessageSubscription:{actions:[d("ZenonPeerConnectionDataActions").onCreateDataMessageSubscription]},dataChannelMessageReceived:f,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceConnectionStateChange:e,localMediaStateUpdateRetry:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onLocalMediaStateUpdateRetry)]},muteLocalTrack:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onMuteLocalTrack)]},removeDataMessageSubscription:{actions:[d("ZenonPeerConnectionDataActions").onRemoveDataMessageSubscription]},removeLocalTrack:{target:"removingLocalTrack"},replaceLocalTrack:{target:"replacingLocalTrack"},setLocalMediaStateVersion:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onSetLocalMediaStateVersion)]},stopLocalTrack:{actions:[d("ZenonPeerConnectionMediaActions").onStopLocalTrack]},unmuteLocalTrack:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onUnmuteLocalTrack)]}}},applyingLocalSdp:{invoke:{id:"applyLocalSdpInvoke",onDone:{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").onLocalSdpSet)],target:"hasLocalSdp"},onError:"terminating",src:d("ZenonPeerConnectionSdpActions").applyLocalSdp},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyMediaUpdate:b,applyLocalSdp:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},rollingSdpBack:{invoke:{id:"rollingSdpBackInvoke",onDone:{target:"connected"},onError:{target:"terminating"},src:d("ZenonPeerConnectionSdpActions").applyingLastSuccessfulSdpPair},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyMediaUpdate:b,applyLocalSdp:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:l,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,remoteSdpFailed:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},hasLocalSdp:{entry:[function(a){return a.mediaChannelManager.setSimulcastSingleLayerParams()}],on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyMediaUpdate:b,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:[{cond:d("ZenonPeerConnectionSMGuards").applyRemoteAnswerSdpGuard,target:"applyingRemoteSdp"},{cond:d("ZenonPeerConnectionSMGuards").applyRemoteOfferSdpGuard,target:"renegotiating"}],remoteSdpFailed:{target:"rollingSdpBack"},createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:l,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},applyingRemoteSdp:{invoke:[{id:"applyRemoteSdpInvoke",onDone:[{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").updateSdpPair)],cond:d("ZenonPeerConnectionSMGuards").iceNotConnectedGuardLegacy,target:"negotiated"},{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").updateSdpPair),c("ZenonPeerConnectionIceActions").onIceConnected],cond:d("ZenonPeerConnectionSMGuards").iceConnectedGuardLegacy,target:"connected"},{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").updateSdpPair),d("ZenonPeerConnectionSdpActions").onRemoteSdpSet],cond:d("ZenonPeerConnectionSMGuards").iceNotConnectedGuard,target:"negotiated"},{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").updateSdpPair),d("ZenonPeerConnectionSdpActions").onRemoteSdpSet],cond:d("ZenonPeerConnectionSMGuards").iceConnectedGuard,target:"connected"}],onError:{target:"terminating"},src:d("ZenonPeerConnectionSdpActions").applyRemoteAnswer}],on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:d("ZenonStateMachineBase").defer,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:l,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},negotiated:{entry:[d("ZenonPeerConnectionSdpActions").logNegotiationCompleted],on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyMediaUpdate:b,applyLocalSdp:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:{actions:[d("ZenonPeerConnectionMediaActions").applyRemoteIceCandidate]},applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:k,iceCandidateReady:l,iceConnectionStateChange:[{actions:[d("xstate").assign(c("ZenonPeerConnectionIceActions").onIceConnectionStateChanged)],cond:d("ZenonPeerConnectionSMGuards").iceConnectedEventGuard,target:"connected"},{actions:[d("xstate").assign(c("ZenonPeerConnectionIceActions").onIceConnectionStateChanged)]}],iceRestart:{target:"applyingLocalSdp"},localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},connected:{on:{addLocalTracks:{target:"addingLocalTracks"},applyLocalSdp:{target:"applyingLocalSdp"},applyMediaUpdate:b,applyRemoteIceCandidate:{actions:[d("ZenonPeerConnectionMediaActions").applyRemoteIceCandidate]},applyRemoteSdp:{cond:d("ZenonPeerConnectionSMGuards").applyRemoteOfferSdpGuard,target:"renegotiating"},createDataChannel:{actions:[d("ZenonPeerConnectionDataActions").onCreateDataChannel]},createDataMessageSubscription:{actions:[d("ZenonPeerConnectionDataActions").onCreateDataMessageSubscription]},dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:k,iceCandidateReady:l,iceConnectionStateChange:[{actions:[d("xstate").assign(c("ZenonPeerConnectionIceActions").onIceConnectionStateChanged)],cond:d("ZenonPeerConnectionSMGuards").iceDisconnectedEventGuard,target:"negotiated"},{actions:[d("xstate").assign(c("ZenonPeerConnectionIceActions").onIceConnectionStateChanged)]}],localMediaStateUpdateRetry:[{cond:d("ZenonPeerConnectionSMGuards").outstandingLocalOfferGuard,target:"applyingLocalSdp"},{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onLocalMediaStateUpdateRetry)]}],muteLocalTrack:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onMuteLocalTrack)]},removeDataMessageSubscription:{actions:[d("ZenonPeerConnectionDataActions").onRemoveDataMessageSubscription]},removeLocalTrack:{target:"removingLocalTrack"},replaceLocalTrack:{target:"replacingLocalTrack"},stopLocalTrack:{actions:[d("ZenonPeerConnectionMediaActions").onStopLocalTrack]},unmuteLocalTrack:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onUnmuteLocalTrack)]}}},addingLocalTracks:{invoke:{id:"addLocalTracksInvoke",onDone:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onAddedLocalTracks)],target:"connected"},onError:{actions:[d("ZenonPeerConnectionMediaActions").onAddLocalTracksError],target:"connected"},src:d("ZenonPeerConnectionMediaActions").onAddingLocalTracks},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:b,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},removingLocalTrack:{invoke:{id:"removeLocalTrackInvoke",onDone:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onRemovedLocalTrack)],target:"connected"},onError:{actions:[d("ZenonPeerConnectionMediaActions").onRemoveLocalTrackError],target:"connected"},src:d("ZenonPeerConnectionMediaActions").onRemovingLocalTrack},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},replacingLocalTrack:{invoke:{id:"replaceLocalTrackInvoke",onDone:{actions:[d("xstate").assign(d("ZenonPeerConnectionMediaActions").onReplacedLocalTrack)],target:"connected"},onError:{actions:[d("ZenonPeerConnectionMediaActions").onReplaceLocalTrackError],target:"connected"},src:d("ZenonPeerConnectionMediaActions").onReplacingLocalTrack},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:f,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceCandidateReady:d("ZenonStateMachineBase").defer,iceConnectionStateChange:e,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},renegotiating:{invoke:{id:"renegotiatingInvoke",onDone:[{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").onLocalSdpSet)],cond:d("ZenonPeerConnectionSMGuards").iceNotConnectedGuard,target:"negotiated"},{actions:[d("xstate").assign(d("ZenonPeerConnectionSdpActions").onLocalSdpSet)],cond:d("ZenonPeerConnectionSMGuards").iceConnectedGuard,target:"connected"}],onError:{actions:[d("ZenonPeerConnectionSdpActions").onApplyRemoteOfferSetLocalAnswerError],target:"terminating"},src:d("ZenonPeerConnectionSdpActions").applyRemoteOfferAndSetLocalAnswer},on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:d("ZenonStateMachineBase").defer,endCall:{target:"terminating"},forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceConnectionStateChange:d("ZenonStateMachineBase").defer,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},terminating:{exit:[d("ZenonPeerConnectionTerminatingState").done],invoke:[{onDone:{target:"terminated"},src:d("ZenonPeerConnectionTerminatingState").cleanUp}],on:{addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:d("ZenonStateMachineBase").defer,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceConnectionStateChange:d("ZenonStateMachineBase").defer,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,restartPeerConnection:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}},terminated:{on:{restartPeerConnection:{actions:[d("ZenonPeerConnectionTerminatedState").restart],target:"init"},addLocalTracks:d("ZenonStateMachineBase").defer,applyLocalSdp:d("ZenonStateMachineBase").defer,applyMediaUpdate:d("ZenonStateMachineBase").defer,applyRemoteIceCandidate:d("ZenonStateMachineBase").defer,applyRemoteSdp:d("ZenonStateMachineBase").defer,createDataChannel:d("ZenonStateMachineBase").defer,createDataMessageSubscription:d("ZenonStateMachineBase").defer,dataChannelMessageReceived:d("ZenonStateMachineBase").defer,forceEncodingEnabled:d("ZenonStateMachineBase").defer,iceConnectionStateChange:d("ZenonStateMachineBase").defer,localMediaStateUpdateRetry:d("ZenonStateMachineBase").defer,muteLocalTrack:d("ZenonStateMachineBase").defer,removeDataMessageSubscription:d("ZenonStateMachineBase").defer,removeLocalTrack:d("ZenonStateMachineBase").defer,replaceLocalTrack:d("ZenonStateMachineBase").defer,stopLocalTrack:d("ZenonStateMachineBase").defer,unmuteLocalTrack:d("ZenonStateMachineBase").defer}}};g["default"]=a}),98);
__d("ZenonEventListenerCache",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.add=function(a,b){var c=this.getByType(a);c.push(b);this.$1.set(a,c)};b["delete"]=function(a,b){var c=this.getByType(a);c=c.filter(function(a){return a!==b});c.length<1?this.$1["delete"](a):this.$1.set(a,c)};b.forEachEventListener=function(a){var b=this,c=this.getCachedEventTypes();c.forEach(function(c){var d=b.getByType(c);d.forEach(function(b){a(c,b)})})};b.getByType=function(a){return(a=this.$1.get(a))!=null?a:[]};b.getCachedEventTypes=function(){return Array.from(this.$1.keys())};b.getAll=function(){return this.$1};return a}();f["default"]=a}),66);
__d("ZenonRTCPeerConnectionHelper",["FBLogger","RTCPeerConnection"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.signalingState!=="closed"&&a.close()}function b(a,b,d){b===void 0&&(b={});d===void 0&&(d={});try{var e=[{googNumUnsignalledRecvStreams:10},{DtlsSrtpKeyAgreement:!0}];a.getZenonPeerConnectionConfig().isRtpDataChannels()&&e.push({RtpDataChannels:!0});return new(c("RTCPeerConnection"))(babelHelpers["extends"]({},b),babelHelpers["extends"]({optional:e},d))}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Failed to create peer connection")}}function d(a){return a instanceof c("RTCPeerConnection")}g.closePeerConnection=a;g.createPeerConnection=b;g.isRTCPeerConnectionInstance=d}),98);
__d("ZenonSimulcastSdpUtils",["Random","UserAgent","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h="\r\n";function i(a){a=a.filter(function(a){return a.startsWith("a=ssrc:")}).map(function(a){return a.split(" ")[0].split(":")[1]});return new Set(a)}function j(a,b){var c=new RegExp("^a=ssrc:\\d+ "+b+":");b=a.filter(function(a){return c.test(a)})[0];return b?b.split(" ")[1].split(":")[1]:b}function k(a){a=a.filter(function(a){return a.startsWith("a=ssrc-group:FID")}).map(function(a){return a.split(" ")[2]});return new Set(a)}function l(a){var b=new RegExp("^a=ssrc:\\d+ msid:");a=a.filter(function(a){return b.test(a)})[0];a=a.split(" ");return a.length>2?a[2]:null}function m(a,b){var c=[];for(var e=0;e<a;e++){var f=0;while(f===0||b.has(f.toString()))f=d("Random").uint32();b.add(f.toString());c.push(f.toString())}return c}function a(a,b){if(!c("UserAgent").isBrowser("Chrome >= 88")){c("recoverableViolation")("Attempted to add unified-plan simulcast in unsupported browser","rtc_www");return a}if(b<=1||b>3){c("recoverableViolation")("Unsupported number of layers passed: "+b,"rtc_www");return a}var d=a.trim().split(h),e=i(d),f=d.findIndex(function(a){return/^m=video/.test(a)});if(f===-1)return a;a=f+1;while(a<d.length){if(d[a].startsWith("m="))break;a++}a=d.splice(f,a-f);var g=i(a),n=k(a);g=new Set(Array.from(g).filter(function(a){return!n.has(a)}));if(g.size!==1||n.size>1)return[].concat(d.slice(0,f),a,d.slice(f)).join(h);var o=n.size===1;g=Array.from(g)[0];var p="";o&&(p=Array.from(n)[0]);var q=j(a,"cname"),r=j(a,"msid"),s=l(a);s!=null&&(r+=" "+s);var t=j(a,"mslabel"),u=j(a,"label");s=[g].concat(m(b-1,e));g=[];o&&(s.forEach(function(a){return e.add(a)}),g=[p].concat(m(b-1,e)));var v=[];v.push("a=ssrc-group:SIM "+s.join(" "));for(var p=0;p<g.length;p++)v.push("a=ssrc-group:FID "+s[p]+" "+g[p]);b=[];if(o)for(var p=0;p<s.length;p++)b.push(s[p]),b.push(g[p]);else b=s;b.forEach(function(a){v.push("a=ssrc:"+a+" cname:"+q),v.push("a=ssrc:"+a+" msid:"+r),t&&v.push("a=ssrc:"+a+" mslabel:"+t),u&&v.push("a=ssrc:"+a+" label:"+u)});a=a.filter(function(a){return!a.startsWith("a=ssrc")});a=[].concat(a,v);return[].concat(d.slice(0,f),a,d.slice(f)).join(h)+h}g.addSimulcastToChromeOffer=a}),98);
__d("ZenonRTCPeerConnectionWrapper",["FBLogger","Promise","ZenonBrowsers","ZenonEventListenerCache","ZenonInfraActionsLogger","ZenonRTCPeerConnectionHelper","ZenonSDP","ZenonSdpFormat","ZenonSimulcastSdpUtils","ZenonSimulcastUtils","gkx","recoverableViolation","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f){var g=this;b===void 0&&(b={});e===void 0&&(e={});f===void 0&&(f=!1);this.$5=new(c("ZenonEventListenerCache"))();this.$9=!1;this.$10=!1;this.$14=function(a){a=a.channel;var b=g.$7.get(a.label);b!=null&&(a.onmessage=function(a){a=a.data;typeof a==="string"?b.onmessage(a):a instanceof ArrayBuffer&&b.onmessage(new TextDecoder().decode(a))},a.onopen=b.onopen);g.$6.set(a.label,a)};this.$2=a;this.$3=b;this.$4=e;this.$1=d("ZenonRTCPeerConnectionHelper").createPeerConnection(a,b,e);this.$6=new Map();this.$7=new Map();this.$8=f;f&&(this.$9=!0);this.$11=new Map();this.$12=new Map();this.$13=new Map();this.addEventListener("datachannel",this.$14)}var e=a.prototype;e.createOffer=function(a){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:a===void 0&&(a={});f.next=3;return b("regeneratorRuntime").awrap(this.$15(a));case 3:e=f.sent;if(this.$9){if(e.sdp!=null)try{e.sdp=d("ZenonSimulcastSdpUtils").addSimulcastToChromeOffer(e.sdp,d("ZenonSimulcastUtils").getNumLayers())}catch(a){c("ZenonInfraActionsLogger").logError({error:a.toString(),errorDomain:"ZenonRTCPeerConnectionWrapper_createOffer_addSimulcastToChromeOffer"})}this.$9=!1}return f.abrupt("return",new(c("ZenonSDP"))(e,this.getSdpFormat(),"local"));case 6:case"end":return f.stop()}},null,this)};e.rollbackSdp=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return b("regeneratorRuntime").awrap(this.$1.setLocalDescription({type:"rollback"}));case 3:a.next=9;break;case 5:a.prev=5;a.t0=a["catch"](0);c("ZenonInfraActionsLogger").logError({error:a.t0.toString(),errorDomain:"ZenonRTCPeerConnectionWrapper_rollbackSDP",sdpFormat:this.getSdpFormat()});throw a.t0;case 9:case"end":return a.stop()}},null,this,[[0,5]])};e.setLocalDescription=function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.$16(a.getMedia(),this.$11);d=a.toDesc();e.prev=2;if(!(this.getSignalingState()!=="closed")){e.next=6;break}e.next=6;return b("regeneratorRuntime").awrap(this.$1.setLocalDescription(d));case 6:e.next=12;break;case 8:e.prev=8;e.t0=e["catch"](2);c("FBLogger")("rtc_www").catching(e.t0).mustfix("Error processing modern API setLocalDescription in ZenonRTCPeerConnectionWrapper.");throw e.t0;case 12:case"end":return e.stop()}},null,this,[[2,8]])};e.createAnswer=function(){var a;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.$1.createAnswer());case 2:a=d.sent;return d.abrupt("return",new(c("ZenonSDP"))(a,this.getSdpFormat(),"local"));case 4:case"end":return d.stop()}},null,this)};e.setRemoteDescription=function(a){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.$16(a.getMedia(),this.$12);d=a.toDesc();this.$17(d);e.prev=3;e.next=6;return b("regeneratorRuntime").awrap(this.$1.setRemoteDescription(d));case 6:e.next=12;break;case 8:e.prev=8;e.t0=e["catch"](3);c("FBLogger")("rtc_www").catching(e.t0).mustfix("Error processing modern API setRemoteDescription in ZenonRTCPeerConnectionWrapper.");throw e.t0;case 12:case"end":return e.stop()}},null,this,[[3,8]])};e.setRemoteIceCandidate=function(a){if(this.$1.currentRemoteDescription===null){c("FBLogger")("rtc_www").mustfix("Remote ICE candidate should not be applied before remote description");return b("Promise").resolve()}return this.$1.addIceCandidate(a)};e.close=function(){d("ZenonRTCPeerConnectionHelper").closePeerConnection(this.$1)};e.restart=function(){this.$1=d("ZenonRTCPeerConnectionHelper").createPeerConnection(this.$2,this.$3,this.$4),this.addCachedEventListenersToPeerConnection()};e.addEventListener=function(a,b){this.$5.add(a,b),this.$1.addEventListener(a,b)};e.createDataChannel=function(a,b,e,f){if(!d("ZenonBrowsers").isDataChannelSupported())return;var g=this.$6.get(a);if(g==null)if(f){f={onmessage:b,onopen:e};this.$7.set(a,f)}else g=this.$1.createDataChannel(a,this.$18()),g==null&&c("recoverableViolation")("Unable to create requested data channel: "+a,"rtc_www");g!=null&&(g.onmessage=function(a){a=a.data;typeof a==="string"?b(a):a instanceof ArrayBuffer&&b(new TextDecoder().decode(a))},g.onopen=e,this.$6.set(a,g))};e.getDataChannelState=function(a){a=this.$6.get(a);return a==null?void 0:a.readyState};e.sendDataMessage=function(a,b){var d=this.$6.get(a);d!=null?d.send(b):c("recoverableViolation")("Unable to send a message on data channel: "+a,"rtc_www")};e.getCnameFromTrackId=function(a){return(a=this.$13.get(a))!=null?a:null};e.getAllEventListeners=function(){return this.$5.getAll()};e.getEventListenersForType=function(a){return(a=this.$5.getByType(a))!=null?a:[]};e.canAcceptRemoteSdp=function(){return this.$1.iceConnectionState!=="closed"&&this.$1.signalingState!=="closed"};e.removeEventListener=function(a,b){this.$5["delete"](a,b),this.$1.removeEventListener(a,b)};e.removeAllEventListeners=function(){var a=this;this.$5.forEachEventListener(function(b,c){a.$1.removeEventListener(b),a.$5["delete"](b,c)})};e.addCachedEventListenersToPeerConnection=function(){var a=this;this.$5.forEachEventListener(function(b,c){a.$1.addEventListener(b,c)})};e.addTrack=function(a,b){return b==null?this.$1.addTrack(a):this.$1.addTrack(a,b)};e.addTransceiver=function(a,b){return this.$1.addTransceiver(a,b)};e.getTransceivers=function(){return typeof this.$1.getTransceivers==="function"?this.$1.getTransceivers():[]};e.getTransceiverFromSender=function(a){return this.getTransceivers().find(function(b){return b.sender===a})};e.getReceivers=function(){return typeof this.$1.getReceivers==="function"?this.$1.getReceivers():[]};e.getSenders=function(){return typeof this.$1.getSenders==="function"?this.$1.getSenders():[]};e.getStats=function(a){return this.$1.getStats(a)};e.getSignalingState=function(){return this.$1.signalingState};e.removeTrack=function(a){var b=!1;for(var d=this.$1.getSenders(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g.track===a&&(this.$1.removeTrack(g),b=!0)}b||c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"ZenonRTCPeerConnectionWrapper.removeTrack: Could not find sender for track "+a.id,sdpFormat:this.getSdpFormat()})};e.supportsSimulcast=function(){return this.$8};e.getSimulcastInitialized=function(){return this.$10};e.setSimulcastInitialized=function(a){this.$10=a};e.$15=function(a){return b("Promise").resolve(this.$1.createOffer(a))};e.getSdpFormat=function(){return c("ZenonSdpFormat").UNIFIED_PLAN};e.$16=function(a,b){var c=this;a.forEach(function(a){if(a.type!=="application"){var d=a.msid;d=c.getTrackIdFromMsid(d);d!=null&&a.mid!=null&&b.set(String(a.mid),d)}})};e.$18=function(){var a={};c("gkx")("3864")&&(a.negotiated=!1);return a};e.$17=function(a){var b=this,d=a.sdp;a=a.type;d=new(c("ZenonSDP"))({sdp:d,type:a},this.getSdpFormat(),"remote").getTrackIdAndCnameMap();d.forEach(function(a,c){b.$13.set(c,a)})};e.getTrackIdFromMsid=function(a){if(a!=null){a=a.split(" ");if(a.length>=2)return a[1];else c("FBLogger")("rtc_www").warn("MSID did not have an eligible ID for caching")}return null};e.getLocalMWTrackId=function(a){return a!==null?(a=this.$11.get(a))!=null?a:null:null};e.getRemoteMWTrackId=function(a){return a!==null?(a=this.$12.get(a))!=null?a:null:null};e.getCurrentRemoteDescription=function(){return this.$1.currentRemoteDescription!=null?new(c("ZenonSDP"))(this.$1.currentRemoteDescription,this.getSdpFormat(),"remote"):null};e.getDataChannel_TESTONLY=function(a){return this.$6.get(a)};return a}();g["default"]=a}),98);
__d("ZenonSDPRtpHeaderExtensionManager",["ZenonBrowsers","ZenonInfraActionsLogger","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],i="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00",j=0;a=function(){function a(){this.$1=[],this.$2()}var b=a.prototype;b.$2=function(){if(d("ZenonBrowsers").isVideoLayersAllocationSupported()){var a={existingId:j,isRemoteSupported:!0,mediaType:"video",notFoundCounterName:"no_unused_extension_id_found_for_vla",uri:i};this.$1.push(a)}};b.resetRtpHeaderExtensionStatus=function(){this.$1=[],this.$2()};b.setExtensionsSupportedByRemote=function(a){var b=this;this.$1.forEach(function(d){var e=b.$3(a,d.uri);e===j?d.isRemoteSupported=!1:c("justknobx")._("447")&&d.existingId===j&&(d.existingId=e)})};b.enableRegisteredExtensions=function(a){var b=this,d=a.getMedia();if(d==null)return;this.$1.forEach(function(e){if(e.isRemoteSupported){var f=e.existingId!==j?e.existingId:b.$4(d,e);if(f===j)return;e.existingId=f;c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP] enabling header extension for <uri: "+e.uri+", id: "+f+", media type: "+e.mediaType+", >"});a.enableExtension(e.uri,e.mediaType,f)}})};b.$4=function(a,b){var d=new Set(h),e=0;a.forEach(function(a){if(a.ext==null)return;for(var a=a.ext,c=Array.isArray(a),f=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(c){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;if(g.uri===b.uri){e=g.value;return}d["delete"](g.value)}});if(e===j&&d.size===0){b.notFoundCounterName!==""&&c("ZenonInfraActionsLogger").logCounter(b.notFoundCounterName);return j}a=e===j?Array.from(d)[0]:e;return a};b.$3=function(a,b){var c=j;a=a.getMedia();if(a!=null)for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;(f=f.ext)==null?void 0:f.forEach(function(a){a.uri===b&&(c=a.value)})}return c};b.getRegisteredRtpHeaderExtensions=function(){return this.$1};return a}();g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/V9vdYColc4k/
 */
__d("pako-1.0.6",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var a=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined";function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}g.assign=function(a){var c=Array.prototype.slice.call(arguments,1);while(c.length){var d=c.shift();if(!d)continue;if(typeof d!=="object")throw new TypeError(d+"must be non-object");for(var e in d)b(d,e)&&(a[e]=d[e])}return a};g.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var c={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray){a.set(b.subarray(c,c+d),e);return}for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f;d=0;for(b=0,c=a.length;b<c;b++)d+=a[b].length;d=new Uint8Array(d);e=0;for(b=0,c=a.length;b<c;b++)f=a[b],d.set(f,e),e+=f.length;return d}},d={arraySet:function(a,b,c,d,e){for(var f=0;f<d;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};g.setTyped=function(a){a?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,c)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,d))};g.setTyped(a)}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){var a=k(),b=4,c=0,d=1,e=2;function f(a){var b=a.length;while(--b>=0)a[b]=0}var g=0,h=1,i=2,j=3,m=258,n=29,o=256,p=o+1+n,q=30,r=19,aa=2*p+1,s=15,t=16,u=7,v=256,w=16,x=17,y=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ca=512,C=new Array((p+2)*2);f(C);var da=new Array(q*2);f(da);var D=new Array(ca);f(D);var ea=new Array(m-j+1);f(ea);var fa=new Array(n);f(fa);var E=new Array(q);f(E);function ga(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}var ha,F,G;function H(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}function ia(a){return a<256?D[a]:D[256+(a>>>7)]}function ja(a,b){a.pending_buf[a.pending++]=b&255,a.pending_buf[a.pending++]=b>>>8&255}function I(a,b,c){a.bi_valid>t-c?(a.bi_buf|=b<<a.bi_valid&65535,ja(a,a.bi_buf),a.bi_buf=b>>t-a.bi_valid,a.bi_valid+=c-t):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function J(a,b,c){I(a,c[b*2],c[b*2+1])}function ka(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(--b>0);return c>>>1}function la(a){a.bi_valid===16?(ja(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}function ma(a,b){var c=b.dyn_tree,d=b.max_code,e=b.stat_desc.static_tree,f=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,h=b.stat_desc.extra_base;b=b.stat_desc.max_length;var i,j,k,l,m,n=0;for(k=0;k<=s;k++)a.bl_count[k]=0;c[a.heap[a.heap_max]*2+1]=0;for(i=a.heap_max+1;i<aa;i++){j=a.heap[i];k=c[c[j*2+1]*2+1]+1;k>b&&(k=b,n++);c[j*2+1]=k;if(j>d)continue;a.bl_count[k]++;l=0;j>=h&&(l=g[j-h]);m=c[j*2];a.opt_len+=m*(k+l);f&&(a.static_len+=m*(e[j*2+1]+l))}if(n===0)return;do{k=b-1;while(a.bl_count[k]===0)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[b]--;n-=2}while(n>0);for(k=b;k!==0;k--){j=a.bl_count[k];while(j!==0){m=a.heap[--i];if(m>d)continue;c[m*2+1]!==k&&(a.opt_len+=(k-c[m*2+1])*c[m*2],c[m*2+1]=k);j--}}}function na(a,b,c){var d=new Array(s+1),e=0,f;for(f=1;f<=s;f++)d[f]=e=e+c[f-1]<<1;for(f=0;f<=b;f++){c=a[f*2+1];if(c===0)continue;a[f*2]=ka(d[c]++,c)}}function K(){var a,b,c,d=new Array(s+1);b=0;for(c=0;c<n-1;c++){fa[c]=b;for(a=0;a<1<<z[c];a++)ea[b++]=c}ea[b-1]=c;b=0;for(c=0;c<16;c++){E[c]=b;for(a=0;a<1<<A[c];a++)D[b++]=c}b>>=7;for(;c<q;c++){E[c]=b<<7;for(a=0;a<1<<A[c]-7;a++)D[256+b++]=c}for(c=0;c<=s;c++)d[c]=0;a=0;while(a<=143)C[a*2+1]=8,a++,d[8]++;while(a<=255)C[a*2+1]=9,a++,d[9]++;while(a<=279)C[a*2+1]=7,a++,d[7]++;while(a<=287)C[a*2+1]=8,a++,d[8]++;na(C,p+1,d);for(a=0;a<q;a++)da[a*2+1]=5,da[a*2]=ka(a,5);ha=new ga(C,z,o+1,p,s);F=new ga(da,A,0,q,s);G=new ga(new Array(0),B,0,r,u)}function oa(a){var b;for(b=0;b<p;b++)a.dyn_ltree[b*2]=0;for(b=0;b<q;b++)a.dyn_dtree[b*2]=0;for(b=0;b<r;b++)a.bl_tree[b*2]=0;a.dyn_ltree[v*2]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function L(a){a.bi_valid>8?ja(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function pa(b,c,d,e){L(b),e&&(ja(b,d),ja(b,~d)),a.arraySet(b.pending_buf,b.window,c,d,b.pending),b.pending+=d}function qa(a,b,c,d){var e=b*2,f=c*2;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function M(a,b,c){var d=a.heap[c],e=c<<1;while(e<=a.heap_len){e<a.heap_len&&qa(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(qa(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function ra(a,b,c){var d,e,f=0,g,h;if(a.last_lit!==0)do d=a.pending_buf[a.d_buf+f*2]<<8|a.pending_buf[a.d_buf+f*2+1],e=a.pending_buf[a.l_buf+f],f++,d===0?J(a,e,b):(g=ea[e],J(a,g+o+1,b),h=z[g],h!==0&&(e-=fa[g],I(a,e,h)),d--,g=ia(d),J(a,g,c),h=A[g],h!==0&&(d-=E[g],I(a,d,h)));while(f<a.last_lit);J(a,v,b)}function N(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,i;a.heap_len=0;a.heap_max=aa;for(g=0;g<f;g++)c[g*2]!==0?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[g*2+1]=0;while(a.heap_len<2)i=a.heap[++a.heap_len]=h<2?++h:0,c[i*2]=1,a.depth[i]=0,a.opt_len--,e&&(a.static_len-=d[i*2+1]);b.max_code=h;for(g=a.heap_len>>1;g>=1;g--)M(a,c,g);i=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],M(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[i*2]=c[g*2]+c[e*2],a.depth[i]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[g*2+1]=c[e*2+1]=i,a.heap[1]=i++,M(a,c,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1];ma(a,b);na(c,h,a.bl_count)}function O(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);b[(c+1)*2+1]=65535;for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else h<j?a.bl_tree[f*2]+=h:f!==0?(f!==e&&a.bl_tree[f*2]++,a.bl_tree[w*2]++):h<=10?a.bl_tree[x*2]++:a.bl_tree[y*2]++;h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function P(a,b,c){var d,e=-1,f,g=b[0*2+1],h=0,i=7,j=4;g===0&&(i=138,j=3);for(d=0;d<=c;d++){f=g;g=b[(d+1)*2+1];if(++h<i&&f===g)continue;else if(h<j)do J(a,f,a.bl_tree);while(--h!==0);else f!==0?(f!==e&&(J(a,f,a.bl_tree),h--),J(a,w,a.bl_tree),I(a,h-3,2)):h<=10?(J(a,x,a.bl_tree),I(a,h-3,3)):(J(a,y,a.bl_tree),I(a,h-11,7));h=0;e=f;g===0?(i=138,j=3):f===g?(i=6,j=3):(i=7,j=4)}}function Q(a){var b;O(a,a.dyn_ltree,a.l_desc.max_code);O(a,a.dyn_dtree,a.d_desc.max_code);N(a,a.bl_desc);for(b=r-1;b>=3;b--)if(a.bl_tree[ba[b]*2+1]!==0)break;a.opt_len+=3*(b+1)+5+5+4;return b}function sa(a,b,c,d){var e;I(a,b-257,5);I(a,c-1,5);I(a,d-4,4);for(e=0;e<d;e++)I(a,a.bl_tree[ba[e]*2+1],3);P(a,a.dyn_ltree,b-1);P(a,a.dyn_dtree,c-1)}function R(a){var b=4093624447,e;for(e=0;e<=31;e++,b>>>=1)if(b&1&&a.dyn_ltree[e*2]!==0)return c;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return d;for(e=32;e<o;e++)if(a.dyn_ltree[e*2]!==0)return d;return c}var ta=!1;function S(a){ta||(K(),ta=!0),a.l_desc=new H(a.dyn_ltree,ha),a.d_desc=new H(a.dyn_dtree,F),a.bl_desc=new H(a.bl_tree,G),a.bi_buf=0,a.bi_valid=0,oa(a)}function T(a,b,c,d){I(a,(g<<1)+(d?1:0),3),pa(a,b,c,!0)}function U(a){I(a,h<<1,3),J(a,v,C),la(a)}function V(a,c,d,f){var g,j,k=0;a.level>0?(a.strm.data_type===e&&(a.strm.data_type=R(a)),N(a,a.l_desc),N(a,a.d_desc),k=Q(a),g=a.opt_len+3+7>>>3,j=a.static_len+3+7>>>3,j<=g&&(g=j)):g=j=d+5;d+4<=g&&c!==-1?T(a,c,d,f):a.strategy===b||j===g?(I(a,(h<<1)+(f?1:0),3),ra(a,C,da)):(I(a,(i<<1)+(f?1:0),3),sa(a,a.l_desc.max_code+1,a.d_desc.max_code+1,k+1),ra(a,a.dyn_ltree,a.dyn_dtree));oa(a);f&&L(a)}function W(a,b,c){a.pending_buf[a.d_buf+a.last_lit*2]=b>>>8&255;a.pending_buf[a.d_buf+a.last_lit*2+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;b===0?a.dyn_ltree[c*2]++:(a.matches++,b--,a.dyn_ltree[(ea[c]+o+1)*2]++,a.dyn_dtree[ia(b)*2]++);return a.last_lit===a.lit_bufsize-1}l._tr_init=S;l._tr_stored_block=T;l._tr_flush_block=V;l._tr_tally=W;l._tr_align=U}var o=!1;function p(){o||(o=!0,n());return m.exports}b={};var q={exports:b};function r(){function a(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;var f;while(c!==0){f=c>2e3?2e3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);e%=65521;a%=65521}return e|a<<16|0}q.exports=a}var aa=!1;function s(){aa||(aa=!0,r());return q.exports}c={};var t={exports:c};function u(){function a(){var a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}var b=a();function c(a,c,d,e){var f=b;d=e+d;a^=-1;for(var e=e;e<d;e++)a=a>>>8^f[(a^c[e])&255];return a^-1}t.exports=c}var v=!1;function w(){v||(v=!0,u());return t.exports}d={};var x={exports:d};function y(){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}var z=!1;function A(){z||(z=!0,y());return x.exports}var B={},ba={exports:B};function ca(){var a=k(),b=p(),c=s(),d=w(),e=A(),f=0,g=1,h=3,i=4,j=5,l=0,m=1,n=-2,o=-3,q=-5,r=-1,aa=1,t=2,u=3,v=4,x=0,y=2,z=8,ba=9,ca=15,C=8,da=29,D=256,ea=D+1+da,fa=30,E=19,ga=2*ea+1,ha=15,F=3,G=258,H=G+F+1,ia=32,ja=42,I=69,J=73,ka=91,la=103,ma=113,na=666,K=1,oa=2,L=3,pa=4,qa=3;function M(a,b){a.msg=e[b];return b}function ra(a){return(a<<1)-(a>4?9:0)}function N(a){var b=a.length;while(--b>=0)a[b]=0}function O(b){var c=b.state,d=c.pending;d>b.avail_out&&(d=b.avail_out);if(d===0)return;a.arraySet(b.output,c.pending_buf,c.pending_out,d,b.next_out);b.next_out+=d;c.pending_out+=d;b.total_out+=d;b.avail_out-=d;c.pending-=d;c.pending===0&&(c.pending_out=0)}function P(a,c){b._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,c),a.block_start=a.strstart,O(a.strm)}function Q(a,b){a.pending_buf[a.pending++]=b}function sa(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=b&255}function R(b,e,f,g){var h=b.avail_in;h>g&&(h=g);if(h===0)return 0;b.avail_in-=h;a.arraySet(e,b.input,b.next_in,h,f);b.state.wrap===1?b.adler=c(b.adler,e,h,f):b.state.wrap===2&&(b.adler=d(b.adler,e,h,f));b.next_in+=h;b.total_in+=h;return h}function ta(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-H?a.strstart-(a.w_size-H):0,i=a.window,j=a.w_mask,k=a.prev,l=a.strstart+G,m=i[d+f-1],n=i[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{e=b;if(i[e+f]!==n||i[e+f-1]!==m||i[e]!==i[d]||i[++e]!==i[d+1])continue;d+=2;e++;do;while(i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&i[++d]===i[++e]&&d<l);e=G-(l-d);d=l-G;if(e>f){a.match_start=b;f=e;if(e>=g)break;m=i[d+f-1];n=i[d+f]}}while((b=k[b&j])>h&&--c!==0);return f<=a.lookahead?f:a.lookahead}function S(b){var c=b.w_size,d,e,f,g;do{g=b.window_size-b.lookahead-b.strstart;if(b.strstart>=c+(c-H)){a.arraySet(b.window,b.window,c,c,0);b.match_start-=c;b.strstart-=c;b.block_start-=c;e=b.hash_size;d=e;do f=b.head[--d],b.head[d]=f>=c?f-c:0;while(--e);e=c;d=e;do f=b.prev[--d],b.prev[d]=f>=c?f-c:0;while(--e);g+=c}if(b.strm.avail_in===0)break;e=R(b.strm,b.window,b.strstart+b.lookahead,g);b.lookahead+=e;if(b.lookahead+b.insert>=F){f=b.strstart-b.insert;b.ins_h=b.window[f];b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+1])&b.hash_mask;while(b.insert){b.ins_h=(b.ins_h<<b.hash_shift^b.window[f+F-1])&b.hash_mask;b.prev[f&b.w_mask]=b.head[b.ins_h];b.head[b.ins_h]=f;f++;b.insert--;if(b.lookahead+b.insert<F)break}}}while(b.lookahead<H&&b.strm.avail_in!==0)}function T(a,b){var c=65535;c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);for(;;){if(a.lookahead<=1){S(a);if(a.lookahead===0&&b===f)return K;if(a.lookahead===0)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(a.strstart===0||a.strstart>=d){a.lookahead=a.strstart-d;a.strstart=d;P(a,!1);if(a.strm.avail_out===0)return K}if(a.strstart-a.block_start>=a.w_size-H){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(b===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.strstart>a.block_start){P(a,!1);if(a.strm.avail_out===0)return K}return K}function U(a,c){var d;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);d!==0&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d));if(a.match_length>=F){d=b._tr_tally(a,a.strstart-a.match_start,a.match_length-F);a.lookahead-=a.match_length;if(a.match_length<=a.max_lazy_match&&a.lookahead>=F){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask}else d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function V(a,c){var d,e;for(;;){if(a.lookahead<H){S(a);if(a.lookahead<H&&c===f)return K;if(a.lookahead===0)break}d=0;a.lookahead>=F&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,d=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=F-1;d!==0&&a.prev_length<a.max_lazy_match&&a.strstart-d<=a.w_size-H&&(a.match_length=ta(a,d),a.match_length<=5&&(a.strategy===aa||a.match_length===F&&a.strstart-a.match_start>4096)&&(a.match_length=F-1));if(a.prev_length>=F&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-F;e=b._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-F);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+F-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);a.match_available=0;a.match_length=F-1;a.strstart++;if(e){P(a,!1);if(a.strm.avail_out===0)return K}}else if(a.match_available){e=b._tr_tally(a,0,a.window[a.strstart-1]);e&&P(a,!1);a.strstart++;a.lookahead--;if(a.strm.avail_out===0)return K}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(b._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=a.strstart<F-1?a.strstart:F-1;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function W(a,c){var d,e,g,h=a.window;for(;;){if(a.lookahead<=G){S(a);if(a.lookahead<=G&&c===f)return K;if(a.lookahead===0)break}a.match_length=0;if(a.lookahead>=F&&a.strstart>0){e=a.strstart-1;d=h[e];if(d===h[++e]&&d===h[++e]&&d===h[++e]){g=a.strstart+G;do;while(d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<g);a.match_length=G-(g-e);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}}a.match_length>=F?(d=b._tr_tally(a,1,a.match_length-F),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(d=b._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function X(a,c){var d;for(;;){if(a.lookahead===0){S(a);if(a.lookahead===0){if(c===f)return K;break}}a.match_length=0;d=b._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(d){P(a,!1);if(a.strm.avail_out===0)return K}}a.insert=0;if(c===i){P(a,!0);return a.strm.avail_out===0?L:pa}if(a.last_lit){P(a,!1);if(a.strm.avail_out===0)return K}return oa}function ua(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}var va;va=[new ua(0,0,0,0,T),new ua(4,4,8,4,U),new ua(4,5,16,8,U),new ua(4,6,32,32,U),new ua(4,4,16,16,V),new ua(8,16,32,32,V),new ua(8,16,128,128,V),new ua(8,32,128,256,V),new ua(32,128,258,1024,V),new ua(32,258,258,4096,V)];function wa(a){a.window_size=2*a.w_size,N(a.head),a.max_lazy_match=va[a.level].max_lazy,a.good_match=va[a.level].good_length,a.nice_match=va[a.level].nice_length,a.max_chain_length=va[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=F-1,a.match_available=0,a.ins_h=0}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(ga*2),this.dyn_dtree=new a.Buf16((2*fa+1)*2),this.bl_tree=new a.Buf16((2*E+1)*2),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(ha+1),this.heap=new a.Buf16(2*ea+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*ea+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xa(a){var c;if(!a||!a.state)return M(a,n);a.total_in=a.total_out=0;a.data_type=y;c=a.state;c.pending=0;c.pending_out=0;c.wrap<0&&(c.wrap=-c.wrap);c.status=c.wrap?ja:ma;a.adler=c.wrap===2?0:1;c.last_flush=f;b._tr_init(c);return l}function Z(a){var b=xa(a);b===l&&wa(a.state);return b}function $(a,b){if(!a||!a.state)return n;if(a.state.wrap!==2)return n;a.state.gzhead=b;return l}function ya(b,c,d,e,f,g){if(!b)return n;var h=1;c===r&&(c=6);e<0?(h=0,e=-e):e>15&&(h=2,e-=16);if(f<1||f>ba||d!==z||e<8||e>15||c<0||c>9||g<0||g>v)return M(b,n);e===8&&(e=9);var i=new Y();b.state=i;i.strm=b;i.wrap=h;i.gzhead=null;i.w_bits=e;i.w_size=1<<i.w_bits;i.w_mask=i.w_size-1;i.hash_bits=f+7;i.hash_size=1<<i.hash_bits;i.hash_mask=i.hash_size-1;i.hash_shift=~~((i.hash_bits+F-1)/F);i.window=new a.Buf8(i.w_size*2);i.head=new a.Buf16(i.hash_size);i.prev=new a.Buf16(i.w_size);i.lit_bufsize=1<<f+6;i.pending_buf_size=i.lit_bufsize*4;i.pending_buf=new a.Buf8(i.pending_buf_size);i.d_buf=1*i.lit_bufsize;i.l_buf=(1+2)*i.lit_bufsize;i.level=c;i.strategy=g;i.method=d;return Z(b)}function za(a,b){return ya(a,b,z,ca,C,x)}function Aa(a,c){var e,k;if(!a||!a.state||c>j||c<0)return a?M(a,n):n;k=a.state;if(!a.output||!a.input&&a.avail_in!==0||k.status===na&&c!==i)return M(a,a.avail_out===0?q:n);k.strm=a;e=k.last_flush;k.last_flush=c;if(k.status===ja)if(k.wrap===2)a.adler=0,Q(k,31),Q(k,139),Q(k,8),!k.gzhead?(Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,0),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,qa),k.status=ma):(Q(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),Q(k,k.gzhead.time&255),Q(k,k.gzhead.time>>8&255),Q(k,k.gzhead.time>>16&255),Q(k,k.gzhead.time>>24&255),Q(k,k.level===9?2:k.strategy>=t||k.level<2?4:0),Q(k,k.gzhead.os&255),k.gzhead.extra&&k.gzhead.extra.length&&(Q(k,k.gzhead.extra.length&255),Q(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(a.adler=d(a.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=I);else{var o=z+(k.w_bits-8<<4)<<8,p;k.strategy>=t||k.level<2?p=0:k.level<6?p=1:k.level===6?p=2:p=3;o|=p<<6;k.strstart!==0&&(o|=ia);o+=31-o%31;k.status=ma;sa(k,o);k.strstart!==0&&(sa(k,a.adler>>>16),sa(k,a.adler&65535));a.adler=1}if(k.status===I)if(k.gzhead.extra){p=k.pending;while(k.gzindex<(k.gzhead.extra.length&65535)){if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size)break}Q(k,k.gzhead.extra[k.gzindex]&255);k.gzindex++}k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=J)}else k.status=J;if(k.status===J)if(k.gzhead.name){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.name.length?o=k.gzhead.name.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.gzindex=0,k.status=ka)}else k.status=ka;if(k.status===ka)if(k.gzhead.comment){p=k.pending;do{if(k.pending===k.pending_buf_size){k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));O(a);p=k.pending;if(k.pending===k.pending_buf_size){o=1;break}}k.gzindex<k.gzhead.comment.length?o=k.gzhead.comment.charCodeAt(k.gzindex++)&255:o=0;Q(k,o)}while(o!==0);k.gzhead.hcrc&&k.pending>p&&(a.adler=d(a.adler,k.pending_buf,k.pending-p,p));o===0&&(k.status=la)}else k.status=la;k.status===la&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&O(a),k.pending+2<=k.pending_buf_size&&(Q(k,a.adler&255),Q(k,a.adler>>8&255),a.adler=0,k.status=ma)):k.status=ma);if(k.pending!==0){O(a);if(a.avail_out===0){k.last_flush=-1;return l}}else if(a.avail_in===0&&ra(c)<=ra(e)&&c!==i)return M(a,q);if(k.status===na&&a.avail_in!==0)return M(a,q);if(a.avail_in!==0||k.lookahead!==0||c!==f&&k.status!==na){p=k.strategy===t?X(k,c):k.strategy===u?W(k,c):va[k.level].func(k,c);(p===L||p===pa)&&(k.status=na);if(p===K||p===L){a.avail_out===0&&(k.last_flush=-1);return l}if(p===oa){c===g?b._tr_align(k):c!==j&&(b._tr_stored_block(k,0,0,!1),c===h&&(N(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0)));O(a);if(a.avail_out===0){k.last_flush=-1;return l}}}if(c!==i)return l;if(k.wrap<=0)return m;k.wrap===2?(Q(k,a.adler&255),Q(k,a.adler>>8&255),Q(k,a.adler>>16&255),Q(k,a.adler>>24&255),Q(k,a.total_in&255),Q(k,a.total_in>>8&255),Q(k,a.total_in>>16&255),Q(k,a.total_in>>24&255)):(sa(k,a.adler>>>16),sa(k,a.adler&65535));O(a);k.wrap>0&&(k.wrap=-k.wrap);return k.pending!==0?l:m}function Ba(a){var b;if(!a||!a.state)return n;b=a.state.status;if(b!==ja&&b!==I&&b!==J&&b!==ka&&b!==la&&b!==ma&&b!==na)return M(a,n);a.state=null;return b===ma?M(a,o):l}function Ca(b,d){var e=d.length,f,g,h,i,j;if(!b||!b.state)return n;f=b.state;g=f.wrap;if(g===2||g===1&&f.status!==ja||f.lookahead)return n;g===1&&(b.adler=c(b.adler,d,e,0));f.wrap=0;e>=f.w_size&&(g===0&&(N(f.head),f.strstart=0,f.block_start=0,f.insert=0),j=new a.Buf8(f.w_size),a.arraySet(j,d,e-f.w_size,f.w_size,0),d=j,e=f.w_size);j=b.avail_in;h=b.next_in;i=b.input;b.avail_in=e;b.next_in=0;b.input=d;S(f);while(f.lookahead>=F){e=f.strstart;d=f.lookahead-(F-1);do f.ins_h=(f.ins_h<<f.hash_shift^f.window[e+F-1])&f.hash_mask,f.prev[e&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=e,e++;while(--d);f.strstart=e;f.lookahead=F-1;S(f)}f.strstart+=f.lookahead;f.block_start=f.strstart;f.insert=f.lookahead;f.lookahead=0;f.match_length=f.prev_length=F-1;f.match_available=0;b.next_in=h;b.input=i;b.avail_in=j;f.wrap=g;return l}B.deflateInit=za;B.deflateInit2=ya;B.deflateReset=Z;B.deflateResetKeep=xa;B.deflateSetHeader=$;B.deflate=Aa;B.deflateEnd=Ba;B.deflateSetDictionary=Ca;B.deflateInfo="pako deflate (from Nodeca project)"}var C=!1;function da(){C||(C=!0,ca());return ba.exports}var D={},ea={exports:D};function fa(){var a=k(),b=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch(a){b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){c=!1}var d=new a.Buf8(256);for(var e=0;e<256;e++)d[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;d[254]=d[254]=1;D.string2buf=function(b){var c,d,e,f,g,h=b.length,i=0;for(f=0;f<h;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),i+=d<128?1:d<2048?2:d<65536?3:4;c=new a.Buf8(i);for(g=0,f=0;g<i;f++)d=b.charCodeAt(f),(d&64512)===55296&&f+1<h&&(e=b.charCodeAt(f+1),(e&64512)===56320&&(d=65536+(d-55296<<10)+(e-56320),f++)),d<128?c[g++]=d:d<2048?(c[g++]=192|d>>>6,c[g++]=128|d&63):d<65536?(c[g++]=224|d>>>12,c[g++]=128|d>>>6&63,c[g++]=128|d&63):(c[g++]=240|d>>>18,c[g++]=128|d>>>12&63,c[g++]=128|d>>>6&63,c[g++]=128|d&63);return c};function f(d,e){if(e<65537&&(d.subarray&&c||!d.subarray&&b))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));var f="";for(var g=0;g<e;g++)f+=String.fromCharCode(d[g]);return f}D.buf2binstring=function(a){return f(a,a.length)};D.binstring2buf=function(b){var c=new a.Buf8(b.length);for(var d=0,e=c.length;d<e;d++)c[d]=b.charCodeAt(d);return c};D.buf2string=function(a,b){var c,e,g,h;b=b||a.length;var i=new Array(b*2);for(e=0,c=0;c<b;){g=a[c++];if(g<128){i[e++]=g;continue}h=d[g];if(h>4){i[e++]=65533;c+=h-1;continue}g&=h===2?31:h===3?15:7;while(h>1&&c<b)g=g<<6|a[c++]&63,h--;if(h>1){i[e++]=65533;continue}g<65536?i[e++]=g:(g-=65536,i[e++]=55296|g>>10&1023,i[e++]=56320|g&1023)}return f(i,e)};D.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);c=b-1;while(c>=0&&(a[c]&192)===128)c--;if(c<0)return b;return c===0?b:c+d[a[c]]>b?c:b}}var E=!1;function ga(){E||(E=!0,fa());return ea.exports}f={};var ha={exports:f};function F(){function a(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ha.exports=a}var G=!1;function H(){G||(G=!0,F());return ha.exports}var ia={},ja={exports:ia};function I(){var a=da(),b=k(),c=ga(),d=A(),e=H(),f=Object.prototype.toString,g=0,h=4,i=0,j=1,l=2,m=-1,n=0,o=8;function p(g){if(!(this instanceof p))return new p(g);this.options=b.assign({level:m,method:o,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});g=this.options;g.raw&&g.windowBits>0?g.windowBits=-g.windowBits:g.gzip&&g.windowBits>0&&g.windowBits<16&&(g.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new e();this.strm.avail_out=0;var h=a.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(h!==i)throw new Error(d[h]);g.header&&a.deflateSetHeader(this.strm,g.header);if(g.dictionary){var j;typeof g.dictionary==="string"?j=c.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(g.dictionary):j=g.dictionary;h=a.deflateSetDictionary(this.strm,j);if(h!==i)throw new Error(d[h]);this._dict_set=!0}}p.prototype.push=function(d,e){var k=this.strm,m=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:e===!0?h:g;typeof d==="string"?k.input=c.string2buf(d):f.call(d)==="[object ArrayBuffer]"?k.input=new Uint8Array(d):k.input=d;k.next_in=0;k.avail_in=k.input.length;do{k.avail_out===0&&(k.output=new b.Buf8(m),k.next_out=0,k.avail_out=m);d=a.deflate(k,e);if(d!==j&&d!==i){this.onEnd(d);this.ended=!0;return!1}(k.avail_out===0||k.avail_in===0&&(e===h||e===l))&&(this.options.to==="string"?this.onData(c.buf2binstring(b.shrinkBuf(k.output,k.next_out))):this.onData(b.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&d!==j);if(e===h){d=a.deflateEnd(this.strm);this.onEnd(d);this.ended=!0;return d===i}if(e===l){this.onEnd(i);k.avail_out=0;return!0}return!0};p.prototype.onData=function(a){this.chunks.push(a)};p.prototype.onEnd=function(a){a===i&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function q(a,b){b=new p(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}function r(a,b){b=b||{};b.raw=!0;return q(a,b)}function aa(a,b){b=b||{};b.gzip=!0;return q(a,b)}ia.Deflate=p;ia.deflate=q;ia.deflateRaw=r;ia.gzip=aa}var J=!1;function ka(){J||(J=!0,I());return ja.exports}b={};var la={exports:b};function ma(){var a=30,b=12;la.exports=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,aa,s,t,u,v,w,x,y,z,A;e=c.state;f=c.next_in;z=c.input;g=f+(c.avail_in-5);h=c.next_out;A=c.output;d=h-(d-c.avail_out);i=h+(c.avail_out-257);j=e.dmax;k=e.wsize;l=e.whave;m=e.wnext;n=e.window;o=e.hold;p=e.bits;q=e.lencode;r=e.distcode;aa=(1<<e.lenbits)-1;s=(1<<e.distbits)-1;top:do{p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=q[o&aa];dolen:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u===0)A[h++]=t&65535;else if(u&16){v=t&65535;u&=15;u&&(p<u&&(o+=z[f++]<<p,p+=8),v+=o&(1<<u)-1,o>>>=u,p-=u);p<15&&(o+=z[f++]<<p,p+=8,o+=z[f++]<<p,p+=8);t=r[o&s];dodist:for(;;){u=t>>>24;o>>>=u;p-=u;u=t>>>16&255;if(u&16){w=t&65535;u&=15;p<u&&(o+=z[f++]<<p,p+=8,p<u&&(o+=z[f++]<<p,p+=8));w+=o&(1<<u)-1;if(w>j){c.msg="invalid distance too far back";e.mode=a;break top}o>>>=u;p-=u;u=h-d;if(w>u){u=w-u;if(u>l&&e.sane){c.msg="invalid distance too far back";e.mode=a;break top}x=0;y=n;if(m===0){x+=k-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}else if(m<u){x+=k+m-u;u-=m;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=0;if(m<v){u=m;v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}}else{x+=m-u;if(u<v){v-=u;do A[h++]=n[x++];while(--u);x=h-w;y=A}}while(v>2)A[h++]=y[x++],A[h++]=y[x++],A[h++]=y[x++],v-=3;v&&(A[h++]=y[x++],v>1&&(A[h++]=y[x++]))}else{x=h-w;do A[h++]=A[x++],A[h++]=A[x++],A[h++]=A[x++],v-=3;while(v>2);v&&(A[h++]=A[x++],v>1&&(A[h++]=A[x++]))}}else if((u&64)===0){t=r[(t&65535)+(o&(1<<u)-1)];continue dodist}else{c.msg="invalid distance code";e.mode=a;break top}break}}else if((u&64)===0){t=q[(t&65535)+(o&(1<<u)-1)];continue dolen}else if(u&32){e.mode=b;break top}else{c.msg="invalid literal/length code";e.mode=a;break top}break}}while(f<g&&h<i);v=p>>3;f-=v;p-=v<<3;o&=(1<<p)-1;c.next_in=f;c.next_out=h;c.avail_in=f<g?5+(g-f):5-(f-g);c.avail_out=h<i?257+(i-h):257-(h-i);e.hold=o;e.bits=p;return}}var na=!1;function K(){na||(na=!0,ma());return la.exports}c={};var oa={exports:c};function L(){var a=k(),b=15,c=852,d=592,e=0,f=1,g=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];oa.exports=function(k,m,n,o,p,q,r,aa){var s=aa.bits,t,u,v,w,x,y,z,A,B,ba,ca,C,da,D,ea=0,fa,E=new a.Buf16(b+1),ga=new a.Buf16(b+1),ha=0,F,G,H;for(t=0;t<=b;t++)E[t]=0;for(u=0;u<o;u++)E[m[n+u]]++;s=s;for(w=b;w>=1;w--)if(E[w]!==0)break;s>w&&(s=w);if(w===0){p[q++]=1<<24|64<<16|0;p[q++]=1<<24|64<<16|0;aa.bits=1;return 0}for(v=1;v<w;v++)if(E[v]!==0)break;s<v&&(s=v);z=1;for(t=1;t<=b;t++){z<<=1;z-=E[t];if(z<0)return-1}if(z>0&&(k===e||w!==1))return-1;ga[1]=0;for(t=1;t<b;t++)ga[t+1]=ga[t]+E[t];for(u=0;u<o;u++)m[n+u]!==0&&(r[ga[m[n+u]]++]=u);k===e?(ga=o=r,fa=19):k===f?(ga=h,ea-=257,o=i,ha-=257,fa=256):(ga=j,o=l,fa=-1);B=0;u=0;t=v;D=q;x=s;y=0;C=-1;A=1<<s;da=A-1;if(k===f&&A>c||k===g&&A>d)return 1;for(;;){F=t-y;r[u]<fa?(G=0,H=r[u]):r[u]>fa?(G=o[ha+r[u]],H=ga[ea+r[u]]):(G=32+64,H=0);ba=1<<t-y;ca=1<<x;v=ca;do ca-=ba,p[D+(B>>y)+ca]=F<<24|G<<16|H|0;while(ca!==0);ba=1<<t-1;while(B&ba)ba>>=1;ba!==0?(B&=ba-1,B+=ba):B=0;u++;if(--E[t]===0){if(t===w)break;t=m[n+r[u]]}if(t>s&&(B&da)!==C){y===0&&(y=s);D+=v;x=t-y;z=1<<x;while(x+y<w){z-=E[x+y];if(z<=0)break;x++;z<<=1}A+=1<<x;if(k===f&&A>c||k===g&&A>d)return 1;C=B&da;p[C]=s<<24|x<<16|D-q|0}}B!==0&&(p[D+B]=t-y<<24|64<<16|0);aa.bits=s;return 0}}var pa=!1;function qa(){pa||(pa=!0,L());return oa.exports}var M={},ra={exports:M};function N(){var a=k(),b=s(),c=w(),d=K(),e=qa(),f=0,g=1,h=2,i=4,j=5,l=6,m=0,n=1,o=2,p=-2,q=-3,r=-4,aa=-5,t=8,u=1,v=2,x=3,y=4,z=5,A=6,B=7,ba=8,ca=9,C=10,da=11,D=12,ea=13,fa=14,E=15,ga=16,ha=17,F=18,G=19,H=20,ia=21,ja=22,I=23,J=24,ka=25,la=26,ma=27,na=28,oa=29,L=30,pa=31,ra=32,N=852,O=592,P=15,Q=P;function sa(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ta(b){var c;if(!b||!b.state)return p;c=b.state;b.total_in=b.total_out=c.total=0;b.msg="";c.wrap&&(b.adler=c.wrap&1);c.mode=u;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new a.Buf32(N);c.distcode=c.distdyn=new a.Buf32(O);c.sane=1;c.back=-1;return m}function S(a){var b;if(!a||!a.state)return p;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return ta(a)}function T(a,b){var c,d;if(!a||!a.state)return p;d=a.state;b<0?(c=0,b=-b):(c=(b>>4)+1,b<48&&(b&=15));if(b&&(b<8||b>15))return p;d.window!==null&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return S(a)}function U(a,b){var c;if(!a)return p;c=new R();a.state=c;c.window=null;c=T(a,b);c!==m&&(a.state=null);return c}function V(a){return U(a,Q)}var W=!0,X,ua;function va(b){if(W){var c;X=new a.Buf32(512);ua=new a.Buf32(32);c=0;while(c<144)b.lens[c++]=8;while(c<256)b.lens[c++]=9;while(c<280)b.lens[c++]=7;while(c<288)b.lens[c++]=8;e(g,b.lens,0,288,X,0,b.work,{bits:9});c=0;while(c<32)b.lens[c++]=5;e(h,b.lens,0,32,ua,0,b.work,{bits:5});W=!1}b.lencode=X;b.lenbits=9;b.distcode=ua;b.distbits=5}function wa(b,c,d,e){var f;b=b.state;b.window===null&&(b.wsize=1<<b.wbits,b.wnext=0,b.whave=0,b.window=new a.Buf8(b.wsize));e>=b.wsize?(a.arraySet(b.window,c,d-b.wsize,b.wsize,0),b.wnext=0,b.whave=b.wsize):(f=b.wsize-b.wnext,f>e&&(f=e),a.arraySet(b.window,c,d-e,f,b.wnext),e-=f,e?(a.arraySet(b.window,c,d-e,e,0),b.wnext=e,b.whave=b.wsize):(b.wnext+=f,b.wnext===b.wsize&&(b.wnext=0),b.whave<b.wsize&&(b.whave+=f)));return 0}function Y(k,s){var w,K,qa,M,N,O,P,Q,R,ta,S,T,U,V,W,X,ua,Y,xa,Z=new a.Buf8(4),$,ya,za=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;w=k.state;w.mode===D&&(w.mode=ea);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;ta=O;S=P;xa=m;inf_leave:for(;;)switch(w.mode){case u:if(w.wrap===0){w.mode=ea;break}while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(w.wrap&2&&Q===35615){w.check=0;Z[0]=Q&255;Z[1]=Q>>>8&255;w.check=c(w.check,Z,2,0);Q=0;R=0;w.mode=v;break}w.flags=0;w.head&&(w.head.done=!1);if(!(w.wrap&1)||(((Q&255)<<8)+(Q>>8))%31){k.msg="incorrect header check";w.mode=L;break}if((Q&15)!==t){k.msg="unknown compression method";w.mode=L;break}Q>>>=4;R-=4;Y=(Q&15)+8;if(w.wbits===0)w.wbits=Y;else if(Y>w.wbits){k.msg="invalid window size";w.mode=L;break}w.dmax=1<<Y;k.adler=w.check=1;w.mode=Q&512?C:D;Q=0;R=0;break;case v:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.flags=Q;if((w.flags&255)!==t){k.msg="unknown compression method";w.mode=L;break}if(w.flags&57344){k.msg="unknown header flags set";w.mode=L;break}w.head&&(w.head.text=Q>>8&1);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=x;case x:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.time=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,Z[2]=Q>>>16&255,Z[3]=Q>>>24&255,w.check=c(w.check,Z,4,0));Q=0;R=0;w.mode=y;case y:while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.head&&(w.head.xflags=Q&255,w.head.os=Q>>8);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0;w.mode=z;case z:if(w.flags&1024){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length=Q;w.head&&(w.head.extra_len=Q);w.flags&512&&(Z[0]=Q&255,Z[1]=Q>>>8&255,w.check=c(w.check,Z,2,0));Q=0;R=0}else w.head&&(w.head.extra=null);w.mode=A;case A:if(w.flags&1024){T=w.length;T>O&&(T=O);T&&(w.head&&(Y=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),a.arraySet(w.head.extra,K,M,T,Y)),w.flags&512&&(w.check=c(w.check,K,T,M)),O-=T,M+=T,w.length-=T);if(w.length)break inf_leave}w.length=0;w.mode=B;case B:if(w.flags&2048){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.name+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.name=null);w.length=0;w.mode=ba;case ba:if(w.flags&4096){if(O===0)break inf_leave;T=0;do Y=K[M+T++],w.head&&Y&&w.length<65536&&(w.head.comment+=String.fromCharCode(Y));while(Y&&T<O);w.flags&512&&(w.check=c(w.check,K,T,M));O-=T;M+=T;if(Y)break inf_leave}else w.head&&(w.head.comment=null);w.mode=ca;case ca:if(w.flags&512){while(R<16){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.check&65535)){k.msg="header crc mismatch";w.mode=L;break}Q=0;R=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);k.adler=w.check=0;w.mode=D;break;case C:while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}k.adler=w.check=sa(Q);Q=0;R=0;w.mode=da;case da:if(w.havedict===0){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;return o}k.adler=w.check=1;w.mode=D;case D:if(s===j||s===l)break inf_leave;case ea:if(w.last){Q>>>=R&7;R-=R&7;w.mode=ma;break}while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.last=Q&1;Q>>>=1;R-=1;switch(Q&3){case 0:w.mode=fa;break;case 1:va(w);w.mode=H;if(s===l){Q>>>=2;R-=2;break inf_leave}break;case 2:w.mode=ha;break;case 3:k.msg="invalid block type",w.mode=L}Q>>>=2;R-=2;break;case fa:Q>>>=R&7;R-=R&7;while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((Q&65535)!==(Q>>>16^65535)){k.msg="invalid stored block lengths";w.mode=L;break}w.length=Q&65535;Q=0;R=0;w.mode=E;if(s===l)break inf_leave;case E:w.mode=ga;case ga:T=w.length;if(T){T>O&&(T=O);T>P&&(T=P);if(T===0)break inf_leave;a.arraySet(qa,K,M,T,N);O-=T;M+=T;P-=T;N+=T;w.length-=T;break}w.mode=D;break;case ha:while(R<14){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.nlen=(Q&31)+257;Q>>>=5;R-=5;w.ndist=(Q&31)+1;Q>>>=5;R-=5;w.ncode=(Q&15)+4;Q>>>=4;R-=4;if(w.nlen>286||w.ndist>30){k.msg="too many length or distance symbols";w.mode=L;break}w.have=0;w.mode=F;case F:while(w.have<w.ncode){while(R<3){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.lens[za[w.have++]]=Q&7;Q>>>=3;R-=3}while(w.have<19)w.lens[za[w.have++]]=0;w.lencode=w.lendyn;w.lenbits=7;$={bits:w.lenbits};xa=e(f,w.lens,0,19,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid code lengths set";w.mode=L;break}w.have=0;w.mode=G;case G:while(w.have<w.nlen+w.ndist){for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(X<16)Q>>>=V,R-=V,w.lens[w.have++]=X;else{if(X===16){ya=V+2;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;if(w.have===0){k.msg="invalid bit length repeat";w.mode=L;break}Y=w.lens[w.have-1];T=3+(Q&3);Q>>>=2;R-=2}else if(X===17){ya=V+3;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=3+(Q&7);Q>>>=3;R-=3}else{ya=V+7;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=V;R-=V;Y=0;T=11+(Q&127);Q>>>=7;R-=7}if(w.have+T>w.nlen+w.ndist){k.msg="invalid bit length repeat";w.mode=L;break}while(T--)w.lens[w.have++]=Y}}if(w.mode===L)break;if(w.lens[256]===0){k.msg="invalid code -- missing end-of-block";w.mode=L;break}w.lenbits=9;$={bits:w.lenbits};xa=e(g,w.lens,0,w.nlen,w.lencode,0,w.work,$);w.lenbits=$.bits;if(xa){k.msg="invalid literal/lengths set";w.mode=L;break}w.distbits=6;w.distcode=w.distdyn;$={bits:w.distbits};xa=e(h,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,$);w.distbits=$.bits;if(xa){k.msg="invalid distances set";w.mode=L;break}w.mode=H;if(s===l)break inf_leave;case H:w.mode=ia;case ia:if(O>=6&&P>=258){k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;d(k,S);N=k.next_out;qa=k.output;P=k.avail_out;M=k.next_in;K=k.input;O=k.avail_in;Q=w.hold;R=w.bits;w.mode===D&&(w.back=-1);break}w.back=0;for(;;){U=w.lencode[Q&(1<<w.lenbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(W&&(W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.lencode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;w.length=X;if(W===0){w.mode=la;break}if(W&32){w.back=-1;w.mode=D;break}if(W&64){k.msg="invalid literal/length code";w.mode=L;break}w.extra=W&15;w.mode=ja;case ja:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.length+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=I;case I:for(;;){U=w.distcode[Q&(1<<w.distbits)-1];V=U>>>24;W=U>>>16&255;X=U&65535;if(V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if((W&240)===0){Y=V;$=W;ua=X;for(;;){U=w.distcode[ua+((Q&(1<<Y+$)-1)>>Y)];V=U>>>24;W=U>>>16&255;X=U&65535;if(Y+V<=R)break;if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}Q>>>=Y;R-=Y;w.back+=Y}Q>>>=V;R-=V;w.back+=V;if(W&64){k.msg="invalid distance code";w.mode=L;break}w.offset=X;w.extra=W&15;w.mode=J;case J:if(w.extra){ya=w.extra;while(R<ya){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}w.offset+=Q&(1<<w.extra)-1;Q>>>=w.extra;R-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){k.msg="invalid distance too far back";w.mode=L;break}w.mode=ka;case ka:if(P===0)break inf_leave;T=S-P;if(w.offset>T){T=w.offset-T;if(T>w.whave&&w.sane){k.msg="invalid distance too far back";w.mode=L;break}T>w.wnext?(T-=w.wnext,U=w.wsize-T):U=w.wnext-T;T>w.length&&(T=w.length);$=w.window}else $=qa,U=N-w.offset,T=w.length;T>P&&(T=P);P-=T;w.length-=T;do qa[N++]=$[U++];while(--T);w.length===0&&(w.mode=ia);break;case la:if(P===0)break inf_leave;qa[N++]=w.length;P--;w.mode=ia;break;case ma:if(w.wrap){while(R<32){if(O===0)break inf_leave;O--;Q|=K[M++]<<R;R+=8}S-=P;k.total_out+=S;w.total+=S;S&&(k.adler=w.check=w.flags?c(w.check,qa,S,N-S):b(w.check,qa,S,N-S));S=P;if((w.flags?Q:sa(Q))!==w.check){k.msg="incorrect data check";w.mode=L;break}Q=0;R=0}w.mode=na;case na:if(w.wrap&&w.flags){while(R<32){if(O===0)break inf_leave;O--;Q+=K[M++]<<R;R+=8}if(Q!==(w.total&4294967295)){k.msg="incorrect length check";w.mode=L;break}Q=0;R=0}w.mode=oa;case oa:xa=n;break inf_leave;case L:xa=q;break inf_leave;case pa:return r;case ra:default:return p}k.next_out=N;k.avail_out=P;k.next_in=M;k.avail_in=O;w.hold=Q;w.bits=R;if((w.wsize||S!==k.avail_out&&w.mode<L&&(w.mode<ma||s!==i))&&wa(k,k.output,k.next_out,S-k.avail_out)){w.mode=pa;return r}ta-=k.avail_in;S-=k.avail_out;k.total_in+=ta;k.total_out+=S;w.total+=S;w.wrap&&S&&(k.adler=w.check=w.flags?c(w.check,qa,S,k.next_out-S):b(w.check,qa,S,k.next_out-S));k.data_type=w.bits+(w.last?64:0)+(w.mode===D?128:0)+(w.mode===H||w.mode===E?256:0);(ta===0&&S===0||s===i)&&xa===m&&(xa=aa);return xa}function xa(a){if(!a||!a.state)return p;var b=a.state;b.window&&(b.window=null);a.state=null;return m}function Z(a,b){if(!a||!a.state)return p;a=a.state;if((a.wrap&2)===0)return p;a.head=b;b.done=!1;return m}function $(a,c){var d=c.length,e,f;if(!a||!a.state)return p;e=a.state;if(e.wrap!==0&&e.mode!==da)return p;if(e.mode===da){f=1;f=b(f,c,d,0);if(f!==e.check)return q}f=wa(a,c,d,d);if(f){e.mode=pa;return r}e.havedict=1;return m}M.inflateReset=S;M.inflateReset2=T;M.inflateResetKeep=ta;M.inflateInit=V;M.inflateInit2=U;M.inflate=Y;M.inflateEnd=xa;M.inflateGetHeader=Z;M.inflateSetDictionary=$;M.inflateInfo="pako inflate (from Nodeca project)"}var O=!1;function P(){O||(O=!0,N());return ra.exports}d={};var Q={exports:d};function sa(){Q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}var R=!1;function ta(){R||(R=!0,sa());return Q.exports}f={};var S={exports:f};function T(){function a(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}S.exports=a}var U=!1;function V(){U||(U=!0,T());return S.exports}var W={},X={exports:W};function ua(){var a=P(),b=k(),c=ga(),d=ta(),e=A(),f=H(),g=V(),h=Object.prototype.toString;function i(c){if(!(this instanceof i))return new i(c);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},c||{});var h=this.options;h.raw&&h.windowBits>=0&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15));h.windowBits>=0&&h.windowBits<16&&!(c&&c.windowBits)&&(h.windowBits+=32);h.windowBits>15&&h.windowBits<48&&((h.windowBits&15)===0&&(h.windowBits|=15));this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f();this.strm.avail_out=0;c=a.inflateInit2(this.strm,h.windowBits);if(c!==d.Z_OK)throw new Error(e[c]);this.header=new g();a.inflateGetHeader(this.strm,this.header)}i.prototype.push=function(e,f){var g=this.strm,i=this.options.chunkSize,j=this.options.dictionary,k,l,m,n=!1;if(this.ended)return!1;f=f===~~f?f:f===!0?d.Z_FINISH:d.Z_NO_FLUSH;typeof e==="string"?g.input=c.binstring2buf(e):h.call(e)==="[object ArrayBuffer]"?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{g.avail_out===0&&(g.output=new b.Buf8(i),g.next_out=0,g.avail_out=i);e=a.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&j&&(typeof j==="string"?m=c.string2buf(j):h.call(j)==="[object ArrayBuffer]"?m=new Uint8Array(j):m=j,e=a.inflateSetDictionary(this.strm,m));e===d.Z_BUF_ERROR&&n===!0&&(e=d.Z_OK,n=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK){this.onEnd(e);this.ended=!0;return!1}g.next_out&&((g.avail_out===0||e===d.Z_STREAM_END||g.avail_in===0&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(m=c.utf8border(g.output,g.next_out),k=g.next_out-m,l=c.buf2string(g.output,m),g.next_out=k,g.avail_out=i-k,k&&b.arraySet(g.output,g.output,m,k,0),this.onData(l)):this.onData(b.shrinkBuf(g.output,g.next_out))));g.avail_in===0&&g.avail_out===0&&(n=!0)}while((g.avail_in>0||g.avail_out===0)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH){e=a.inflateEnd(this.strm);this.onEnd(e);this.ended=!0;return e===d.Z_OK}if(f===d.Z_SYNC_FLUSH){this.onEnd(d.Z_OK);g.avail_out=0;return!0}return!0};i.prototype.onData=function(a){this.chunks.push(a)};i.prototype.onEnd=function(a){a===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function j(a,b){b=new i(b);b.push(a,!0);if(b.err)throw b.msg||e[b.err];return b.result}function l(a,b){b=b||{};b.raw=!0;return j(a,b)}W.Inflate=i;W.inflate=j;W.inflateRaw=l;W.ungzip=j}var va=!1;function wa(){va||(va=!0,ua());return X.exports}b={};var Y={exports:b};function xa(){var a=k().assign,b=ka(),c=wa(),d=ta(),e={};a(e,b,c,d);Y.exports=e}var Z=!1;function $(){Z||(Z=!0,xa());return Y.exports}function a(a){switch(a){case void 0:return $()}}e.exports=a}),null);
__d("pako",["pako-1.0.6"],(function(a,b,c,d,e,f){e.exports=b("pako-1.0.6")()}),null);
__d("ZenonSDPManager",["FBLogger","ZenonBrowsers","ZenonInfraActionsLogger","ZenonSDPRtpHeaderExtensionManager","ZenonScreenShare","gkx","pako","performanceNow","qex","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h="http://www.webrtc.org/experiments/rtp-hdrext/playout-delay",i="urn:3gpp:video-orientation";a=function(){function a(a,b){this.$2=null,this.$3=null,this.$1=a,this.$4=b.getZenonSdpTransformConfig(),this.$5=new(c("ZenonSDPRtpHeaderExtensionManager"))()}var e=a.prototype;e.getLocalSdp=function(){return this.$2};e.getRemoteSdp=function(){return this.$3};e.getSdpFormat=function(){return this.$1.getSdpFormat()};e.getZenonSDPRtpHeaderExtensionManager=function(){return this.$5};e.shouldPreferH264Multiway=function(){return c("gkx")("1707280")};e.createLocalSdp=function(a,c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:if(!(c==="offer")){f.next=6;break}f.next=3;return b("regeneratorRuntime").awrap(this.$1.createOffer(babelHelpers["extends"]({},d,{preserveH264:this.$4.isPreserveH264()})));case 3:f.t0=f.sent;f.next=9;break;case 6:f.next=8;return b("regeneratorRuntime").awrap(this.$1.createAnswer());case 8:f.t0=f.sent;case 9:e=f.t0;this.shouldPreferH264Multiway()&&(this.$4.isPreferSwH264()?e.preferH264Codec({levelAsymmetryAllowed:!0,packetizationMode:!0,profileLevelId:"42e01f"}):e.preferCodec("video",{preferredCodec:"H264",preferredCodecRate:9e4}));this.$4.isPreserveH264()||e.removeCodec("H264");e.removeCodec("flexfec-03");e.removeCodec("VP9");e.removeCodec("AV1");e.removeCodec("red");e.removeCodec("ulpfec");this.$6(e);e.setVersion(a);this.$2=e;return f.abrupt("return",e);case 21:case"end":return f.stop()}},null,this)};e.setLocalSdp=function(a){var d,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a.isRemote()&&c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Wrong SDP location",error:"Remote SDP passed to setLocalSdp()",errorDomain:"ZenonSDPManager_setLocalSdp",sdpFormat:this.$1.getSdpFormat()});g.prev=1;d=a.toLoggingString();d=btoa(c("pako").deflate(a.toLoggingString(),{to:"string"}));c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP]["+a.getType()+"] Set local description sdp: "+d});e=c("performanceNow")();g.next=8;return b("regeneratorRuntime").awrap(this.$1.setLocalDescription(a));case 8:f=c("performanceNow")()-e;c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"[ZP]["+a.getType()+"] Finished setting local sdp of type in: "+String(f)});g.next=16;break;case 12:g.prev=12;g.t0=g["catch"](1);c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Failed to set local sdp",error:g.t0.toString(),errorDomain:"ZenonSDPManager_setLocalSdp",sdpFormat:this.$1.getSdpFormat()});throw g.t0;case 16:this.$2=a;case 17:case"end":return g.stop()}},null,this,[[1,12]])};e.rollbackSdp=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return b("regeneratorRuntime").awrap(this.$1.rollbackSdp());case 3:c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] Successfully called rollback sdp"});a.next=10;break;case 6:a.prev=6;a.t0=a["catch"](0);c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Failed to set rollback sdp",error:a.t0.toString(),errorDomain:"ZenonSDPManager_rollbackSDP",sdpFormat:this.$1.getSdpFormat()});throw a.t0;case 10:case"end":return a.stop()}},null,this,[[0,6]])};e.createAndSetLocalSdp=function(a,c,d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.createLocalSdp(a,c,d));case 2:e=f.sent;f.next=5;return b("regeneratorRuntime").awrap(this.setLocalSdp(e));case 5:return f.abrupt("return",e);case 6:case"end":return f.stop()}},null,this)};e.setRemoteSdp=function(a,e){var f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:a.isRemote()||c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Wrong SDP location",error:"Non-remote SDP passed to setRemoteSdp()",errorDomain:"ZenonSDPManager_setRemoteSdp",sdpFormat:this.$1.getSdpFormat()});if(this.$1.canAcceptRemoteSdp()){i.next=3;break}return i.abrupt("return",a);case 3:e({name:"beginRemoteSdpMunging"});this.$6(a);e({name:"endRemoteSdpMunging"});d("ZenonScreenShare").screenShareWithReplaceTrack()&&c("gkx")("2255")&&(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP]["+a.getType()+"] Munge inactive media SSRC"}),a.mungeInactiveMediaSSRC(this.$1.getCurrentRemoteDescription()));i.prev=7;f=btoa(c("pako").deflate(a.toLoggingString(),{to:"string"}));c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP]["+a.getType()+"] Set remote description sdp: "+f});g=c("performanceNow")();i.next=13;return b("regeneratorRuntime").awrap(this.$1.setRemoteDescription(a));case 13:h=c("performanceNow")()-g;c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP]["+a.getType()+"] Finished setting remote sdp in: "+String(h)});i.next=21;break;case 17:i.prev=17;i.t0=i["catch"](7);c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Failed to set remote sdp",error:i.t0.toString(),errorDomain:"ZenonSDPManager_setRemoteSdp",sdpFormat:this.$1.getSdpFormat()});throw i.t0;case 21:this.$3=a;return i.abrupt("return",a);case 23:case"end":return i.stop()}},null,this,[[7,17]])};e.setRemoteIceCandidate=function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.prev=0;d.next=3;return b("regeneratorRuntime").awrap(this.$1.setRemoteIceCandidate(a));case 3:d.next=10;break;case 5:d.prev=5;d.t0=d["catch"](0);c("FBLogger")("rtc_www").catching(d.t0).warn("Failed to setRemoteIceCandidate with ",JSON.stringify(a));c("ZenonInfraActionsLogger").logError({checkpoint:"[ZP] Failed to set remote ice candidate",error:d.t0.toString(),errorDomain:"ZenonSDPManager_setRemoteIceCandidate",sdpFormat:this.$1.getSdpFormat()});throw d.t0;case 10:case"end":return d.stop()}},null,this,[[0,5]])};e.closePeerConnection=function(){this.$1.close()};e.restartPeerConnection=function(){this.$5.resetRtpHeaderExtensionStatus(),this.$1.restart()};e.$6=function(a){a.useDTLSOverCrypto();d("ZenonBrowsers").isDataChannelSupported()||a.stripDataChannel();a.maybeAddPtimeForOpusOnly(60);c("gkx")("1720807")&&a.addFmtpConfig("H264","sps-pps-idr-in-keyframe","1");this.$4.isDisableOpusStereo()&&a.addFmtpConfig("opus","stereo","0");a.addFmtpConfig("opus","useinbandfec",this.$4.isSetOpusUseinbandfec()?"1":"0");a.addFmtpConfig("opus","usedtx",this.$4.isSetOpusUsedtx()?"1":"0");var b=this.$4.getSetOpusMaxaveragebitrate();b>0&&a.addFmtpConfig("opus","maxaveragebitrate",b.toString());b=this.$4.getSetOpusMaxplaybackrate();b>0&&a.addFmtpConfig("opus","maxplaybackrate",b.toString());a.addAudioNACK();a.isRemote()?(this.$5.setExtensionsSupportedByRemote(a),c("qex")._("1745")&&(c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] replacing audio cname in sdp to disable AV sync"}),a.replaceAudioCname("mungedStream")),c("gkx")("2943")&&a.addSetupActPass()):(a.filterExtension(h),c("gkx")("3613")&&a.filterExtension(i),this.$5.enableRegisteredExtensions(a))};return a}();g["default"]=a}),98);
__d("ZenonSimulcastDataMessageParser",["recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=null,c=0;a.perSsrcTargetBitrateBpsMap!=null&&(b=h(a.perSsrcTargetBitrateBpsMap));if(a.qualityMask!=null){a=parseInt(a.qualityMask,10);isNaN(a)||(c=a)}return{perSsrcTargetBitrateBpsMap:b,qualityMask:c}}function h(a){var b=new Map();Object.keys(a).forEach(function(d){var e=parseInt(a[d],10);if(isNaN(e)){c("recoverableViolation")("Simulcast bitrate string could not be parsed as int","rtc_www");return}b.set(d,e)});return b}g.parseSimulcastControlMessage=a}),98);
__d("ZenonPeerConnectionManager",["DateConsts","FBLogger","ZenonBrowsers","ZenonClientTslogUploader","ZenonInfraActionsLogger","ZenonMediaChannelManager","ZenonMediaError","ZenonPeerConnectionStateMachine","ZenonRTCPeerConnectionConfig","ZenonRTCPeerConnectionWrapper","ZenonSDPManager","ZenonSimulcastDataMessageParser","ZenonSimulcastManager","ZenonSimulcastUtils","clearTimeout","qex","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=30*d("DateConsts").MS_PER_SEC,i=6,j=3;a=function(){function a(a,b,e,f,g,h,i){var j=this;e===void 0&&(e=!1);f===void 0&&(f=function(){});i===void 0&&(i=!1);this.$5=null;this.$6=function(){};this.$7=new Set();this.$8=new Map();this.$9=!1;this.$11=null;this.$12=null;this.$13=0;this.$14=0;this.$15=new Map();this.$16=!1;this.$18=function(a){a=a.target;a=a.iceConnectionState;c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"iceConnectionStateChange: "+a,sdpFormat:j.$4.getSdpFormat()});var b=a==="connected"||a==="completed";a!=="checking"&&a!=="new"&&a!=="closed"&&j.$6({connected:b,name:"peerConnectionStateChanged",newState:a});b&&j.$6({name:"mediaConnected"});a==="connected"&&j.$6({name:"iceConnectionStateChangedConnected"});a==="disconnected"&&j.$6({name:"iceConnectionStateChangedDisconnected"});j.updateIceConnectionTimer(a);j.$16&&j.updateIceRestartTimer(a,j.$14);j.$1.processEvent({payload:{iceConnectionState:a},type:"iceConnectionStateChange"})};this.$20=function(a){a=a.target;a.signalingState==="closed"&&c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"Peer connection signaling state changed to closed",sdpFormat:j.$4.getSdpFormat()})};this.$19=function(a){a=a.candidate;a!=null&&j.$1.processEvent({payload:a,type:"iceCandidateReady"})};this.$9=e;this.$10=a.getSimulcastOverSignalingConfig().isSimulcastOverSignalingEnabled();this.$6=f;this.$5=null;f=c("ZenonRTCPeerConnectionConfig").getConfigZenonPlatform();this.$4=new(c("ZenonRTCPeerConnectionWrapper"))(a,babelHelpers["extends"]({},f),{},e);this.$6({name:"peerConnectionCreated",sdpFormat:f.sdpSemantics});this.$2=new(c("ZenonMediaChannelManager"))(this.$4,b,function(a){return j.$6({mediaStats:a,name:"setMediaStats"})},g,h);this.$3=new(c("ZenonSDPManager"))(this.$4,a);this.$1=new(c("ZenonPeerConnectionStateMachine"))(babelHelpers["extends"]({},this.$17(),{logEvent:function(a){return j.$6(a)},mediaChannelManager:this.$2,sdpManager:this.$3,tslogUploader:new(c("ZenonClientTslogUploader"))(function(a){return j.$6(a)},this.$2)}));if(i&&d("ZenonBrowsers").supportsIceRestart()){this.$14=(e=c("qex")._("20"))!=null?e:0;this.$16=this.$14!==0}this.$4.addEventListener("iceconnectionstatechange",this.$18);this.$4.addEventListener("icecandidate",this.$19);this.$4.addEventListener("signalingstatechange",this.$20)}var b=a.prototype;b.subscribeDataChannelOpen=function(a,b){var c;c=(c=this.$15.get(b))!=null?c:[];c.push(a);this.$15.set(b,c)};b.unsubscribeDataChannelOpen=function(a,b){var c;c=(c=this.$15.get(b))!=null?c:[];c=c.filter(function(b){return b!==a});this.$15.set(b,c)};b.updateIceRestartTimer=function(a,b){var d=this,e=a==="connected"||a==="completed";a=a==="disconnected"||a==="failed";e&&this.$12!=null?(c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Clearing platform ice restart timer",sdpFormat:this.$4.getSdpFormat()}),c("clearTimeout")(this.$12),this.$12=null):a&&this.$12==null&&this.$13<j&&(c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Creating an ICE Restart timer"}),this.$12=c("setTimeout")(function(){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Issuing an ICE Restart"}),d.$13++,d.$1.processEvent({type:"iceRestart"})},b))};b.updateIceConnectionTimer=function(a){var b=this,e=a==="connected"||a==="completed";a=a==="disconnected"||a==="failed";e&&this.$11!=null?(c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Clearing platform connection drop timer",sdpFormat:this.$4.getSdpFormat()}),c("clearTimeout")(this.$11),this.$11=null):a&&this.$11==null&&(c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Setting platform connection drop timer",sdpFormat:this.$4.getSdpFormat()}),this.$11=c("setTimeout")(function(){c("ZenonInfraActionsLogger").logCheckpointEmployeesTestUsersOnly({checkpoint:"Ending call on platform connection drop timeout",sdpFormat:b.$4.getSdpFormat()}),b.$1.processEvent({payload:{error:d("ZenonMediaError").ZenonMediaError.IceDisconnected,stopLocalTracks:!0},type:"endCall"})},h))};b.getLocalMediaStateVersion=function(){return this.$1.getLocalMediaStateVersion()};b.setLocalMediaStateVersion=function(a){this.$1.processEvent({payload:{version:a},type:"setLocalMediaStateVersion"})};b.addLocalTracks=function(a,b,c){this.$1.processEvent({payload:{callInitiator:c,mediaMode:b,tracks:a},type:"addLocalTracks"})};b.removeLocalTrack=function(a){this.$1.processEvent({payload:{trackId:a},type:"removeLocalTrack"})};b.replaceLocalTrack=function(a,b){this.$1.processEvent({payload:{replacementTrack:b,trackIdToReplace:a},type:"replaceLocalTrack"})};b.createDataChannel=function(a,b){var d=this;this.$7.add(a);this.$1.processEvent({payload:{dataChannelEstablished:b,dataChannelLabel:a,onDataChannelMessage:function(b){var e;d.$1.processEvent({payload:{data:b,dataChannelLabel:a},type:"dataChannelMessageReceived"});e=(e=c("qex")._("635"))!=null?e:!1;d.$9&&a==="data"&&e&&d.maybeHandleSimulcastDataMessage(b)},onDataChannelOpen:function(){var b=d.$15.get(a);b==null?void 0:b.forEach(function(a){a()})}},type:"createDataChannel"})};b.onSimulcastSignalingDataMessage=function(a){this.$9&&this.$10&&this.maybeHandleSignalingSimulcastDataMessage(a)};b.createDataMessageSubscription=function(a,b){this.$8.has(a)||(this.$8.set(a,b),this.$1.processEvent({payload:{dataChannelLabel:a,onSignalingDataMessage:b},type:"createDataMessageSubscription"}))};b.removeDataMessageSubscription=function(a){if(this.$8.has(a)){var b;b=(b=this.$8.get(a))!=null?b:function(){};this.$8["delete"](a);this.$1.processEvent({payload:{dataChannelLabel:a,onSignalingDataMessage:b},type:"removeDataMessageSubscription"})}};b.getSdpFormat=function(){return this.$4.getSdpFormat()};b.getDataChannelLabels=function(){return this.$7};b.getDataChannelState=function(a){return this.$4.getDataChannelState(a)};b.getDataMessageSubscriptions=function(){return this.$8};b.getSupportsSimulcastOverSignaling=function(){return this.$10};b.setSupportsSimulcastOverSignaling=function(a){this.$10=a};b.localMediaStateUpdateRetry=function(a){var b=this,c=this.$1.getContext();c.retryCount<i&&(c.retryCount++,c.localMediaStateUpdateRetryTimerId=window.setTimeout(function(){b.$1.processEvent({type:"localMediaStateUpdateRetry"})},a))};b.clearRetryCount=function(){var a=this.$1.getContext();a.retryCount=0};b.cancelPendingNegotiation=function(){this.$1.processEvent({type:"remoteSdpFailed"})};b.muteLocalTrack=function(a){this.$1.processEvent({payload:{trackId:a},type:"muteLocalTrack"})};b.unmuteLocalTrack=function(a){this.$1.processEvent({payload:{trackId:a},type:"unmuteLocalTrack"})};b.stopLocalTrack=function(a){this.$1.processEvent({payload:{trackId:a},type:"stopLocalTrack"})};b.applyLocalSdp=function(){this.$1.processEvent({type:"applyLocalSdp"})};b.applyMediaUpdate=function(a){this.$1.processEvent({payload:{mediaStates:a},type:"applyMediaUpdate"})};b.applyRemoteSdp=function(a,b,c,d,e,f){this.$1.processEvent({payload:{mediaStates:b,messageID:f,onProcessed:e,renegotiationOffer:d,sdp:a,source:c},type:"applyRemoteSdp"})};b.applyRemoteIceCandidate=function(a){this.$1.processEvent({payload:a,type:"applyRemoteIceCandidate"})};b.forceEncodingEnabled=function(a){this.$1.processEvent({payload:{enabled:a},type:"forceEncodingEnabled"})};b.end=function(a,b){this.$1.processEvent({payload:{restart:b,stopLocalTracks:a},type:"endCall"})};b.restart=function(){this.end(!1,!0),this.$2.clearTracks(),this.$1.processEvent({type:"restartPeerConnection"})};b.getTracks=function(){return this.$2.getTracks()};b.updateTrackInfo=function(a){return this.$2.updateTrackInfo(a)};b.getLocalTracksForMWS=function(){return this.$2.getLocalTracksForMWS()};b.getRtpSenders=function(){return this.$4.getSenders()};b.getRtpReceivers=function(){return this.$4.getReceivers()};b.setPeerConnectionEventHandlers=function(a){this.$5=a};b.swapPeerConnectionEventHandlers=function(a){var b=this.$5;this.$5=a.$5;a.$5=b};b.registerNetworkStatusListener=function(a){this.$2.registerNetworkStatusListener(a)};b.registerTrackListener=function(a){this.$2.registerTrackListener(a)};b.setTrackListenersFromManager=function(a){this.$2.setTrackListenersFromManager(a.$2)};b.setLoggingEventHandler=function(a){this.$6=a};b.sendDataMessage=function(a,b){this.$4.sendDataMessage(a,b)};b.$17=function(){return{onConnectionDestroyed:this.$21("onConnectionDestroyed"),onConnectionDropped:this.$21("onConnectionDropped"),onConnectionEstablished:this.$21("onConnectionEstablished"),onCreateDataMessageSubscription:this.$21("onCreateDataMessageSubscription"),onDataChannelMessageReceived:this.$21("onDataChannelMessageReceived"),onIceCandidateReady:this.$21("onIceCandidateReady"),onLocalMediaStateUpdate:this.$21("onLocalMediaStateUpdate"),onLocalSdpSet:this.$21("onLocalSdpSet"),onRemoteSdpSet:this.$21("onRemoteSdpSet"),onRemoveDataMessageSubscription:this.$21("onRemoveDataMessageSubscription")}};b.$21=function(a){var b=this;return function(){if(b.$5&&b.$5[a]){var c;(c=b.$5)[a].apply(c,arguments)}}};b.maybeHandleSimulcastDataMessage=function(a){try{a=JSON.parse(a);a=a.body;if(a.videoUploadRequest){a=d("ZenonSimulcastDataMessageParser").parseSimulcastControlMessage(a.videoUploadRequest);this.handleSimulcastUploadRequest(a)}}catch(a){c("FBLogger")("rtc_www").warn("MaybeHandleSimulcastDataMessage failed:",a)}};b.maybeHandleSignalingSimulcastDataMessage=function(a){try{a=JSON.parse(a);if(a.qualityMask&&a.perSsrcTargetBitrateBpsMap){a={perSsrcTargetBitrateBpsMap:a.perSsrcTargetBitrateBpsMap,qualityMask:a.qualityMask};a=d("ZenonSimulcastDataMessageParser").parseSimulcastControlMessage(a);this.handleSimulcastUploadRequest(a)}}catch(a){c("FBLogger")("rtc_www").warn("MaybeHandleSignalingSimulcastDataMessage failed:",a)}};b.handleSimulcastUploadRequest=function(a){var b,c;if(!d("ZenonSimulcastUtils").isCurrentBrowserCompatibleWithSimulcast()||!this.$4.supportsSimulcast()||typeof ((b=window.RTCRtpSender)==null?void 0:b.prototype.getParameters)!=="function")return;b=this.$4.getSenders().filter(function(a){return a.track&&a.track.kind==="video"});if(b.length===0)return;b=b[0];var e=this.$4.getTransceiverFromSender(b);if(!e||e.stopped)return;e=!1;var f=this.$2.getTracks();if((c=b.track)==null?void 0:c.id){f=f.get((c=b.track)==null?void 0:c.id);e=f&&f.contentType==="screen"}c=this.getTotalVideoParticipants();a=d("ZenonSimulcastManager").getSimulcastEncodingParameters(b.getParameters(),a,c,d("ZenonSimulcastManager").getSimulcastSsrcToLayerMap(((f=this.$3.getLocalSdp())==null?void 0:f.toDesc().sdp)||""),e,d("ZenonSimulcastUtils").getMaxNumLayers(),{height:(c=(a=b.track)==null?void 0:a.getSettings().height)!=null?c:720,width:(e=(f=b.track)==null?void 0:f.getSettings().width)!=null?e:1280},d("ZenonSimulcastManager").ALLOW_SCREENSHARE_SIMULCAST,d("ZenonSimulcastManager").MIN_NUM_ACTIVE_LAYERS);c=a.params;b.setParameters(c)};b.getTotalVideoParticipants=function(){var a=this.$4.getTransceivers(),b=this.$4.getReceivers();if(a!=null&&a.length>0){a=a.filter(function(a){var b;return((b=a.receiver.track)==null?void 0:b.kind)==="video"&&a.currentDirection!=="inactive"&&((b=a.receiver.track)==null?void 0:b.readyState)==="live"});a=a.length}else{b=b.filter(function(a){return((a=a.track)==null?void 0:a.kind)==="video"});a=b.length+1}return a};b.renegotiateNullSenderTransport=function(){for(var a=this.getRtpSenders(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.transport==null){this.applyLocalSdp();break}}};return a}();g["default"]=a}),98);
__d("OverlayConfigLayer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getLayerSource=function(){return this.$1};b.getValue=function(a){return this.$2[a]};b.logExposure=function(a){};return a}();f["default"]=a}),66);
__d("OverlayConfigLayerBuilder",["OverlayConfigConstants","OverlayConfigLayer","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=new Array(b("OverlayConfigConstants").OverlayConfigNumParameters).fill(b("OverlayConfigConstants").OverlayConfigNotPresentFlagValue),this.$2=a}var c=a.prototype;c.build=function(){return new(b("OverlayConfigLayer"))(this.$2,this.$1)};c.$3=function(a,c){a>=b("OverlayConfigConstants").OverlayConfigNumParameters&&b("unrecoverableViolation")("Parameter ID passed in exceeds max parameter id","rtc_www"),this.$1[a]=c};c.$4=function(a,b){this.$3(a,b?1:0)};c.setExampleConfigEnabled=function(a){this.$4(0,a)};c.setExampleConfigSomeBoolean=function(a){this.$4(2,a)};c.setExampleConfigSomeOtherIntegerHasValue=function(a){this.$4(1724,a)};c.setExampleConfigSomeOtherBoolean=function(a){this.$4(2044,a)};c.setExampleConfigSomeInteger=function(a){this.$3(1,a)};c.setExampleConfigSomeOtherInteger=function(a){this.$3(3,a)};c.setExampleConfigSomeDouble=function(a){this.$3(2011,a)};c.setSimulcastOverSignalingConfigSimulcastOverSignalingEnabled=function(a){this.$4(651,a)};c.setZenonSdpTransformConfigPreserveH264=function(a){this.$4(244,a)};c.setZenonSdpTransformConfigPreferH264ForMwCall=function(a){this.$4(420,a)};c.setZenonSdpTransformConfigPreferSwH264=function(a){this.$4(421,a)};c.setZenonSdpTransformConfigAddAudioNack=function(a){this.$4(245,a)};c.setZenonSdpTransformConfigDisableOpusStereo=function(a){this.$4(246,a)};c.setZenonSdpTransformConfigPreferIsacForGroupAudio=function(a){this.$4(248,a)};c.setZenonSdpTransformConfigEnableOpusFmtpMunging=function(a){this.$4(1448,a)};c.setZenonSdpTransformConfigSetOpusUsedtx=function(a){this.$4(1444,a)};c.setZenonSdpTransformConfigSetOpusUseinbandfec=function(a){this.$4(1445,a)};c.setZenonSdpTransformConfigSetOpusMaxplaybackrate=function(a){this.$3(1446,a)};c.setZenonSdpTransformConfigSetOpusMaxaveragebitrate=function(a){this.$3(1447,a)};c.setZenonPeerConnectionConfigRtpDataChannels=function(a){this.$4(302,a)};c.setZenonStartCallImmediatelyConfigEnabled=function(a){this.$4(308,a)};c.setZenonGeneralizedIdentityConfigDuplicatedParticipantsProcessingMode=function(a){this.$3(1891,a)};c.setZenonMultiCallSupportConfigMaxConnectedCalls=function(a){this.$3(309,a)};c.setZenonPlatformSupportConfigSupportsZenonPlatform=function(a){this.$4(316,a)};c.setZenonPlatformSupportConfigStartImmediatelyEnabled=function(a){this.$4(318,a)};c.setZenonPlatformSupportConfigMultiwayAvEscalationEnabled=function(a){this.$4(1900,a)};c.setZenonPlatformSupportConfigMaxConnectedCalls=function(a){this.$3(317,a)};c.setZenonPlatformSupportConfigParentWindowConnectionTimeoutMs=function(a){this.$3(319,a)};c.setZenonSimulcastConfigSimulcastEnabled=function(a){this.$4(453,a)};c.setDynamicRuleConfigEnabled=function(a){this.$4(1342,a)};c.setDynamicRuleConfigDebugLoggingEnabled=function(a){this.$4(1597,a)};c.setDynamicRuleConfigDisableCallTypeConditional=function(a){this.$4(1821,a)};c.setDynamicRuleConfigDisableAbweSubscriber=function(a){this.$4(1820,a)};c.setDynamicRuleConfigProcessIntervalMs=function(a){this.$3(1359,a)};c.setDynamicRuleConfigNetworkProcessIntervalMs=function(a){this.$3(1510,a)};c.setDynamicRuleConfigDebugLoggingIntervalMs=function(a){this.$3(1612,a)};c.setSignalingPingConfigPingIntervalMs=function(a){this.$3(1470,a)};return a}();e.exports=a}),null);
__d("ChromeOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource","ZenonBrowsers"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=new(c("OverlayConfigLayerBuilder"))(c("OverlayConfigLayerSource").BROWSER);a.setZenonSdpTransformConfigDisableOpusStereo(!0);a.setSimulcastOverSignalingConfigSimulcastOverSignalingEnabled(!0);a.setZenonPeerConnectionConfigRtpDataChannels(d("ZenonBrowsers").isDataChannelSupported());return a.build()}();b=a;g["default"]=b}),98);
__d("EdgeOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=new(c("OverlayConfigLayerBuilder"))(c("OverlayConfigLayerSource").BROWSER);a.setZenonSdpTransformConfigDisableOpusStereo(!0);return a.build()}();b=a;g["default"]=b}),98);
__d("FirefoxOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=new(c("OverlayConfigLayerBuilder"))(c("OverlayConfigLayerSource").BROWSER);a.setZenonSdpTransformConfigDisableOpusStereo(!0);return a.build()}();b=a;g["default"]=b}),98);
__d("OperaOverlayConfigLayer",["OverlayConfigLayerBuilder","OverlayConfigLayerSource","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=new(c("OverlayConfigLayerBuilder"))(c("OverlayConfigLayerSource").BROWSER);a.setZenonSdpTransformConfigDisableOpusStereo(!0);a.setZenonSdpTransformConfigPreserveH264(c("gkx")("1406693"));return a.build()}();b=a;g["default"]=b}),98);
__d("ZenonOverlayConfigManager",["ChromeOverlayConfigLayer","EdgeOverlayConfigLayer","FirefoxOverlayConfigLayer","OperaOverlayConfigLayer","OverlayConfigManager","RTWebSignalingListener","UserAgentData"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a;this.$2=new(c("OverlayConfigManager"))();var b={Chrome:c("ChromeOverlayConfigLayer"),"Edge (Chromium Based)":c("EdgeOverlayConfigLayer"),Firefox:c("FirefoxOverlayConfigLayer"),Opera:c("OperaOverlayConfigLayer")};b=b[c("UserAgentData").browserName];b&&this.$2.layerManager.addLayer(b);a.appConfig&&this.$2.layerManager.addLayer(a.appConfig)}var b=a.prototype;b.getSignalingListener=function(){var a;return(a=this.$1.signalingListener)!=null?a:new(c("RTWebSignalingListener"))()};b.getConfigManager=function(){return this.$2};return a}();g["default"]=a}),98);
__d("ZenonCallSDK",["EventEmitter","ZenonCallsManager","ZenonCallsModelEmitter","ZenonOverlayConfigManager","ZenonTransportEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;b=new(c("ZenonOverlayConfigManager"))(b);e.$ZenonCallSDK2=b;e.$ZenonCallSDK1=new(c("ZenonCallsManager"))(b);d("ZenonCallsModelEmitter").CallsModelEmitterInstance.addListener("callsModelUpdate",function(a){e.emit("callsModelUpdate",a)});c("ZenonTransportEventEmitter").addListener("transportPlatformEvent",function(a){e.emit("signalingEvent",a)});return e}var e=b.prototype;e.initSignaling=function(a,b,c,d){this.$ZenonCallSDK1.initializeSignaling(a,b,c,d)};e.endCall=function(a,b,c){this.$ZenonCallSDK1.endCall(a,b,c)};e.join=function(a){this.$ZenonCallSDK1.join(a)};e.ringParticipants=function(a,b){this.$ZenonCallSDK1.ringParticipants(a,b)};e.removeParticipants=function(a,b){this.$ZenonCallSDK1.removeParticipants(a,b)};e.forceEncodingEnabled=function(a,b){this.$ZenonCallSDK1.forceEncodingEnabled(a,b)};e.addLocalTrack=function(a,b){this.$ZenonCallSDK1.addLocalTrack(a,b)};e.removeLocalTrack=function(a,b){this.$ZenonCallSDK1.removeLocalTrack(a,b)};e.replaceLocalTrack=function(a,b,c,d){d===void 0&&(d=!1);return this.$ZenonCallSDK1.replaceLocalTrack(a,b,c,d)};e.muteTrack=function(a,b){this.$ZenonCallSDK1.muteTrack(a,b)};e.unmuteTrack=function(a,b){this.$ZenonCallSDK1.unmuteTrack(a,b)};e.stopLocalVideo=function(a,b){this.$ZenonCallSDK1.stopLocalVideo(a,b)};e.createDataMessageSubscription=function(a,b,c){this.$ZenonCallSDK1.createDataMessageSubscription(a,b,c)};e.removeDataMessageSubscription=function(a,b,c){this.$ZenonCallSDK1.removeDataMessageSubscription(a,b,c)};e.sendGenericDataMessage=function(a,b,c,d,e){this.$ZenonCallSDK1.sendGenericDataMessage(a,b,c,d,e)};e.getLogIdentifiers=function(a){return this.$ZenonCallSDK1.getLogIdentifiers(a)};e.subscribeToRemoteVideo=function(a,b,c){this.$ZenonCallSDK1.subscribeToRemoteVideo(a,b,c)};e.unsubscribeFromStateSyncTopic=function(a,b){this.$ZenonCallSDK1.unsubscribeFromStateSyncTopic(a,b)};e.subscribeToStateSyncTopic=function(a,b){this.$ZenonCallSDK1.updateStateSyncTopic(a,b,null)};e.updateStateSyncTopic=function(a,b,c){this.$ZenonCallSDK1.updateStateSyncTopic(a,b,c)};e.approveParticipants=function(a,b){this.$ZenonCallSDK1.approveParticipants(a,b)};e.denyParticipants=function(a,b){this.$ZenonCallSDK1.denyParticipants(a,b)};e.getSdpFormat=function(a){return this.$ZenonCallSDK1.getSdpFormat(a)};e.getSecureFrameManagerState=function(a){return this.$ZenonCallSDK1.getSecureFrameManagerState(a)};e.getSignalingProtocol=function(a){return this.$ZenonCallSDK1.getSignalingProtocol(a)};e.getMediaMode=function(a){return this.$ZenonCallSDK1.getMediaMode(a)};e.getConferenceName=function(a){return this.$ZenonCallSDK1.getConferenceName(a)};e.initV2Infrastructure_DEPRECATED=function(a,b){this.$ZenonCallSDK1.initializeV2Infrastructure(a,b)};e.setLinkSurface=function(a,b){this.$ZenonCallSDK1.setLinkSurface(a,b)};e.submitRating_DEPRECATED=function(a,b,c,d){c===void 0&&(c=null),d===void 0&&(d=null),this.$ZenonCallSDK1.submitRating(a,b,c,d)};e.setRatingImpression_DEPRECATED=function(a,b,c){b===void 0&&(b=!1),c===void 0&&(c=!1),this.$ZenonCallSDK1.setRatingImpression(b,c)};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("ZenonLoggingContext",["react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({callID:null,callTrigger:"",codebaseVersion:"",deviceID:"",isCaller:null,isCheckpointDomainLogged:function(a){throw c("unrecoverableViolation")("isCheckpointDomainsLogged is not implemented!","rtc_www")},isErrorDomainLogged:function(a){throw c("unrecoverableViolation")("isErrorDomainLogged is not implemented!","rtc_www")},page:"",peerID:null,roomID:"",setCallTrigger:function(a){throw c("unrecoverableViolation")("setCallTrigger is not implemented!","rtc_www")},setCheckpointDomainLogged:function(a){throw c("unrecoverableViolation")("setCheckpointDomainsLogged is not implemented!","rtc_www")},setErrorDomainLogged:function(a){throw c("unrecoverableViolation")("setErrorDomainLogged is not implemented!","rtc_www")},setIsCaller:function(a){throw c("unrecoverableViolation")("setIsCaller is not implemented!","rtc_www")},startTimer:function(a){throw c("unrecoverableViolation")("startTimer is not implemented!","rtc_www")},stopTimer:function(a){throw c("unrecoverableViolation")("stopTimer is not implemented!","rtc_www")}});e=b;g["default"]=e}),98);
__d("ZenonLoggingSurfaceContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext("call_container");g["default"]=b}),98);
__d("ZenonLoggingHooks",["FBLogger","RtcWebUserActionsDebugFalcoEvent","RtcWebUserActionsFalcoEvent","ZenonCallsContext","ZenonCallsHooks","ZenonCallsModelTypes","ZenonDebugLogger","ZenonLoggingContext","ZenonLoggingSurfaceContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=h.useCallback,j=h.useContext,k=h.useEffect,l=h.useRef;function a(){var a=j(c("ZenonLoggingContext"));return i(function(b){a.setIsCaller(b)},[a])}function b(){var a=j(c("ZenonLoggingContext"));return i(function(b){a.setCallTrigger(b)},[a])}function e(a){var b=t();k(function(){b({component:a})},[a,b])}function f(a){var b=t();k(function(){a!=null&&b({component:a})},[a,b])}function m(a,b){var c=u();return i(function(d){c({component:b});return a(d)},[a,b,c])}function n(){var a=v();return i(function(b){return a({checkpoint:b})},[a])}function o(a){var b=j(c("ZenonLoggingContext")),d=b.isErrorDomainLogged,e=b.setErrorDomainLogged,f=s();return i(function(b){d(a)||(e(a),f({errorDomain:a,errorType:b.toString()}),c("FBLogger")("rtc_www").catching(b).warn(a))},[a,d,f,e])}function p(){var a=s();return i(function(b){var d=b.checkpoint,e=b.error;b=b.errorDomain;a({checkpoint:d,errorDomain:b,errorType:e.toString()});e instanceof Error?c("FBLogger")("rtc_www").catching(e).warn(d):c("FBLogger")("rtc_www").warn(d+"_"+e.toString())},[a])}function q(a){var b=j(c("ZenonLoggingContext")),d=b.isCheckpointDomainLogged,e=b.setCheckpointDomainLogged,f=v();return i(function(){d(a)||(e(a),f({checkpoint:a}))},[a,d,f,e])}function r(a,b){var d=j(c("ZenonLoggingContext")),e=d.startTimer,f=d.stopTimer;d=i(function(){return e(a)},[a,e]);var g=v(),h=i(function(){var c;c=(c=b)!=null?c:a;var d=f(a);g({checkpoint:c+"_timerEnd",timeElapsed:d});return d},[b,g,a,f]);return[d,h]}function s(){var a=w();return i(function(b){return a(babelHelpers["extends"]({eventName:"error"},b))},[a])}function t(){var a=w();return i(function(b){return a(babelHelpers["extends"]({eventName:"impression"},b))},[a])}function u(){var a=w();return i(function(b){return a(babelHelpers["extends"]({eventName:"tap"},b))},[a])}function v(){var a=w();return i(function(b){return a(babelHelpers["extends"]({eventName:"checkpoint"},b))},[a])}function w(){var a=x(),b=j(c("ZenonCallsContext")),d=b.isE2eeMandated;return i(function(b){if(d)return;a(b,c("RtcWebUserActionsDebugFalcoEvent"));var e=a(b,c("RtcWebUserActionsFalcoEvent"));y(b.eventName,e)},[d,a])}function x(){var a=j(c("ZenonLoggingSurfaceContext")),b=c("ZenonCallsHooks").useCallState(),d=j(c("ZenonCallsContext")),e=j(c("ZenonLoggingContext")),f=c("ZenonCallsHooks").useIsAudioCall(),g=l(a),h=l(b),k=l(d),m=l(e),n=l(f);g.current=a;h.current=b;k.current=d;m.current=e;n.current=f;return i(function(a,b){var c,d=k.current,e=d.calls,f=d.callSDK;d=d.currentClientCallId;var i=n.current?"audio":"video",j=m.current.callID==null?void 0:String(m.current.callID);c=(c=m.current.roomID)!=null?c:f.getConferenceName(d);f=m.current.isCaller;var l=m.current.page,o=m.current.deviceID,p=m.current.callTrigger,q=m.current.codebaseVersion,r=m.current.peerID;d=(e=e.get(d))==null?void 0:e.collisionContext.serverInfoData;var s={call_id:j,call_trigger:p,call_type:"mw",checkpoint:a.checkpoint,client_time:Date.now().toString(),codebase_version:q,component:a.component,conference_name:c,conference_state:z(h.current),device_id:o,error_domain:a.errorDomain,error_type:a.errorType,event:a.eventName,event_time_elapsed:(e=a.timeElapsed)==null?void 0:e.toString(),is_caller:f,media_type:i,page:A(l),peer_id:r,server_info_data:d,surface:g.current};b.log(function(){return s});return s},[])}function y(a,b){a=a==null?"null":a;c("ZenonDebugLogger").getInstance().getLogHistory().log(a,JSON.stringify(b))}function z(a){switch(a){case d("ZenonCallsModelTypes").ZenonCallState.New:return"NEW";case d("ZenonCallsModelTypes").ZenonCallState.Connecting:return"CONNECTING";case d("ZenonCallsModelTypes").ZenonCallState.Connected:return"CONNECTED";case d("ZenonCallsModelTypes").ZenonCallState.Terminating:return"TERMINATING";case d("ZenonCallsModelTypes").ZenonCallState.Terminated:return"TERMINATED";case d("ZenonCallsModelTypes").ZenonCallState.PendingApproval:return"PENDING_APPROVAL"}}function A(a){switch(a){case"messenger_dot_com":case"facebook":case"mweb":case"workplace":return a;default:return null}}g.useSetIsCaller=a;g.useSetCallTrigger=b;g.useImpressionLogging=e;g.useImpressionLoggingOptional=f;g.useClickLogging=m;g.useCheckpointLogging=n;g.useErrorLoggingOnceForDomain=o;g.useErrorLogging=p;g.useCheckpointLoggingOnceForDomain=q;g.useTimerLogging=r}),98);
__d("ZenonUserActivityContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext(!1);c=b;g["default"]=c}),98);
__d("ZenonFadeOnIdle.react",["ZenonUserActivityContext","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect,k=b.useState;function a(a,b){var d=a.bypass;d=d===void 0?!1:d;var e=a.children,f=a.hideAfterFade;f=f===void 0?!1:f;var g=a.onBlur,l=a.onFocus,m=a.onVisibilityChanged;a=k(!1);var n=a[0],o=a[1];a=i(c("ZenonUserActivityContext"));var p=d||a||n;j(function(){return m&&m(p?"visible":"hidden")},[p,m]);return h.jsx("div",{className:c("stylex").dedupe({"opacity-1":"qn324pbh","pointer-events-1":"ehi1kzmu","will-change-1":"t10044om"},p?{"height-1":"by9e7mms","opacity-1":"sgl4tba0"}:null,d?null:{"transition-duration-1":"le2kk6m1","transition-property-1":"s354ubxd"},!d&&!p&&f?{"animation-duration-1":"ikl8bc18","animation-fill-mode-1":"d48gr7xp","animation-name-1":"chujrf42"}:null,!d&&p&&f?{"animation-duration-1":"afvdvrd0","animation-fill-mode-1":"d48gr7xp","animation-name-1":"pn3oigb2"}:null),onBlur:function(){o(!1),g!=null&&g()},onFocus:function(){o(!0),l!=null&&l()},ref:b,children:e})}a.displayName=a.name+" [from "+f.id+"]";e=h.forwardRef(a);g["default"]=e}),98);
__d("LsRtcTslogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743886");c=b("FalcoLoggerInternal").create("ls_rtc_tslog",a);e.exports=c}),null);
__d("RtcTslogBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1514");c=b("FalcoLoggerInternal").create("rtc_tslog_batch",a);e.exports=c}),null);
__d("ZenonChildCallSummaryLogProcessor",["ChannelClientID","DateConsts","LsRtcTslogFalcoEvent","PersistedQueue","ResumableUploadService","RtcTslogBatchFalcoEvent","URI","ZenonCallSummary","ZenonCallSummaryStore","ZenonCallSummaryUploader","ZenonDismissReason","ZenonInfraActionsLogger","ZenonPeerID","ZenonSignalingProtocolUtils","gkx","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=10*d("DateConsts").MS_PER_SEC,i="tslog_upload_backend",j=500*1024*.6;a=function(){function a(a,b){var e;this.$4=null;this.$5=!1;this.$9=!1;this.$6=a.callID;this.$7=a.conferenceName;this.$2=(e=a.disableTsData)!=null?e:!1;this.$8=a.serverInfoData;this.$3=a.protocol;c("ZenonSignalingProtocolUtils").isMwSupportedProtocol(this.$3)&&(a.peerID=d("ZenonPeerID").ZenonMWPeerID);e=d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.retrieveCallSummary(a.peerID,a.callID);e?(this.$1=e,this.$1.unsetEndCallFields(),this.$1.setDeviceID(d("ChannelClientID").getID())):this.$1=new(c("ZenonCallSummary"))(a);a.conferenceName!=null&&this.$1.setConferenceName(a.conferenceName);a.serverInfoData!=null?(this.$1.setServerInfoData(a.serverInfoData),this.$1.setJoinWithSID(!0)):this.$1.setJoinWithSID(!1);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);b&&b({localCallID:this.$1.localCallID})}var e=a.prototype;e.$10=function(a){c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:a})};e.$11=function(a){var b,d=a.format,e=a.timeSeries;if(e==null||e.length===0){this.$10("Not sending empty TSLog data");return}this.$10("Sending TSLog data of length "+e.length);b=(b=a.sequenceNumber)==null?void 0:b.toString();var f=babelHelpers["extends"]({},this.$1.getLoggingArgs(),{format:d,is_terminal:a.isTerminal,sequence_number:b,time_series:e});if(c("gkx")("4663")&&e.length>j){this.$10("Sending TSLog data through Upload Service");var g=new(c("URI"))(window.location.href).getDomain().split(".").slice(-2).join(".");g=c("ResumableUploadService").create({consumer:i,serviceDomain:g});var h=new File([JSON.stringify(f)],"tslog");g.resume(h)}else{c("PersistedQueue").eventEmitter.emit("active",null);if(b!=null){var k={call_id:f.call_id,conf_name:f.conf_name,is_terminal:a.isTerminal,peer_id:f.peer_id,sequence_number:(g=b)!=null?g:"-1",serv_info:f.serv_info,time_series:e};c("RtcTslogBatchFalcoEvent").logImmediately(function(){return k});d!=="EXPERIMENTAL"&&c("LsRtcTslogFalcoEvent").logImmediately(function(){return f})}else c("LsRtcTslogFalcoEvent").logImmediately(function(){return f})}return};e.processEvent=function(a){var e=this;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=a.name;b.next=b.t0==="callRated"?3:b.t0==="callFeedbackSubmitted"?6:b.t0==="callSurveyChoiceSubmitted"?9:b.t0==="logTSData"?12:b.t0==="mqttConnectionState"?18:20;break;case 3:this.$1.setRating(a.rating);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("return");case 6:this.$1.setFeedback(a.feedback);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("return");case 9:this.$1.setSurveyChoice(a.surveyChoice);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("return");case 12:if(!this.$2){b.next=14;break}return b.abrupt("return");case 14:this.$10("Preparing TSLog data for sending");this.$11(a.serializedTSLog);this.$10("Sent TSLog data");return b.abrupt("return");case 18:this.$9=a.pending;return b.abrupt("return");case 20:if(!this.$5){b.next=22;break}return b.abrupt("return");case 22:b.t1=a.name;b.next=b.t1==="atLeastOneParticipantAlerted"?25:b.t1==="atLeastOneParticipantAnswered"?28:b.t1==="callJoinRequest"?31:b.t1==="callConnected"?34:b.t1==="callEscalated"?37:b.t1==="peerConnectionStateChanged"?40:b.t1==="callEnded"?43:b.t1==="iceConnectionStateChangedConnected"?51:b.t1==="iceConnectionStateChangedDisconnected"?54:b.t1==="inviteSent"?57:b.t1==="inviteResponseReceived"?60:b.t1==="inviteResponseProcessed"?63:b.t1==="mediaConnected"?66:b.t1==="negotiationComplete"?69:b.t1==="renegotiationSmuReqWithAnswerReceived"?72:b.t1==="renegotiationSmuReqWithOfferReceived"?75:b.t1==="setMediaStats"?78:b.t1==="setLinkSurface"?81:b.t1==="setMaxConnectedParticipants"?84:b.t1==="setHasAnswerInJoinResponse"?87:b.t1==="setRemoteSignalingID"?90:b.t1==="smuWithAnswerProcessed"?94:b.t1==="smuWithAnswerReceived"?97:b.t1==="updateIceInfo"?100:b.t1==="updateE2EEStats"?103:b.t1==="startHeartbeat"?106:b.t1==="peerConnectionCreated"?108:110;break;case 25:this.$1.onAtLeastOneParticipantAlerted();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 28:this.$1.onAtLeastOneParticipantAnswered();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 31:this.$1.onCallJoinRequest(a.hasOfferInRingRequest);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 34:this.$1.onCallConnected();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 37:this.$1.onCallEscalated();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 40:this.$1.setPCIsConnected(a.connected);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 43:this.$4!==null&&window.clearInterval(this.$4);this.$1.onCallEnded(a.endCallReason,a.isRemoteEnded,!1,a.endCallSubreason);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);c("gkx")("1369511")&&d("ZenonCallSummaryUploader").logCallSummary(this.$1);this.$5=!0;c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"[ZP] ZenonLoggingEvent_callEnded: "+JSON.stringify({dismissReason:a.endCallReason,endCallReason:d("ZenonDismissReason").dismissToEndCallReason(a.endCallReason),endCallSubreason:a.endCallSubreason,mqttPending:this.$9})});this.$9&&c("ZenonInfraActionsLogger").logCounter("call_ended_before_mqtt_connected");return b.abrupt("break",110);case 51:this.$1.onIceConnectionStateChangeToConnected();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 54:this.$1.onIceConnectionStateChangeToDisconnected();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 57:this.$1.onInviteSent();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 60:this.$1.onInviteResponseReceived();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 63:this.$1.onInviteResponseProcessed();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 66:this.$1.onMediaConnected();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 69:this.$1.onNegotiationComplete();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 72:this.$1.onRenegotiationSmuReqWithAnswerReceived();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 75:this.$1.onRenegotiationSmuReqWithOfferReceived();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 78:this.$1.setMediaStats(a.mediaStats);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 81:this.$1.setLinkSurface(a.linkSurface);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 84:this.$1.setMaxConnectedParticipants(a.connectedParticipantsCount);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 87:this.$1.setHasAnswerInJoinResponse(a.hasAnswerInJoinResponse);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 90:this.$1.setServerInfoData(a.remoteSignalingID);a.conferenceName!==null&&a.conferenceName!==""&&this.$1.setConferenceName(a.conferenceName);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 94:this.$1.onSmuWithAnswerProcessed();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 97:this.$1.onSmuWithAnswerReceived();d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 100:this.$1.updateIceInfo(a.sdpString,a.direction);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 103:this.$1.updateE2EEStats(a.e2eeStats);d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(this.$1);return b.abrupt("break",110);case 106:this.$4===null&&(this.$4=window.setInterval(function(){d("ZenonCallSummaryStore").ZenonCallSummaryStoreInstance.storeCallSummary(e.$1)},h));return b.abrupt("break",110);case 108:this.$1.setSdpFormat(a.sdpFormat);return b.abrupt("break",110);case 110:case"end":return b.stop()}},null,this)};return a}();g["default"]=a}),98);
__d("ZenonChildQPLLogProcessor",["QPLUserFlow","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var d=a.prototype;d.processEvent=function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:b.t0=a.name;b.next=b.t0==="callConnected"?3:b.t0==="callEnded"?5:b.t0==="inviteSent"?7:b.t0==="inviteResponseReceived"?9:b.t0==="inviteResponseProcessed"?11:b.t0==="mediaConnected"?13:b.t0==="setRemoteSdpAnswer"?15:b.t0==="setRemoteSdpOffer"?17:b.t0==="setRemoteSignalingID"?19:b.t0==="callJoinRequest"?21:23;break;case 3:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"call_connected");return b.abrupt("break",23);case 5:c("QPLUserFlow").endSuccess(c("qpl")._(64232269,"6493"));return b.abrupt("break",23);case 7:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"invite_sent");return b.abrupt("break",23);case 9:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"invite_response_received");return b.abrupt("break",23);case 11:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"invite_response_processed");return b.abrupt("break",23);case 13:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"media_connected");return b.abrupt("break",23);case 15:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"set_remote_sdp_answer");return b.abrupt("break",23);case 17:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"set_remote_sdp_offer");return b.abrupt("break",23);case 19:c("QPLUserFlow").addPoint(c("qpl")._(64232269,"6493"),"set_remote_signaling_id");return b.abrupt("break",23);case 21:c("QPLUserFlow").start(c("qpl")._(64232269,"6493"),{annotations:{bool:{isCaller:a.isCaller}}});return b.abrupt("break",23);case 23:case"end":return b.stop()}},null,this)};return a}();g["default"]=a}),98);
__d("ZenonTSLogDataUtil",["ZenonInfraActionsLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=["recv","inbound"],d=["send","outbound"];if(b.some(function(b){return a.toLowerCase().includes(b)}))return"inbound";if(d.some(function(b){return a.toLowerCase().includes(b)}))return"outbound";c("ZenonInfraActionsLogger").logError({checkpoint:"TsLogHolder Stream Name: "+a,error:"CANNOT_DETERMINE_STREAM_DIRECTION",errorDomain:"ZenonTSLogDataHelper"});return"inbound"}g.getMediaTrackDirection=a}),98);
__d("ZenonTSLogDataJSONHolder",["FBLogger","ZenonInfraActionsLogger","ZenonMediaStatsConfig","ZenonMediaStatsParser","ZenonTSLogDataUtil","ZenonVideoQpConversion","pako"],(function(a,b,c,d,e,f,g){"use strict";var h={"new":1,checking:2,connected:3,completed:4,failed:5,disconnected:6,closed:7},i=1073741824;a=function(){function a(a){var b;this.$1={iceConnectionState:0,sendParametersState:null};this.$2=(b=a==null?void 0:a.end_time_ms)!=null?b:null;this.$3=(b=a==null?void 0:a.shared_idx)!=null?b:0;this.$4=(b=a==null?void 0:a.source)!=null?b:"rtc_www";this.$5=(b=a==null?void 0:a.start_time_ms)!=null?b:null;this.$6=(b=a==null?void 0:a.streams)!=null?b:babelHelpers["extends"]({},null)}var b=a.prototype;b.getInternalState=function(){return{end_time_ms:this.$2,shared_idx:this.$3,source:this.$4,start_time_ms:this.$5,streams:this.$6}};b.$7=function(a,b,c){if(c.includes("qp")&&a.counters.qpSum!=null&&(a.counters.framesDecoded!=null||a.counters.framesEncoded!=null)){a.counters.qp==null&&(a.counters.qp=Array(this.$3-a.bucket_start).fill(0));c=0;var e=0,f=this.$3-a.bucket_start;f>0?(a.counters.framesEncoded!=null?c=a.counters.framesEncoded[f]-a.counters.framesEncoded[f-1]:a.counters.framesDecoded!=null&&(c=a.counters.framesDecoded[f]-a.counters.framesDecoded[f-1]),e=a.counters.qpSum[f]-a.counters.qpSum[f-1]):(a.counters.framesEncoded!=null?c=a.counters.framesEncoded[f]:a.counters.framesDecoded!=null&&(c=a.counters.framesDecoded[f]),e=a.counters.qpSum[f]);a.counters.qp[f]=(a=d("ZenonVideoQpConversion").convertQp(c,e,b))!=null?a:0}};b.$8=function(a,b,c,e){var f=this,g=function(c,g){for(var h=0;h<c.length;h++){var i=c[h];if(b.includes(i))for(var j=a.values(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}m=m;if(m.type===g&&m[i]!==void 0){var n;e.counters[i]==null&&(e.counters[i]=Array(f.$3-e.bucket_start).fill(0));n=(n=d("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[i])!=null?n:1;e.counters[i][f.$3-e.bucket_start]=Math.round(Number(m[i])*n)}}}};g(d("ZenonMediaStatsConfig").getTrackStats(),"track");g(d("ZenonMediaStatsConfig").getMediaSourceStats(),"media-source");if(c==="video"&&b.includes("qp")){g=!1;for(var c=a.values(),h=Array.isArray(c),i=0,c=h?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=c.length)break;j=c[i++]}else{i=c.next();if(i.done)break;j=i.value}j=j;j.encoderImplementation!==void 0&&(g=String(j.encoderImplementation).includes("264"))}this.$7(e,g,b)}};b.$9=function(a){return a.map(function(b,c){return c===0?0:b-a[c-1]})};b.$10=function(a){if(a.type==="candidate-pair")return a.id;var b="unknown",c=["recv","inbound"],d=["send","outbound"];c.some(function(b){return a.id.toLowerCase().includes(b)})&&(b="inbound");d.some(function(b){return a.id.toLowerCase().includes(b)})&&(b="outbound");c=a.mediaType===void 0?"unknown":a.mediaType.toString();d=a.ssrc===void 0?"unknown":a.ssrc.toString();return b+"_"+c+"_"+d};b.$11=function(a){return a};b.$12=function(a,b){return a+"_rtp_"+b};b.$13=function(a,b,c){if(c&&Object.prototype.hasOwnProperty.call(c.counters,"estimatedPlayoutTimestamp")&&Object.prototype.hasOwnProperty.call(a.counters,"estimatedPlayoutTimestamp")){var d=c.counters.estimatedPlayoutTimestamp.length,e=a.counters.estimatedPlayoutTimestamp.length,f=Math.min(e,d),g=new Array(f).fill(0),h=new Array(f).fill(0);for(var j=0;j<f;j++){var k=c.counters.estimatedPlayoutTimestamp[j],l=a.counters.estimatedPlayoutTimestamp[j];k>0&&l>0?k>=l?(h[j]=2,g[j]=Math.min(k-l,i)):(h[j]=1,g[j]=Math.min(l-k,i)):(h[j]=0,g[j]=0)}b.push({data:g,name:"avSync"});b.push({data:h,name:"avSyncSign"});l=22089888e5+1598738e6;k=Math.max(e,d);j=new Array(d).fill(0);f=new Array(e).fill(0);g=null;for(var h=0;h<k;h++){d=c.counters.estimatedPlayoutTimestamp[h];e=a.counters.estimatedPlayoutTimestamp[h];g==null&&(d>l&&e>l?g=Math.min(d,e):d>l?g=d:e>l&&(g=e));g!=null&&(d>l&&(j[h]=Math.max(Math.min(d-g,i),-i)),e>l&&(f[h]=Math.max(Math.min(e-g,i),-i)))}b.push({data:j,name:"audioTs"});b.push({data:f,name:"videoTs"})}};b.$14=function(a,b,c){var e=[];for(var f in a.counters)b.includes(f)||e.push({data:a.counters[f],name:f}),d("ZenonMediaStatsParser").isCumulativeStat(f)&&!b.includes(f+"_delta")&&e.push({data:this.$9(a.counters[f]),name:f+"_delta"});f=a.counters;b=f.fecPacketsDiscarded;f=f.fecPacketsReceived;if(b!=null&&f!=null){var g=Math.min(b.length,f.length),h=[];for(var i=0;i<g;i++)h.push(f[i]-b[i]);e.push({data:this.$9(h),name:"fecPacketsUsed_delta"})}this.$15(a,e);this.$13(a,e,c);return e};b.$15=function(a,b){if(Object.prototype.hasOwnProperty.call(a.counters,"jitterBufferDelay")&&Object.prototype.hasOwnProperty.call(a.counters,"jitterBufferEmittedCount")){var c=Math.min(a.counters.jitterBufferDelay.length,a.counters.jitterBufferEmittedCount.length),d=new Array(c).fill(0);for(var e=1;e<c;e++){var f=a.counters.jitterBufferDelay[e]-a.counters.jitterBufferDelay[e-1],g=a.counters.jitterBufferEmittedCount[e]-a.counters.jitterBufferEmittedCount[e-1];g===0?d[e]=0:d[e]=Math.round(f*1e3/g)}b.push({data:d,name:"neteqMeanWaitTime"})}};b.addSenderVideoStallData=function(a){var b=this;[[d("ZenonMediaStatsConfig").OUTBOUND_SCREEN_STATS_TRACKID,"screen"],[d("ZenonMediaStatsConfig").OUTBOUND_VIDEO_STATS_TRACKID,"video"]].forEach(function(c){var d=c[0];c=c[1];var e=a.get(d);if(e!=null){d=b.generateTslogStreamName(c,d);var f=b.$6[d];f==null&&(f={bucket_end:b.$3,bucket_start:b.$3,contentType:c,counters:{},owner:""},b.$6[d]=f);b.updateVideoStallStats(e,f,b.$3,c)}})};b.addRenderedFrameData=function(a,b){var c=this;if(b.size===0)return;b.forEach(function(d){if(d.mediaType!=="video"||d.kind!=="video")return;var e=c.$10(d);e=c.$6[e];if(e==null)return;d=d.trackId!=null?b.get(d.trackId.toString()):null;if(d==null||d.trackIdentifier==null||d.remoteSource===!1||d.ended)return;d=d.trackIdentifier?d.trackIdentifier.toString():"";if(!d)return;d=a.get(d);if(d){var f;e.counters.renderedWidth==null&&(e.counters.renderedWidth=Array(c.$3-e.bucket_start).fill(0));e.counters.renderedHeight==null&&(e.counters.renderedHeight=Array(c.$3-e.bucket_start).fill(0));var g=c.$3-e.bucket_start;e.counters.renderedWidth[g]=(f=d.renderedWidth)!=null?f:0;e.counters.renderedWidth[g]=Math.round(e.counters.renderedWidth[g]);e.counters.renderedHeight[g]=(f=d.renderedHeight)!=null?f:0;e.counters.renderedHeight[g]=Math.round(e.counters.renderedHeight[g])}})};b.addCallCpuData=function(a,b){var c=this;a=this.$11(a);var d=this.$6[a];d==null&&(d={bucket_end:this.$3,bucket_start:this.$3,contentType:"client-metrics",counters:{},owner:""},this.$6[a]=d);d.bucket_end=this.$3;Object.keys(b).forEach(function(a){c.addCounterValue(d,a,b[a])})};b.addCandidatePairStats=function(a){var b=this;if(a.size===0)return;a.forEach(function(a){if(a.type==="candidate-pair"){var c=b.$10(a),e=b.$6[c];e==null&&(e={bucket_end:b.$3,bucket_start:b.$3,contentType:"candidate-pair",counters:{},owner:""},b.$6[c]=e);(b.$5==null||a.timestamp<b.$5)&&(b.$5=Math.round(a.timestamp));for(var c in a)d("ZenonMediaStatsConfig").TSLOG_STATS_REQUESTED_FROM_CANDIDATE_PAIR.includes(c)&&b.addCounterValue(e,c,a[c],d("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[c]);e.bucket_end=b.$3;(b.$2==null||a.timestamp>b.$2)&&(b.$2=Math.round(a.timestamp))}})};b.addData=function(a,b,c,e,f){var g=this;if(b.size===0)return;b.forEach(function(h){if(h.type==="track"||h.type==="media-source"||h.type==="candidate-pair"||h.type==="VideoBwe"||h.type==="googCandidatePair")return;var i=g.$10(h),j=g.$6[i];if(h.type==="ssrc"){if(j==null)return;for(var k in h)c.includes(k)&&d("ZenonMediaStatsConfig").getSsrcStats().includes(k)&&g.addCounterValue(j,k,h[k],d("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[k])}else{j==null&&(j={bucket_end:g.$3,bucket_start:g.$3,contentType:e,counters:{},owner:f?f.id:""},g.$6[i]=j);(g.$5==null||h.timestamp<g.$5)&&(g.$5=Math.round(h.timestamp));h.ssrc!=null&&(j.ssrc=h.ssrc.toString());g.addCounterValue(j,"trackEnabled",a);for(var k in h){c.includes(k)&&g.addCounterValue(j,k,h[k],d("ZenonMediaStatsConfig").TSLOG_METRIC_SCALE[k]);if(k==="estimatedPlayoutTimestamp"&&c.includes(d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY)){i=new Date(Date.UTC(0,0));i=Date.now()-i-Number(h[k]);j.counters[d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY]==null&&(j.counters[d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY]=Array(g.$3-j.bucket_start).fill(0));j.counters[d("ZenonMediaStatsConfig").DERIVED_METRICS.E2E_LATENCY][g.$3-j.bucket_start]=i}}g.$8(b,c,e,j)}j.bucket_end=g.$3;(g.$2==null||h.timestamp>g.$2)&&(g.$2=Math.round(h.timestamp))})};b.addNonMediaStates=function(){var a=this;this.$6.nonMediaState==null&&(this.$6.nonMediaState={bucket_end:this.$3,bucket_start:this.$3,contentType:"non-media-state",counters:{},owner:""});var b=this.$6.nonMediaState;Object.keys(this.$1).forEach(function(c){if(c==="sendParametersState"){var d=a.$1[c];if(d!=null)for(var e=0;e<d.encodings.length;e++){var f=d.encodings[e],g="l"+e,h=0;f.active!=null&&(h=f.active?2:1);a.addCounterValue(b,g+"a",h);h=0;f.maxBitrate!=null&&(h=f.maxBitrate);a.addCounterValue(b,g+"mb",h);h=0;f.scaleResolutionDownBy!=null&&(h=f.scaleResolutionDownBy);a.addCounterValue(b,g+"sr",h,100)}}else a.addCounterValue(b,c,a.$1[c])});b.bucket_end=this.$3};b.advance=function(){var a;this.$6["."]==null&&(this.$6["."]={bucket_end:this.$3,bucket_start:this.$3,contentType:"time",counters:{btime:[],ctime:[]}});a=(a=this.$2)!=null?a:0;var b=this.$6["."].counters,c=b.btime;b=b.ctime;b.push(Math.round(a-((a=this.$5)!=null?a:0)));c.push(Math.round(b[this.$3]-((a=b[this.$3-1])!=null?a:0)));this.$6["."].bucket_end=this.$3;this.$3++};b.onIceConnectionStateChange=function(a){this.$1.iceConnectionState=(a=h[a])!=null?a:0};b.onRtpSendParametersStateChange=function(a){this.$1.sendParametersState=a};b.serialize=function(a){if(Object.keys(this.$6).length===0)return{format:"JSON",timeSeries:null};a=(a=a)!=null?a:d("ZenonMediaStatsConfig").TSLOG_STATS_TO_SUPPRESS;var b={source:this.$4,start_time_ms:Math.round(Number(this.$5)),streams:[]},c=new Map(),e=0,f=new Map(),g=["audio","video","screen"];for(var h in this.$6){var i=this.$6[h];if(g.includes(i.contentType)){var j=d("ZenonTSLogDataUtil").getMediaTrackDirection(h);j==="inbound"&&i.owner!=null&&!c.has(i.owner)&&(c.set(i.owner,e.toString()),e++);j=i.owner+i.contentType;f.set(j,h)}}i={};for(var j in this.$6){e=this.$6[j];h=void 0;var k=j;if(g.includes(e.contentType)){var l=d("ZenonTSLogDataUtil").getMediaTrackDirection(j);i[l+e.contentType]=i[l+e.contentType]+1||0;k=this.$12(l,e.contentType)}else e.contentType==="candidate-pair"?k="cp":e.contentType==="client-metrics"&&(k="cm");l=f.get(e.owner+"audio");e.contentType==="video"&&l!=null&&(h=this.$6[l]);l={bucket_end:e.bucket_end,bucket_start:e.bucket_start,counters:this.$14(this.$6[j],a,h),name:k,props:{}};c.has(this.$6[j].owner)&&(l.props.seq=c.get(this.$6[j].owner));this.$6[j].ssrc!=null&&(l.props.ssrc=this.$6[j].ssrc);b.streams.push(l)}return this.$16(JSON.stringify(b))};b.updateVideoStallStats=function(a,b,c,e){[d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_CAPTURE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_ENCODE_IS_STALLED,d("ZenonMediaStatsConfig").DERIVED_METRICS.VIDEO_SENT_IS_STALLED].forEach(function(d){var f=e+"_"+d,g=c-b.bucket_start;b.counters[f]==null&&(b.counters[f]=Array(g).fill(0));b.counters[f][g]=(g=(f=a.deltaStat[d])==null?void 0:f.getLastAddedValue())!=null?g:0;b.bucket_end=c})};b.generateTslogStreamName=function(a,b){return"outbound_"+a+"_"+b};b.addCounterValue=function(a,b,c,d){var e=Math.max(this.$3-a.bucket_start,0);a.counters[b]==null&&(a.counters[b]=Array(e).fill(0));d=Math.round(Number(c)*((c=d)!=null?c:1));a.counters[b][e]=d};b.$16=function(a){try{var b=btoa(c("pako").deflate(a,{to:"string"}));c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"Compressed TSLog data of length "+a.length+" to "+b.length});return{format:"B64_DEFLATE",timeSeries:b}}catch(a){c("FBLogger")("rtc_www").catching(a).warn("Caught exception while compressing TSLog")}c("ZenonInfraActionsLogger").logCheckpoint({checkpoint:"Not compressing TSLog data of length "+a.length});return{format:"JSON",timeSeries:a}};return a}();g["default"]=a}),98);